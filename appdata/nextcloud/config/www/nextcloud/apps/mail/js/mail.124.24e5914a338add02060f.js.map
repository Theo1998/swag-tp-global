{"version":3,"file":"mail.124.24e5914a338add02060f.js","mappings":"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","sources":["webpack://nextcloud-mail/./css/mail.scss","webpack://nextcloud-mail/./css/mobile.scss","webpack://nextcloud-mail/./src/components/CalendarPickerOption.vue?aa24","webpack://nextcloud-mail/./src/components/Composer.vue?f99c","webpack://nextcloud-mail/./src/components/ComposerAttachment.vue?e31a","webpack://nextcloud-mail/./src/components/ComposerAttachments.vue?2eb5","webpack://nextcloud-mail/./src/components/EmptyMailboxSection.vue?42cb","webpack://nextcloud-mail/./src/components/Envelope.vue?581f","webpack://nextcloud-mail/./src/components/EnvelopeList.vue?8cbb","webpack://nextcloud-mail/./src/components/EventModal.vue?11e1","webpack://nextcloud-mail/./src/components/Imip.vue?40c1","webpack://nextcloud-mail/./src/components/Loading.vue?73aa","webpack://nextcloud-mail/./src/components/Mailbox.vue?d062","webpack://nextcloud-mail/./src/components/MailboxThread.vue?ff2a","webpack://nextcloud-mail/./src/components/MdnRequest.vue?78e0","webpack://nextcloud-mail/./src/components/MenuEnvelope.vue?a3a5","webpack://nextcloud-mail/./src/components/Message.vue?8e49","webpack://nextcloud-mail/./src/components/MessageAttachment.vue?c029","webpack://nextcloud-mail/./src/components/MessageAttachments.vue?91e2","webpack://nextcloud-mail/./src/components/MessageHTMLBody.vue?58dd","webpack://nextcloud-mail/./src/components/MessagePlainTextBody.vue?ffec","webpack://nextcloud-mail/./src/components/MessagePlainTextBody.vue?dc8f","webpack://nextcloud-mail/./src/components/NewMessageButtonHeader.vue?b59c","webpack://nextcloud-mail/./src/components/NewMessageModal.vue?6029","webpack://nextcloud-mail/./src/components/Outbox.vue?f2ab","webpack://nextcloud-mail/./src/components/OutboxMessageListItem.vue?64dc","webpack://nextcloud-mail/./src/components/RecipientBubble.vue?5d8f","webpack://nextcloud-mail/./src/components/RecipientListItem.vue?6fee","webpack://nextcloud-mail/./src/components/TagModal.vue?6405","webpack://nextcloud-mail/./src/components/Thread.vue?bc9c","webpack://nextcloud-mail/./src/components/ThreadEnvelope.vue?a867","webpack://nextcloud-mail/./src/components/imip/EventData.vue?f4b7","webpack://nextcloud-mail/./src/views/Home.vue?ec85","webpack://nextcloud-mail/./src/components/EnvelopePrimaryActions.vue?9fe6","webpack://nextcloud-mail/./src/components/MailvelopeEditor.vue?d3e5","webpack://nextcloud-mail/./src/components/MessageEncryptedBody.vue?1ea7","webpack://nextcloud-mail/./src/components/NoMessageSelected.vue?e742","webpack://nextcloud-mail/./src/components/SectionTitle.vue?dc7c","webpack://nextcloud-mail/./src/components/itinerary/EventReservation.vue?a474","webpack://nextcloud-mail/./src/components/itinerary/FlightReservation.vue?0bdd","webpack://nextcloud-mail/./src/components/itinerary/TrainReservation.vue?d7f6","webpack://nextcloud-mail/./img/important.svg","webpack://nextcloud-mail/./src/views/Home.vue","webpack://nextcloud-mail/./css/mail.scss?d25d","webpack://nextcloud-mail/./css/mobile.scss?d044","webpack://nextcloud-mail/./src/components/SectionTitle.vue?68e8","webpack://nextcloud-mail/src/components/SectionTitle.vue","webpack://nextcloud-mail/./src/components/SectionTitle.vue?1b71","webpack://nextcloud-mail/./src/components/SectionTitle.vue?ed7c","webpack://nextcloud-mail/./src/components/SectionTitle.vue","webpack://nextcloud-mail/src/components/NewMessageButtonHeader.vue","webpack://nextcloud-mail/./src/components/NewMessageButtonHeader.vue?80ee","webpack://nextcloud-mail/./src/components/NewMessageButtonHeader.vue?cde5","webpack://nextcloud-mail/./src/components/NewMessageButtonHeader.vue?0f94","webpack://nextcloud-mail/./src/components/NewMessageButtonHeader.vue","webpack://nextcloud-mail/./src/directives/infinite-scroll.js","webpack://nextcloud-mail/./src/components/EmptyMailbox.vue?2887","webpack://nextcloud-mail/src/components/EmptyMailbox.vue","webpack://nextcloud-mail/./src/components/EmptyMailbox.vue?d2e7","webpack://nextcloud-mail/./src/components/EmptyMailbox.vue","webpack://nextcloud-mail/./src/service/AvatarService.js","webpack://nextcloud-mail/src/components/Avatar.vue","webpack://nextcloud-mail/./src/components/Avatar.vue?86dd","webpack://nextcloud-mail/./src/components/Avatar.vue?9df2","webpack://nextcloud-mail/./src/components/Avatar.vue","webpack://nextcloud-mail/./src/directives/drag-and-drop/draggable-envelope/draggable-envelope.js","webpack://nextcloud-mail/./src/directives/drag-and-drop/draggable-envelope/index.js","webpack://nextcloud-mail/./src/util/shortRelativeDatetime.js","webpack://nextcloud-mail/src/components/MoveModal.vue","webpack://nextcloud-mail/./src/components/MoveModal.vue?aa42","webpack://nextcloud-mail/./src/components/MoveModal.vue?09bf","webpack://nextcloud-mail/./src/components/MoveModal.vue","webpack://nextcloud-mail/./src/components/icons/JunkIcon.vue?cb2e","webpack://nextcloud-mail/src/components/icons/JunkIcon.vue","webpack://nextcloud-mail/./src/components/icons/JunkIcon.vue?336f","webpack://nextcloud-mail/./src/components/icons/JunkIcon.vue","webpack://nextcloud-mail/./src/components/tags.js","webpack://nextcloud-mail/src/components/TagModal.vue","webpack://nextcloud-mail/./src/components/TagModal.vue?6494","webpack://nextcloud-mail/./src/components/TagModal.vue?f8af","webpack://nextcloud-mail/./src/components/TagModal.vue?0c0a","webpack://nextcloud-mail/./src/components/TagModal.vue","webpack://nextcloud-mail/./src/dav/client.js","webpack://nextcloud-mail/./src/util/calendarColor.js","webpack://nextcloud-mail/./src/service/DAVService.js","webpack://nextcloud-mail/./src/components/CalendarPickerOption.vue?36e6","webpack://nextcloud-mail/src/components/CalendarPickerOption.vue","webpack://nextcloud-mail/./src/components/CalendarPickerOption.vue?bdb1","webpack://nextcloud-mail/./src/components/CalendarPickerOption.vue?a50f","webpack://nextcloud-mail/./src/components/CalendarPickerOption.vue","webpack://nextcloud-mail/src/components/EventModal.vue","webpack://nextcloud-mail/./src/components/EventModal.vue?7c38","webpack://nextcloud-mail/./src/components/EventModal.vue?b0d3","webpack://nextcloud-mail/./src/components/EventModal.vue?184b","webpack://nextcloud-mail/./src/components/EventModal.vue","webpack://nextcloud-mail/./src/components/EnvelopePrimaryActions.vue?b375","webpack://nextcloud-mail/./src/components/EnvelopePrimaryActions.vue?f5f6","webpack://nextcloud-mail/src/components/EnvelopePrimaryActions.vue","webpack://nextcloud-mail/./src/components/EnvelopePrimaryActions.vue","webpack://nextcloud-mail/src/components/Envelope.vue","webpack://nextcloud-mail/./src/components/Envelope.vue?f4e3","webpack://nextcloud-mail/./src/components/Envelope.vue?79ec","webpack://nextcloud-mail/./src/components/Envelope.vue?a12e","webpack://nextcloud-mail/./src/components/Envelope.vue","webpack://nextcloud-mail/src/components/EnvelopeList.vue","webpack://nextcloud-mail/./src/components/EnvelopeList.vue?536f","webpack://nextcloud-mail/./src/components/EnvelopeList.vue?26b3","webpack://nextcloud-mail/./src/components/EnvelopeList.vue?4791","webpack://nextcloud-mail/./src/components/EnvelopeList.vue","webpack://nextcloud-mail/./src/components/Error.vue?2b45","webpack://nextcloud-mail/src/components/Error.vue","webpack://nextcloud-mail/./src/util/CrashReport.js","webpack://nextcloud-mail/./src/components/Error.vue?3151","webpack://nextcloud-mail/./src/components/Error.vue","webpack://nextcloud-mail/./src/components/Loading.vue?ea32","webpack://nextcloud-mail/src/components/Loading.vue","webpack://nextcloud-mail/./src/components/Loading.vue?d47e","webpack://nextcloud-mail/./src/components/Loading.vue?5a16","webpack://nextcloud-mail/./src/components/Loading.vue","webpack://nextcloud-mail/./src/components/EmptyMailboxSection.vue?cc91","webpack://nextcloud-mail/src/components/Mailbox.vue","webpack://nextcloud-mail/./src/components/EmptyMailboxSection.vue?ffe0","webpack://nextcloud-mail/src/components/EmptyMailboxSection.vue","webpack://nextcloud-mail/./src/components/EmptyMailboxSection.vue","webpack://nextcloud-mail/./src/components/Mailbox.vue?7b81","webpack://nextcloud-mail/./src/components/Mailbox.vue?4c46","webpack://nextcloud-mail/./src/components/Mailbox.vue?b772","webpack://nextcloud-mail/./src/components/Mailbox.vue","webpack://nextcloud-mail/./src/components/NoMessageSelected.vue?7354","webpack://nextcloud-mail/src/components/NoMessageSelected.vue","webpack://nextcloud-mail/./src/components/NoMessageSelected.vue?d1c9","webpack://nextcloud-mail/./src/components/NoMessageSelected.vue?6525","webpack://nextcloud-mail/./src/components/NoMessageSelected.vue","webpack://nextcloud-mail/./src/util/ErrorMessageFactory.js","webpack://nextcloud-mail/src/components/RecipientBubble.vue","webpack://nextcloud-mail/./src/service/ContactIntegrationService.js","webpack://nextcloud-mail/./src/components/RecipientBubble.vue?aff0","webpack://nextcloud-mail/./src/components/RecipientBubble.vue?df81","webpack://nextcloud-mail/./src/components/RecipientBubble.vue?7923","webpack://nextcloud-mail/./src/components/RecipientBubble.vue","webpack://nextcloud-mail/./src/crypto/pgp.js","webpack://nextcloud-mail/src/components/itinerary/CalendarImport.vue","webpack://nextcloud-mail/./src/components/itinerary/CalendarImport.vue?2c85","webpack://nextcloud-mail/./src/components/itinerary/CalendarImport.vue?82f0","webpack://nextcloud-mail/./src/components/itinerary/CalendarImport.vue","webpack://nextcloud-mail/./src/components/itinerary/EventReservation.vue?6ce7","webpack://nextcloud-mail/src/components/itinerary/EventReservation.vue","webpack://nextcloud-mail/./src/components/itinerary/EventReservation.vue?868a","webpack://nextcloud-mail/./src/components/itinerary/EventReservation.vue?125b","webpack://nextcloud-mail/./src/components/itinerary/EventReservation.vue","webpack://nextcloud-mail/./src/components/itinerary/FlightReservation.vue?2fd4","webpack://nextcloud-mail/src/components/itinerary/FlightReservation.vue","webpack://nextcloud-mail/./src/components/itinerary/FlightReservation.vue?682c","webpack://nextcloud-mail/./src/components/itinerary/FlightReservation.vue?dec4","webpack://nextcloud-mail/./src/components/itinerary/FlightReservation.vue","webpack://nextcloud-mail/./src/components/itinerary/TrainReservation.vue?6bf3","webpack://nextcloud-mail/src/components/itinerary/TrainReservation.vue","webpack://nextcloud-mail/./src/components/itinerary/TrainReservation.vue?7aef","webpack://nextcloud-mail/./src/components/itinerary/TrainReservation.vue?1dc8","webpack://nextcloud-mail/./src/components/itinerary/TrainReservation.vue","webpack://nextcloud-mail/src/components/Itinerary.vue","webpack://nextcloud-mail/./src/components/Itinerary.vue?3a6c","webpack://nextcloud-mail/./src/components/Itinerary.vue?47fe","webpack://nextcloud-mail/./src/components/Itinerary.vue","webpack://nextcloud-mail/./src/service/AttachmentService.js","webpack://nextcloud-mail/./src/components/MessageAttachment.vue?a56e","webpack://nextcloud-mail/src/components/MessageAttachment.vue","webpack://nextcloud-mail/./src/components/MessageAttachment.vue?0b9c","webpack://nextcloud-mail/./src/components/MessageAttachment.vue?5080","webpack://nextcloud-mail/./src/components/MessageAttachment.vue","webpack://nextcloud-mail/./src/components/MessageAttachments.vue?3a61","webpack://nextcloud-mail/src/components/MessageAttachments.vue","webpack://nextcloud-mail/./src/components/MessageAttachments.vue?282c","webpack://nextcloud-mail/./src/crypto/mailvelope.js","webpack://nextcloud-mail/./src/components/MessageAttachments.vue?6b08","webpack://nextcloud-mail/./src/components/MessageAttachments.vue","webpack://nextcloud-mail/src/components/MdnRequest.vue","webpack://nextcloud-mail/./src/components/MdnRequest.vue?1b32","webpack://nextcloud-mail/./src/components/MdnRequest.vue?d42d","webpack://nextcloud-mail/./src/components/MdnRequest.vue?8489","webpack://nextcloud-mail/./src/components/MdnRequest.vue","webpack://nextcloud-mail/src/components/MessageEncryptedBody.vue","webpack://nextcloud-mail/./src/components/MessageEncryptedBody.vue?b76f","webpack://nextcloud-mail/./src/components/MessageEncryptedBody.vue?1f69","webpack://nextcloud-mail/./src/components/MessageEncryptedBody.vue?6dff","webpack://nextcloud-mail/./src/components/MessageEncryptedBody.vue","webpack://nextcloud-mail/src/components/MessageHTMLBody.vue","webpack://nextcloud-mail/./src/components/MessageHTMLBody.vue?eb88","webpack://nextcloud-mail/./src/components/MessageHTMLBody.vue?ca4c","webpack://nextcloud-mail/./src/components/MessageHTMLBody.vue?cab3","webpack://nextcloud-mail/./src/components/MessageHTMLBody.vue","webpack://nextcloud-mail/src/components/MessagePlainTextBody.vue","webpack://nextcloud-mail/./src/components/MessagePlainTextBody.vue?71cb","webpack://nextcloud-mail/./src/components/MessagePlainTextBody.vue?cd06","webpack://nextcloud-mail/./src/components/MessagePlainTextBody.vue?02b3","webpack://nextcloud-mail/./src/components/MessagePlainTextBody.vue?646c","webpack://nextcloud-mail/./src/components/MessagePlainTextBody.vue","webpack://nextcloud-mail/./src/util/eventAttendee.js","webpack://nextcloud-mail/src/components/imip/EventData.vue","webpack://nextcloud-mail/./src/components/imip/EventData.vue?5f79","webpack://nextcloud-mail/./src/components/imip/EventData.vue?bbb1","webpack://nextcloud-mail/./src/components/imip/EventData.vue?932a","webpack://nextcloud-mail/./src/components/imip/EventData.vue","webpack://nextcloud-mail/./src/util/randomId.js","webpack://nextcloud-mail/src/components/Imip.vue","webpack://nextcloud-mail/./src/components/Imip.vue?e322","webpack://nextcloud-mail/./src/components/Imip.vue?e717","webpack://nextcloud-mail/./src/components/Message.vue?6105","webpack://nextcloud-mail/src/components/Message.vue","webpack://nextcloud-mail/./src/components/Imip.vue?bd3b","webpack://nextcloud-mail/./src/components/Imip.vue","webpack://nextcloud-mail/./src/components/Message.vue?315a","webpack://nextcloud-mail/./src/components/Message.vue?6cc5","webpack://nextcloud-mail/./src/components/Message.vue","webpack://nextcloud-mail/src/components/MenuEnvelope.vue","webpack://nextcloud-mail/./src/components/MenuEnvelope.vue?b527","webpack://nextcloud-mail/./src/components/MenuEnvelope.vue?a729","webpack://nextcloud-mail/./src/components/MenuEnvelope.vue?5c4f","webpack://nextcloud-mail/./src/components/MenuEnvelope.vue","webpack://nextcloud-mail/./src/components/Moment.vue?cb56","webpack://nextcloud-mail/src/components/Moment.vue","webpack://nextcloud-mail/./src/components/Moment.vue?66a3","webpack://nextcloud-mail/./src/components/Moment.vue","webpack://nextcloud-mail/src/components/ThreadEnvelope.vue","webpack://nextcloud-mail/./src/components/ThreadEnvelope.vue?cab6","webpack://nextcloud-mail/./src/components/ThreadEnvelope.vue?7378","webpack://nextcloud-mail/./src/components/ThreadEnvelope.vue?5d66","webpack://nextcloud-mail/./src/components/ThreadEnvelope.vue","webpack://nextcloud-mail/src/components/Thread.vue","webpack://nextcloud-mail/./src/components/Thread.vue?65f2","webpack://nextcloud-mail/./src/components/Thread.vue?7832","webpack://nextcloud-mail/./src/components/Thread.vue?ab0c","webpack://nextcloud-mail/./src/components/Thread.vue","webpack://nextcloud-mail/src/components/MailboxThread.vue","webpack://nextcloud-mail/./src/components/MailboxThread.vue?f2a3","webpack://nextcloud-mail/./src/components/MailboxThread.vue?bd50","webpack://nextcloud-mail/./src/components/MailboxThread.vue?590a","webpack://nextcloud-mail/./src/components/MailboxThread.vue","webpack://nextcloud-mail/./src/service/FileService.js","webpack://nextcloud-mail/./src/service/FileSharingService.js","webpack://nextcloud-mail/./src/components/ComposerAttachment.vue?b973","webpack://nextcloud-mail/src/components/ComposerAttachment.vue","webpack://nextcloud-mail/./src/components/ComposerAttachment.vue?b412","webpack://nextcloud-mail/./src/components/ComposerAttachment.vue?6ee2","webpack://nextcloud-mail/./src/components/ComposerAttachment.vue","webpack://nextcloud-mail/src/components/ComposerAttachments.vue","webpack://nextcloud-mail/./src/components/ComposerAttachments.vue?7cd2","webpack://nextcloud-mail/./src/components/ComposerAttachments.vue?aaff","webpack://nextcloud-mail/./src/components/ComposerAttachments.vue?a84b","webpack://nextcloud-mail/./src/components/ComposerAttachments.vue","webpack://nextcloud-mail/./src/components/RecipientListItem.vue?a330","webpack://nextcloud-mail/src/components/RecipientListItem.vue","webpack://nextcloud-mail/./src/components/RecipientListItem.vue?85ca","webpack://nextcloud-mail/./src/components/RecipientListItem.vue?c56a","webpack://nextcloud-mail/./src/components/RecipientListItem.vue","webpack://nextcloud-mail/src/components/MailvelopeEditor.vue","webpack://nextcloud-mail/./src/components/MailvelopeEditor.vue?088e","webpack://nextcloud-mail/./src/components/MailvelopeEditor.vue?4068","webpack://nextcloud-mail/./src/components/MailvelopeEditor.vue?c2f5","webpack://nextcloud-mail/./src/components/MailvelopeEditor.vue","webpack://nextcloud-mail/src/components/Composer.vue","webpack://nextcloud-mail/./src/service/AutocompleteService.js","webpack://nextcloud-mail/./src/components/Composer.vue?bbbd","webpack://nextcloud-mail/./src/components/Composer.vue?c093","webpack://nextcloud-mail/./src/components/Composer.vue?e45c","webpack://nextcloud-mail/./src/components/Composer.vue","webpack://nextcloud-mail/src/components/NewMessageModal.vue","webpack://nextcloud-mail/./src/components/NewMessageModal.vue?3707","webpack://nextcloud-mail/./src/components/NewMessageModal.vue?553b","webpack://nextcloud-mail/./src/components/NewMessageModal.vue?9e47","webpack://nextcloud-mail/./src/components/NewMessageModal.vue","webpack://nextcloud-mail/./src/components/OutboxMessageContent.vue?2082","webpack://nextcloud-mail/src/components/OutboxMessageContent.vue","webpack://nextcloud-mail/./src/components/OutboxMessageContent.vue?21dd","webpack://nextcloud-mail/./src/components/OutboxMessageContent.vue","webpack://nextcloud-mail/./src/mixins/OutboxAvatarMixin.js","webpack://nextcloud-mail/src/components/OutboxMessageListItem.vue","webpack://nextcloud-mail/./src/components/OutboxMessageListItem.vue?4d9b","webpack://nextcloud-mail/./src/components/OutboxMessageListItem.vue?06c1","webpack://nextcloud-mail/./src/components/OutboxMessageListItem.vue?9a7b","webpack://nextcloud-mail/./src/components/OutboxMessageListItem.vue","webpack://nextcloud-mail/src/components/Outbox.vue","webpack://nextcloud-mail/./src/components/Outbox.vue?4dff","webpack://nextcloud-mail/./src/components/Outbox.vue?dfed","webpack://nextcloud-mail/./src/components/Outbox.vue?0e66","webpack://nextcloud-mail/./src/components/Outbox.vue","webpack://nextcloud-mail/src/views/Home.vue","webpack://nextcloud-mail/./src/views/Home.vue?6ad4","webpack://nextcloud-mail/./src/views/Home.vue?22f0","webpack://nextcloud-mail/./src/views/Home.vue?4f26"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".loading{position:absolute;left:50%;top:50%}.emptycontent{margin-top:0px;margin-bottom:10px}.emptycontent>h2{padding-top:20px}.container{position:relative;width:100%;height:100%}.folders .ui-droppable-active{background-color:#f0f0f0}.folder.no-select{cursor:not-allowed}#account-form{z-index:1001;width:250px;top:15%;padding-bottom:50px;margin:0 auto;padding-top:30px}#mail-settings #account-form{margin:0;padding-top:0}@media only screen and (max-height: 400px){#account-form #emptycontent{margin-top:0px}}@media only screen and (min-height: 401px)and (max-height: 600px){#account-form #emptycontent{margin-top:2vh}}@media only screen and (min-height: 601px){#account-form #emptycontent{margin-top:10vh}}#account-form h2{text-align:center;position:relative;width:300%;left:-100%;margin-bottom:20px}#account-form input{width:100%;box-sizing:border-box}#account-form .toggle-manual-mode{background-position:right;padding-right:16px;margin-left:6px;-ms-filter:\\\"progid:DXImageTransform.Microsoft.Alpha(Opacity=30)\\\";opacity:.3}#setup-imap-ssl-mode,#setup-smtp-ssl-mode{position:absolute;top:0;right:0;margin:0;background-color:rgba(0,0,0,0);border:none;z-index:100}#connect-loading{position:absolute;top:206px;left:0;right:0;margin-left:auto;margin-right:auto;height:30px}.app-navigation .empty{display:none}.app-navigation .navigation-account:not(:first-child){margin-top:22px}.app-navigation .special-inbox .collapse,.app-navigation .special-drafts .collapse,.app-navigation .special-sent .collapse,.app-navigation .special-trash .collapse{display:none !important}.app-navigation .special-inbox:hover .collapse,.app-navigation .special-inbox:focus .collapse,.app-navigation .special-drafts:hover .collapse,.app-navigation .special-drafts:focus .collapse,.app-navigation .special-sent:hover .collapse,.app-navigation .special-sent:focus .collapse,.app-navigation .special-trash:hover .collapse,.app-navigation .special-trash:focus .collapse{display:inline-block !important}#accounts-list li.collapse-folders a{color:var(--color-text-maxcontrast)}#emptycontent,#mail-messages #emptycontent.emptycontent-search{position:static}#mail-messages #emptycontent.emptycontent-search h2{line-height:150%}#mail-messages #emptycontent{position:absolute}.mail-account-email{display:inline-block;opacity:.5;padding:20px 0 10px 25px;width:calc(100% - 50px);margin:initial;font-size:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mail-account-email:first-child{display:none}.account-toggle-collapse{opacity:.5}.mailaccount-list li{padding:10px 0}.mailaccount-list .mail-account-name{display:inline-block;width:90%;overflow:hidden;text-overflow:ellipsis}.mailaccount-list .actions{display:inline-flex;position:absolute;right:0;min-height:16px;min-width:16px;-ms-filter:\\\"progid:DXImageTransform.Microsoft.Alpha(Opacity=25)\\\";opacity:.25}.mailaccount-list .actions:hover,.mailaccount-list .actions:focus{-ms-filter:\\\"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)\\\";opacity:.5}#mail-messages{position:relative;width:30%;height:100%;overflow-x:hidden;overflow-y:auto;border-right:1px solid var(--color-border)}#mail-message-list-loading{position:sticky;height:40px;z-index:1;background:-moz-radial-gradient(top, ellipse cover, var(--color-main-background), rgba(255, 255, 255, 0) 70%);background:-webkit-radial-gradient(top, ellipse cover, var(--color-main-background), rgba(255, 255, 255, 0) 70%);background:radial-gradient(ellipse at top, var(--color-main-background), rgba(255, 255, 255, 0) 70%)}.app-navigation .msg.success{color:#fff;background-color:var(--color-success);padding:3px}.app-navigation .msg.error{color:#fff;background-color:var(--color-error);padding:3px}.ui-autocomplete .ui-menu-item a.mail-recipient-autocomplete{margin:0px;font-weight:normal !important;display:flex;align-content:center;align-items:center;border:none}.ui-autocomplete .ui-menu-item a.mail-recipient-autocomplete span{margin-left:10px}.ui-autocomplete{padding-left:16px !important;border-radius:0 !important;border-left:none;border-right:none;z-index:1000}.icon-starred[data-starred=false]:hover{background-image:var(--icon-star-dark-fc0) !important}.icon-starred[data-starred=false]:not(:hover){background-image:var(--icon-star-000) !important}.unread{font-weight:bold}.unread ul{font-weight:normal}.star{padding:20px;background-size:16px;display:inline-block;position:absolute;left:16px;top:28px;z-index:10}.star.icon-star{display:none;-ms-filter:\\\"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)\\\";opacity:.3}.star.icon-star:hover,.star.icon-star:focus{-ms-filter:\\\"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)\\\";opacity:1}.icon-add{display:inline-block;vertical-align:text-top}.transparency{-ms-filter:\\\"progid:DXImageTransform.Microsoft.Alpha(Opacity=60)\\\";opacity:.6}.compose{width:60%;margin:0 auto}.mailaccount-list .mail-account-name{display:inline-block;width:90%;overflow:hidden;text-overflow:ellipsis}.mailaccount-list .actions{opacity:.5}.app-navigation>ul>.navigation-account>li,.app-navigation>ul>.navigation-account>.folders>li,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li{display:inline-flex;flex-wrap:wrap;order:1;flex-shrink:0}.app-navigation>ul>.navigation-account>li.pinned,.app-navigation>ul>.navigation-account>.folders>li.pinned,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li.pinned{order:2}.app-navigation>ul>.navigation-account>li.pinned.first-pinned,.app-navigation>ul>.navigation-account>.folders>li.pinned.first-pinned,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li.pinned.first-pinned{margin-top:auto !important}.app-navigation>ul>.navigation-account>li>a,.app-navigation>ul>.navigation-account>li>.app-navigation-entry-deleted,.app-navigation>ul>.navigation-account>.folders>li>a,.app-navigation>ul>.navigation-account>.folders>li>.app-navigation-entry-deleted,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>a,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>.app-navigation-entry-deleted{padding-left:44px !important}.app-navigation>ul>.navigation-account>li>.app-navigation-entry-edit,.app-navigation>ul>.navigation-account>.folders>li>.app-navigation-entry-edit,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>.app-navigation-entry-edit{padding-left:38px !important}.app-navigation>ul>.navigation-account>li:focus,.app-navigation>ul>.navigation-account>li:focus>a,.app-navigation>ul>.navigation-account>li:hover,.app-navigation>ul>.navigation-account>li:hover>a,.app-navigation>ul>.navigation-account>li.active,.app-navigation>ul>.navigation-account>li.active>a,.app-navigation>ul>.navigation-account>li a.selected,.app-navigation>ul>.navigation-account>li a.selected>a,.app-navigation>ul>.navigation-account>.folders>li:focus,.app-navigation>ul>.navigation-account>.folders>li:focus>a,.app-navigation>ul>.navigation-account>.folders>li:hover,.app-navigation>ul>.navigation-account>.folders>li:hover>a,.app-navigation>ul>.navigation-account>.folders>li.active,.app-navigation>ul>.navigation-account>.folders>li.active>a,.app-navigation>ul>.navigation-account>.folders>li a.selected,.app-navigation>ul>.navigation-account>.folders>li a.selected>a,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li:focus,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li:focus>a,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li:hover,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li:hover>a,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li.active,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li.active>a,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li a.selected,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li a.selected>a{opacity:1;box-shadow:inset 2px 0 var(--color-primary)}.app-navigation>ul>.navigation-account>li.icon-loading-small:after,.app-navigation>ul>.navigation-account>.folders>li.icon-loading-small:after,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li.icon-loading-small:after{left:22px;top:22px}.app-navigation>ul>.navigation-account>li.deleted>ul,.app-navigation>ul>.navigation-account>li.deleted>.folders,.app-navigation>ul>.navigation-account>li.collapsible:not(.open)>ul,.app-navigation>ul>.navigation-account>li.collapsible:not(.open)>.folders,.app-navigation>ul>.navigation-account>.folders>li.deleted>ul,.app-navigation>ul>.navigation-account>.folders>li.deleted>.folders,.app-navigation>ul>.navigation-account>.folders>li.collapsible:not(.open)>ul,.app-navigation>ul>.navigation-account>.folders>li.collapsible:not(.open)>.folders,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li.deleted>ul,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li.deleted>.folders,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li.collapsible:not(.open)>ul,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li.collapsible:not(.open)>.folders{opacity:0;max-height:0;transition:max-height 1000ms cubic-bezier(0, 1, 0, 1),opacity 250ms ease-in-out}.app-navigation>ul>.navigation-account>li>ul,.app-navigation>ul>.navigation-account>.folders>li>ul,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>ul{flex:1 0 100%;padding-left:62px;width:inherit;transition:max-height 2000ms ease-in-out,opacity 250ms ease-in-out;max-height:9999px;opacity:1}.app-navigation>ul>.navigation-account>li>ul>li,.app-navigation>ul>.navigation-account>.folders>li>ul>li,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>ul>li{display:inline-flex;flex-wrap:wrap}.app-navigation>ul>.navigation-account>li>ul>li:focus,.app-navigation>ul>.navigation-account>li>ul>li:focus>a,.app-navigation>ul>.navigation-account>li>ul>li:hover,.app-navigation>ul>.navigation-account>li>ul>li:hover>a,.app-navigation>ul>.navigation-account>li>ul>li.active,.app-navigation>ul>.navigation-account>li>ul>li.active>a,.app-navigation>ul>.navigation-account>li>ul>li a.selected,.app-navigation>ul>.navigation-account>li>ul>li a.selected>a,.app-navigation>ul>.navigation-account>.folders>li>ul>li:focus,.app-navigation>ul>.navigation-account>.folders>li>ul>li:focus>a,.app-navigation>ul>.navigation-account>.folders>li>ul>li:hover,.app-navigation>ul>.navigation-account>.folders>li>ul>li:hover>a,.app-navigation>ul>.navigation-account>.folders>li>ul>li.active,.app-navigation>ul>.navigation-account>.folders>li>ul>li.active>a,.app-navigation>ul>.navigation-account>.folders>li>ul>li a.selected,.app-navigation>ul>.navigation-account>.folders>li>ul>li a.selected>a,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>ul>li:focus,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>ul>li:focus>a,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>ul>li:hover,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>ul>li:hover>a,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>ul>li.active,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>ul>li.active>a,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>ul>li a.selected,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>ul>li a.selected>a{opacity:1}.app-navigation>ul>.navigation-account>li>ul>li.icon-loading-small:after,.app-navigation>ul>.navigation-account>.folders>li>ul>li.icon-loading-small:after,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>ul>li.icon-loading-small:after{left:-10px}.app-navigation>ul>.navigation-account>li>ul>li>a[class*=icon-],.app-navigation>ul>.navigation-account>li>ul>li>a[style*=background-image],.app-navigation>ul>.navigation-account>li>ul>li .app-navigation-entry-bullet,.app-navigation>ul>.navigation-account>.folders>li>ul>li>a[class*=icon-],.app-navigation>ul>.navigation-account>.folders>li>ul>li>a[style*=background-image],.app-navigation>ul>.navigation-account>.folders>li>ul>li .app-navigation-entry-bullet,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>ul>li>a[class*=icon-],.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>ul>li>a[style*=background-image],.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>ul>li .app-navigation-entry-bullet{margin-left:-32px}.app-navigation>ul>.navigation-account>li>ul>li>.app-navigation-entry-bullet,.app-navigation>ul>.navigation-account>.folders>li>ul>li>.app-navigation-entry-bullet,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>ul>li>.app-navigation-entry-bullet{left:-32px}.app-navigation>ul>.navigation-account>li,.app-navigation>ul>.navigation-account>.folders>li,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li{position:relative;width:100%;box-sizing:border-box}.app-navigation>ul>.navigation-account>li.icon-loading-small>a,.app-navigation>ul>.navigation-account>li.icon-loading-small>.app-navigation-entry-bullet,.app-navigation>ul>.navigation-account>.folders>li.icon-loading-small>a,.app-navigation>ul>.navigation-account>.folders>li.icon-loading-small>.app-navigation-entry-bullet,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li.icon-loading-small>a,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li.icon-loading-small>.app-navigation-entry-bullet{background:none !important}.app-navigation>ul>.navigation-account>li>a,.app-navigation>ul>.navigation-account>.folders>li>a,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>a{background-size:16px 16px;background-position:14px center;background-repeat:no-repeat;display:block;justify-content:space-between;line-height:44px;min-height:44px;padding:0 12px;overflow:hidden;box-sizing:border-box;white-space:nowrap;text-overflow:ellipsis;color:var(--color-main-text);opacity:.57;flex:1 1 0;z-index:100}.app-navigation>ul>.navigation-account>li>a:first-child img,.app-navigation>ul>.navigation-account>.folders>li>a:first-child img,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>a:first-child img{margin-right:11px;width:16px;margin-left:-30px}.app-navigation>ul>.navigation-account>li>.app-navigation-entry-bullet,.app-navigation>ul>.navigation-account>.folders>li>.app-navigation-entry-bullet,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>.app-navigation-entry-bullet{position:absolute;display:block;margin:16px;width:12px;height:12px;border:none;border-radius:50%;cursor:pointer}.app-navigation>ul>.navigation-account>li>.app-navigation-entry-menu,.app-navigation>ul>.navigation-account>.folders>li>.app-navigation-entry-menu,.app-navigation>ul>.navigation-account>.folders>li>.folders>.folders>li>.app-navigation-entry-menu{top:44px}.app-navigation .collapsible>.collapse{z-index:500}\", \"\",{\"version\":3,\"sources\":[\"webpack://./css/mail.scss\"],\"names\":[],\"mappings\":\"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\",\"sourcesContent\":[\".loading {\\n\\tposition: absolute;\\n\\tleft: 50%;\\n\\ttop: 50%;\\n}\\n\\n.emptycontent {\\n\\tmargin-top: 0px;\\n\\tmargin-bottom: 10px;\\n}\\n.emptycontent > h2 {\\n\\tpadding-top: 20px;\\n}\\n\\n.container {\\n\\tposition: relative;\\n\\twidth: 100%;\\n\\theight: 100%;\\n}\\n\\n.folders .ui-droppable-active {\\n\\tbackground-color: rgb(240, 240, 240);\\n}\\n\\n.folder.no-select {\\n\\tcursor: not-allowed;\\n}\\n\\n/* ACCOUNT FORM */\\n#account-form {\\n\\tz-index: 1001;\\n\\twidth: 250px;\\n\\ttop: 15%;\\n\\tpadding-bottom: 50px;\\n\\tmargin: 0 auto;\\n\\tpadding-top: 30px;\\n}\\n#mail-settings {\\n\\t#account-form {\\n\\t\\tmargin: 0;\\n\\t\\tpadding-top: 0;\\n\\t}\\n}\\n@media only screen and (max-height: 400px) {\\n\\t#account-form #emptycontent {\\n\\t\\tmargin-top: 0px;\\n\\t}\\n}\\n@media only screen and (min-height: 401px) and (max-height: 600px) {\\n\\t#account-form #emptycontent {\\n\\t\\tmargin-top: 2vh;\\n\\t}\\n}\\n@media only screen and (min-height: 601px) {\\n\\t#account-form #emptycontent {\\n\\t\\tmargin-top: 10vh;\\n\\t}\\n}\\n#account-form h2 {\\n\\ttext-align: center;\\n\\tposition: relative;\\n\\twidth: 300%;\\n\\tleft: -100%;\\n\\tmargin-bottom: 20px;\\n}\\n#account-form input {\\n\\twidth: 100%;\\n\\tbox-sizing: border-box;\\n}\\n\\n#account-form .toggle-manual-mode {\\n\\tbackground-position: right;\\n\\tpadding-right: 16px;\\n\\tmargin-left: 6px;\\n\\t-ms-filter: \\\"progid:DXImageTransform.Microsoft.Alpha(Opacity=30)\\\";\\n\\topacity: .3;\\n}\\n\\n#setup-imap-ssl-mode,\\n#setup-smtp-ssl-mode {\\n\\tposition: absolute;\\n\\ttop: 0;\\n\\tright: 0;\\n\\tmargin: 0;\\n\\tbackground-color: transparent;\\n\\tborder: none;\\n\\tz-index: 100;\\n}\\n\\n#connect-loading {\\n\\tposition: absolute;\\n\\ttop: 206px;\\n\\tleft: 0;\\n\\tright: 0;\\n\\tmargin-left: auto;\\n\\tmargin-right: auto;\\n\\theight: 30px;\\n}\\n\\n/* app navigation */\\n\\n/* do not display empty folders in the sidebar */\\n.app-navigation .empty {\\n\\tdisplay: none;\\n}\\n\\n.app-navigation .navigation-account:not(:first-child) {\\n    margin-top: 22px;\\n}\\n\\n\\n/* do not overlap collapse icon with special use icon */\\n.app-navigation .special-inbox .collapse,\\n.app-navigation .special-drafts .collapse,\\n.app-navigation .special-sent .collapse,\\n.app-navigation .special-trash .collapse {\\n\\tdisplay: none !important;\\n}\\n.app-navigation .special-inbox:hover .collapse,\\n.app-navigation .special-inbox:focus .collapse,\\n.app-navigation .special-drafts:hover .collapse,\\n.app-navigation .special-drafts:focus .collapse,\\n.app-navigation .special-sent:hover .collapse,\\n.app-navigation .special-sent:focus .collapse,\\n.app-navigation .special-trash:hover .collapse,\\n.app-navigation .special-trash:focus .collapse {\\n\\tdisplay: inline-block !important;\\n}\\n\\n#accounts-list li.collapse-folders a {\\n\\tcolor: var(--color-text-maxcontrast);\\n}\\n\\n#emptycontent,\\n#mail-messages #emptycontent.emptycontent-search {\\n\\tposition: static;\\n}\\n#mail-messages #emptycontent.emptycontent-search h2 {\\n\\tline-height: 150%;\\n}\\n#mail-messages #emptycontent {\\n\\tposition: absolute;\\n}\\n\\n.mail-account-email {\\n\\tdisplay: inline-block;\\n\\topacity: .5;\\n\\tpadding: 20px 0 10px 25px;\\n\\twidth: calc(100% - 50px);\\n\\tmargin: initial;\\n\\tfont-size: 100%;\\n\\toverflow: hidden;\\n\\ttext-overflow: ellipsis;\\n\\twhite-space: nowrap;\\n}\\n.mail-account-email:first-child {\\n\\tdisplay: none;\\n}\\n\\n.account-toggle-collapse {\\n\\topacity: .5;\\n}\\n\\n\\n/* settings */\\n\\n.mailaccount-list li {\\n\\tpadding: 10px 0;\\n}\\n.mailaccount-list .mail-account-name {\\n\\tdisplay: inline-block;\\n\\twidth: 90%;\\n\\toverflow: hidden;\\n\\ttext-overflow: ellipsis;\\n}\\n.mailaccount-list .actions {\\n\\tdisplay: inline-flex;\\n\\tposition: absolute;\\n\\tright: 0;\\n\\tmin-height: 16px;\\n\\tmin-width: 16px;\\n\\t-ms-filter: \\\"progid:DXImageTransform.Microsoft.Alpha(Opacity=25)\\\";\\n\\topacity: .25;\\n}\\n.mailaccount-list .actions:hover,\\n.mailaccount-list .actions:focus {\\n\\t-ms-filter: \\\"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)\\\";\\n\\topacity: .5;\\n}\\n\\n\\n/* app content*/\\n\\n#mail-messages {\\n\\tposition: relative;\\n\\twidth: 30%;\\n\\theight: 100%;\\n\\toverflow-x: hidden;\\n\\toverflow-y: auto;\\n\\tborder-right: 1px solid var(--color-border);\\n}\\n#mail-message-list-loading {\\n\\tposition: sticky;\\n\\theight: 40px;\\n\\tz-index: 1;\\n\\tbackground: -moz-radial-gradient(top, ellipse cover, var(--color-main-background), rgba(255,255,255,0) 70%);\\n\\tbackground: -webkit-radial-gradient(top, ellipse cover, var(--color-main-background),rgba(255,255,255,0) 70%);\\n\\tbackground: radial-gradient(ellipse at top, var(--color-main-background),rgba(255,255,255,0) 70%);\\n}\\n\\n.app-navigation .msg.success {\\n\\tcolor: #fff;\\n\\tbackground-color: var(--color-success);\\n\\tpadding: 3px;\\n}\\n.app-navigation .msg.error {\\n\\tcolor: #fff;\\n\\tbackground-color: var(--color-error);\\n\\tpadding: 3px;\\n}\\n\\n/* autocomplete list */\\n.ui-autocomplete .ui-menu-item a.mail-recipient-autocomplete {\\n\\tmargin: 0px;\\n\\tfont-weight: normal !important;\\n\\tdisplay: flex;\\n\\talign-content: center;\\n\\talign-items: center;\\n\\tborder: none;\\n}\\n.ui-autocomplete .ui-menu-item a.mail-recipient-autocomplete span {\\n\\tmargin-left: 10px;\\n}\\n.ui-autocomplete {\\n\\tpadding-left: 16px !important;\\n\\tborder-radius: 0 !important;\\n\\tborder-left: none;\\n\\tborder-right: none;\\n\\tz-index: 1000;\\n}\\n\\n.icon-starred[data-starred=\\\"false\\\"]:hover {\\n\\tbackground-image: var(--icon-star-dark-fc0) !important;\\n}\\n.icon-starred[data-starred=\\\"false\\\"]:not(:hover) {\\n\\tbackground-image: var(--icon-star-000) !important;\\n}\\n\\n.unread {\\n\\tfont-weight: bold;\\n}\\n/* make sure subfolders of unread folders are not bolded as well */\\n.unread ul {\\n\\tfont-weight: normal;\\n}\\n\\n.star {\\n\\tpadding: 20px;\\n\\tbackground-size: 16px;\\n\\tdisplay: inline-block;\\n\\tposition: absolute;\\n\\tleft: 16px;\\n\\ttop: 28px;\\n\\tz-index: 10;\\n}\\n/* only show star on hover of row */\\n.star.icon-star {\\n\\tdisplay: none;\\n\\t-ms-filter: \\\"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)\\\";\\n\\topacity: .3;\\n}\\n.star.icon-star:hover,\\n.star.icon-star:focus {\\n\\t-ms-filter: \\\"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)\\\";\\n\\topacity: 1;\\n}\\n\\n.icon-add {\\n\\tdisplay: inline-block;\\n\\tvertical-align: text-top;\\n}\\n\\n.transparency {\\n\\t-ms-filter: \\\"progid:DXImageTransform.Microsoft.Alpha(Opacity=60)\\\";\\n\\topacity: .6;\\n}\\n\\n\\n/* compose (handling mailto links) */\\n\\n.compose {\\n\\twidth: 60%;\\n\\tmargin: 0 auto;\\n}\\n\\n/* settings */\\n.mailaccount-list .mail-account-name {\\n\\tdisplay: inline-block;\\n\\twidth: 90%;\\n\\toverflow: hidden;\\n\\ttext-overflow: ellipsis;\\n}\\n.mailaccount-list .actions {\\n\\topacity: .5;\\n}\\n\\n// FIXES for core apps.scss\\n\\n.app-navigation {\\n\\t> ul {\\n\\t\\t> .navigation-account > li,\\n\\t\\t> .navigation-account > .folders > li,\\n\\t\\t> .navigation-account > .folders > li > .folders > .folders > li {\\n\\t\\t\\tdisplay: inline-flex;\\n\\t\\t\\tflex-wrap: wrap;\\n\\t\\t\\torder: 1;\\n\\t\\t\\tflex-shrink: 0;\\n\\n\\t\\t\\t/* Pinned-to-bottom entries */\\n\\t\\t\\t&.pinned {\\n\\t\\t\\t\\torder: 2;\\n\\t\\t\\t\\t&.first-pinned {\\n\\t\\t\\t\\t\\tmargin-top: auto !important;\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\n\\t\\t\\t> a,\\n\\t\\t\\t> .app-navigation-entry-deleted {\\n\\t\\t\\t\\t/* Ugly hack for overriding the main entry link */\\n\\t\\t\\t\\tpadding-left: 44px !important;\\n\\t\\t\\t}\\n\\t\\t\\t> .app-navigation-entry-edit {\\n\\t\\t\\t\\t/* Ugly hack for overriding the main entry link */\\n\\t\\t\\t\\t/* align the input correctly with the link text\\n\\t\\t\\t\\t   44px-6px padding for the input */\\n\\t\\t\\t\\tpadding-left: 38px !important;\\n\\t\\t\\t}\\n\\n\\t\\t\\t&:focus,\\n\\t\\t\\t&:hover,\\n\\t\\t\\t&.active,\\n\\t\\t\\ta.selected {\\n\\t\\t\\t\\t&,\\n\\t\\t\\t\\t> a {\\n\\t\\t\\t\\t\\topacity: 1;\\n\\t\\t\\t\\t\\tbox-shadow: inset 2px 0 var(--color-primary);\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\n\\t\\t\\t/* align loader */\\n\\t\\t\\t&.icon-loading-small:after {\\n\\t\\t\\t\\tleft: 22px;\\n\\t\\t\\t\\ttop: 22px;\\n\\t\\t\\t}\\n\\n\\t\\t\\t/* hide and animate deletion/collapse of subitems */\\n\\t\\t\\t&.deleted,\\n\\t\\t\\t&.collapsible:not(.open) {\\n\\t\\t\\t\\t> ul,\\n\\t\\t\\t\\t> .folders {\\n\\t\\t\\t\\t\\topacity: 0;\\n\\t\\t\\t\\t\\tmax-height: 0;\\n\\t\\t\\t\\t\\t/* bezier override the hide/slow effect due to the 2000 max-height */\\n\\t\\t\\t\\t\\ttransition: max-height 1000ms cubic-bezier(0, 1, 0, 1),\\n\\t\\t\\t\\t\\t\\t\\t\\topacity 250ms ease-in-out;\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\n\\t\\t\\t/* Second level nesting for lists */\\n\\t\\t\\t> ul {\\n\\t\\t\\t\\tflex: 1 0 100%;\\n\\t\\t\\t\\tpadding-left: 62px;\\n\\t\\t\\t\\twidth: inherit;\\n\\t\\t\\t\\ttransition: max-height 2000ms ease-in-out,\\n\\t\\t\\t\\t\\t\\t\\topacity 250ms ease-in-out;\\n\\t\\t\\t\\tmax-height: 9999px;\\n\\t\\t\\t\\topacity: 1;\\n\\t\\t\\t\\t> li {\\n\\t\\t\\t\\t\\tdisplay: inline-flex;\\n\\t\\t\\t\\t\\tflex-wrap: wrap;\\n\\t\\t\\t\\t\\t&:focus,\\n\\t\\t\\t\\t\\t&:hover,\\n\\t\\t\\t\\t\\t&.active,\\n\\t\\t\\t\\t\\ta.selected {\\n\\t\\t\\t\\t\\t\\t&,\\n\\t\\t\\t\\t\\t\\t> a {\\n\\t\\t\\t\\t\\t\\t\\topacity: 1;\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t/* align loader */\\n\\t\\t\\t\\t\\t&.icon-loading-small:after {\\n\\t\\t\\t\\t\\t\\tleft: -10px;\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t/* Submenu fix for icon */\\n\\t\\t\\t\\t\\t> a[class*='icon-'],\\n\\t\\t\\t\\t\\t> a[style*='background-image'],\\n\\t\\t\\t\\t\\t.app-navigation-entry-bullet {\\n\\t\\t\\t\\t\\t\\tmargin-left: -32px; /* 44px padding - 12px padding */\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t/* Submenu fix for bullet */\\n\\t\\t\\t\\t\\t> .app-navigation-entry-bullet {\\n\\t\\t\\t\\t\\t\\tleft: -32px;/* 44px padding - 12px padding */\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\t/* Menu and submenu */\\n\\t\\t> .navigation-account > li,\\n\\t\\t> .navigation-account > .folders > li,\\n\\t\\t> .navigation-account > .folders > li > .folders > .folders > li {\\n\\t\\t\\tposition: relative;\\n\\t\\t\\twidth: 100%;\\n\\t\\t\\tbox-sizing: border-box;\\n\\t\\t\\t/* hide icons if loading */\\n\\t\\t\\t&.icon-loading-small {\\n\\t\\t\\t\\t> a,\\n\\t\\t\\t\\t> .app-navigation-entry-bullet {\\n\\t\\t\\t\\t\\tbackground: none !important;\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t\\t/* Main entry link */\\n\\t\\t\\t> a {\\n\\t\\t\\t\\tbackground-size: 16px 16px;\\n\\t\\t\\t\\tbackground-position: 14px center;\\n\\t\\t\\t\\tbackground-repeat: no-repeat;\\n\\t\\t\\t\\tdisplay: block;\\n\\t\\t\\t\\tjustify-content: space-between;\\n\\t\\t\\t\\tline-height: 44px;\\n\\t\\t\\t\\tmin-height: 44px;\\n\\t\\t\\t\\tpadding: 0 12px;\\n\\t\\t\\t\\toverflow: hidden;\\n\\t\\t\\t\\tbox-sizing: border-box;\\n\\t\\t\\t\\twhite-space: nowrap;\\n\\t\\t\\t\\ttext-overflow: ellipsis;\\n\\t\\t\\t\\tcolor: var(--color-main-text);\\n\\t\\t\\t\\topacity: .57;\\n\\t\\t\\t\\tflex: 1 1 0;\\n\\t\\t\\t\\tz-index: 100; /* above the bullet */\\n\\t\\t\\t\\t/* TODO: forbid using img as icon in menu? */\\n\\t\\t\\t\\t&:first-child img {\\n\\t\\t\\t\\t    margin-right: 11px;\\n\\t\\t\\t\\t    width: 16px;\\n\\t\\t\\t\\t    margin-left: -30px;\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\n\\t\\t\\t/* Bullet icon */\\n\\t\\t\\t> .app-navigation-entry-bullet {\\n\\t\\t\\t\\tposition: absolute;\\n\\t\\t\\t\\tdisplay: block;\\n\\t\\t\\t\\tmargin: 16px;\\n\\t\\t\\t\\twidth: 12px;\\n\\t\\t\\t\\theight: 12px;\\n\\t\\t\\t\\tborder: none;\\n\\t\\t\\t\\tborder-radius: 50%;\\n\\t\\t\\t\\tcursor: pointer;\\n\\t\\t\\t}\\n\\n\\t\\t\\t/* popover fix the flex positionning of the li parent */\\n\\t\\t\\t> .app-navigation-entry-menu {\\n\\t\\t\\t\\ttop: 44px;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\\t.collapsible > .collapse {\\n\\t\\tz-index: 500;\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"@media only screen and (max-width: var(--breakpoint-mobile)){.app-content-list{max-width:100vw}#mail-messages{width:100%}#mail-message-list-loading{width:100%}#mail-message{z-index:100;background:var(--color-main-background);width:100%;left:0;top:0}#mail-message-close{display:block;position:fixed;right:0;top:45px;width:44px;height:44px;background-size:24px;z-index:101;cursor:pointer;-ms-filter:\\\"progid:DXImageTransform.Microsoft.Alpha(Opacity=40)\\\";opacity:.4}#mail-message-close:hover,#mail-message-close:focus{-ms-filter:\\\"progid:DXImageTransform.Microsoft.Alpha(Opacity=60)\\\";opacity:.6}.hidden-mobile{display:none}textarea.message-body{padding-right:12px}#mail-thread-header .mail-message-actions{margin-right:5px}}\", \"\",{\"version\":3,\"sources\":[\"webpack://./css/mobile.scss\"],\"names\":[],\"mappings\":\"AAAA,6DACC,kBACC,eAAA,CAID,eACC,UAAA,CAID,2BACC,UAAA,CAID,cACC,WAAA,CACA,uCAAA,CACA,UAAA,CACA,MAAA,CACA,KAAA,CAGD,oBACC,aAAA,CACA,cAAA,CACA,OAAA,CACA,QAAA,CACA,UAAA,CACA,WAAA,CACA,oBAAA,CACA,WAAA,CACA,cAAA,CACA,gEAAA,CACA,UAAA,CAED,oDAEC,gEAAA,CACA,UAAA,CAGD,eACC,YAAA,CAGD,sBACC,kBAAA,CAID,0CACC,gBAAA,CAAA\",\"sourcesContent\":[\"@media only screen and (max-width: var(--breakpoint-mobile)) {\\n\\t.app-content-list {\\n\\t\\tmax-width: 100vw;\\n\\t}\\n\\n\\t/* full width for message list on mobile */\\n\\t#mail-messages {\\n\\t\\twidth: 100%;\\n\\t}\\n\\n\\t/* correctly center loading icon on mobile */\\n\\t#mail-message-list-loading {\\n\\t\\twidth: 100%;\\n\\t}\\n\\n\\t/* overlay message detail on top of message list */\\n\\t#mail-message {\\n\\t\\tz-index: 100;\\n\\t\\tbackground: var(--color-main-background);\\n\\t\\twidth: 100%;\\n\\t\\tleft: 0;\\n\\t\\ttop: 0;\\n\\t}\\n\\n\\t#mail-message-close {\\n\\t\\tdisplay: block;\\n\\t\\tposition: fixed;\\n\\t\\tright: 0;\\n\\t\\ttop: 45px;\\n\\t\\twidth: 44px;\\n\\t\\theight: 44px;\\n\\t\\tbackground-size: 24px;\\n\\t\\tz-index: 101;\\n\\t\\tcursor: pointer;\\n\\t\\t-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=40)';\\n\\t\\topacity: 0.4;\\n\\t}\\n\\t#mail-message-close:hover,\\n\\t#mail-message-close:focus {\\n\\t\\t-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=60)';\\n\\t\\topacity: 0.6;\\n\\t}\\n\\n\\t.hidden-mobile {\\n\\t\\tdisplay: none;\\n\\t}\\n\\n\\ttextarea.message-body {\\n\\t\\tpadding-right: 12px;\\n\\t}\\n\\n\\t/* reply-forward actions align to the far right */\\n\\t#mail-thread-header .mail-message-actions {\\n\\t\\tmargin-right: 5px;\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".calendar-picker-option[data-v-9bd234a6]{width:100%;display:flex;align-items:center}.calendar-picker-option__color-indicator[data-v-9bd234a6]{width:12px;height:12px;border-radius:50%;border:none;margin-right:8px;flex-basis:12px;flex-shrink:0}.calendar-picker-option__label[data-v-9bd234a6]{overflow:hidden;text-overflow:ellipsis;flex-grow:1;max-width:80px}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/CalendarPickerOption.vue\"],\"names\":[],\"mappings\":\"AACA,yCACC,UAAA,CACA,YAAA,CACA,kBAAA,CAEA,0DACC,UAAA,CACA,WAAA,CACA,iBAAA,CACA,WAAA,CACA,gBAAA,CACA,eAAA,CACA,aAAA,CAGD,gDACC,eAAA,CACA,sBAAA,CACA,WAAA,CACA,cAAA\",\"sourcesContent\":[\"\\n.calendar-picker-option {\\n\\twidth: 100%;\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\n\\t&__color-indicator {\\n\\t\\twidth: 12px;\\n\\t\\theight: 12px;\\n\\t\\tborder-radius: 50%;\\n\\t\\tborder: none;\\n\\t\\tmargin-right: 8px;\\n\\t\\tflex-basis: 12px;\\n\\t\\tflex-shrink: 0;\\n\\t}\\n\\n\\t&__label {\\n\\t\\toverflow: hidden;\\n\\t\\ttext-overflow: ellipsis;\\n\\t\\tflex-grow: 1;\\n\\t\\tmax-width: 80px;\\n\\t}\\n}\\n\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".message-composer[data-v-5d3292fc]{margin:0;z-index:100;display:flex;flex-direction:column;height:100%;max-height:100%}.composer-actions[data-v-5d3292fc]{position:sticky;background:linear-gradient(rgba(255, 255, 255, 0), var(--color-main-background-translucent) 50%)}.composer-fields[data-v-5d3292fc]{display:flex;border-top:1px solid var(--color-border);align-items:flex-start}.composer-fields label[data-v-5d3292fc]{padding:11px 20px 11px 0}.composer-fields[data-v-5d3292fc] .multiselect--multiple .multiselect__tags{display:grid;grid-template-columns:calc(100% - 18px) 18px 100%}.composer-fields[data-v-5d3292fc] .multiselect--multiple .multiselect__tags .multiselect__limit{margin-right:0;margin-left:8px}.composer-fields[data-v-5d3292fc] .multiselect__content-wrapper{border-bottom:1px solid var(--color-border);margin-top:0}.composer-fields[data-v-5d3292fc] .multiselect__content-wrapper li>span::before{display:none}.composer-fields[data-v-5d3292fc] .multiselect__input{position:relative !important;top:0;grid-column-start:1;grid-column-end:3}.composer-fields[data-v-5d3292fc] .multiselect--active input:focus-visible{box-shadow:none}.composer-fields[data-v-5d3292fc] .multiselect__tags{box-sizing:border-box;height:auto}.composer-fields__from[data-v-5d3292fc]{margin-right:50px}.composer-fields .multiselect.multiselect--multiple[data-v-5d3292fc]::after{position:absolute;right:0;top:auto;bottom:8px}.composer-fields .multiselect__tag[data-v-5d3292fc]{position:relative}.composer-fields.mail-account[data-v-5d3292fc]{border-top:none;padding-top:10px}.composer-fields.mail-account>.multiselect[data-v-5d3292fc]{max-width:none;min-height:auto}.composer-fields .multiselect[data-v-5d3292fc],.composer-fields input[data-v-5d3292fc],.composer-fields TextEditor[data-v-5d3292fc]{flex-grow:1;max-width:none;border:none;border-radius:0}.composer-fields .composer-fields--custom[data-v-5d3292fc]{display:flex;align-items:flex-start;flex-wrap:wrap;padding-top:2px;width:calc(100% - 120px)}.composer-fields .composer-fields--custom button[data-v-5d3292fc]{margin-top:0;margin-bottom:0;background-color:rgba(0,0,0,0);border:none;opacity:.5;padding:10px 16px}.composer-fields .composer-fields--custom button.active[data-v-5d3292fc],.composer-fields .composer-fields--custom button[data-v-5d3292fc]:active{opacity:1}.composer-fields .composer-fields--custom .multiselect[data-v-5d3292fc]{width:calc(100% - 150px)}.composer-fields .multiselect[data-v-5d3292fc]{margin-right:12px}.composer-fields .subject[data-v-5d3292fc]{font-size:15px;font-weight:bold;margin:3px 0 !important;padding:0 12px !important}.composer-fields .subject[data-v-5d3292fc]:focus-visible{box-shadow:none !important}.composer-fields .message-body[data-v-5d3292fc]{height:100%;width:100%;margin:0;border:none !important;outline:none !important;box-shadow:none !important;padding:12px;-webkit-user-select:text;user-select:text}.warning-box[data-v-5d3292fc]{padding:5px 12px;border-radius:0}.message-editor[data-v-5d3292fc]{flex:1 1 100%;min-height:0}.draft-status[data-v-5d3292fc]{padding:2px;opacity:.5;font-size:small;display:block}.from-label[data-v-5d3292fc],.to-label[data-v-5d3292fc],.copy-toggle[data-v-5d3292fc],.cc-label[data-v-5d3292fc],.bcc-label[data-v-5d3292fc]{padding-top:12px;padding-bottom:12px;padding-right:20px;cursor:text;color:var(--color-text-maxcontrast);width:100px;text-align:right;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:bold}.bcc-label[data-v-5d3292fc]{top:initial;bottom:0}.copy-toggle[data-v-5d3292fc]{cursor:pointer;width:initial}.copy-toggle[data-v-5d3292fc]:hover,.copy-toggle[data-v-5d3292fc]:focus{color:var(--color-main-text)}.reply[data-v-5d3292fc]{min-height:100px}[data-v-5d3292fc] .multiselect .multiselect__tags,.subject[data-v-5d3292fc]{border:none !important}[data-v-5d3292fc] [data-select=create] .avatardiv--unknown{background:var(--color-text-maxcontrast) !important}[data-v-5d3292fc] .multiselect.opened .multiselect__tags .multiselect__tags-wrap{flex-wrap:wrap}.submit-message.send.primary.icon-confirm-white[data-v-5d3292fc]{color:var(--color-main-background)}.sending-hint[data-v-5d3292fc]{height:50px;margin-top:50px}.button[data-v-5d3292fc]{background-color:rgba(0,0,0,0);border:none}.send-button[data-v-5d3292fc]{display:flex;align-items:center;padding:10px 15px;margin-left:5px}.send-button .send-icon[data-v-5d3292fc]{padding-right:5px}.centered-content[data-v-5d3292fc]{margin-top:0 !important}.composer-actions-right[data-v-5d3292fc]{display:flex;align-items:center;flex-direction:row;justify-content:space-between;bottom:5px}.composer-actions--primary-actions[data-v-5d3292fc]{display:flex;flex-direction:row;padding-left:10px;align-items:center}.composer-actions--secondary-actions[data-v-5d3292fc]{display:flex;flex-direction:row;padding:12px}.composer-actions--primary-actions .button[data-v-5d3292fc]{padding:2px}.composer-actions--secondary-actions .button[data-v-5d3292fc]{flex-shrink:0}.composer-actions-draft-status[data-v-5d3292fc]{padding-left:10px}@media only screen and (max-width: 580px){.composer-actions-right[data-v-5d3292fc]{align-items:end;flex-direction:column-reverse}.composer-actions-draft-status[data-v-5d3292fc]{text-align:end;padding-right:15px}.composer-actions--primary-actions[data-v-5d3292fc]{padding-right:5px}}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/Composer.vue\"],\"names\":[],\"mappings\":\"AACA,mCACC,QAAA,CACA,WAAA,CACA,YAAA,CACA,qBAAA,CACA,WAAA,CACA,eAAA,CAGD,mCACC,eAAA,CACA,gGAAA,CAGD,kCACC,YAAA,CACA,wCAAA,CACA,sBAAA,CAEA,wCACC,wBAAA,CAGD,4EACC,YAAA,CACA,iDAAA,CAEA,gGACC,cAAA,CACA,eAAA,CAIF,gEACC,2CAAA,CACA,YAAA,CAEA,gFACC,YAAA,CAIF,sDACC,4BAAA,CACA,KAAA,CACA,mBAAA,CACA,iBAAA,CAGD,2EACC,eAAA,CAGD,qDACC,qBAAA,CACA,WAAA,CAGD,wCACC,iBAAA,CAGD,4EACC,iBAAA,CACA,OAAA,CACA,QAAA,CACA,UAAA,CAGD,oDACC,iBAAA,CAGD,+CACC,eAAA,CACA,gBAAA,CAEA,4DACC,cAAA,CACA,eAAA,CAIF,oIAGC,WAAA,CACA,cAAA,CACA,WAAA,CACA,eAAA,CAGD,2DACC,YAAA,CACA,sBAAA,CACA,cAAA,CACA,eAAA,CACA,wBAAA,CAEA,kEACC,YAAA,CACA,eAAA,CACA,8BAAA,CACA,WAAA,CACA,UAAA,CACA,iBAAA,CAGD,kJACC,SAAA,CAGD,wEACC,wBAAA,CAIF,+CACC,iBAAA,CAGD,2CACC,cAAA,CACA,gBAAA,CACA,uBAAA,CACA,yBAAA,CAEA,yDACC,0BAAA,CAIF,gDACC,WAAA,CACA,UAAA,CACA,QAAA,CACA,sBAAA,CACA,uBAAA,CACA,0BAAA,CACA,YAAA,CAIA,wBAAA,CACA,gBAAA,CAIF,8BACC,gBAAA,CACA,eAAA,CAID,iCACC,aAAA,CACA,YAAA,CAGD,+BACC,WAAA,CACA,UAAA,CACA,eAAA,CACA,aAAA,CAID,6IAKC,gBAAA,CACA,mBAAA,CACA,kBAAA,CACA,WAAA,CACA,mCAAA,CACA,WAAA,CACA,gBAAA,CACA,kBAAA,CACA,eAAA,CACA,sBAAA,CACA,gBAAA,CAGD,4BACC,WAAA,CACA,QAAA,CAGD,8BACC,cAAA,CACA,aAAA,CAEA,wEAEC,4BAAA,CAIF,wBACC,gBAAA,CAGD,4EACC,sBAAA,CAED,2DACC,mDAAA,CAED,iFACC,cAAA,CAGD,iEACC,kCAAA,CAED,+BACC,WAAA,CACA,eAAA,CAED,yBACC,8BAAA,CACA,WAAA,CAED,8BACC,YAAA,CACA,kBAAA,CACA,iBAAA,CACA,eAAA,CAED,yCACC,iBAAA,CAED,mCACC,uBAAA,CAED,yCACC,YAAA,CACA,kBAAA,CACA,kBAAA,CACA,6BAAA,CACA,UAAA,CAED,oDACC,YAAA,CACA,kBAAA,CACA,iBAAA,CACA,kBAAA,CAED,sDACC,YAAA,CACA,kBAAA,CACA,YAAA,CAED,4DACC,WAAA,CAED,8DACC,aAAA,CAGD,gDACC,iBAAA,CAGD,0CACC,yCACC,eAAA,CACA,6BAAA,CAED,gDACC,cAAA,CACA,kBAAA,CAED,oDACC,iBAAA,CAAA\",\"sourcesContent\":[\"\\n.message-composer {\\n\\tmargin: 0;\\n\\tz-index: 100;\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\theight: 100%;\\n\\tmax-height: 100%;\\n}\\n\\n.composer-actions {\\n\\tposition: sticky;\\n\\tbackground: linear-gradient(rgba(255, 255, 255, 0), var(--color-main-background-translucent) 50%);\\n}\\n\\n.composer-fields {\\n\\tdisplay: flex;\\n\\tborder-top: 1px solid var(--color-border);\\n\\talign-items: flex-start;\\n\\n\\tlabel {\\n\\t\\tpadding: 11px 20px 11px 0;\\n\\t}\\n\\n\\t::v-deep(.multiselect--multiple .multiselect__tags) {\\n\\t\\tdisplay: grid;\\n\\t\\tgrid-template-columns: calc(100% - 18px) 18px 100%;\\n\\n\\t\\t.multiselect__limit {\\n\\t\\t\\tmargin-right: 0;\\n\\t\\t\\tmargin-left: 8px\\n\\t\\t}\\n\\t}\\n\\n\\t::v-deep(.multiselect__content-wrapper) {\\n\\t\\tborder-bottom: 1px solid var(--color-border);\\n\\t\\tmargin-top: 0;\\n\\n\\t\\t& li > span::before {\\n\\t\\t\\tdisplay: none\\n\\t\\t}\\n\\t}\\n\\n\\t::v-deep(.multiselect__input) {\\n\\t\\tposition: relative !important;\\n\\t\\ttop: 0;\\n\\t\\tgrid-column-start: 1;\\n\\t\\tgrid-column-end: 3;\\n\\t}\\n\\n\\t::v-deep(.multiselect--active input:focus-visible) {\\n\\t\\tbox-shadow: none;\\n\\t}\\n\\n\\t::v-deep(.multiselect__tags) {\\n\\t\\tbox-sizing: border-box;\\n\\t\\theight: auto;\\n\\t}\\n\\n\\t&__from {\\n\\t\\tmargin-right: 50px; /* for the modal close button */\\n\\t}\\n\\n\\t.multiselect.multiselect--multiple::after {\\n\\t\\tposition: absolute;\\n\\t\\tright: 0;\\n\\t\\ttop: auto;\\n\\t\\tbottom: 8px\\n\\t}\\n\\n\\t.multiselect__tag {\\n\\t\\tposition: relative;\\n\\t}\\n\\n\\t&.mail-account {\\n\\t\\tborder-top: none;\\n\\t\\tpadding-top: 10px;\\n\\n\\t\\t& > .multiselect {\\n\\t\\t\\tmax-width: none;\\n\\t\\t\\tmin-height: auto;\\n\\t\\t}\\n\\t}\\n\\n\\t.multiselect,\\n\\tinput,\\n\\tTextEditor {\\n\\t\\tflex-grow: 1;\\n\\t\\tmax-width: none;\\n\\t\\tborder: none;\\n\\t\\tborder-radius: 0;\\n\\t}\\n\\n\\t.composer-fields--custom {\\n\\t\\tdisplay: flex;\\n\\t\\talign-items: flex-start;\\n\\t\\tflex-wrap: wrap;\\n\\t\\tpadding-top: 2px;\\n\\t\\twidth: calc(100% - 120px);\\n\\n\\t\\tbutton {\\n\\t\\t\\tmargin-top: 0;\\n\\t\\t\\tmargin-bottom: 0;\\n\\t\\t\\tbackground-color: transparent;\\n\\t\\t\\tborder: none;\\n\\t\\t\\topacity: 0.5;\\n\\t\\t\\tpadding: 10px 16px;\\n\\t\\t}\\n\\n\\t\\tbutton.active, button:active {\\n\\t\\t\\topacity: 1;\\n\\t\\t}\\n\\n\\t\\t.multiselect {\\n\\t\\t\\twidth: calc(100% - 150px);\\n\\t\\t}\\n\\t}\\n\\n\\t.multiselect {\\n\\t\\tmargin-right: 12px;\\n\\t}\\n\\n\\t.subject {\\n\\t\\tfont-size: 15px;\\n\\t\\tfont-weight: bold;\\n\\t\\tmargin: 3px 0 !important;\\n\\t\\tpadding: 0 12px !important;\\n\\n\\t\\t&:focus-visible {\\n\\t\\t\\tbox-shadow: none !important;\\n\\t\\t}\\n\\t}\\n\\n\\t.message-body {\\n\\t\\theight: 100%;\\n\\t\\twidth: 100%;\\n\\t\\tmargin: 0;\\n\\t\\tborder: none !important;\\n\\t\\toutline: none !important;\\n\\t\\tbox-shadow: none !important;\\n\\t\\tpadding: 12px;\\n\\n\\t\\t// Fix contenteditable not becoming focused upon clichint within it's\\n\\t\\t// boundaries in safari\\n\\t\\t-webkit-user-select: text;\\n\\t\\tuser-select: text;\\n\\t}\\n}\\n\\n.warning-box {\\n\\tpadding: 5px 12px;\\n\\tborder-radius: 0;\\n}\\n\\n// Make composer editor expand\\n.message-editor {\\n\\tflex: 1 1 100%;\\n\\tmin-height: 0;\\n}\\n\\n.draft-status {\\n\\tpadding: 2px;\\n\\topacity: 0.5;\\n\\tfont-size: small;\\n\\tdisplay: block;\\n\\n}\\n\\n.from-label,\\n.to-label,\\n.copy-toggle,\\n.cc-label,\\n.bcc-label {\\n\\tpadding-top: 12px;\\n\\tpadding-bottom: 12px;\\n\\tpadding-right: 20px;\\n\\tcursor: text;\\n\\tcolor: var(--color-text-maxcontrast);\\n\\twidth: 100px;\\n\\ttext-align: right;\\n\\twhite-space: nowrap;\\n\\toverflow: hidden;\\n\\ttext-overflow: ellipsis;\\n\\tfont-weight: bold;\\n}\\n\\n.bcc-label {\\n\\ttop: initial;\\n\\tbottom: 0;\\n}\\n\\n.copy-toggle {\\n\\tcursor: pointer;\\n\\twidth: initial;\\n\\n\\t&:hover,\\n\\t&:focus {\\n\\t\\tcolor: var(--color-main-text);\\n\\t}\\n}\\n\\n.reply {\\n\\tmin-height: 100px;\\n}\\n\\n::v-deep .multiselect .multiselect__tags, .subject {\\n\\tborder: none !important;\\n}\\n::v-deep [data-select=\\\"create\\\"] .avatardiv--unknown {\\n\\tbackground: var(--color-text-maxcontrast) !important;\\n}\\n::v-deep .multiselect.opened .multiselect__tags .multiselect__tags-wrap {\\n\\tflex-wrap: wrap;\\n}\\n\\n.submit-message.send.primary.icon-confirm-white {\\n\\tcolor: var(--color-main-background);\\n}\\n.sending-hint {\\n\\theight: 50px;\\n\\tmargin-top: 50px;\\n}\\n.button {\\n\\tbackground-color: transparent;\\n\\tborder: none;\\n}\\n.send-button {\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tpadding: 10px 15px;\\n\\tmargin-left: 5px;\\n}\\n.send-button .send-icon {\\n\\tpadding-right: 5px;\\n}\\n.centered-content {\\n\\tmargin-top: 0 !important;\\n}\\n.composer-actions-right {\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tflex-direction: row;\\n\\tjustify-content: space-between;\\n\\tbottom: 5px;\\n}\\n.composer-actions--primary-actions {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tpadding-left: 10px;\\n\\talign-items: center;\\n}\\n.composer-actions--secondary-actions {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tpadding: 12px;\\n}\\n.composer-actions--primary-actions .button {\\n\\tpadding: 2px;\\n}\\n.composer-actions--secondary-actions .button{\\n\\tflex-shrink: 0;\\n}\\n\\n.composer-actions-draft-status {\\n\\tpadding-left: 10px;\\n}\\n\\n@media only screen and (max-width: 580px) {\\n\\t.composer-actions-right {\\n\\t\\talign-items: end;\\n\\t\\tflex-direction: column-reverse;\\n\\t}\\n\\t.composer-actions-draft-status {\\n\\t\\ttext-align: end;\\n\\t\\tpadding-right: 15px;\\n\\t}\\n\\t.composer-actions--primary-actions {\\n\\t\\tpadding-right: 5px;\\n\\t}\\n}\\n\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".composer-attachment[data-v-47464ade]{width:calc(50% - 20px);box-sizing:border-box;display:flex;justify-content:space-between;align-items:flex-start;margin:10px;flex-wrap:wrap}.composer-attachment--with-error[data-v-47464ade]{color:red;opacity:.5}.composer-attachment .cloud-attachment-icon[data-v-47464ade]{position:absolute;z-index:2;right:2px;top:2px;color:#000}.composer-attachment .attachment-preview[data-v-47464ade]{display:inline-flex;flex-wrap:wrap;width:50px;height:50px;overflow:hidden;border-radius:3px;align-items:center;justify-content:center;position:relative}.composer-attachment .attachment-preview img[data-v-47464ade]{display:block;min-width:50px;min-height:50px;max-width:72px;max-height:72px;position:absolute}.composer-attachment .attachment-preview span[data-v-47464ade]{color:rgba(0,0,0,.3);font-size:13px;text-transform:uppercase;font-weight:bold}.composer-attachment button[data-v-47464ade]{padding:0;background:rgba(0,0,0,0);border:none;margin:6px -2px 0 0}.attachments-upload-progress[data-v-47464ade]{display:block;height:5px;width:100%;position:relative;border-radius:5px;background:var(--color-background-dark);margin-top:7px}.attachments-upload-progress .attachments-upload-progress--bar[data-v-47464ade]{height:5px;background:var(--color-primary-element-light);position:absolute;z-index:1;left:0;border-radius:5px}.attachments-upload-progress>div[data-v-47464ade]{padding-left:3px}.new-message-attachments-action[data-v-47464ade]{display:inline-block;vertical-align:middle;padding:18px;opacity:.5}.attachment-inner[data-v-47464ade]{display:flex;flex-wrap:wrap;width:calc(100% - 90px);position:relative}.new-message-attachment-name[data-v-47464ade]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap;margin-bottom:3px}.new-message-attachment-size[data-v-47464ade]{color:#6a6a6a;width:100%}.new-message-attachment-name.upload-ongoing[data-v-47464ade]{color:#0082c9}.new-message-attachment-name.upload-warning[data-v-47464ade]{color:#d2322d}.new-message-attachment-name.upload-warning .ui-progressbar-value[data-v-47464ade]{border:1px solid #e9322d;background:#e9322d}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/ComposerAttachment.vue\"],\"names\":[],\"mappings\":\"AAEA,sCACC,sBAAA,CACG,qBAAA,CACA,YAAA,CACA,6BAAA,CACA,sBAAA,CACA,WAAA,CACA,cAAA,CAEH,kDACC,SAAA,CACA,UAAA,CAGD,6DACC,iBAAA,CACA,SAAA,CACA,SAAA,CACA,OAAA,CACA,UAAA,CAGD,0DACC,mBAAA,CACA,cAAA,CACA,UAAA,CACA,WAAA,CACA,eAAA,CACA,iBAAA,CACA,kBAAA,CACA,sBAAA,CACA,iBAAA,CAEA,8DACC,aAAA,CACA,cAAA,CACA,eAAA,CACA,cAAA,CACA,eAAA,CACA,iBAAA,CAGD,+DACC,oBAAA,CACA,cAAA,CACA,wBAAA,CACA,gBAAA,CAKF,6CACC,SAAA,CACA,wBAAA,CACA,WAAA,CACA,mBAAA,CAIF,8CACC,aAAA,CACA,UAAA,CACA,UAAA,CACA,iBAAA,CACA,iBAAA,CACA,uCAAA,CACA,cAAA,CAEA,gFACC,UAAA,CACA,6CAAA,CACA,iBAAA,CACA,SAAA,CACA,MAAA,CACA,iBAAA,CAIF,kDACC,gBAAA,CAGD,iDACC,oBAAA,CACA,qBAAA,CACA,YAAA,CACA,UAAA,CAGD,mCACC,YAAA,CACG,cAAA,CACH,uBAAA,CACA,iBAAA,CAKD,8CACC,sBAAA,CACA,eAAA,CACA,kBAAA,CACA,iBAAA,CAGD,8CACC,aAAA,CACA,UAAA,CAID,6DACC,aAAA,CAID,6DACC,aAAA,CAID,mFACC,wBAAA,CACA,kBAAA\",\"sourcesContent\":[\"\\n\\n.composer-attachment {\\n\\twidth: calc(50% - 20px);\\n    box-sizing: border-box;\\n    display: flex;\\n    justify-content: space-between;\\n    align-items: flex-start;\\n    margin: 10px;\\n    flex-wrap: wrap;\\n\\n\\t&--with-error {\\n\\t\\tcolor:red;\\n\\t\\topacity: 0.5;\\n\\t}\\n\\n\\t.cloud-attachment-icon {\\n\\t\\tposition:absolute;\\n\\t\\tz-index: 2;\\n\\t\\tright: 2px;\\n\\t\\ttop: 2px;\\n\\t\\tcolor: rgba(0, 0, 0, 1);\\n\\t}\\n\\n\\t.attachment-preview {\\n\\t\\tdisplay: inline-flex;\\n\\t\\tflex-wrap: wrap;\\n\\t\\twidth: 50px;\\n\\t\\theight:50px;\\n\\t\\toverflow: hidden;\\n\\t\\tborder-radius: 3px;\\n\\t\\talign-items: center;\\n\\t\\tjustify-content: center;\\n\\t\\tposition: relative;\\n\\n\\t\\timg {\\n\\t\\t\\tdisplay: block;\\n\\t\\t\\tmin-width: 50px;\\n\\t\\t\\tmin-height: 50px;\\n\\t\\t\\tmax-width: 72px;\\n\\t\\t\\tmax-height: 72px;\\n\\t\\t\\tposition: absolute;\\n\\t\\t}\\n\\n\\t\\tspan {\\n\\t\\t\\tcolor: rgba(0,0,0,0.3);\\n\\t\\t\\tfont-size: 13px;\\n\\t\\t\\ttext-transform: uppercase;\\n\\t\\t\\tfont-weight: bold;\\n\\t\\t}\\n\\n\\t}\\n\\n\\tbutton {\\n\\t\\tpadding: 0;\\n\\t\\tbackground: transparent;\\n\\t\\tborder: none;\\n\\t\\tmargin: 6px -2px 0 0;\\n\\t}\\n}\\n\\n.attachments-upload-progress {\\n\\tdisplay: block;\\n\\theight: 5px;\\n\\twidth: 100%;\\n\\tposition: relative;\\n\\tborder-radius: 5px;\\n\\tbackground: var(--color-background-dark);\\n\\tmargin-top: 7px;\\n\\n\\t.attachments-upload-progress--bar {\\n\\t\\theight: 5px;\\n\\t\\tbackground: var(--color-primary-element-light);\\n\\t\\tposition: absolute;\\n\\t\\tz-index: 1;\\n\\t\\tleft: 0;\\n\\t\\tborder-radius: 5px;\\n\\t}\\n}\\n\\n.attachments-upload-progress > div {\\n\\tpadding-left: 3px;\\n}\\n\\n.new-message-attachments-action {\\n\\tdisplay: inline-block;\\n\\tvertical-align: middle;\\n\\tpadding: 18px;\\n\\topacity: 0.5;\\n}\\n\\n.attachment-inner {\\n\\tdisplay: flex;\\n    flex-wrap: wrap;\\n\\twidth: calc(100% - 90px);\\n\\tposition: relative;\\n\\n}\\n\\n/* attachment filenames */\\n.new-message-attachment-name {\\n\\ttext-overflow: ellipsis;\\n\\toverflow: hidden;\\n\\twhite-space:nowrap;\\n\\tmargin-bottom: 3px;\\n}\\n\\n.new-message-attachment-size {\\n\\tcolor: #6a6a6a;\\n\\twidth: 100%;\\n}\\n\\n/* Colour the filename with a different color during attachment upload */\\n.new-message-attachment-name.upload-ongoing {\\n\\tcolor: #0082c9;\\n}\\n\\n/* Colour the filename in red if the attachment upload failed */\\n.new-message-attachment-name.upload-warning {\\n\\tcolor: #d2322d;\\n}\\n\\n/* Red ProgressBar for failed attachment uploads */\\n.new-message-attachment-name.upload-warning .ui-progressbar-value {\\n\\tborder: 1px solid #e9322d;\\n\\tbackground: #e9322d;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".new-message-attachments--counter[data-v-1a5f00a0]{color:var(--color-text-maxcontrast);padding:10px 20px;cursor:pointer;display:flex;align-items:center}.new-message-attachments--counter--with-errors[data-v-1a5f00a0]{color:red}.new-message-attachments--list[data-v-1a5f00a0]{display:flex;flex-wrap:wrap;overflow:auto;transition:max-height .5s cubic-bezier(0, 1, 0, 1);padding:0 10px}.new-message-attachments--list.hide[data-v-1a5f00a0]{overflow:hidden;max-height:0;transition:max-height .5s cubic-bezier(0, 1, 0, 1)}.new-message-attachments--list.active[data-v-1a5f00a0]{overflow:auto;max-height:287px}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/ComposerAttachments.vue\"],\"names\":[],\"mappings\":\"AAGC,mDACC,mCAAA,CACA,iBAAA,CACA,cAAA,CACA,YAAA,CACA,kBAAA,CAEA,gEACC,SAAA,CAIF,gDACC,YAAA,CACA,cAAA,CAEA,aAAA,CACA,kDAAA,CACA,cAAA,CAEA,qDACC,eAAA,CACA,YAAA,CACA,kDAAA,CAGD,uDACC,aAAA,CACA,gBAAA\",\"sourcesContent\":[\"\\n\\n.new-message-attachments {\\n\\t&--counter {\\n\\t\\tcolor: var(--color-text-maxcontrast);\\n\\t\\tpadding: 10px 20px;\\n\\t\\tcursor:pointer;\\n\\t\\tdisplay:flex;\\n\\t\\talign-items: center;\\n\\n\\t\\t&--with-errors {\\n\\t\\t\\tcolor:red;\\n\\t\\t}\\n\\t}\\n\\n\\t&--list {\\n\\t\\tdisplay: flex;\\n\\t\\tflex-wrap: wrap;\\n\\t\\t// 2 and a half attachment height\\n\\t\\toverflow: auto;\\n\\t\\ttransition: max-height 0.5s cubic-bezier(0, 1, 0, 1);\\n\\t\\tpadding: 0 10px;\\n\\n\\t\\t&.hide {\\n\\t\\t\\toverflow: hidden;\\n\\t\\t\\tmax-height:0;\\n\\t\\t\\ttransition: max-height 0.5s cubic-bezier(0, 1, 0, 1);\\n\\t\\t}\\n\\n\\t\\t&.active {\\n\\t\\t\\toverflow: auto;\\n\\t\\t\\tmax-height: 287px;\\n\\t\\t}\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"#emptycontent[data-v-f18db8d4]{margin-top:10px;color:var(--color-text-maxcontrast);font-size:inherit;text-align:left;padding-left:16px}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/EmptyMailboxSection.vue\"],\"names\":[],\"mappings\":\"AACA,+BACC,eAAA,CACA,mCAAA,CACA,iBAAA,CACA,eAAA,CACA,iBAAA\",\"sourcesContent\":[\"\\n#emptycontent {\\n\\tmargin-top: 10px;\\n\\tcolor: var(--color-text-maxcontrast);\\n\\tfont-size: inherit;\\n\\ttext-align: left;\\n\\tpadding-left: 16px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".mail-message-account-color[data-v-433b9883]{position:absolute;left:0px;width:2px;height:69px;z-index:1}.envelope .app-content-list-item-icon[data-v-433b9883]{height:40px}.envelope__subtitle[data-v-433b9883]{display:flex;gap:4px}.envelope__subtitle__subject[data-v-433b9883]{color:var(--color-main-text);line-height:130%;overflow:hidden;text-overflow:ellipsis}.envelope__preview-text[data-v-433b9883]{color:var(--color-text-maxcontrast);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:initial}.icon-important[data-v-433b9883] path{fill:#fc0;stroke:var(--color-main-background)}.list-item:hover .icon-important[data-v-433b9883] path,.list-item:focus .icon-important[data-v-433b9883] path,.list-item.active .icon-important[data-v-433b9883] path{stroke:var(--color-background-dark)}.icon-important.app-content-list-item-star[data-v-433b9883]{background-image:none;left:7px;top:13px;opacity:1}.icon-important.app-content-list-item-star[data-v-433b9883]:hover,.icon-important.app-content-list-item-star[data-v-433b9883]:focus{opacity:.5}.app-content-list-item-select-checkbox[data-v-433b9883]{display:inline-block;vertical-align:middle;position:absolute;left:33px;top:35px;z-index:50}.list-item-style[data-v-433b9883]:not(.seen){font-weight:bold}.list-item-style.selected[data-v-433b9883]{background-color:var(--color-background-dark)}.list-item-style .draft[data-v-433b9883]{line-height:130%}.list-item-style .draft em[data-v-433b9883]{font-style:italic}.junk-icon-style[data-v-433b9883]{opacity:.2;display:flex;top:14px;left:34px;background-size:16px;height:20px;width:20px;margin:0;padding:0;position:absolute;z-index:2}.junk-icon-style[data-v-433b9883]:hover{opacity:.1}list-item-style.draft .app-content-list-item-line-two[data-v-433b9883]{font-style:italic}.icon-attachment[data-v-433b9883]{-ms-filter:\\\"progid:DXImageTransform.Microsoft.Alpha(Opacity=25)\\\";opacity:.25}.app-content-list .list-item[data-v-433b9883]{padding-right:0}.app-content-list .list-item .app-content-list-item-line-two[data-v-433b9883]{padding-right:0;margin-top:-8px}.app-content-list .list-item .app-content-list-item-menu[data-v-433b9883]{margin-right:-2px;margin-top:-8px}.app-content-list .list-item .app-content-list-item-menu[data-v-433b9883] .action-item__menu{right:7px !important}.app-content-list .list-item .app-content-list-item-menu[data-v-433b9883] .action-item__menu .action-item__menu_arrow{right:6px !important}.app-content-list .list-item .app-content-list-item-details[data-v-433b9883]{padding-right:7px}[data-v-433b9883] .action--primary .material-design-icon{margin-bottom:-14px}[data-v-433b9883] .list-item__extra{margin-left:41px !important}.tag-group__label[data-v-433b9883]{margin:0 7px;z-index:2;font-size:calc(var(--default-font-size)*.8);font-weight:bold;padding-left:2px;padding-right:2px}.tag-group__bg[data-v-433b9883]{position:absolute;width:100%;height:100%;top:0;left:0;opacity:15%}.tag-group[data-v-433b9883]{display:inline-block;border:1px solid rgba(0,0,0,0);border-radius:var(--border-radius-pill);position:relative;margin:0 1px;overflow:hidden;left:4px}[data-v-433b9883].list-item__wrapper{list-style:none}.app-content-list-item-star.favorite-icon-style[data-v-433b9883]{display:block}[data-v-433b9883].icon-important.app-content-list-item-star{position:absolute;top:14px;z-index:1}.app-content-list-item-star.favorite-icon-style[data-v-433b9883]{display:inline-block;position:absolute;margin-bottom:21px;margin-left:28px;cursor:pointer;stroke:var(--color-main-background);stroke-width:2;z-index:1}.app-content-list-item-star.favorite-icon-style[data-v-433b9883]:hover{opacity:.4}[data-v-433b9883] .svg svg{height:16px;width:16px}.seen-icon-style[data-v-433b9883]{opacity:.6}.attachment-icon-style[data-v-433b9883]{opacity:.6}[data-v-433b9883] .list-item-content__wrapper{margin-top:6px}[data-v-433b9883] .list-item__extra{margin-top:9px}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/Envelope.vue\"],\"names\":[],\"mappings\":\"AACA,6CACC,iBAAA,CACA,QAAA,CACA,SAAA,CACA,WAAA,CACA,SAAA,CAIA,uDACC,WAAA,CAGD,qCACC,YAAA,CACA,OAAA,CAEA,8CACC,4BAAA,CACA,gBAAA,CACA,eAAA,CACA,sBAAA,CAGF,yCACC,mCAAA,CACA,kBAAA,CACA,eAAA,CACA,sBAAA,CACA,mBAAA,CAKD,sCACA,SAAA,CACA,mCAAA,CAKA,sKACA,mCAAA,CAKA,4DACA,qBAAA,CACA,QAAA,CACA,QAAA,CACA,SAAA,CAEA,oIAEA,UAAA,CAKD,wDACC,oBAAA,CACA,qBAAA,CACA,iBAAA,CACA,SAAA,CACA,QAAA,CACA,UAAA,CAGD,6CACC,gBAAA,CAED,2CACC,6CAAA,CAGA,yCACC,gBAAA,CAEA,4CACC,iBAAA,CAIH,kCACC,UAAA,CACA,YAAA,CACA,QAAA,CACA,SAAA,CACA,oBAAA,CACA,WAAA,CACA,UAAA,CACA,QAAA,CACA,SAAA,CACA,iBAAA,CACA,SAAA,CACA,wCACC,UAAA,CAGF,uEACC,iBAAA,CAGD,kCACC,gEAAA,CACA,WAAA,CAKD,8CACC,eAAA,CAEA,8EACA,eAAA,CACA,eAAA,CAGA,0EACA,iBAAA,CACA,eAAA,CAEA,6FACA,oBAAA,CAEA,sHACA,oBAAA,CAKA,6EACC,iBAAA,CAID,yDACC,mBAAA,CAGF,oCACC,2BAAA,CAED,mCACC,YAAA,CACA,SAAA,CACA,2CAAA,CACA,gBAAA,CACA,gBAAA,CACA,iBAAA,CAED,gCACC,iBAAA,CACA,UAAA,CACA,WAAA,CACA,KAAA,CACA,MAAA,CACA,WAAA,CAED,4BACC,oBAAA,CACA,8BAAA,CACA,uCAAA,CACA,iBAAA,CACA,YAAA,CACA,eAAA,CACA,QAAA,CAED,qCACC,eAAA,CAED,iEACC,aAAA,CAED,4DACC,iBAAA,CACA,QAAA,CACA,SAAA,CAED,iEACC,oBAAA,CACA,iBAAA,CACA,kBAAA,CACA,gBAAA,CACA,cAAA,CACA,mCAAA,CACA,cAAA,CACA,SAAA,CACA,uEACC,UAAA,CAGF,2BACC,WAAA,CACA,UAAA,CAED,kCACC,UAAA,CAED,wCACC,UAAA,CAED,8CACC,cAAA,CAED,oCACC,cAAA\",\"sourcesContent\":[\"\\n.mail-message-account-color {\\n\\tposition: absolute;\\n\\tleft: 0px;\\n\\twidth: 2px;\\n\\theight: 69px;\\n\\tz-index: 1;\\n}\\n\\n.envelope {\\n\\t.app-content-list-item-icon {\\n\\t\\theight: 40px; // To prevent some unexpected spacing below the avatar\\n\\t}\\n\\n\\t&__subtitle {\\n\\t\\tdisplay: flex;\\n\\t\\tgap: 4px;\\n\\n\\t\\t&__subject {\\n\\t\\t\\tcolor: var(--color-main-text);\\n\\t\\t\\tline-height: 130%;\\n\\t\\t\\toverflow: hidden;\\n\\t\\t\\ttext-overflow: ellipsis;\\n\\t\\t}\\n\\t}\\n\\t&__preview-text {\\n\\t\\tcolor: var(--color-text-maxcontrast);\\n\\t\\twhite-space: nowrap;\\n\\t\\toverflow: hidden;\\n\\t\\ttext-overflow: ellipsis;\\n\\t\\tfont-weight: initial;\\n\\t}\\n}\\n\\n.icon-important {\\n\\t::v-deep path {\\n\\tfill: #ffcc00;\\n\\tstroke: var(--color-main-background);\\n\\t}\\n\\t.list-item:hover &,\\n\\t.list-item:focus &,\\n\\t.list-item.active & {\\n\\t::v-deep path {\\n\\tstroke: var(--color-background-dark);\\n\\t}\\n\\t}\\n\\n\\t// In message list, but not the one in the action menu\\n\\t&.app-content-list-item-star {\\n\\tbackground-image: none;\\n\\tleft: 7px;\\n\\ttop: 13px;\\n\\topacity: 1;\\n\\n\\t&:hover,\\n\\t&:focus {\\n\\topacity: 0.5;\\n\\t}\\n\\t}\\n}\\n\\n.app-content-list-item-select-checkbox {\\n\\tdisplay: inline-block;\\n\\tvertical-align: middle;\\n\\tposition: absolute;\\n\\tleft: 33px;\\n\\ttop: 35px;\\n\\tz-index: 50; // same as icon-starred\\n}\\n\\n.list-item-style:not(.seen) {\\n\\tfont-weight: bold;\\n}\\n.list-item-style.selected {\\n\\tbackground-color: var(--color-background-dark);\\n}\\n.list-item-style {\\n\\t.draft {\\n\\t\\tline-height: 130%;\\n\\n\\t\\tem {\\n\\t\\t\\tfont-style: italic;\\n\\t\\t}\\n\\t}\\n}\\n.junk-icon-style {\\n\\topacity: .2;\\n\\tdisplay: flex;\\n\\ttop: 14px;\\n\\tleft: 34px;\\n\\tbackground-size: 16px;\\n\\theight: 20px;\\n\\twidth: 20px;\\n\\tmargin: 0;\\n\\tpadding: 0;\\n\\tposition: absolute;\\n\\tz-index: 2;\\n\\t&:hover {\\n\\t\\topacity: .1;\\n\\t}\\n}\\nlist-item-style.draft .app-content-list-item-line-two {\\n\\tfont-style: italic;\\n}\\n\\n.icon-attachment {\\n\\t-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=25)';\\n\\topacity: 0.25;\\n}\\n\\n\\t// Fix layout of messages in list until we move to component\\n\\n.app-content-list .list-item {\\n\\tpadding-right: 0;\\n\\n\\t.app-content-list-item-line-two {\\n\\tpadding-right: 0;\\n\\tmargin-top: -8px;\\n\\t}\\n\\n\\t.app-content-list-item-menu {\\n\\tmargin-right: -2px;\\n\\tmargin-top: -8px;\\n\\n\\t::v-deep .action-item__menu {\\n\\tright: 7px !important;\\n\\n\\t.action-item__menu_arrow {\\n\\tright: 6px !important;\\n\\t}\\n\\t}\\n\\t}\\n\\n\\t.app-content-list-item-details {\\n\\t\\tpadding-right: 7px;\\n\\t\\t}\\n}\\n::v-deep .action--primary {\\n\\t.material-design-icon {\\n\\t\\tmargin-bottom: -14px;\\n\\t}\\n}\\n::v-deep .list-item__extra {\\n\\tmargin-left: 41px !important;\\n}\\n.tag-group__label {\\n\\tmargin: 0 7px;\\n\\tz-index: 2;\\n\\tfont-size: calc(var(--default-font-size) * 0.8);\\n\\tfont-weight: bold;\\n\\tpadding-left: 2px;\\n\\tpadding-right: 2px;\\n}\\n.tag-group__bg {\\n\\tposition: absolute;\\n\\twidth: 100%;\\n\\theight: 100%;\\n\\ttop: 0;\\n\\tleft: 0;\\n\\topacity: 15%;\\n}\\n.tag-group {\\n\\tdisplay: inline-block;\\n\\tborder: 1px solid transparent;\\n\\tborder-radius: var(--border-radius-pill);\\n\\tposition: relative;\\n\\tmargin: 0 1px;\\n\\toverflow: hidden;\\n\\tleft: 4px;\\n}\\n::v-deep.list-item__wrapper {\\n\\tlist-style: none;\\n}\\n.app-content-list-item-star.favorite-icon-style {\\n\\tdisplay: block;\\n}\\n::v-deep.icon-important.app-content-list-item-star {\\n\\tposition: absolute;\\n\\ttop: 14px;\\n\\tz-index: 1;\\n}\\n.app-content-list-item-star.favorite-icon-style {\\n\\tdisplay: inline-block;\\n\\tposition: absolute;\\n\\tmargin-bottom: 21px;\\n\\tmargin-left: 28px;\\n\\tcursor: pointer;\\n\\tstroke: var(--color-main-background);\\n\\tstroke-width: 2;\\n\\tz-index: 1;\\n\\t&:hover {\\n\\t\\topacity: .4;\\n\\t}\\n}\\n::v-deep .svg svg{\\n\\theight: 16px;\\n\\twidth: 16px;\\n}\\n.seen-icon-style {\\n\\topacity: .6;\\n}\\n.attachment-icon-style {\\n\\topacity: .6;\\n}\\n::v-deep .list-item-content__wrapper {\\n\\tmargin-top: 6px;\\n}\\n::v-deep .list-item__extra {\\n\\tmargin-top: 9px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"div[data-v-6568f604]{position:relative}.load-more[data-v-6568f604]{text-align:center;margin-top:10px;cursor:pointer;color:var(--color-text-maxcontrast)}.multiselect-header[data-v-6568f604]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:var(--color-main-background-translucent);position:sticky;top:0px;height:48px;z-index:100}#load-more-mail-messages[data-v-6568f604]{margin:10px auto;padding:10px;margin-top:50px;margin-bottom:50px}#load-more-mail-messages[data-v-6568f604]{padding-left:32px;background-position:9px center}.multiselect-header-enter-active[data-v-6568f604],.multiselect-header-leave-active[data-v-6568f604],.list-enter-active[data-v-6568f604],.list-leave-active[data-v-6568f604]{transition:all var(--animation-slow)}.multiselect-header-enter[data-v-6568f604],.multiselect-header-leave-to[data-v-6568f604],.list-enter[data-v-6568f604],.list-leave-to[data-v-6568f604]{opacity:0;height:0px;transform:scaleY(0)}#action-label[data-v-6568f604]{vertical-align:middle}@media only screen and (min-width: 600px){#action-label[data-v-6568f604]{display:block}}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/EnvelopeList.vue\"],\"names\":[],\"mappings\":\"AACA,qBAEC,iBAAA,CAGD,4BACC,iBAAA,CACA,eAAA,CACA,cAAA,CACA,mCAAA,CAGD,qCACC,YAAA,CACA,kBAAA,CACA,kBAAA,CACA,sBAAA,CACA,yDAAA,CACA,eAAA,CACA,OAAA,CACA,WAAA,CACA,WAAA,CAGD,0CACC,gBAAA,CACA,YAAA,CACA,eAAA,CACA,kBAAA,CAID,0CACC,iBAAA,CACA,8BAAA,CAGD,4KAIC,oCAAA,CAGD,sJAIC,SAAA,CACA,UAAA,CACA,mBAAA,CAGD,+BACC,qBAAA,CAED,0CACC,+BACC,aAAA,CAAA\",\"sourcesContent\":[\"\\ndiv {\\n\\t// So we can align the loading spinner in the Priority inbox\\n\\tposition: relative;\\n}\\n\\n.load-more {\\n\\ttext-align: center;\\n\\tmargin-top: 10px;\\n\\tcursor: pointer;\\n\\tcolor: var(--color-text-maxcontrast);\\n}\\n\\n.multiselect-header {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\talign-items: center;\\n\\tjustify-content: center;\\n\\tbackground-color: var(--color-main-background-translucent);\\n\\tposition: sticky;\\n\\ttop: 0px;\\n\\theight: 48px;\\n\\tz-index: 100;\\n}\\n\\n#load-more-mail-messages {\\n\\tmargin: 10px auto;\\n\\tpadding: 10px;\\n\\tmargin-top: 50px;\\n\\tmargin-bottom: 50px;\\n}\\n\\n/* TODO: put this in core icons.css as general rule for buttons with icons */\\n#load-more-mail-messages {\\n\\tpadding-left: 32px;\\n\\tbackground-position: 9px center;\\n}\\n\\n.multiselect-header-enter-active,\\n.multiselect-header-leave-active,\\n.list-enter-active,\\n.list-leave-active {\\n\\ttransition: all var(--animation-slow);\\n}\\n\\n.multiselect-header-enter,\\n.multiselect-header-leave-to,\\n.list-enter,\\n.list-leave-to {\\n\\topacity: 0;\\n\\theight: 0px;\\n\\ttransform: scaleY(0);\\n}\\n\\n#action-label {\\n\\tvertical-align: middle;\\n}\\n@media only screen and (min-width: 600px) {\\n\\t#action-label {\\n\\t\\tdisplay: block;\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"[data-v-5f0d120e] .modal-wrapper .modal-container{width:calc(100vw - 120px) !important;height:calc(100vh - 120px) !important;max-width:490px !important;max-height:500px !important}.modal-content[data-v-5f0d120e]{padding:30px 30px 20px !important}input[data-v-5f0d120e]{width:100%}[data-v-5f0d120e] input[type=text].multiselect__input{padding:0 !important}[data-v-5f0d120e] .multiselect__single{margin-left:-18px;width:100px}[data-v-5f0d120e] .multiselect__tags{border:none !important}.all-day[data-v-5f0d120e]{margin-left:-1px;margin-top:5px;margin-bottom:5px}.eventTitle[data-v-5f0d120e]{margin-bottom:5px}.primary[data-v-5f0d120e]{height:44px !important;float:right}[data-v-5f0d120e] .mx-datepicker{width:213px}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/EventModal.vue\"],\"names\":[],\"mappings\":\"AACA,kDACC,oCAAA,CACA,qCAAA,CACA,0BAAA,CACA,2BAAA,CAED,gCACC,iCAAA,CAED,uBACC,UAAA,CAED,sDACC,oBAAA,CAED,uCACC,iBAAA,CACA,WAAA,CAED,qCACC,sBAAA,CAED,0BACC,gBAAA,CACA,cAAA,CACA,iBAAA,CAED,6BACC,iBAAA,CAED,0BACC,sBAAA,CACA,WAAA,CAED,iCACC,WAAA\",\"sourcesContent\":[\"\\n::v-deep .modal-wrapper .modal-container {\\n\\twidth: calc(100vw - 120px) !important;\\n\\theight: calc(100vh - 120px) !important;\\n\\tmax-width: 490px !important;\\n\\tmax-height: 500px !important;\\n}\\n.modal-content {\\n\\tpadding: 30px 30px 20px !important;\\n}\\ninput {\\n\\twidth: 100%;\\n}\\n::v-deep input[type='text'].multiselect__input {\\n\\tpadding: 0 !important;\\n}\\n::v-deep .multiselect__single {\\n\\tmargin-left: -18px;\\n\\twidth: 100px;\\n}\\n::v-deep .multiselect__tags {\\n\\tborder: none !important;\\n}\\n.all-day {\\n\\tmargin-left: -1px;\\n\\tmargin-top: 5px;\\n\\tmargin-bottom: 5px;\\n}\\n.eventTitle {\\n\\tmargin-bottom: 5px;\\n}\\n.primary {\\n\\theight: 44px !important;\\n\\tfloat: right;\\n}\\n::v-deep .mx-datepicker {\\n\\twidth: 213px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".imip[data-v-17f3fe21]{display:flex;flex-direction:column;border:solid 2px var(--color-border);border-radius:var(--border-radius-large);padding:10px}.imip__type[data-v-17f3fe21]{display:flex;gap:5px;margin-left:36px}.imip__more-options[data-v-17f3fe21]{display:flex;flex-direction:column;margin-top:15px;gap:10px}.imip__more-options__row[data-v-17f3fe21]{display:flex;flex-direction:column}.imip__more-options__row--calendar[data-v-17f3fe21]{display:flex;width:100%}.imip__more-options__row--calendar__multiselect[data-v-17f3fe21]{width:100%}.imip__more-options__row--calendar__multiselect[data-v-17f3fe21] .calendar-picker-option__label{max-width:unset !important}.imip__more-options__row--comment textarea[data-v-17f3fe21]{display:block;width:100%}.imip__actions[data-v-17f3fe21]{margin-top:15px;margin-left:36px}.imip__actions--buttons[data-v-17f3fe21]{display:flex}.imip__actions--hint[data-v-17f3fe21]{font-style:italic}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/Imip.vue\"],\"names\":[],\"mappings\":\"AACA,uBACC,YAAA,CACA,qBAAA,CACA,oCAAA,CACA,wCAAA,CACA,YAAA,CAEA,6BACC,YAAA,CACA,OAAA,CACA,gBAAA,CAGD,qCACC,YAAA,CACA,qBAAA,CACA,eAAA,CACA,QAAA,CAEA,0CACC,YAAA,CACA,qBAAA,CAEA,oDACC,YAAA,CACA,UAAA,CAEA,iEACC,UAAA,CAEA,gGACC,0BAAA,CAMF,4DACC,aAAA,CACA,UAAA,CAMJ,gCACC,eAAA,CACA,gBAAA,CAEA,yCACC,YAAA,CAGD,sCACC,iBAAA\",\"sourcesContent\":[\"\\n.imip {\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\tborder: solid 2px var(--color-border);\\n\\tborder-radius: var(--border-radius-large);\\n\\tpadding: 10px;\\n\\n\\t&__type {\\n\\t\\tdisplay: flex;\\n\\t\\tgap: 5px;\\n\\t\\tmargin-left: 36px;\\n\\t}\\n\\n\\t&__more-options {\\n\\t\\tdisplay: flex;\\n\\t\\tflex-direction: column;\\n\\t\\tmargin-top: 15px;\\n\\t\\tgap: 10px;\\n\\n\\t\\t&__row {\\n\\t\\t\\tdisplay: flex;\\n\\t\\t\\tflex-direction: column;\\n\\n\\t\\t\\t&--calendar {\\n\\t\\t\\t\\tdisplay: flex;\\n\\t\\t\\t\\twidth: 100%;\\n\\n\\t\\t\\t\\t&__multiselect {\\n\\t\\t\\t\\t\\twidth: 100%;\\n\\n\\t\\t\\t\\t\\t::v-deep .calendar-picker-option__label {\\n\\t\\t\\t\\t\\t\\tmax-width: unset !important;\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\n\\t\\t\\t&--comment {\\n\\t\\t\\t\\ttextarea {\\n\\t\\t\\t\\t\\tdisplay: block;\\n\\t\\t\\t\\t\\twidth: 100%;\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\\n\\t&__actions {\\n\\t\\tmargin-top: 15px;\\n\\t\\tmargin-left: 36px;\\n\\n\\t\\t&--buttons {\\n\\t\\t\\tdisplay: flex;\\n\\t\\t}\\n\\n\\t\\t&--hint {\\n\\t\\t\\tfont-style: italic;\\n\\t\\t}\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".fade-enter-active[data-v-c46faebc],.fade-leave-active[data-v-c46faebc]{transition:opacity .5s}.fade-enter[data-v-c46faebc],.fade-leave-to[data-v-c46faebc]{opacity:0}.wrapper[data-v-c46faebc]{display:flex;justify-content:space-around;flex-direction:column;flex:1 auto}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/Loading.vue\"],\"names\":[],\"mappings\":\"AACA,wEAEC,sBAAA,CAED,6DAEC,SAAA,CAGD,0BACC,YAAA,CACA,4BAAA,CACA,qBAAA,CACA,WAAA\",\"sourcesContent\":[\"\\n.fade-enter-active,\\n.fade-leave-active {\\n\\ttransition: opacity 0.5s;\\n}\\n.fade-enter,\\n.fade-leave-to {\\n\\topacity: 0;\\n}\\n\\n.wrapper {\\n\\tdisplay: flex;\\n\\tjustify-content: space-around;\\n\\tflex-direction: column;\\n\\tflex: 1 auto;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".nameimportant[data-v-228917a9] #load-more-mail-messages{margin-top:0;margin-bottom:8px}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/Mailbox.vue\"],\"names\":[],\"mappings\":\"AAGC,yDACC,YAAA,CACA,iBAAA\",\"sourcesContent\":[\"\\n// Fix vertical space between sections in priority inbox\\n.nameimportant {\\n\\t::v-deep #load-more-mail-messages {\\n\\t\\tmargin-top: 0;\\n\\t\\tmargin-bottom: 8px;\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".important-info[data-v-0376038e]{max-width:230px;padding:16px}.app-content-list[data-v-0376038e]{display:flex}.app-content-list-item[data-v-0376038e]:hover{background:rgba(0,0,0,0)}.button[data-v-0376038e]{background-color:var(--color-main-background);margin-bottom:3px;right:2px}.button[data-v-0376038e]:hover,.button[data-v-0376038e]:focus{background-color:var(--color-background-dark)}#app-content-wrapper[data-v-0376038e]{display:flex}[data-v-0376038e] .button-vue--vue-secondary{box-shadow:none}.envelope-list[data-v-0376038e]{overflow-y:auto;padding:0 4px}.information-icon[data-v-0376038e]{opacity:.7}.header__button[data-v-0376038e]{display:flex;flex:1 0 0;flex-direction:column;height:calc(100vh - var(--header-height))}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/MailboxThread.vue\"],\"names\":[],\"mappings\":\"AAKA,iCACC,eAAA,CACA,YAAA,CAGD,mCAEC,YAAA,CAGD,8CACC,wBAAA,CAGD,yBACC,6CAAA,CACA,iBAAA,CACA,SAAA,CAEA,8DAEC,6CAAA,CAIF,sCACC,YAAA,CAED,6CACC,eAAA,CAED,gCACC,eAAA,CACA,aAAA,CAED,mCACC,UAAA,CAED,iCACC,YAAA,CACA,UAAA,CACA,qBAAA,CACA,yCAAA\",\"sourcesContent\":[\"\\n.v-popover > .trigger > {\\n\\tz-index: 1;\\n}\\n\\n.important-info {\\n\\tmax-width: 230px;\\n\\tpadding: 16px;\\n}\\n\\n.app-content-list {\\n\\t// Required for centering the loading indicator\\n\\tdisplay: flex;\\n}\\n\\n.app-content-list-item:hover {\\n\\tbackground: transparent;\\n}\\n\\n.button {\\n\\tbackground-color: var(--color-main-background);\\n\\tmargin-bottom: 3px;\\n\\tright: 2px;\\n\\n\\t&:hover,\\n\\t&:focus {\\n\\t\\tbackground-color: var(--color-background-dark);\\n\\t}\\n}\\n\\n#app-content-wrapper {\\n\\tdisplay: flex;\\n}\\n::v-deep .button-vue--vue-secondary {\\n\\tbox-shadow: none;\\n}\\n.envelope-list {\\n\\toverflow-y: auto;\\n\\tpadding: 0 4px;\\n}\\n.information-icon {\\n\\topacity: .7;\\n}\\n.header__button {\\n\\tdisplay: flex;\\n\\tflex: 1 0 0;\\n\\tflex-direction: column;\\n\\theight: calc(100vh - var(--header-height));\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".mail-message-has-mdn-request[data-v-3bf60f28]{white-space:normal}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/MdnRequest.vue\"],\"names\":[],\"mappings\":\"AACA,+CACC,kBAAA\",\"sourcesContent\":[\"\\n.mail-message-has-mdn-request {\\n\\twhite-space: normal;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".source-modal[data-v-49eb8878] .modal-container{height:800px}.source-modal .source-modal-content[data-v-49eb8878]{width:100%;height:100%;overflow-y:scroll !important}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/MenuEnvelope.vue\"],\"names\":[],\"mappings\":\"AAEC,gDACC,YAAA,CAGD,qDACC,UAAA,CACA,WAAA,CACA,4BAAA\",\"sourcesContent\":[\"\\n.source-modal {\\n\\t::v-deep .modal-container {\\n\\t\\theight: 800px;\\n\\t}\\n\\n\\t.source-modal-content {\\n\\t\\twidth: 100%;\\n\\t\\theight: 100%;\\n\\t\\toverflow-y: scroll !important;\\n\\t}\\n}\\n\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".v-popover>.trigger>.action-item[data-v-1be9f328]{border-radius:22px;background-color:var(--color-background-darker)}.message-imip[data-v-1be9f328]{padding:5px 10px}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/Message.vue\"],\"names\":[],\"mappings\":\"AACA,kDACC,kBAAA,CACA,+CAAA,CAGD,+BACC,gBAAA\",\"sourcesContent\":[\"\\n.v-popover > .trigger > .action-item {\\n\\tborder-radius: 22px;\\n\\tbackground-color: var(--color-background-darker);\\n}\\n\\n.message-imip {\\n\\tpadding: 5px 10px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".attachment[data-v-78709c6d]{height:auto;display:inline-flex;flex-wrap:wrap;justify-content:space-between;width:calc(33.3334% - 4px);margin:2px;padding:5px;position:relative;align-items:center}.attachment[data-v-78709c6d]:hover{border-radius:6px}.attachment[data-v-78709c6d]:hover,.attachment span[data-v-78709c6d]:hover{background-color:var(--color-background-hover)}.attachment:hover.message-attachment--can-preview *[data-v-78709c6d],.attachment span:hover.message-attachment--can-preview *[data-v-78709c6d]{cursor:pointer}.mail-attachment-img--wrapper[data-v-78709c6d]{height:44px;width:44px;overflow:hidden;display:flex;justify-content:center;position:relative;border-radius:6px}.mail-attachment-img--wrapper img[data-v-78709c6d]{transition:.3s;opacity:1;width:44px;height:44px}.mail-attachment-img--wrapper .mail-attached-image[data-v-78709c6d]{width:100px}.mail-attached--content[data-v-78709c6d]{width:calc(100% - 100px);display:flex;flex-direction:column}.mail-attached-image[data-v-78709c6d]{display:block;max-width:100%;border-radius:var(--border-radius)}.attachment-import-popover[data-v-78709c6d]{right:32px;top:42px}.mail-attached-image[data-v-78709c6d]:hover{opacity:.8}.attachment-name[data-v-78709c6d]{display:inline-block;width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;vertical-align:middle}.attachment-size[data-v-78709c6d]{-ms-filter:\\\"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)\\\";opacity:.5;font-size:12px;line-height:14px}.attachment-icon[data-v-78709c6d]{vertical-align:middle;text-align:left;margin-bottom:20px}.action-item[data-v-78709c6d]{transition:.4s}.mail-message-attachments[data-v-78709c6d]{overflow-x:auto;overflow-y:auto}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/MessageAttachment.vue\"],\"names\":[],\"mappings\":\"AAEA,6BACC,WAAA,CACG,mBAAA,CACA,cAAA,CACA,6BAAA,CACA,0BAAA,CACA,UAAA,CACH,WAAA,CACG,iBAAA,CACA,kBAAA,CAEH,mCACC,iBAAA,CAIF,2EAEC,8CAAA,CAEA,+IACC,cAAA,CAIF,+CACC,WAAA,CACA,UAAA,CACA,eAAA,CACA,YAAA,CACA,sBAAA,CACA,iBAAA,CACA,iBAAA,CAEA,mDACC,cAAA,CACA,SAAA,CACA,UAAA,CACA,WAAA,CAGD,oEACC,WAAA,CAIF,yCACC,wBAAA,CACA,YAAA,CACG,qBAAA,CAGJ,sCACC,aAAA,CACA,cAAA,CACA,kCAAA,CAED,4CACC,UAAA,CACA,QAAA,CAED,4CACC,UAAA,CAED,kCACC,oBAAA,CACA,UAAA,CACA,kBAAA,CACA,eAAA,CACA,sBAAA,CACA,qBAAA,CAID,kCACC,gEAAA,CACA,UAAA,CACA,cAAA,CACA,gBAAA,CAGD,kCACC,qBAAA,CACA,eAAA,CACA,kBAAA,CAED,8BACC,cAAA,CAED,2CACC,eAAA,CACA,eAAA\",\"sourcesContent\":[\"\\n\\n.attachment {\\n\\theight: auto;\\n    display: inline-flex;\\n    flex-wrap: wrap;\\n    justify-content: space-between;\\n    width: calc(33.3334% - 4px);\\n    margin: 2px;\\n\\tpadding: 5px;\\n    position: relative;\\n    align-items: center;\\n\\n\\t&:hover {\\n\\t\\tborder-radius: 6px;\\n\\t}\\n}\\n\\n.attachment:hover,\\n.attachment span:hover {\\n\\tbackground-color: var(--color-background-hover);\\n\\n\\t&.message-attachment--can-preview * {\\n\\t\\tcursor: pointer;\\n\\t}\\n}\\n\\n.mail-attachment-img--wrapper {\\n\\theight: 44px;\\n\\twidth: 44px;\\n\\toverflow: hidden;\\n\\tdisplay:flex;\\n\\tjustify-content: center;\\n\\tposition: relative;\\n\\tborder-radius: 6px;\\n\\n\\timg {\\n\\t\\ttransition: 0.3s;\\n\\t\\topacity: 1;\\n\\t\\twidth: 44px;\\n\\t\\theight: 44px;\\n\\t}\\n\\n\\t.mail-attached-image {\\n\\t\\twidth: 100px;\\n\\t}\\n}\\n\\n.mail-attached--content {\\n\\twidth: calc(100% - 100px);\\n\\tdisplay: flex;\\n    flex-direction: column;\\n}\\n\\n.mail-attached-image {\\n\\tdisplay: block;\\n\\tmax-width: 100%;\\n\\tborder-radius: var(--border-radius);\\n}\\n.attachment-import-popover {\\n\\tright: 32px;\\n\\ttop: 42px;\\n}\\n.mail-attached-image:hover {\\n\\topacity: 0.8;\\n}\\n.attachment-name {\\n\\tdisplay: inline-block;\\n\\twidth: 100%;\\n\\twhite-space: nowrap;\\n\\toverflow: hidden;\\n\\ttext-overflow: ellipsis;\\n\\tvertical-align: middle;\\n}\\n\\n/* show attachment size less prominent */\\n.attachment-size {\\n\\t-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=50)';\\n\\topacity: 0.5;\\n\\tfont-size: 12px;\\n\\tline-height: 14px;\\n}\\n\\n.attachment-icon {\\n\\tvertical-align: middle;\\n\\ttext-align: left;\\n\\tmargin-bottom: 20px;\\n}\\n.action-item {\\n\\ttransition: 0.4s;\\n}\\n.mail-message-attachments {\\n\\toverflow-x: auto;\\n\\toverflow-y: auto;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".attachments{width:100%;box-sizing:border-box;position:relative;display:flex;flex-wrap:wrap;margin:10px 0}.attachments-button-wrapper{text-align:center;display:flex;align-items:center}.show-more-attachments{display:flex;align-items:center;cursor:pointer;padding:2px 0;color:var(--color-text-lighter)}.show-more-attachments span{cursor:pointer}.show-more-attachments:hover{color:var(--color-main-text)}@keyframes spin{0%{transform:rotate(0deg)}50%{transform:rotate(180deg)}100%{transform:rotate(360deg)}}.spin{animation:spin 1s linear infinite}.attachment-link{cursor:pointer;display:flex;align-items:center;color:var(--color-text-lighter)}.attachment-link:hover{color:var(--color-main-text)}.attachment-link span{margin:0 4px 0 16px}.oc-dialog{z-index:10000000}.mail-message-attachments{display:flex;flex-wrap:wrap;padding:10px 6px 10px 46px;margin-top:4px;margin-bottom:-40px;position:sticky;bottom:0;background:linear-gradient(0deg, var(--color-main-background), var(--color-main-background) 90%, rgba(255, 255, 255, 0))}.mail-message-attachments--wrapper{display:flex;width:100%;height:auto;overflow:hidden;max-height:none}.mail-message-attachments--wrapper.hide{display:flex;max-height:70px}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/MessageAttachments.vue\"],\"names\":[],\"mappings\":\"AACA,aACC,UAAA,CACG,qBAAA,CACA,iBAAA,CACA,YAAA,CACA,cAAA,CACA,aAAA,CAKJ,4BACC,iBAAA,CACA,YAAA,CACA,kBAAA,CAGD,uBACC,YAAA,CACG,kBAAA,CACH,cAAA,CACA,aAAA,CACA,+BAAA,CAEA,4BACC,cAAA,CAGD,6BACC,4BAAA,CAIF,gBACE,GACE,sBAAA,CAEF,IACE,wBAAA,CAEF,KACE,wBAAA,CAAA,CAIJ,MACE,iCAAA,CAGF,iBACC,cAAA,CACA,YAAA,CACA,kBAAA,CACA,+BAAA,CAEA,uBACC,4BAAA,CAGD,sBACC,mBAAA,CAIF,WACC,gBAAA,CAED,0BACC,YAAA,CACA,cAAA,CACA,0BAAA,CACA,cAAA,CACA,mBAAA,CACA,eAAA,CACA,QAAA,CACA,wHAAA,CAED,mCACC,YAAA,CACA,UAAA,CACA,WAAA,CACA,eAAA,CACA,eAAA,CAGD,wCACC,YAAA,CACA,eAAA\",\"sourcesContent\":[\"\\n.attachments {\\n\\twidth: 100%;\\n    box-sizing: border-box;\\n    position: relative;\\n    display: flex;\\n    flex-wrap: wrap;\\n    margin: 10px 0;\\n}\\n\\n/* show icon + text for Download all button\\n\\t\\tas well as when there is only one attachment */\\n.attachments-button-wrapper {\\n\\ttext-align: center;\\n\\tdisplay: flex;\\n\\talign-items: center;\\n}\\n\\n.show-more-attachments {\\n\\tdisplay: flex;\\n    align-items: center;\\n\\tcursor: pointer;\\n\\tpadding: 2px 0;\\n\\tcolor: var(--color-text-lighter);\\n\\n\\tspan {\\n\\t\\tcursor: pointer;\\n\\t}\\n\\n\\t&:hover {\\n\\t\\tcolor: var(--color-main-text);\\n\\t}\\n}\\n\\n@keyframes spin {\\n  0% {\\n    transform: rotate(0deg);\\n  }\\n  50% {\\n    transform: rotate(180deg);\\n  }\\n  100% {\\n    transform: rotate(360deg);\\n  }\\n}\\n\\n.spin {\\n  animation: spin 1s linear infinite;\\n}\\n\\n.attachment-link {\\n\\tcursor: pointer;\\n\\tdisplay:flex;\\n\\talign-items: center;\\n\\tcolor: var(--color-text-lighter);\\n\\n\\t&:hover {\\n\\t\\tcolor: var(--color-main-text);\\n\\t}\\n\\n\\tspan {\\n\\t\\tmargin: 0 4px 0 16px;\\n\\t}\\n}\\n\\n.oc-dialog {\\n\\tz-index: 10000000;\\n}\\n.mail-message-attachments {\\n\\tdisplay:flex;\\n\\tflex-wrap: wrap;\\n\\tpadding: 10px 6px 10px 46px;\\n\\tmargin-top: 4px;\\n\\tmargin-bottom: -40px;\\n\\tposition:sticky;\\n\\tbottom:0;\\n\\tbackground: linear-gradient(0deg, var(--color-main-background), var(--color-main-background) 90%, rgba(255, 255, 255, 0));\\n}\\n.mail-message-attachments--wrapper {\\n\\tdisplay:flex;\\n\\twidth:100%;\\n\\theight:auto;\\n\\toverflow: hidden;\\n\\tmax-height: none;\\n}\\n\\n.mail-message-attachments--wrapper.hide {\\n\\tdisplay:flex;\\n\\tmax-height: 70px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"#mail-content[data-v-f1093178]{margin-left:50px;margin-top:2px;display:flex;flex-direction:column;height:100%;background-color:#fff}#mail-message-has-blocked-content[data-v-f1093178]{margin-left:10px;color:var(--color-text-maxcontrast) !important}#message-container[data-v-f1093178]{flex:1;display:flex;background-color:#fff}#message-container.scroll[data-v-f1093178]{max-height:50vh;overflow-y:auto}[data-v-f1093178] .button-vue__text{border:none !important;font-weight:normal !important;padding-left:14px !important;padding-right:10px !important;text-decoration:underline !important}.message-frame[data-v-f1093178]{width:100%}[data-v-f1093178] .button-vue__icon{display:none !important}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/MessageHTMLBody.vue\"],\"names\":[],\"mappings\":\"AAEA,+BACC,gBAAA,CACA,cAAA,CACA,YAAA,CACA,qBAAA,CACA,WAAA,CACA,qBAAA,CAED,mDACC,gBAAA,CACA,8CAAA,CAGD,oCACC,MAAA,CACA,YAAA,CACA,qBAAA,CAGA,2CACC,eAAA,CACA,eAAA,CAGF,oCACC,sBAAA,CACA,6BAAA,CACA,4BAAA,CACA,6BAAA,CACA,oCAAA,CAED,gCACC,UAAA,CAED,oCACC,uBAAA\",\"sourcesContent\":[\"\\n// account for 8px margin on iframe body\\n#mail-content {\\n\\tmargin-left: 50px;\\n\\tmargin-top: 2px;\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\theight: 100%;\\n\\tbackground-color: #FFFFFF;\\n}\\n#mail-message-has-blocked-content {\\n\\tmargin-left: 10px;\\n\\tcolor: var(--color-text-maxcontrast) !important;\\n}\\n\\n#message-container {\\n\\tflex: 1;\\n\\tdisplay: flex;\\n\\tbackground-color: #FFFFFF;\\n\\n\\t// TODO: collapse quoted text and remove inner scrollbar\\n\\t&.scroll {\\n\\t\\tmax-height: 50vh;\\n\\t\\toverflow-y: auto;\\n\\t}\\n}\\n::v-deep .button-vue__text {\\n\\tborder: none !important;\\n\\tfont-weight: normal !important;\\n\\tpadding-left: 14px !important;\\n\\tpadding-right: 10px !important;\\n\\ttext-decoration: underline !important;\\n}\\n.message-frame {\\n\\twidth: 100%;\\n}\\n::v-deep .button-vue__icon {\\n\\tdisplay: none !important;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".quoted-text{color:var(--color-text-maxcontrast) summary;color-cursor:pointer}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/MessagePlainTextBody.vue\"],\"names\":[],\"mappings\":\"AACA,aACC,2CAAA,CAGC,oBAAA\",\"sourcesContent\":[\"\\n.quoted-text {\\n\\tcolor: var(--color-text-maxcontrast)\\n\\n\\tsummary {\\n\\t\\tcursor: pointer\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".message-container[data-v-5820b73d],.mail-signature[data-v-5820b73d]{white-space:pre-wrap}.mail-signature[data-v-5820b73d],.quoted[data-v-5820b73d]{color:var(--color-text-maxcontrast) summary;color-cursor:pointer}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/MessagePlainTextBody.vue\"],\"names\":[],\"mappings\":\"AACA,qEAEC,oBAAA,CAED,0DACC,2CAAA,CAGC,oBAAA\",\"sourcesContent\":[\"\\n.message-container,\\n.mail-signature {\\n\\twhite-space: pre-wrap;\\n}\\n.mail-signature, .quoted {\\n\\tcolor: var(--color-text-maxcontrast)\\n\\n\\tsummary {\\n\\t\\tcursor: pointer\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".header[data-v-4c3b0c54]{display:flex;align-items:center;padding:8px 8px 8px 48px;gap:4px;height:61px;border-right:1px solid var(--color-border)}.refresh__button[data-v-4c3b0c54]{background-color:rgba(0,0,0,0)}.new-message-button[data-v-4c3b0c54]{background-image:var(--gradient-primary-background)}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/NewMessageButtonHeader.vue\"],\"names\":[],\"mappings\":\"AACA,yBACC,YAAA,CACA,kBAAA,CACA,wBAAA,CACA,OAAA,CACA,WAAA,CACA,0CAAA,CAED,kCACC,8BAAA,CAED,qCACC,mDAAA\",\"sourcesContent\":[\"\\n.header {\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tpadding: 8px 8px 8px 48px;\\n\\tgap: 4px;\\n\\theight: 61px;\\n\\tborder-right: 1px solid var(--color-border)\\n}\\n.refresh__button {\\n\\tbackground-color: transparent;\\n}\\n.new-message-button {\\n\\tbackground-image: var(--gradient-primary-background);\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"@media only screen and (max-width: 600px){[data-v-0ee88179] .modal-container{max-width:80%}}[data-v-0ee88179] .modal-wrapper .modal-container{overflow-y:auto !important;overflow-x:auto !important;height:90%;max-height:700px !important}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/NewMessageModal.vue\"],\"names\":[],\"mappings\":\"AACA,0CACC,mCACC,aAAA,CAAA,CAGF,kDACC,0BAAA,CACA,0BAAA,CAEA,UAAA,CAEA,2BAAA\",\"sourcesContent\":[\"\\n@media only screen and (max-width: 600px) {\\n\\t::v-deep .modal-container {\\n\\t\\tmax-width: 80%;\\n\\t}\\n}\\n::v-deep .modal-wrapper .modal-container {\\n\\toverflow-y: auto !important;\\n\\toverflow-x: auto !important;\\n\\t// from original Modal max-height\\n\\theight: 90%;\\n\\t// Max editor + modal height\\n\\tmax-height: 700px !important;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".header__button[data-v-513c427a]{display:flex;flex:1px 0 0;flex-direction:column;height:calc(100vh - var(--header-height))}[data-v-513c427a] .button-vue--vue-secondary{box-shadow:none}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/Outbox.vue\"],\"names\":[],\"mappings\":\"AACA,iCACC,YAAA,CACA,YAAA,CACA,qBAAA,CACA,yCAAA,CAGD,6CACC,eAAA\",\"sourcesContent\":[\"\\n.header__button {\\n\\tdisplay: flex;\\n\\tflex: 1px 0 0;\\n\\tflex-direction: column;\\n\\theight: calc(100vh - var(--header-height));\\n\\n}\\n::v-deep .button-vue--vue-secondary {\\n\\tbox-shadow: none;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".outbox-message[data-v-544e29da]{list-style:none}.outbox-message.active[data-v-544e29da]{background-color:var(--color-background-dark);border-radius:16px}.outbox-message .account-color[data-v-544e29da]{position:absolute;left:0;width:2px;height:69px;z-index:1}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/OutboxMessageListItem.vue\"],\"names\":[],\"mappings\":\"AACA,iCACC,eAAA,CACA,wCACC,6CAAA,CACA,kBAAA,CAGD,gDACC,iBAAA,CACA,MAAA,CACA,SAAA,CACA,WAAA,CACA,SAAA\",\"sourcesContent\":[\"\\n.outbox-message {\\n\\tlist-style: none;\\n\\t&.active {\\n\\t\\tbackground-color: var(--color-background-dark);\\n\\t\\tborder-radius: 16px;\\n\\t}\\n\\n\\t.account-color {\\n\\t\\tposition: absolute;\\n\\t\\tleft: 0;\\n\\t\\twidth: 2px;\\n\\t\\theight: 69px;\\n\\t\\tz-index: 1;\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".user-bubble__title[data-v-1393430a]{max-width:30vw}.user-bubble-email[data-v-1393430a]{margin:10px}.contact-menu[data-v-1393430a]{display:flex;flex-wrap:wrap}.contact-popover[data-v-1393430a]{display:inline-block}.contact-wrapper[data-v-1393430a]{padding:10px;min-width:300px}.contact-wrapper a[data-v-1393430a]{opacity:.7}.contact-wrapper a[data-v-1393430a]:hover{opacity:1}.contact-input-wrapper[data-v-1393430a]{margin-top:10px;margin-bottom:10px}.contact-input-wrapper input[data-v-1393430a],.contact-input-wrapper .multiselect[data-v-1393430a]{width:100%}.contact-existing[data-v-1393430a]{font-size:small !important}[data-v-1393430a] .button-vue__text{font-weight:normal !important}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/RecipientBubble.vue\"],\"names\":[],\"mappings\":\"AACA,qCACC,cAAA,CAED,oCACC,WAAA,CAGD,+BACC,YAAA,CACA,cAAA,CAED,kCACC,oBAAA,CAED,kCACC,YAAA,CACA,eAAA,CAEA,oCACC,UAAA,CAED,0CACC,SAAA,CAGF,wCACC,eAAA,CACG,kBAAA,CACH,mGAEC,UAAA,CAIF,mCACC,0BAAA,CAED,oCACC,6BAAA\",\"sourcesContent\":[\"\\n.user-bubble__title {\\n\\tmax-width: 30vw;\\n}\\n.user-bubble-email {\\n\\tmargin: 10px;\\n}\\n\\n.contact-menu {\\n\\tdisplay: flex;\\n\\tflex-wrap: wrap;\\n}\\n.contact-popover {\\n\\tdisplay: inline-block;\\n}\\n.contact-wrapper {\\n\\tpadding:10px;\\n\\tmin-width: 300px;\\n\\n\\ta {\\n\\t\\topacity: 0.7;\\n\\t}\\n\\ta:hover {\\n\\t\\topacity: 1;\\n\\t}\\n}\\n.contact-input-wrapper {\\n\\tmargin-top: 10px;\\n    margin-bottom: 10px;\\n\\tinput,\\n\\t.multiselect {\\n\\t\\twidth: 100%;\\n\\t}\\n}\\n\\n.contact-existing {\\n\\tfont-size: small !important;\\n}\\n::v-deep .button-vue__text {\\n\\tfont-weight: normal !important;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".multiselect .multiselect__tags .multiselect__tags-wrap .multiselect__tag--recipient[data-v-62281f92]{padding:0;border-radius:25px;border-color:rgba(0,0,0,0);background-color:var(--color-background-dark);height:24px}.multiselect .multiselect__tags .multiselect__tags-wrap .multiselect__tag--recipient>span.option[data-v-62281f92]{margin-left:0}.multiselect__tag--recipient .action-item--single[data-v-62281f92]{width:auto;min-width:24px;height:24px;position:absolute;right:-7px}.multiselect__tag--recipient .action-item--single .material-design-icon[data-v-62281f92]{height:24px;width:24px}.delete-recipient[data-v-62281f92]{display:inline-flex;align-items:center;justify-content:center;cursor:pointer;height:24px;width:24px;min-width:24px;margin-left:6px;border-radius:50%}.delete-recipient[data-v-62281f92]:hover{background:var(--color-background-darker)}[data-v-62281f92] .option{margin-left:10px}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/RecipientListItem.vue\"],\"names\":[],\"mappings\":\"AACA,sGAIC,SAAA,CACA,kBAAA,CACA,0BAAA,CACA,6CAAA,CACA,WAAA,CAEA,kHACC,aAAA,CAGF,mEACC,UAAA,CACA,cAAA,CACA,WAAA,CACA,iBAAA,CACA,UAAA,CAED,yFACC,WAAA,CACA,UAAA,CAED,mCACC,mBAAA,CACA,kBAAA,CACA,sBAAA,CACA,cAAA,CACA,WAAA,CACA,UAAA,CACA,cAAA,CACA,eAAA,CACA,iBAAA,CAEA,yCACC,yCAAA,CAGF,0BACC,gBAAA\",\"sourcesContent\":[\"\\n.multiselect\\n\\t.multiselect__tags\\n\\t.multiselect__tags-wrap\\n\\t.multiselect__tag--recipient {\\n\\tpadding: 0;\\n\\tborder-radius: 25px;\\n\\tborder-color: transparent;\\n\\tbackground-color: var(--color-background-dark);\\n\\theight: 24px;\\n\\n\\t& > span.option {\\n\\t\\tmargin-left: 0\\n\\t}\\n}\\n.multiselect__tag--recipient .action-item--single {\\n\\twidth: auto;\\n\\tmin-width: 24px;\\n\\theight: 24px;\\n\\tposition: absolute;\\n\\tright: -7px;\\n}\\n.multiselect__tag--recipient .action-item--single .material-design-icon {\\n\\theight: 24px;\\n\\twidth: 24px;\\n}\\n.delete-recipient {\\n\\tdisplay: inline-flex;\\n\\talign-items: center;\\n\\tjustify-content: center;\\n\\tcursor: pointer;\\n\\theight: 24px;\\n\\twidth: 24px;\\n\\tmin-width: 24px;\\n\\tmargin-left: 6px;\\n\\tborder-radius: 50%;\\n\\n\\t&:hover {\\n\\t\\tbackground: var(--color-background-darker);\\n\\t}\\n}\\n::v-deep .option {\\n\\tmargin-left: 10px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"[data-v-2a5ebd9f] .modal-content{padding:0 20px 20px 20px;max-height:calc(100vh - 210px);overflow-y:auto}[data-v-2a5ebd9f] .modal-container{width:auto !important}.tag-title[data-v-2a5ebd9f]{margin-top:20px;margin-left:10px}.tag-group[data-v-2a5ebd9f]{display:block;position:relative;margin:0 1px;overflow:hidden;left:4px}.tag-actions[data-v-2a5ebd9f]{background-color:rgba(0,0,0,0);border:none;float:right}.tag-actions[data-v-2a5ebd9f]:hover,.tag-actions[data-v-2a5ebd9f]:focus{background-color:var(--color-border-dark)}.tag-group__label[data-v-2a5ebd9f]{z-index:2;font-weight:bold;border:none;background-color:rgba(0,0,0,0);padding-left:10px;padding-right:10px;overflow:hidden;text-overflow:ellipsis;max-width:94px}.app-navigation-entry-bullet-wrapper[data-v-2a5ebd9f]{width:44px;height:44px;display:inline-block;position:absolute;list-style:none}.app-navigation-entry-bullet-wrapper .color0[data-v-2a5ebd9f]{width:30px !important;height:30px;border-radius:50%;background-size:14px;margin-top:-65px;margin-left:180px;z-index:2;display:flex;position:relative}.icon-colorpicker[data-v-2a5ebd9f]{background-image:var(--icon-add-fff)}.tagButton[data-v-2a5ebd9f]{display:inline-block;margin-left:10px}.action-item[data-v-2a5ebd9f]{right:8px;float:right}.create-tag[data-v-2a5ebd9f]{list-style:none}@media only screen and (max-width: 512px){[data-v-2a5ebd9f] .modal-container{top:100px !important;max-height:calc(100vh - 170px) !important}}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/TagModal.vue\"],\"names\":[],\"mappings\":\"AACA,iCACC,wBAAA,CACA,8BAAA,CACA,eAAA,CAED,mCACC,qBAAA,CAED,4BACC,eAAA,CACA,gBAAA,CAED,4BACC,aAAA,CACA,iBAAA,CACA,YAAA,CACA,eAAA,CACA,QAAA,CAED,8BACC,8BAAA,CACA,WAAA,CACA,WAAA,CACA,wEAEC,yCAAA,CAGF,mCACC,SAAA,CACA,gBAAA,CACA,WAAA,CACA,8BAAA,CACA,iBAAA,CACA,kBAAA,CACA,eAAA,CACA,sBAAA,CACA,cAAA,CAED,sDACC,UAAA,CACA,WAAA,CACA,oBAAA,CACA,iBAAA,CACA,eAAA,CAEA,8DACC,qBAAA,CACA,WAAA,CACA,iBAAA,CACA,oBAAA,CACA,gBAAA,CACA,iBAAA,CACA,SAAA,CACA,YAAA,CACA,iBAAA,CAGF,mCACC,oCAAA,CAED,4BACC,oBAAA,CACA,gBAAA,CAGD,8BACC,SAAA,CACA,WAAA,CAED,6BACC,eAAA,CAED,0CACC,mCACA,oBAAA,CACA,yCAAA,CAAA\",\"sourcesContent\":[\"\\n::v-deep .modal-content {\\n\\tpadding: 0 20px 20px 20px;\\n\\tmax-height: calc(100vh - 210px);\\n\\toverflow-y: auto;\\n}\\n::v-deep .modal-container {\\n\\twidth: auto !important;\\n}\\n.tag-title {\\n\\tmargin-top: 20px;\\n\\tmargin-left: 10px;\\n}\\n.tag-group {\\n\\tdisplay: block;\\n\\tposition: relative;\\n\\tmargin: 0 1px;\\n\\toverflow: hidden;\\n\\tleft: 4px;\\n}\\n.tag-actions {\\n\\tbackground-color: transparent;\\n\\tborder: none;\\n\\tfloat: right;\\n\\t&:hover,\\n\\t&:focus {\\n\\t\\tbackground-color: var(--color-border-dark);\\n\\t}\\n}\\n.tag-group__label {\\n\\tz-index: 2;\\n\\tfont-weight: bold;\\n\\tborder: none;\\n\\tbackground-color: transparent;\\n\\tpadding-left: 10px;\\n\\tpadding-right: 10px;\\n\\toverflow: hidden;\\n\\ttext-overflow: ellipsis;\\n\\tmax-width: 94px;\\n}\\n.app-navigation-entry-bullet-wrapper {\\n\\twidth: 44px;\\n\\theight: 44px;\\n\\tdisplay: inline-block;\\n\\tposition: absolute;\\n\\tlist-style: none;\\n\\n\\t.color0 {\\n\\t\\twidth: 30px !important;\\n\\t\\theight: 30px;\\n\\t\\tborder-radius: 50%;\\n\\t\\tbackground-size: 14px;\\n\\t\\tmargin-top: -65px;\\n\\t\\tmargin-left: 180px;\\n\\t\\tz-index: 2;\\n\\t\\tdisplay: flex;\\n\\t\\tposition: relative;\\n\\t}\\n}\\n.icon-colorpicker {\\n\\tbackground-image: var(--icon-add-fff);\\n}\\n.tagButton {\\n\\tdisplay: inline-block;\\n\\tmargin-left: 10px;\\n}\\n\\n.action-item {\\n\\tright: 8px;\\n\\tfloat: right;\\n}\\n.create-tag {\\n\\tlist-style: none;\\n}\\n@media only screen and (max-width: 512px) {\\n\\t::v-deep .modal-container {\\n\\ttop: 100px !important;\\n\\tmax-height: calc(100vh - 170px) !important\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"#mail-message{flex-grow:1;max-height:calc(100vh - 50px);margin-bottom:30vh;overflow:auto}#mail-message .icon-loading:only-child:after{margin-top:20px}.mail-message-body{flex:1;margin-bottom:60px;position:relative}#mail-thread-header{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding:30px 0;box-sizing:content-box !important;height:44px;width:100%;z-index:100;position:fixed;position:-webkit-sticky;position:sticky;top:0;background:-webkit-linear-gradient(var(--color-main-background), var(--color-main-background) 80%, rgba(255, 255, 255, 0));background:-o-linear-gradient(var(--color-main-background), var(--color-main-background) 80%, rgba(255, 255, 255, 0));background:-moz-linear-gradient(var(--color-main-background), var(--color-main-background) 80%, rgba(255, 255, 255, 0));background:linear-gradient(var(--color-main-background), var(--color-main-background) 80%, rgba(255, 255, 255, 0))}#mail-thread-header-fields{width:0;padding-left:70px;flex:1 1 auto}#mail-thread-header-fields h2,#mail-thread-header-fields p{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-bottom:7px;margin-bottom:0}#mail-thread-header-fields .transparency{opacity:.6}#mail-thread-header-fields .transparency a{font-weight:bold}.attachment-popover{position:sticky;bottom:12px;text-align:center}.tooltip-inner{text-align:left}#mail-content{margin:10px 38px 0 59px}#mail-content iframe{width:100%}#show-images-text{display:none}#mail-content a,.mail-signature a{color:#07d;border-bottom:1px dotted #07d;text-decoration:none;word-wrap:break-word}@media only screen and (max-width: 600px){.action-label{display:none}}@media only screen and (min-width: 600px){.icon-reply-white,.icon-reply-all-white{background-position:12px center}}@media print{#mail-thread-header-fields{position:relative}.app-content-details,.splitpanes__pane-details{max-width:unset !important;width:100% !important}#header,.app-navigation,#reply-composer,#forward-button,#mail-message-has-blocked-content,.app-content-list,.message-composer,.splitpanes__pane-list,.mail-message-attachments{display:none !important}.app-content{margin-left:0 !important}.mail-message-body{margin-bottom:0 !important}}.message-source{font-family:monospace;white-space:pre-wrap;user-select:text}.avatar-header{max-height:24px;overflow:hidden}.avatar-more{display:inline;background-color:var(--color-background-dark);padding:0px 0px 1px 1px;border-radius:10px;cursor:pointer}.avatar-hidden{visibility:hidden}.popover__wrapper{max-width:500px}.app-content-list-item-star.icon-starred{display:none}.user-bubble__wrapper{margin-right:4px}.user-bubble__title{cursor:pointer}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/Thread.vue\"],\"names\":[],\"mappings\":\"AACA,cACC,WAAA,CACA,6BAAA,CACA,kBAAA,CACA,aAAA,CAGC,6CACC,eAAA,CAKH,mBACC,MAAA,CACA,kBAAA,CACA,iBAAA,CAGD,oBACC,YAAA,CACA,kBAAA,CACA,6BAAA,CACA,kBAAA,CACA,cAAA,CAIA,iCAAA,CACA,WAAA,CACA,UAAA,CAEA,WAAA,CACA,cAAA,CACA,uBAAA,CACA,eAAA,CACA,KAAA,CACA,0HAAA,CACA,qHAAA,CACA,uHAAA,CACA,kHAAA,CAGD,2BAEC,OAAA,CACA,iBAAA,CAEA,aAAA,CACA,2DAEC,kBAAA,CACA,eAAA,CACA,sBAAA,CACA,kBAAA,CACA,eAAA,CAGD,yCACC,UAAA,CACA,2CACC,gBAAA,CAKH,oBACC,eAAA,CACA,WAAA,CACA,iBAAA,CAGD,eACC,eAAA,CAGD,cACC,uBAAA,CAGD,qBACC,UAAA,CAGD,kBACC,YAAA,CAGD,kCAEC,UAAA,CACA,6BAAA,CACA,oBAAA,CACA,oBAAA,CAKD,0CACC,cACC,YAAA,CAAA,CAGF,0CACC,wCAEC,+BAAA,CAAA,CAIF,aACC,2BACC,iBAAA,CAED,+CAEC,0BAAA,CACA,qBAAA,CAED,+KASC,uBAAA,CAED,aACC,wBAAA,CAED,mBACC,0BAAA,CAAA,CAIF,gBACC,qBAAA,CACA,oBAAA,CACA,gBAAA,CAGD,eACC,eAAA,CACA,eAAA,CAED,aACC,cAAA,CACA,6CAAA,CACA,uBAAA,CACA,kBAAA,CACA,cAAA,CAED,eACC,iBAAA,CAED,kBACC,eAAA,CAGD,yCACC,YAAA,CAED,sBACC,gBAAA,CAED,oBACC,cAAA\",\"sourcesContent\":[\"\\n#mail-message {\\n\\tflex-grow: 1;\\n\\tmax-height: calc(100vh - 50px);\\n\\tmargin-bottom: 30vh;\\n\\toverflow: auto;\\n\\n\\t.icon-loading {\\n\\t\\t&:only-child:after {\\n\\t\\t\\tmargin-top: 20px;\\n\\t\\t}\\n\\t}\\n}\\n\\n.mail-message-body {\\n\\tflex: 1;\\n\\tmargin-bottom: 60px;\\n\\tposition: relative;\\n}\\n\\n#mail-thread-header {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tjustify-content: space-between;\\n\\talign-items: center;\\n\\tpadding: 30px 0;\\n\\t// somehow ios doesn't care about this !important rule\\n\\t// so we have to manually set left/right padding to chidren\\n\\t// for 100% to be used\\n\\tbox-sizing: content-box !important;\\n\\theight: 44px;\\n\\twidth: 100%;\\n\\n\\tz-index: 100;\\n\\tposition: fixed; // ie fallback\\n\\tposition: -webkit-sticky; // ios/safari fallback\\n\\tposition: sticky;\\n\\ttop: 0;\\n\\tbackground: -webkit-linear-gradient(var(--color-main-background), var(--color-main-background) 80%, rgba(255,255,255,0));\\n\\tbackground: -o-linear-gradient(var(--color-main-background), var(--color-main-background)  80%, rgba(255,255,255,0));\\n\\tbackground: -moz-linear-gradient(var(--color-main-background), var(--color-main-background)  80%, rgba(255,255,255,0));\\n\\tbackground: linear-gradient(var(--color-main-background), var(--color-main-background)  80%, rgba(255,255,255,0));\\n}\\n\\n#mail-thread-header-fields {\\n\\t// initial width\\n\\twidth: 0;\\n\\tpadding-left: 70px;\\n\\t// grow and try to fill 100%\\n\\tflex: 1 1 auto;\\n\\th2,\\n\\tp {\\n\\t\\twhite-space: nowrap;\\n\\t\\toverflow: hidden;\\n\\t\\ttext-overflow: ellipsis;\\n\\t\\tpadding-bottom: 7px;\\n\\t\\tmargin-bottom: 0;\\n\\t}\\n\\n\\t.transparency {\\n\\t\\topacity: 0.6;\\n\\t\\ta {\\n\\t\\t\\tfont-weight: bold;\\n\\t\\t}\\n\\t}\\n}\\n\\n.attachment-popover {\\n\\tposition: sticky;\\n\\tbottom: 12px;\\n\\ttext-align: center;\\n}\\n\\n.tooltip-inner {\\n\\ttext-align: left;\\n}\\n\\n#mail-content {\\n\\tmargin: 10px 38px 0 59px;\\n}\\n\\n#mail-content iframe {\\n\\twidth: 100%;\\n}\\n\\n#show-images-text {\\n\\tdisplay: none;\\n}\\n\\n#mail-content a,\\n.mail-signature a {\\n\\tcolor: #07d;\\n\\tborder-bottom: 1px dotted #07d;\\n\\ttext-decoration: none;\\n\\tword-wrap: break-word;\\n}\\n\\n/* Show action button label and move icon to the left\\n   on screens larger than 600px */\\n@media only screen and (max-width: 600px) {\\n\\t.action-label {\\n\\t\\tdisplay: none;\\n\\t}\\n}\\n@media only screen and (min-width: 600px) {\\n\\t.icon-reply-white,\\n\\t.icon-reply-all-white {\\n\\t\\tbackground-position: 12px center;\\n\\t}\\n}\\n\\n@media print {\\n\\t#mail-thread-header-fields {\\n\\t\\tposition: relative;\\n\\t}\\n\\t.app-content-details,\\n\\t.splitpanes__pane-details {\\n\\t\\tmax-width: unset !important;\\n\\t\\twidth: 100% !important;\\n\\t}\\n\\t#header,\\n\\t.app-navigation,\\n\\t#reply-composer,\\n\\t#forward-button,\\n\\t#mail-message-has-blocked-content,\\n\\t.app-content-list,\\n\\t.message-composer,\\n\\t.splitpanes__pane-list,\\n\\t.mail-message-attachments {\\n\\t\\tdisplay: none !important;\\n\\t}\\n\\t.app-content {\\n\\t\\tmargin-left: 0 !important;\\n\\t}\\n\\t.mail-message-body {\\n\\t\\tmargin-bottom: 0 !important;\\n\\t}\\n}\\n\\n.message-source {\\n\\tfont-family: monospace;\\n\\twhite-space: pre-wrap;\\n\\tuser-select: text;\\n}\\n\\n.avatar-header {\\n\\tmax-height: 24px;\\n\\toverflow: hidden;\\n}\\n.avatar-more {\\n\\tdisplay: inline;\\n\\tbackground-color: var(--color-background-dark);\\n\\tpadding: 0px 0px 1px 1px;\\n\\tborder-radius: 10px;\\n\\tcursor: pointer;\\n}\\n.avatar-hidden {\\n\\tvisibility: hidden;\\n}\\n.popover__wrapper {\\n\\tmax-width: 500px;\\n}\\n\\n.app-content-list-item-star.icon-starred {\\n\\tdisplay: none;\\n}\\n.user-bubble__wrapper {\\n\\tmargin-right: 4px;\\n}\\n.user-bubble__title {\\n\\tcursor: pointer;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".sender[data-v-0e2a1146]{margin-left:8px}.right[data-v-0e2a1146]{display:flex;flex-direction:row;align-items:center;justify-content:flex-end;margin-left:10px;height:44px}.right .app-content-list-item-menu[data-v-0e2a1146]{margin-left:4px}.right .timestamp[data-v-0e2a1146]{margin-right:10px;color:var(--color-text-maxcontrast);white-space:nowrap;margin-bottom:0}.button[data-v-0e2a1146]{color:var(--color-main-background)}.button[data-v-0e2a1146]:not(.active):not(.primary){display:none}.button:not(.active):not(.primary).primary[data-v-0e2a1146]{background-color:var(--color-primary);opacity:1;margin-bottom:0}.subline[data-v-0e2a1146]{margin-left:8px;color:var(--color-text-maxcontrast);cursor:default;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.envelope[data-v-0e2a1146]{display:flex;flex-direction:column;border:2px solid var(--color-border);border-radius:16px;margin-left:10px;margin-right:10px;background-color:var(--color-main-background);padding-bottom:28px}.envelope+.envelope[data-v-0e2a1146]{margin-top:-28px}.envelope[data-v-0e2a1146]:last-of-type{margin-bottom:10px;padding-bottom:0}.envelope--header[data-v-0e2a1146]{position:relative;display:flex;align-items:center;padding:10px;border-radius:var(--border-radius);min-height:68px}.left[data-v-0e2a1146]{flex-grow:1;min-width:0}.icon-important[data-v-0e2a1146] path{fill:#fc0;stroke:var(--color-main-background);cursor:pointer}.icon-important.app-content-list-item-star[data-v-0e2a1146]{background-image:none;position:absolute;opacity:1;width:16px;height:16px;margin-left:-1px;display:flex;top:12px}.icon-important.app-content-list-item-star[data-v-0e2a1146]:hover,.icon-important.app-content-list-item-star[data-v-0e2a1146]:focus{opacity:.5}.app-content-list-item-star.favorite-icon-style[data-v-0e2a1146]{display:inline-block;position:absolute;top:10px;left:36px;cursor:pointer;stroke:var(--color-main-background);stroke-width:2}.app-content-list-item-star.favorite-icon-style[data-v-0e2a1146]:hover{opacity:.5}.app-content-list-item-star.junk-icon-style[data-v-0e2a1146]{display:inline-block;position:absolute;top:10px;left:36px;cursor:pointer;opacity:.2}.app-content-list-item-star.junk-icon-style[data-v-0e2a1146]:hover{opacity:.1}.left[data-v-0e2a1146]:not(.seen){font-weight:bold}.tag-group__label[data-v-0e2a1146]{margin:0 7px;z-index:2;font-size:calc(var(--default-font-size)*.8);font-weight:bold;padding-left:2px;padding-right:2px}.tag-group__bg[data-v-0e2a1146]{position:absolute;width:100%;height:100%;top:0;left:0;opacity:15%}.tag-group[data-v-0e2a1146]{display:inline-block;border:1px solid rgba(0,0,0,0);border-radius:var(--border-radius-pill);position:relative;margin:0 1px;overflow:hidden;left:4px}.envelope--header.list-item-style[data-v-0e2a1146]{border-radius:16px}.junk-favorite-position-with-tag-subline[data-v-0e2a1146]{margin-bottom:14px !important}.junk-favorite-position[data-v-0e2a1146]{margin-bottom:36px !important}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/ThreadEnvelope.vue\"],\"names\":[],\"mappings\":\"AACA,yBACC,eAAA,CAGD,wBACC,YAAA,CACA,kBAAA,CACA,kBAAA,CACA,wBAAA,CACA,gBAAA,CACA,WAAA,CAEA,oDACC,eAAA,CAGD,mCACC,iBAAA,CACA,mCAAA,CACA,kBAAA,CACA,eAAA,CAGF,yBACC,kCAAA,CACA,oDACC,YAAA,CAEA,4DACC,qCAAA,CACA,SAAA,CACA,eAAA,CAKH,0BACC,eAAA,CACA,mCAAA,CACA,cAAA,CACA,eAAA,CACA,sBAAA,CACA,kBAAA,CAGD,2BACC,YAAA,CACA,qBAAA,CACA,oCAAA,CACA,kBAAA,CACA,gBAAA,CACA,iBAAA,CACA,6CAAA,CACA,mBAAA,CAEA,qCACC,gBAAA,CAGD,wCACC,kBAAA,CACA,gBAAA,CAIF,mCACC,iBAAA,CACA,YAAA,CACA,kBAAA,CACA,YAAA,CACA,kCAAA,CACA,eAAA,CAED,uBACC,WAAA,CACA,WAAA,CAGA,sCACC,SAAA,CACA,mCAAA,CACA,cAAA,CAGD,4DACC,qBAAA,CACA,iBAAA,CACA,SAAA,CACA,UAAA,CACA,WAAA,CACA,gBAAA,CACA,YAAA,CACA,QAAA,CAEA,oIAEC,UAAA,CAIH,iEACC,oBAAA,CACA,iBAAA,CACA,QAAA,CACA,SAAA,CACA,cAAA,CACA,mCAAA,CACA,cAAA,CACA,uEACC,UAAA,CAGF,6DACC,oBAAA,CACA,iBAAA,CACA,QAAA,CACA,SAAA,CACA,cAAA,CACA,UAAA,CACA,mEACC,UAAA,CAGF,kCACC,gBAAA,CAED,mCACC,YAAA,CACA,SAAA,CACA,2CAAA,CACA,gBAAA,CACA,gBAAA,CACA,iBAAA,CAED,gCACC,iBAAA,CACA,UAAA,CACA,WAAA,CACA,KAAA,CACA,MAAA,CACA,WAAA,CAED,4BACC,oBAAA,CACA,8BAAA,CACA,uCAAA,CACA,iBAAA,CACA,YAAA,CACA,eAAA,CACA,QAAA,CAED,mDACC,kBAAA,CAED,0DACC,6BAAA,CAED,yCACC,6BAAA\",\"sourcesContent\":[\"\\n.sender {\\n\\tmargin-left: 8px;\\n}\\n\\n.right {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\talign-items: center;\\n\\tjustify-content: flex-end;\\n\\tmargin-left: 10px;\\n\\theight: 44px;\\n\\n\\t.app-content-list-item-menu {\\n\\t\\tmargin-left: 4px;\\n\\t}\\n\\n\\t.timestamp {\\n\\t\\tmargin-right: 10px;\\n\\t\\tcolor: var(--color-text-maxcontrast);\\n\\t\\twhite-space: nowrap;\\n\\t\\tmargin-bottom: 0;\\n\\t}\\n}\\n.button {\\n\\tcolor: var(--color-main-background);\\n\\t&:not(.active):not(.primary) {\\n\\t\\tdisplay: none;\\n\\n\\t\\t&.primary {\\n\\t\\t\\tbackground-color: var(--color-primary);\\n\\t\\t\\topacity: 1;\\n\\t\\t\\tmargin-bottom: 0;\\n\\n\\t\\t}\\n\\t}\\n}\\n.subline {\\n\\tmargin-left: 8px;\\n\\tcolor: var(--color-text-maxcontrast);\\n\\tcursor: default;\\n\\toverflow: hidden;\\n\\ttext-overflow: ellipsis;\\n\\twhite-space: nowrap;\\n}\\n\\n.envelope {\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\tborder: 2px solid var(--color-border);\\n\\tborder-radius: 16px;\\n\\tmargin-left: 10px;\\n\\tmargin-right: 10px;\\n\\tbackground-color: var(--color-main-background);\\n\\tpadding-bottom: 28px;\\n\\n\\t& + .envelope {\\n\\t\\tmargin-top: -28px;\\n\\t}\\n\\n\\t&:last-of-type {\\n\\t\\tmargin-bottom: 10px;\\n\\t\\tpadding-bottom: 0;\\n\\t}\\n}\\n\\n.envelope--header {\\n\\tposition: relative;\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tpadding: 10px;\\n\\tborder-radius: var(--border-radius);\\n\\tmin-height: 68px; /* prevents jumping between open/collapsed */\\n}\\n.left {\\n\\tflex-grow: 1;\\n\\tmin-width: 0; /* https://css-tricks.com/flexbox-truncated-text/ */\\n}\\n.icon-important {\\n\\t::v-deep path {\\n\\t\\tfill: #ffcc00;\\n\\t\\tstroke: var(--color-main-background);\\n\\t\\tcursor: pointer;\\n\\t}\\n\\n\\t&.app-content-list-item-star {\\n\\t\\tbackground-image: none;\\n\\t\\tposition: absolute;\\n\\t\\topacity: 1;\\n\\t\\twidth: 16px;\\n\\t\\theight: 16px;\\n\\t\\tmargin-left: -1px;\\n\\t\\tdisplay: flex;\\n\\t\\ttop: 12px;\\n\\n\\t\\t&:hover,\\n\\t\\t&:focus {\\n\\t\\t\\topacity: 0.5;\\n\\t\\t}\\n\\t}\\n}\\n.app-content-list-item-star.favorite-icon-style {\\n\\tdisplay: inline-block;\\n\\tposition: absolute;\\n\\ttop: 10px;\\n\\tleft: 36px;\\n\\tcursor: pointer;\\n\\tstroke: var(--color-main-background);\\n\\tstroke-width: 2;\\n\\t&:hover {\\n\\t\\topacity: .5;\\n\\t}\\n}\\n.app-content-list-item-star.junk-icon-style {\\n\\tdisplay: inline-block;\\n\\tposition: absolute;\\n\\ttop: 10px;\\n\\tleft: 36px;\\n\\tcursor: pointer;\\n\\topacity: .2;\\n\\t&:hover {\\n\\t\\topacity: .1;\\n\\t}\\n}\\n.left:not(.seen) {\\n\\tfont-weight: bold;\\n}\\n.tag-group__label {\\n\\tmargin: 0 7px;\\n\\tz-index: 2;\\n\\tfont-size: calc(var(--default-font-size) * 0.8);\\n\\tfont-weight: bold;\\n\\tpadding-left: 2px;\\n\\tpadding-right: 2px;\\n}\\n.tag-group__bg {\\n\\tposition: absolute;\\n\\twidth: 100%;\\n\\theight: 100%;\\n\\ttop: 0;\\n\\tleft: 0;\\n\\topacity: 15%;\\n}\\n.tag-group {\\n\\tdisplay: inline-block;\\n\\tborder: 1px solid transparent;\\n\\tborder-radius: var(--border-radius-pill);\\n\\tposition: relative;\\n\\tmargin: 0 1px;\\n\\toverflow: hidden;\\n\\tleft: 4px;\\n}\\n.envelope--header.list-item-style {\\n\\tborder-radius: 16px;\\n}\\n.junk-favorite-position-with-tag-subline {\\n\\tmargin-bottom: 14px !important;\\n}\\n.junk-favorite-position {\\n\\tmargin-bottom: 36px !important;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".event-data[data-v-853d0690]{display:flex;flex-direction:column;gap:5px}.event-data__heading[data-v-853d0690]{margin-left:36px}.event-data__row[data-v-853d0690]{display:flex}.event-data__row__icon[data-v-853d0690]{align-self:start;margin:0 8px;padding-top:2px}.muted[data-v-853d0690]{color:var(--color-text-lighter)}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/imip/EventData.vue\"],\"names\":[],\"mappings\":\"AACA,6BACC,YAAA,CACA,qBAAA,CACA,OAAA,CAEA,sCACC,gBAAA,CAGD,kCACC,YAAA,CAEA,wCACC,gBAAA,CACA,YAAA,CAGA,eAAA,CAKH,wBACC,+BAAA\",\"sourcesContent\":[\"\\n.event-data {\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\tgap: 5px;\\n\\n\\t&__heading {\\n\\t\\tmargin-left: 36px;\\n\\t}\\n\\n\\t&__row {\\n\\t\\tdisplay: flex;\\n\\n\\t\\t&__icon {\\n\\t\\t\\talign-self: start;\\n\\t\\t\\tmargin: 0 8px;\\n\\n\\t\\t\\t// Fix slight misalignment caused by align-self: start\\n\\t\\t\\tpadding-top: 2px;\\n\\t\\t}\\n\\t}\\n}\\n\\n.muted {\\n\\tcolor: var(--color-text-lighter);\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"[data-v-dd1c47e0] .app-content-details{margin:0 auto;max-width:900px;display:flex;flex-direction:column;flex:1 1 100%;min-width:70%}[data-v-dd1c47e0] button.app-navigation-toggle{top:8px}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/views/Home.vue\"],\"names\":[],\"mappings\":\"AACA,uCACC,aAAA,CACA,eAAA,CACA,YAAA,CACA,qBAAA,CACA,aAAA,CACA,aAAA,CAGD,+CACC,OAAA\",\"sourcesContent\":[\"\\n::v-deep .app-content-details {\\n\\tmargin: 0 auto;\\n\\tmax-width: 900px;\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\tflex: 1 1 100%;\\n\\tmin-width: 70%;\\n}\\n// Align the appNavigation toggle with the apps header toolbar\\n::v-deep button.app-navigation-toggle {\\n\\ttop: 8px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n.list-item-content__actions--primary {\\n\\tdisplay: flex;\\n\\tjustify-content: space-between;\\n}\\n.list-item-content__actions--primary .action--primary:first-child {\\n\\tpadding-left: 5px;\\n}\\n.list-item-content__actions--primary .action--primary:last-child {\\n\\tpadding-right: 5px;\\n}\\n.list-item-content__actions--primary .action--primary .action-button {\\n\\talign-items: center;\\n\\tflex-direction: column;\\n\\tpadding: 10px 10px 0 10px;\\n.material-design-icon {\\n\\t\\tmargin-bottom: -15px;\\n}\\n}\\n.list-item-content__actions--primary .action--primary .action-button__text,\\n.list-item-content__actions--primary .action--primary .action-button__icon {\\n\\theight: auto;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/EnvelopePrimaryActions.vue\"],\"names\":[],\"mappings\":\";AAaA;CACA,aAAA;CACA,8BAAA;AACA;AAEA;CACA,iBAAA;AACA;AAEA;CACA,kBAAA;AACA;AAEA;CACA,mBAAA;CACA,sBAAA;CACA,yBAAA;AAEA;EACA,oBAAA;AACA;AACA;AAEA;;CAEA,YAAA;AACA\",\"sourcesContent\":[\"<template>\\n\\t<ul class=\\\"list-item-content__actions--primary\\\">\\n\\t\\t<slot />\\n\\t</ul>\\n</template>\\n\\n<script>\\nexport default {\\n\\tname: 'EnvelopePrimaryActions',\\n}\\n</script>\\n\\n<style>\\n.list-item-content__actions--primary {\\n\\tdisplay: flex;\\n\\tjustify-content: space-between;\\n}\\n\\n.list-item-content__actions--primary .action--primary:first-child {\\n\\tpadding-left: 5px;\\n}\\n\\n.list-item-content__actions--primary .action--primary:last-child {\\n\\tpadding-right: 5px;\\n}\\n\\n.list-item-content__actions--primary .action--primary .action-button {\\n\\talign-items: center;\\n\\tflex-direction: column;\\n\\tpadding: 10px 10px 0 10px;\\n\\n\\t.material-design-icon {\\n\\t\\tmargin-bottom: -15px;\\n\\t}\\n}\\n\\n.list-item-content__actions--primary .action--primary .action-button__text,\\n.list-item-content__actions--primary .action--primary .action-button__icon {\\n\\theight: auto;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n#mailvelope-composer[data-v-0be7aff6] {\\n\\twidth: 100%;\\n\\theight: 450px;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/MailvelopeEditor.vue\"],\"names\":[],\"mappings\":\";AA6EA;CACA,WAAA;CACA,aAAA;AACA\",\"sourcesContent\":[\"<!--\\n  - @copyright 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\\n  -\\n  - @author 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\\n  -\\n  - @license AGPL-3.0-or-later\\n  -\\n  - This program is free software: you can redistribute it and/or modify\\n  - it under the terms of the GNU Affero General Public License as\\n  - published by the Free Software Foundation, either version 3 of the\\n  - License, or (at your option) any later version.\\n  -\\n  - This program is distributed in the hope that it will be useful,\\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n  - GNU Affero General Public License for more details.\\n  -\\n  - You should have received a copy of the GNU Affero General Public License\\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\\n  -->\\n\\n<template>\\n\\t<div id=\\\"mailvelope-composer\\\" />\\n</template>\\n\\n<script>\\nimport logger from '../logger'\\nimport { isPgpgMessage } from '../crypto/pgp'\\n\\nexport default {\\n\\tname: 'MailvelopeEditor',\\n\\tprops: {\\n\\t\\tvalue: {\\n\\t\\t\\ttype: String,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\trecipients: {\\n\\t\\t\\ttype: Array,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\tquotedText: {\\n\\t\\t\\ttype: Object,\\n\\t\\t\\trequired: false,\\n\\t\\t\\tdefault: () => undefined,\\n\\t\\t},\\n\\t\\tisReplyOrForward: {\\n\\t\\t\\ttype: Boolean,\\n\\t\\t\\tdefault: false,\\n\\t\\t},\\n\\t},\\n\\tdata() {\\n\\t\\treturn {\\n\\t\\t\\teditor: undefined,\\n\\t\\t}\\n\\t},\\n\\tasync mounted() {\\n\\t\\tconst isEncrypted = this.quotedText ? isPgpgMessage(this.quotedText) : false\\n\\t\\tconst quotedMail = this.isReplyOrForward ? this.quotedText?.value : undefined\\n\\n\\t\\tthis.editor = await window.mailvelope.createEditorContainer('#mailvelope-composer', undefined, {\\n\\t\\t\\tquotedMail: isEncrypted ? quotedMail : undefined,\\n\\t\\t})\\n\\t},\\n\\tmethods: {\\n\\t\\tasync pull() {\\n\\t\\t\\tconst recipients = this.recipients.map((r) => r.email)\\n\\t\\t\\tlogger.info('encrypting message', { recipients })\\n\\t\\t\\tconst armored = await this.editor.encrypt(recipients)\\n\\t\\t\\tlogger.info('message encryted', { armored })\\n\\n\\t\\t\\tthis.$emit('input', armored)\\n\\t\\t},\\n\\t},\\n}\\n</script>\\n\\n<style scoped>\\n#mailvelope-composer {\\n\\twidth: 100%;\\n\\theight: 450px;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n#mail-content[data-v-812ccd96] {\\n\\theight: 450px;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/MessageEncryptedBody.vue\"],\"names\":[],\"mappings\":\";AA8CA;CACA,aAAA;AACA\",\"sourcesContent\":[\"<template>\\n\\t<div>\\n\\t\\t<div v-if=\\\"mailvelope\\\" id=\\\"mail-content\\\">\\n\\t\\t\\t<MdnRequest :message=\\\"message\\\" />\\n\\t\\t</div>\\n\\t\\t<span v-else>{{ t('mail', 'This message is encrypted with PGP. Install Mailvelope to decrypt it.') }}</span>\\n\\t</div>\\n</template>\\n\\n<script>\\nimport { getMailvelope } from '../crypto/mailvelope'\\nimport MdnRequest from './MdnRequest'\\n\\nexport default {\\n\\tname: 'MessageEncryptedBody',\\n\\tcomponents: { MdnRequest },\\n\\tprops: {\\n\\t\\tbody: {\\n\\t\\t\\ttype: String,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\tfrom: {\\n\\t\\t\\ttype: String,\\n\\t\\t\\trequired: false,\\n\\t\\t\\tdefault: undefined,\\n\\t\\t},\\n\\t\\tmessage: {\\n\\t\\t\\trequired: true,\\n\\t\\t\\ttype: Object,\\n\\t\\t},\\n\\t},\\n\\tdata() {\\n\\t\\treturn {\\n\\t\\t\\tmailvelope: false,\\n\\t\\t}\\n\\t},\\n\\tasync mounted() {\\n\\t\\tthis.mailvelope = await getMailvelope()\\n\\t\\tthis.mailvelope.createDisplayContainer('#mail-content', this.body, undefined, {\\n\\t\\t\\tsenderAddress: this.from,\\n\\t\\t})\\n\\t},\\n}\\n</script>\\n\\n<style scoped>\\n#mail-content {\\n\\theight: 450px;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\nh2[data-v-4a605894],\\np[data-v-4a605894] {\\n\\ttext-align: center;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/NoMessageSelected.vue\"],\"names\":[],\"mappings\":\";AA6CA;;CAEA,kBAAA;AACA\",\"sourcesContent\":[\"<!--\\n  - @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\\n  -\\n  - @author 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\\n  -\\n  - @license AGPL-3.0-or-later\\n  -\\n  - This program is free software: you can redistribute it and/or modify\\n  - it under the terms of the GNU Affero General Public License as\\n  - published by the Free Software Foundation, either version 3 of the\\n  - License, or (at your option) any later version.\\n  -\\n  - This program is distributed in the hope that it will be useful,\\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n  - GNU Affero General Public License for more details.\\n  -\\n  - You should have received a copy of the GNU Affero General Public License\\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\\n  -->\\n\\n<template>\\n\\t<AppContentDetails>\\n\\t\\t<div id=\\\"emptycontent\\\">\\n\\t\\t\\t<IconMail :size=\\\"65\\\" />\\n\\t\\t\\t<h2>{{ t('mail', 'No message selected') }}</h2>\\n\\t\\t\\t<p />\\n\\t\\t</div>\\n\\t</AppContentDetails>\\n</template>\\n\\n<script>\\nimport { NcAppContentDetails as AppContentDetails } from '@nextcloud/vue'\\nimport IconMail from 'vue-material-design-icons/Email'\\n\\nexport default {\\n\\tname: 'NoMessageSelected',\\n\\tcomponents: {\\n\\t\\tAppContentDetails,\\n\\t\\tIconMail,\\n\\t},\\n}\\n</script>\\n\\n<style scoped>\\nh2,\\np {\\n\\ttext-align: center;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n#priority[data-v-61053746] {\\n\\tdisplay: inline-block;\\n}\\n.app-content-list-item[data-v-61053746] {\\n\\topacity: .8;\\n}\\n.app-content-list-item[data-v-61053746]:hover {\\n\\tbackground-color: transparent;\\n\\topacity: 0.8;\\n}\\nh2[data-v-61053746] {\\n\\tfont-weight: normal;\\n\\tfont-size: 17px;\\n\\tmargin-bottom: 2px;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/SectionTitle.vue\"],\"names\":[],\"mappings\":\";AAyCA;CACA,qBAAA;AACA;AACA;CACA,WAAA;AACA;AACA;CACA,6BAAA;CACA,YAAA;AACA;AACA;CACA,mBAAA;CACA,eAAA;CACA,kBAAA;AACA\",\"sourcesContent\":[\"<!--\\n  - @copyright 2020 Greta Doçi <gretadoci@gmail.com>\\n  -\\n  - @author 2020 Greta Doçi <gretadoci@gmail.com>\\n  -\\n  - @license AGPL-3.0-or-later\\n  -\\n  - This program is free software: you can redistribute it and/or modify\\n  - it under the terms of the GNU Affero General Public License as\\n  - published by the Free Software Foundation, either version 3 of the\\n  - License, or (at your option) any later version.\\n  -\\n  - This program is distributed in the hope that it will be useful,\\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n  - GNU Affero General Public License for more details.\\n  -\\n  - You should have received a copy of the GNU Affero General Public License\\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\\n  -->\\n\\n<template>\\n\\t<div id=\\\"priority\\\">\\n\\t\\t<div class=\\\"app-content-list-item\\\">\\n\\t\\t\\t<h2>{{ name }}</h2>\\n\\t\\t</div>\\n\\t</div>\\n</template>\\n<script>\\nexport default {\\n\\tname: 'SectionTitle',\\n\\tprops: {\\n\\t\\tname: {\\n\\t\\t\\ttype: String,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t},\\n}\\n</script>\\n\\n<style scoped>\\n#priority {\\n\\tdisplay: inline-block;\\n}\\n.app-content-list-item {\\n\\topacity: .8;\\n}\\n.app-content-list-item:hover {\\n\\tbackground-color: transparent;\\n\\topacity: 0.8;\\n}\\nh2 {\\n\\tfont-weight: normal;\\n\\tfont-size: 17px;\\n\\tmargin-bottom: 2px;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n.reservation[data-v-397d55d8] {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tmargin: 30px 38px;\\n\\tborder: 1px solid var(--color-border);\\n\\tborder-radius: var(--border-radius);\\n\\tpadding: 20px;\\n\\talign-items: center;\\n}\\n.event[data-v-397d55d8] {\\n\\tflex-grow: 1;\\n}\\n.event-name[data-v-397d55d8] {\\n\\tfont-size: larger;\\n\\tfont-weight: bold;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/itinerary/EventReservation.vue\"],\"names\":[],\"mappings\":\";AAoJA;CACA,aAAA;CACA,mBAAA;CACA,iBAAA;CACA,qCAAA;CACA,mCAAA;CACA,aAAA;CACA,mBAAA;AACA;AAEA;CACA,YAAA;AACA;AAEA;CACA,iBAAA;CACA,iBAAA;AACA\",\"sourcesContent\":[\"<!--\\n  - @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\\n  -\\n  - @author 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\\n  -\\n  - @license AGPL-3.0-or-later\\n  -\\n  - This program is free software: you can redistribute it and/or modify\\n  - it under the terms of the GNU Affero General Public License as\\n  - published by the Free Software Foundation, either version 3 of the\\n  - License, or (at your option) any later version.\\n  -\\n  - This program is distributed in the hope that it will be useful,\\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n  - GNU Affero General Public License for more details.\\n  -\\n  - You should have received a copy of the GNU Affero General Public License\\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\\n  -->\\n\\n<template>\\n\\t<div class=\\\"reservation\\\">\\n\\t\\t<div class=\\\"event\\\">\\n\\t\\t\\t<div class=\\\"event-name\\\">\\n\\t\\t\\t\\t{{ eventName }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-if=\\\"location\\\" class=\\\"venue\\\">\\n\\t\\t\\t\\t{{ location }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-if=\\\"date\\\">\\n\\t\\t\\t\\t{{ date }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-if=\\\"time\\\">\\n\\t\\t\\t\\t{{ time }}\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t\\t<CalendarImport v-if=\\\"canImport\\\" :calendars=\\\"calendars\\\" :handler=\\\"handleImport\\\" />\\n\\t</div>\\n</template>\\n\\n<script>\\nimport ical from 'ical.js'\\nimport md5 from 'md5'\\nimport moment from '@nextcloud/moment'\\nimport { showError, showSuccess } from '@nextcloud/dialogs'\\n\\nimport CalendarImport from './CalendarImport'\\nimport { importCalendarEvent } from '../../service/DAVService'\\nimport logger from '../../logger'\\n\\nexport default {\\n\\tname: 'EventReservation',\\n\\tcomponents: { CalendarImport },\\n\\tprops: {\\n\\t\\tdata: {\\n\\t\\t\\ttype: Object,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\tcalendars: {\\n\\t\\t\\ttype: Array,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\tmessageId: {\\n\\t\\t\\ttype: String,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t},\\n\\tcomputed: {\\n\\t\\teventName() {\\n\\t\\t\\treturn this.data.reservationFor.name\\n\\t\\t},\\n\\t\\ttime() {\\n\\t\\t\\tif (!('startDate' in this.data.reservationFor)) {\\n\\t\\t\\t\\treturn\\n\\t\\t\\t}\\n\\t\\t\\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.startDate)).format('LT')\\n\\t\\t},\\n\\t\\tdate() {\\n\\t\\t\\tif (!('startDate' in this.data.reservationFor)) {\\n\\t\\t\\t\\treturn\\n\\t\\t\\t}\\n\\t\\t\\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.startDate)).format('L')\\n\\t\\t},\\n\\t\\tlocation() {\\n\\t\\t\\tif (!('location' in this.data.reservationFor) || !('name' in this.data.reservationFor.location)) {\\n\\t\\t\\t\\treturn\\n\\t\\t\\t}\\n\\t\\t\\treturn this.data.reservationFor.location.name\\n\\t\\t},\\n\\t\\tcanImport() {\\n\\t\\t\\treturn 'startDate' in this.data.reservationFor\\n\\t\\t},\\n\\t},\\n\\tmethods: {\\n\\t\\tgetEndDateTime(event) {\\n\\t\\t\\tif ('endDate' in this.data.reservationFor) {\\n\\t\\t\\t\\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.endDate)).format()\\n\\t\\t\\t} else if ('startDate' in this.data.reservationFor) {\\n\\t\\t\\t\\t// Assume it's 2h and user will adjust if necessary\\n\\t\\t\\t\\t// TODO: handle 'duration' https://schema.org/Event\\n\\t\\t\\t\\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.startDate)).add(2, 'hours').format()\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\thandleImport(calendar) {\\n\\t\\t\\tconst event = new ical.Component('VEVENT')\\n\\t\\t\\tevent.updatePropertyWithValue('SUMMARY', this.eventName)\\n\\n\\t\\t\\tconst start = moment(CalendarImport.itineraryDateTime(this.data.reservationFor.startDate)).format()\\n\\t\\t\\tevent.updatePropertyWithValue('DTSTART', ical.Time.fromDateTimeString(start))\\n\\t\\t\\tconst end = this.getEndDateTime(this.data.reservationFor)\\n\\t\\t\\tevent.updatePropertyWithValue('DTEND', ical.Time.fromDateTimeString(end))\\n\\n\\t\\t\\tif ('location' in this.data.reservationFor) {\\n\\t\\t\\t\\tevent.updatePropertyWithValue('LOCATION', this.data.reservationFor.location.name)\\n\\t\\t\\t\\tif ('geo' in this.data.reservationFor.location) {\\n\\t\\t\\t\\t\\t// https://www.kanzaki.com/docs/ical/geo.html\\n\\t\\t\\t\\t\\tevent.updatePropertyWithValue(\\n\\t\\t\\t\\t\\t\\t'GEO',\\n\\t\\t\\t\\t\\t\\t`${this.data.reservationFor.location.geo.latitude};${this.data.reservationFor.location.geo.longitude}`\\n\\t\\t\\t\\t\\t)\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\n\\t\\t\\t// TODO: read version from package.json\\n\\t\\t\\tevent.updatePropertyWithValue('PRODID', 'Nextcloud Mail')\\n\\n\\t\\t\\t// TODO: is this free of collisions? the bug reports will tell us!\\n\\t\\t\\tevent.updatePropertyWithValue('UID', md5(this.messageId + this.eventName))\\n\\n\\t\\t\\tconst cal = new ical.Component('VCALENDAR')\\n\\t\\t\\tcal.addSubcomponent(event)\\n\\t\\t\\tlogger.debug('generated calendar event from event reservation data', { ical: cal.toString() })\\n\\t\\t\\treturn importCalendarEvent(calendar.url)(cal.toString())\\n\\t\\t\\t\\t.then(() => {\\n\\t\\t\\t\\t\\tlogger.debug('event successfully imported')\\n\\t\\t\\t\\t\\tshowSuccess(t('mail', 'Event imported into {calendar}', { calendar: calendar.displayname }))\\n\\t\\t\\t\\t})\\n\\t\\t\\t\\t.catch((error) => {\\n\\t\\t\\t\\t\\tlogger.error('Could not import event', { error })\\n\\t\\t\\t\\t\\tshowError(t('mail', 'Could not create event'))\\n\\t\\t\\t\\t})\\n\\t\\t},\\n\\t},\\n}\\n</script>\\n\\n<style scoped>\\n.reservation {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tmargin: 30px 38px;\\n\\tborder: 1px solid var(--color-border);\\n\\tborder-radius: var(--border-radius);\\n\\tpadding: 20px;\\n\\talign-items: center;\\n}\\n\\n.event {\\n\\tflex-grow: 1;\\n}\\n\\n.event-name {\\n\\tfont-size: larger;\\n\\tfont-weight: bold;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n.reservation[data-v-2a317718] {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tmargin: 30px 38px;\\n\\tborder: 1px solid var(--color-border);\\n\\tborder-radius: var(--border-radius);\\n\\tpadding: 20px;\\n\\talign-items: center;\\n}\\n.departure[data-v-2a317718],\\n.arrival[data-v-2a317718] {\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\tflex-grow: 1;\\n}\\n.departure[data-v-2a317718],\\n.arrival[data-v-2a317718],\\n.connection[data-v-2a317718] {\\n\\tjustify-content: center;\\n}\\n.iata[data-v-2a317718] {\\n\\tfont-size: larger;\\n\\tfont-weight: bold;\\n}\\n.airport[data-v-2a317718] {\\n\\tfont-size: large;\\n}\\n.departure[data-v-2a317718] {\\n\\ttext-align: right;\\n}\\n.connection[data-v-2a317718] {\\n\\ttext-align: center;\\n\\tpadding: 0 40px;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/itinerary/FlightReservation.vue\"],\"names\":[],\"mappings\":\";AA2JA;CACA,aAAA;CACA,mBAAA;CACA,iBAAA;CACA,qCAAA;CACA,mCAAA;CACA,aAAA;CACA,mBAAA;AACA;AAEA;;CAEA,aAAA;CACA,sBAAA;CACA,YAAA;AACA;AAEA;;;CAGA,uBAAA;AACA;AAEA;CACA,iBAAA;CACA,iBAAA;AACA;AAEA;CACA,gBAAA;AACA;AAEA;CACA,iBAAA;AACA;AAEA;CACA,kBAAA;CACA,eAAA;AACA\",\"sourcesContent\":[\"<template>\\n\\t<div class=\\\"reservation\\\">\\n\\t\\t<div class=\\\"departure\\\">\\n\\t\\t\\t<div class=\\\"iata\\\">\\n\\t\\t\\t\\t{{ data.reservationFor.departureAirport.iataCode }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div class=\\\"airport\\\">\\n\\t\\t\\t\\t{{ data.reservationFor.departureAirport.name }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-if=\\\"departureDate\\\">\\n\\t\\t\\t\\t{{ departureDate }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-if=\\\"departureTime\\\">\\n\\t\\t\\t\\t{{ departureTime }}\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t\\t<div class=\\\"connection\\\">\\n\\t\\t\\t<div><AirplaneIcon :title=\\\"t('mail', 'Airplane')\\\" /></div>\\n\\t\\t\\t<div>{{ flightNumber }}</div>\\n\\t\\t\\t<div v-if=\\\"reservation\\\">\\n\\t\\t\\t\\t{{ t('mail', 'Reservation {id}', {id: reservation}) }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-else>\\n\\t\\t\\t\\t<ArrowIcon decorative />\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t\\t<div class=\\\"arrival\\\">\\n\\t\\t\\t<div class=\\\"iata\\\">\\n\\t\\t\\t\\t{{ data.reservationFor.arrivalAirport.iataCode }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div class=\\\"airport\\\">\\n\\t\\t\\t\\t{{ data.reservationFor.arrivalAirport.name }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-if=\\\"arrivalDate\\\">\\n\\t\\t\\t\\t{{ arrivalDate }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-if=\\\"arrivalTime\\\">\\n\\t\\t\\t\\t{{ arrivalTime }}\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t\\t<CalendarImport :calendars=\\\"calendars\\\" :handler=\\\"handleImport\\\" />\\n\\t</div>\\n</template>\\n\\n<script>\\nimport AirplaneIcon from 'vue-material-design-icons/Airplane'\\nimport ArrowIcon from 'vue-material-design-icons/ArrowRight'\\nimport ical from 'ical.js'\\nimport md5 from 'md5'\\nimport moment from '@nextcloud/moment'\\nimport { showError, showSuccess } from '@nextcloud/dialogs'\\n\\nimport CalendarImport from './CalendarImport'\\nimport { importCalendarEvent } from '../../service/DAVService'\\nimport logger from '../../logger'\\n\\nexport default {\\n\\tname: 'FlightReservation',\\n\\tcomponents: {\\n\\t\\tAirplaneIcon,\\n\\t\\tArrowIcon,\\n\\t\\tCalendarImport,\\n\\t},\\n\\tprops: {\\n\\t\\tdata: {\\n\\t\\t\\ttype: Object,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\tcalendars: {\\n\\t\\t\\ttype: Array,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\tmessageId: {\\n\\t\\t\\ttype: String,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t},\\n\\tcomputed: {\\n\\t\\tdepartureTime() {\\n\\t\\t\\tif (!('departureTime' in this.data.reservationFor)) {\\n\\t\\t\\t\\treturn\\n\\t\\t\\t}\\n\\t\\t\\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.departureTime)).format('LT')\\n\\t\\t},\\n\\t\\tdepartureDate() {\\n\\t\\t\\tif (!('departureTime' in this.data.reservationFor)) {\\n\\t\\t\\t\\treturn\\n\\t\\t\\t}\\n\\t\\t\\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.departureTime)).format('L')\\n\\t\\t},\\n\\t\\tarrivalTime() {\\n\\t\\t\\tif (!('arrivalTime' in this.data.reservationFor)) {\\n\\t\\t\\t\\treturn\\n\\t\\t\\t}\\n\\t\\t\\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.arrivalTime)).format('LT')\\n\\t\\t},\\n\\t\\tarrivalDate() {\\n\\t\\t\\tif (!('arrivalTime' in this.data.reservationFor)) {\\n\\t\\t\\t\\treturn\\n\\t\\t\\t}\\n\\t\\t\\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.arrivalTime)).format('L')\\n\\t\\t},\\n\\t\\tflightNumber() {\\n\\t\\t\\treturn this.data.reservationFor.airline.iataCode + this.data.reservationFor.flightNumber\\n\\t\\t},\\n\\t\\treservation() {\\n\\t\\t\\tif (!('reservationNumber' in this.data)) {\\n\\t\\t\\t\\treturn\\n\\t\\t\\t}\\n\\t\\t\\treturn this.data.reservationNumber\\n\\t\\t},\\n\\t\\tcanImport() {\\n\\t\\t\\treturn 'departureTime' in this.data.reservationFor && 'arrivalTime' in this.data.reservationFor\\n\\t\\t},\\n\\t},\\n\\tmethods: {\\n\\t\\thandleImport(calendar) {\\n\\t\\t\\tconst event = new ical.Component('VEVENT')\\n\\t\\t\\tevent.updatePropertyWithValue(\\n\\t\\t\\t\\t'SUMMARY',\\n\\t\\t\\t\\tt('mail', 'Flight {flightNr} from {depAirport} to {arrAirport}', {\\n\\t\\t\\t\\t\\tflightNr: this.flightNumber,\\n\\t\\t\\t\\t\\tdepAirport: this.data.reservationFor.departureAirport.iataCode,\\n\\t\\t\\t\\t\\tarrAirport: this.data.reservationFor.arrivalAirport.iataCode,\\n\\t\\t\\t\\t})\\n\\t\\t\\t)\\n\\n\\t\\t\\tCalendarImport.addIcalTimeProperty(event, this.data.reservationFor.departureTime, 'DTSTART')\\n\\t\\t\\tCalendarImport.addIcalTimeProperty(event, this.data.reservationFor.arrivalTime, 'DTEND')\\n\\n\\t\\t\\t// TODO: read version from package.json\\n\\t\\t\\tevent.updatePropertyWithValue('PRODID', 'Nextcloud Mail')\\n\\n\\t\\t\\t// TODO: is this free of collisions? the bug reports will tell us!\\n\\t\\t\\tevent.updatePropertyWithValue('UID', md5(this.messageId + this.flightNumber))\\n\\n\\t\\t\\tconst cal = new ical.Component('VCALENDAR')\\n\\t\\t\\tcal.addSubcomponent(event)\\n\\t\\t\\tlogger.debug('generated calendar event from flight reservation data', { ical: cal.toString() })\\n\\n\\t\\t\\treturn importCalendarEvent(calendar.url)(cal.toString())\\n\\t\\t\\t\\t.then(() => {\\n\\t\\t\\t\\t\\tlogger.debug('event successfully imported')\\n\\t\\t\\t\\t\\tshowSuccess(t('mail', 'Event imported into {calendar}', { calendar: calendar.displayname }))\\n\\t\\t\\t\\t})\\n\\t\\t\\t\\t.catch((error) => {\\n\\t\\t\\t\\t\\tlogger.error('Could not import event', { error })\\n\\t\\t\\t\\t\\tshowError(t('mail', 'Could not create event'))\\n\\t\\t\\t\\t})\\n\\t\\t},\\n\\t},\\n}\\n</script>\\n\\n<style scoped>\\n.reservation {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tmargin: 30px 38px;\\n\\tborder: 1px solid var(--color-border);\\n\\tborder-radius: var(--border-radius);\\n\\tpadding: 20px;\\n\\talign-items: center;\\n}\\n\\n.departure,\\n.arrival {\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\tflex-grow: 1;\\n}\\n\\n.departure,\\n.arrival,\\n.connection {\\n\\tjustify-content: center;\\n}\\n\\n.iata {\\n\\tfont-size: larger;\\n\\tfont-weight: bold;\\n}\\n\\n.airport {\\n\\tfont-size: large;\\n}\\n\\n.departure {\\n\\ttext-align: right;\\n}\\n\\n.connection {\\n\\ttext-align: center;\\n\\tpadding: 0 40px;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n.reservation[data-v-08dee74f] {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tmargin: 30px 38px;\\n\\tborder: 1px solid var(--color-border);\\n\\tborder-radius: var(--border-radius);\\n\\tpadding: 20px;\\n\\talign-items: center;\\n}\\n.departure[data-v-08dee74f],\\n.arrival[data-v-08dee74f] {\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\tflex-grow: 1;\\n}\\n.departure[data-v-08dee74f],\\n.arrival[data-v-08dee74f],\\n.connection[data-v-08dee74f] {\\n\\tjustify-content: center;\\n}\\n.station[data-v-08dee74f] {\\n\\tfont-size: larger;\\n\\tfont-weight: bold;\\n}\\n.departure[data-v-08dee74f] {\\n\\ttext-align: right;\\n}\\n.connection[data-v-08dee74f] {\\n\\ttext-align: center;\\n\\tpadding: 0 40px;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/itinerary/TrainReservation.vue\"],\"names\":[],\"mappings\":\";AA+JA;CACA,aAAA;CACA,mBAAA;CACA,iBAAA;CACA,qCAAA;CACA,mCAAA;CACA,aAAA;CACA,mBAAA;AACA;AAEA;;CAEA,aAAA;CACA,sBAAA;CACA,YAAA;AACA;AAEA;;;CAGA,uBAAA;AACA;AAEA;CACA,iBAAA;CACA,iBAAA;AACA;AAEA;CACA,iBAAA;AACA;AAEA;CACA,kBAAA;CACA,eAAA;AACA\",\"sourcesContent\":[\"<template>\\n\\t<div class=\\\"reservation\\\">\\n\\t\\t<div class=\\\"departure\\\">\\n\\t\\t\\t<div class=\\\"station\\\">\\n\\t\\t\\t\\t{{ data.reservationFor.departureStation.name }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-if=\\\"departureDate\\\">\\n\\t\\t\\t\\t{{ departureDate }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-if=\\\"departureTime\\\">\\n\\t\\t\\t\\t{{ departureTime }}\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t\\t<div class=\\\"connection\\\">\\n\\t\\t\\t<div><TrainIcon :title=\\\"t('mail', 'Train')\\\" /></div>\\n\\t\\t\\t<div>{{ trainNumber }}</div>\\n\\t\\t\\t<div><ArrowIcon decorative /></div>\\n\\t\\t</div>\\n\\t\\t<div class=\\\"arrival\\\">\\n\\t\\t\\t<div class=\\\"station\\\">\\n\\t\\t\\t\\t{{ data.reservationFor.arrivalStation.name }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-if=\\\"arrivalDate\\\">\\n\\t\\t\\t\\t{{ arrivalDate }}\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-if=\\\"arrivalTime\\\">\\n\\t\\t\\t\\t{{ arrivalTime }}\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t\\t<CalendarImport v-if=\\\"canImport\\\" :calendars=\\\"calendars\\\" :handler=\\\"handleImport\\\" />\\n\\t</div>\\n</template>\\n\\n<script>\\nimport ArrowIcon from 'vue-material-design-icons/ArrowRight'\\nimport ical from 'ical.js'\\nimport md5 from 'md5'\\nimport moment from '@nextcloud/moment'\\nimport { showError, showSuccess } from '@nextcloud/dialogs'\\nimport TrainIcon from 'vue-material-design-icons/Train'\\n\\nimport CalendarImport from './CalendarImport'\\nimport { importCalendarEvent } from '../../service/DAVService'\\nimport logger from '../../logger'\\n\\nexport default {\\n\\tname: 'TrainReservation',\\n\\tcomponents: {\\n\\t\\tArrowIcon,\\n\\t\\tCalendarImport,\\n\\t\\tTrainIcon,\\n\\t},\\n\\tprops: {\\n\\t\\tdata: {\\n\\t\\t\\ttype: Object,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\tcalendars: {\\n\\t\\t\\ttype: Array,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t\\tmessageId: {\\n\\t\\t\\ttype: String,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t},\\n\\tcomputed: {\\n\\t\\tdepartureTime() {\\n\\t\\t\\tif (!('departureTime' in this.data.reservationFor)) {\\n\\t\\t\\t\\treturn\\n\\t\\t\\t}\\n\\t\\t\\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.departureTime)).format('LT')\\n\\t\\t},\\n\\t\\tdepartureDate() {\\n\\t\\t\\tif ('departureTime' in this.data.reservationFor) {\\n\\t\\t\\t\\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.departureTime)).format('L')\\n\\t\\t\\t}\\n\\t\\t\\tif ('departureDay' in this.data.reservationFor) {\\n\\t\\t\\t\\treturn moment(this.data.reservationFor.departureDay).format('L')\\n\\t\\t\\t}\\n\\t\\t\\treturn undefined\\n\\t\\t},\\n\\t\\tarrivalTime() {\\n\\t\\t\\tif (!('arrivalTime' in this.data.reservationFor)) {\\n\\t\\t\\t\\treturn\\n\\t\\t\\t}\\n\\t\\t\\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.arrivalTime)).format('LT')\\n\\t\\t},\\n\\t\\tarrivalDate() {\\n\\t\\t\\tif (!('arrivalTime' in this.data.reservationFor)) {\\n\\t\\t\\t\\treturn\\n\\t\\t\\t}\\n\\t\\t\\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.arrivalTime)).format('L')\\n\\t\\t},\\n\\t\\ttrainNumber() {\\n\\t\\t\\treturn this.data.reservationFor.trainNumber\\n\\t\\t},\\n\\t\\tcanImport() {\\n\\t\\t\\treturn (\\n\\t\\t\\t\\t('departureTime' in this.data.reservationFor && 'arrivalTime' in this.data.reservationFor)\\n\\t\\t\\t\\t|| 'departureDay' in this.data.reservationFor\\n\\t\\t\\t)\\n\\t\\t},\\n\\t},\\n\\tmethods: {\\n\\t\\thandleImport(calendar) {\\n\\t\\t\\tconst event = new ical.Component('VEVENT')\\n\\t\\t\\tif ('trainNumber' in this.data.reservationFor) {\\n\\t\\t\\t\\tevent.updatePropertyWithValue(\\n\\t\\t\\t\\t\\t'SUMMARY',\\n\\t\\t\\t\\t\\tt('mail', '{trainNr} from {depStation} to {arrStation}', {\\n\\t\\t\\t\\t\\t\\ttrainNr: this.data.reservationFor.trainNumber,\\n\\t\\t\\t\\t\\t\\tdepStation: this.data.reservationFor.departureStation.name,\\n\\t\\t\\t\\t\\t\\tarrStation: this.data.reservationFor.arrivalStation.name,\\n\\t\\t\\t\\t\\t})\\n\\t\\t\\t\\t)\\n\\t\\t\\t} else {\\n\\t\\t\\t\\tevent.updatePropertyWithValue(\\n\\t\\t\\t\\t\\t'SUMMARY',\\n\\t\\t\\t\\t\\tt('mail', 'Train from {depStation} to {arrStation}', {\\n\\t\\t\\t\\t\\t\\tdepStation: this.data.reservationFor.departureStation.name,\\n\\t\\t\\t\\t\\t\\tarrStation: this.data.reservationFor.arrivalStation.name,\\n\\t\\t\\t\\t\\t})\\n\\t\\t\\t\\t)\\n\\t\\t\\t}\\n\\n\\t\\t\\tif ('departureTime' in this.data.reservationFor && 'arrivalTime' in this.data.reservationFor) {\\n\\t\\t\\t\\tCalendarImport.addIcalTimeProperty(event, this.data.reservationFor.departureTime, 'DTSTART')\\n\\t\\t\\t\\tCalendarImport.addIcalTimeProperty(event, this.data.reservationFor.arrivalTime, 'DTEND')\\n\\t\\t\\t} else if ('departureDay' in this.data.reservationFor) {\\n\\t\\t\\t\\tconst date = moment(this.data.reservationFor.departureDay).format()\\n\\t\\t\\t\\tevent.updatePropertyWithValue('DTSTART', ical.Time.fromDateTimeString(date))\\n\\t\\t\\t}\\n\\n\\t\\t\\t// TODO: read version from package.json\\n\\t\\t\\tevent.updatePropertyWithValue('PRODID', 'Nextcloud Mail')\\n\\n\\t\\t\\t// TODO: is this free of collisions? the bug reports will tell us!\\n\\t\\t\\tevent.updatePropertyWithValue('UID', md5(this.messageId + this.departureTime))\\n\\n\\t\\t\\tconst cal = new ical.Component('VCALENDAR')\\n\\t\\t\\tcal.addSubcomponent(event)\\n\\t\\t\\tlogger.debug('generated calendar event from train reservation data', { ical: cal.toString() })\\n\\n\\t\\t\\treturn importCalendarEvent(calendar.url)(cal.toString())\\n\\t\\t\\t\\t.then(() => {\\n\\t\\t\\t\\t\\tlogger.debug('event successfully imported')\\n\\t\\t\\t\\t\\tshowSuccess(t('mail', 'Event imported into {calendar}', { calendar: calendar.displayname }))\\n\\t\\t\\t\\t})\\n\\t\\t\\t\\t.catch((error) => {\\n\\t\\t\\t\\t\\tlogger.error('Could not import event', { error })\\n\\t\\t\\t\\t\\tshowError(t('mail', 'Could not create event'))\\n\\t\\t\\t\\t})\\n\\t\\t},\\n\\t},\\n}\\n</script>\\n\\n<style scoped>\\n.reservation {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tmargin: 30px 38px;\\n\\tborder: 1px solid var(--color-border);\\n\\tborder-radius: var(--border-radius);\\n\\tpadding: 20px;\\n\\talign-items: center;\\n}\\n\\n.departure,\\n.arrival {\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\tflex-grow: 1;\\n}\\n\\n.departure,\\n.arrival,\\n.connection {\\n\\tjustify-content: center;\\n}\\n\\n.station {\\n\\tfont-size: larger;\\n\\tfont-weight: bold;\\n}\\n\\n.departure {\\n\\ttext-align: right;\\n}\\n\\n.connection {\\n\\ttext-align: center;\\n\\tpadding: 0 40px;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M2 13h7.8a1.4 1.4 0 001.1-.6L14 8l-3.1-4.4A1.4 1.4 0 009.8 3H2l3.4 5z\\\" stroke=\\\"#000\\\" stroke-width=\\\"2\\\"></path></svg>\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('Content',{attrs:{\"app-name\":\"mail\"}},[_c('Navigation'),_vm._v(\" \"),(_vm.$route.name === 'outbox')?_c('Outbox'):(_vm.activeAccount)?_c('MailboxThread',{attrs:{\"account\":_vm.activeAccount,\"mailbox\":_vm.activeMailbox}}):_vm._e(),_vm._v(\" \"),(_vm.$store.getters.showMessageComposer)?_c('NewMessageModal',{on:{\"close\":_vm.onCloseModal}}):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n      import API from \"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../node_modules/css-loader/dist/cjs.js!../node_modules/sass-loader/dist/cjs.js!./mail.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../node_modules/css-loader/dist/cjs.js!../node_modules/sass-loader/dist/cjs.js!./mail.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../node_modules/css-loader/dist/cjs.js!../node_modules/sass-loader/dist/cjs.js!./mobile.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../node_modules/css-loader/dist/cjs.js!../node_modules/sass-loader/dist/cjs.js!./mobile.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SectionTitle.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SectionTitle.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2020 Greta Doçi <gretadoci@gmail.com>\n  -\n  - @author 2020 Greta Doçi <gretadoci@gmail.com>\n  -\n  - @license AGPL-3.0-or-later\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<div id=\"priority\">\n\t\t<div class=\"app-content-list-item\">\n\t\t\t<h2>{{ name }}</h2>\n\t\t</div>\n\t</div>\n</template>\n<script>\nexport default {\n\tname: 'SectionTitle',\n\tprops: {\n\t\tname: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\n#priority {\n\tdisplay: inline-block;\n}\n.app-content-list-item {\n\topacity: .8;\n}\n.app-content-list-item:hover {\n\tbackground-color: transparent;\n\topacity: 0.8;\n}\nh2 {\n\tfont-weight: normal;\n\tfont-size: 17px;\n\tmargin-bottom: 2px;\n}\n</style>\n","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SectionTitle.vue?vue&type=style&index=0&id=61053746&prod&scoped=true&lang=css&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SectionTitle.vue?vue&type=style&index=0&id=61053746&prod&scoped=true&lang=css&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./SectionTitle.vue?vue&type=template&id=61053746&scoped=true&\"\nimport script from \"./SectionTitle.vue?vue&type=script&lang=js&\"\nexport * from \"./SectionTitle.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SectionTitle.vue?vue&type=style&index=0&id=61053746&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"61053746\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"priority\"}},[_c('div',{staticClass:\"app-content-list-item\"},[_c('h2',[_vm._v(_vm._s(_vm.name))])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"header\">\n\t\t<Button\n\t\t\ttype=\"primary\"\n\t\t\tclass=\"new-message-button\"\n\t\t\t:disabled=\"$store.getters.showMessageComposer\"\n\t\t\tbutton-id=\"mail_new_message\"\n\t\t\trole=\"complementary\"\n\t\t\t@click=\"onNewMessage\">\n\t\t\t<template #icon>\n\t\t\t\t<IconAdd\n\t\t\t\t\t:size=\"20\" />\n\t\t\t</template>\n\t\t\t{{ t('mail', 'New message') }}\n\t\t</Button>\n\t\t<Button v-if=\"currentMailbox\"\n\t\t\ttype=\"tertiary-no-background\"\n\t\t\tclass=\"refresh__button\"\n\t\t\t:disabled=\"refreshing\"\n\t\t\t@click=\"refreshMailbox\">\n\t\t\t<template #icon>\n\t\t\t\t<IconRefresh\n\t\t\t\t\t:size=\"20\" />\n\t\t\t</template>\n\t\t</Button>\n\t</div>\n</template>\n\n<script>\nimport { NcButton as Button } from '@nextcloud/vue'\nimport IconAdd from 'vue-material-design-icons/Plus'\nimport IconRefresh from 'vue-material-design-icons/Refresh'\nimport logger from '../logger'\n\nexport default {\n\tname: 'NewMessageButtonHeader',\n\tcomponents: {\n\t\tButton,\n\t\tIconAdd,\n\t\tIconRefresh,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\trefreshing: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\tcurrentMailbox() {\n\t\t\tif (this.$route.name === 'message' || this.$route.name === 'mailbox') {\n\t\t\t\treturn this.$store.getters.getMailbox(this.$route.params.mailboxId)\n\t\t\t}\n\t\t\treturn undefined\n\t\t},\n\t},\n\tmethods: {\n\t\tasync refreshMailbox() {\n\t\t\tif (this.refreshing === true) {\n\t\t\t\tlogger.debug('already sync\\'ing mailbox.. aborting')\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.refreshing = true\n\t\t\ttry {\n\t\t\t\tawait this.$store.dispatch('syncEnvelopes', { mailboxId: this.currentMailbox.databaseId })\n\t\t\t\tlogger.debug('Current mailbox is sync\\'ing ')\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error('could not sync current mailbox', { error })\n\t\t\t} finally {\n\t\t\t\tthis.refreshing = false\n\t\t\t}\n\t\t},\n\t\tonNewMessage() {\n\t\t\tthis.$store.dispatch('showMessageComposer', {\n\n\t\t\t})\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.header {\n\tdisplay: flex;\n\talign-items: center;\n\tpadding: 8px 8px 8px 48px;\n\tgap: 4px;\n\theight: 61px;\n\tborder-right: 1px solid var(--color-border)\n}\n.refresh__button {\n\tbackground-color: transparent;\n}\n.new-message-button {\n\tbackground-image: var(--gradient-primary-background);\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewMessageButtonHeader.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewMessageButtonHeader.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewMessageButtonHeader.vue?vue&type=style&index=0&id=4c3b0c54&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewMessageButtonHeader.vue?vue&type=style&index=0&id=4c3b0c54&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./NewMessageButtonHeader.vue?vue&type=template&id=4c3b0c54&scoped=true&\"\nimport script from \"./NewMessageButtonHeader.vue?vue&type=script&lang=js&\"\nexport * from \"./NewMessageButtonHeader.vue?vue&type=script&lang=js&\"\nimport style0 from \"./NewMessageButtonHeader.vue?vue&type=style&index=0&id=4c3b0c54&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4c3b0c54\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"header\"},[_c('Button',{staticClass:\"new-message-button\",attrs:{\"type\":\"primary\",\"disabled\":_vm.$store.getters.showMessageComposer,\"button-id\":\"mail_new_message\",\"role\":\"complementary\"},on:{\"click\":_vm.onNewMessage},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('IconAdd',{attrs:{\"size\":20}})]},proxy:true}])},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'New message'))+\"\\n\\t\")]),_vm._v(\" \"),(_vm.currentMailbox)?_c('Button',{staticClass:\"refresh__button\",attrs:{\"type\":\"tertiary-no-background\",\"disabled\":_vm.refreshing},on:{\"click\":_vm.refreshMailbox},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('IconRefresh',{attrs:{\"size\":20}})]},proxy:true}],null,false,3240524606)}):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/* eslint-disable */\n\n/**\n * Vendored and fixed version of the abandoned https://github.com/ElemeFE/vue-infinite-scroll lib\n */\n\nconst ctx = '@@InfiniteScroll';\n\nvar throttle = function (fn, delay) {\n  var now, lastExec, timer, context, args; //eslint-disable-line\n\n  var execute = function () {\n    fn.apply(context, args);\n    lastExec = now;\n  };\n\n  return function () {\n    context = this;\n    args = arguments;\n\n    now = Date.now();\n\n    if (timer) {\n      clearTimeout(timer);\n      timer = null;\n    }\n\n    if (lastExec) {\n      var diff = delay - (now - lastExec);\n      if (diff < 0) {\n        execute();\n      } else {\n        timer = setTimeout(() => {\n          execute();\n        }, diff);\n      }\n    } else {\n      execute();\n    }\n  };\n};\n\nvar getScrollTop = function (element) {\n  if (element === window) {\n    return Math.max(window.pageYOffset || 0, document.documentElement.scrollTop);\n  }\n\n  return element.scrollTop;\n};\n\nvar getComputedStyle = document.defaultView.getComputedStyle;\n\nvar getScrollEventTarget = function (element) {\n  var currentNode = element;\n  // bugfix, see http://w3help.org/zh-cn/causes/SD9013 and http://stackoverflow.com/questions/17016740/onscroll-function-is-not-working-for-chrome\n  while (currentNode && currentNode.tagName !== 'HTML' && currentNode.tagName !== 'BODY' && currentNode.nodeType === 1) {\n    var overflowY = getComputedStyle(currentNode).overflowY;\n    if (overflowY === 'scroll' || overflowY === 'auto') {\n      return currentNode;\n    }\n    currentNode = currentNode.parentNode;\n  }\n  return window;\n};\n\nvar getVisibleHeight = function (element) {\n  if (element === window) {\n    return document.documentElement.clientHeight;\n  }\n\n  return element.clientHeight;\n};\n\nvar getElementTop = function (element) {\n  if (element === window) {\n    return getScrollTop(window);\n  }\n  return element.getBoundingClientRect().top + getScrollTop(window);\n};\n\nvar isAttached = function (element) {\n  var currentNode = element.parentNode;\n  while (currentNode) {\n    if (currentNode.tagName === 'HTML') {\n      return true;\n    }\n    if (currentNode.nodeType === 11) {\n      return false;\n    }\n    currentNode = currentNode.parentNode;\n  }\n  return false;\n};\n\nvar doBind = function () {\n  if (this.binded) return; // eslint-disable-line\n  this.binded = true;\n\n  var directive = this;\n  var element = directive.el;\n\n  var throttleDelayExpr = element.getAttribute('infinite-scroll-throttle-delay');\n  var throttleDelay = 200;\n  if (throttleDelayExpr) {\n    throttleDelay = Number(directive.vm[throttleDelayExpr] || throttleDelayExpr);\n    if (isNaN(throttleDelay) || throttleDelay < 0) {\n      throttleDelay = 200;\n    }\n  }\n  directive.throttleDelay = throttleDelay;\n\n  directive.scrollEventTarget = getScrollEventTarget(element);\n  directive.scrollListener = throttle(doCheck.bind(directive), directive.throttleDelay);\n  directive.scrollEventTarget.addEventListener('scroll', directive.scrollListener);\n\n  this.vm.$on('hook:beforeDestroy', function () {\n    directive.scrollEventTarget.removeEventListener('scroll', directive.scrollListener);\n  });\n\n  var disabledExpr = element.getAttribute('infinite-scroll-disabled');\n  var disabled = false;\n\n  if (disabledExpr) {\n    this.vm.$watch(disabledExpr, function(value) {\n      directive.disabled = value;\n      if (!value && directive.immediateCheck) {\n        doCheck.call(directive);\n      }\n    });\n    disabled = Boolean(directive.vm[disabledExpr]);\n  }\n  directive.disabled = disabled;\n\n  var distanceExpr = element.getAttribute('infinite-scroll-distance');\n  var distance = 0;\n  if (distanceExpr) {\n    distance = Number(directive.vm[distanceExpr] || distanceExpr);\n    if (isNaN(distance)) {\n      distance = 0;\n    }\n  }\n  directive.distance = distance;\n\n  var immediateCheckExpr = element.getAttribute('infinite-scroll-immediate-check');\n  var immediateCheck = true;\n  if (immediateCheckExpr) {\n    immediateCheck = Boolean(directive.vm[immediateCheckExpr]);\n  }\n  directive.immediateCheck = immediateCheck;\n\n  if (immediateCheck) {\n    doCheck.call(directive);\n  }\n\n  var eventName = element.getAttribute('infinite-scroll-listen-for-event');\n  if (eventName) {\n    directive.vm.$on(eventName, function() {\n      doCheck.call(directive);\n    });\n  }\n};\n\nvar doCheck = function (force) {\n  var scrollEventTarget = this.scrollEventTarget;\n  var element = this.el;\n  var distance = this.distance;\n\n  if (force !== true && this.disabled) return; //eslint-disable-line\n  var viewportScrollTop = getScrollTop(scrollEventTarget);\n  var viewportBottom = viewportScrollTop + getVisibleHeight(scrollEventTarget);\n\n  var shouldTrigger = false;\n\n  if (scrollEventTarget === element) {\n    shouldTrigger = scrollEventTarget.scrollHeight - viewportBottom <= distance;\n  } else {\n    var elementBottom = getElementTop(element) - getElementTop(scrollEventTarget) + element.offsetHeight + viewportScrollTop;\n\n    shouldTrigger = viewportBottom + distance >= elementBottom;\n  }\n\n  if (shouldTrigger && this.expression) {\n    this.expression();\n  }\n};\n\nexport default {\n  bind(el, binding, vnode) {\n    el[ctx] = {\n      el,\n      vm: vnode.context,\n      expression: binding.value\n    };\n    const args = arguments;\n    console.info('binding', el, binding, vnode)\n    el[ctx].vm.$nextTick(function () {\n      if (isAttached(el)) {\n        doBind.call(el[ctx], args);\n      }\n\n      el[ctx].bindTryCount = 0;\n\n      var tryBind = function () {\n        if (el[ctx].bindTryCount > 10) return; //eslint-disable-line\n        el[ctx].bindTryCount++;\n        if (isAttached(el)) {\n          doBind.call(el[ctx], args);\n        } else {\n          setTimeout(tryBind, 50);\n        }\n      };\n\n      tryBind();\n    });\n  },\n\n  unbind(el) {\n    if (el && el[ctx] && el[ctx].scrollEventTarget)\n      el[ctx].scrollEventTarget.removeEventListener('scroll', el[ctx].scrollListener);\n  }\n};\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EmptyMailbox.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EmptyMailbox.vue?vue&type=script&lang=js&\"","<template>\n\t<div id=\"emptycontent\">\n\t\t<IconMail :size=\"65\" />\n\t\t<h2>{{ t('mail', 'No messages in this mailbox') }}</h2>\n\t</div>\n</template>\n\n<script>\nimport IconMail from 'vue-material-design-icons/Email'\n\nexport default {\n\tname: 'EmptyMailbox',\n\tcomponents: {\n\t\tIconMail,\n\t},\n}\n</script>\n","import { render, staticRenderFns } from \"./EmptyMailbox.vue?vue&type=template&id=6e3dc29b&\"\nimport script from \"./EmptyMailbox.vue?vue&type=script&lang=js&\"\nexport * from \"./EmptyMailbox.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"emptycontent\"}},[_c('IconMail',{attrs:{\"size\":65}}),_vm._v(\" \"),_c('h2',[_vm._v(_vm._s(_vm.t('mail', 'No messages in this mailbox')))])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport memoize from 'lodash/fp/memoize'\nimport Axios from '@nextcloud/axios'\nimport { generateUrl } from '@nextcloud/router'\n\nexport const fetchAvatarUrl = (email) => {\n\tif (email === null) {\n\t\treturn Promise.resolve(undefined)\n\t}\n\n\tconst url = generateUrl('/apps/mail/api/avatars/url/{email}', {\n\t\temail,\n\t})\n\n\treturn Axios.get(url)\n\t\t.then((resp) => resp.data)\n\t\t.then((avatar) => {\n\t\t\tif (avatar.isExternal) {\n\t\t\t\treturn generateUrl('/apps/mail/api/avatars/image/{email}', {\n\t\t\t\t\temail,\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\treturn avatar.url\n\t\t\t}\n\t\t})\n\t\t.catch((err) => {\n\t\t\tif (err.response.status === 404) {\n\t\t\t\treturn undefined\n\t\t\t}\n\n\t\t\treturn Promise.reject(err)\n\t\t})\n}\n\nexport const fetchAvatarUrlMemoized = memoize(fetchAvatarUrl)\n","<!--\n  - @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  - @author 2021 Richard Steinmetz <richard@steinmetz.cloud>\n  -\n  - @license AGPL-3.0-or-later\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<BaseAvatar v-if=\"loading || !hasAvatar\"\n\t\t:display-name=\"displayName\"\n\t\t:size=\"size\"\n\t\t:disable-tooltip=\"disableTooltip\" />\n\t<BaseAvatar v-else\n\t\t:display-name=\"displayName\"\n\t\t:url=\"avatarUrl\"\n\t\t:size=\"size\"\n\t\t:disable-tooltip=\"disableTooltip\" />\n</template>\n\n<script>\nimport BaseAvatar from '@nextcloud/vue/dist/Components/NcAvatar'\nimport { fetchAvatarUrlMemoized } from '../service/AvatarService'\nimport logger from '../logger'\n\nexport default {\n\tname: 'Avatar',\n\tcomponents: {\n\t\tBaseAvatar,\n\t},\n\tprops: {\n\t\tdisplayName: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\temail: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdisableTooltip: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tsize: {\n\t\t\ttype: Number,\n\t\t\tdefault: 40,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tloading: true,\n\t\t\tavatarUrl: undefined,\n\t\t}\n\t},\n\tcomputed: {\n\t\thasAvatar() {\n\t\t\treturn this.avatarUrl !== undefined\n\t\t},\n\t},\n\tasync mounted() {\n\t\tif (this.email !== '') {\n\t\t\ttry {\n\t\t\t\tthis.avatarUrl = await fetchAvatarUrlMemoized(this.email)\n\t\t\t} catch {\n\t\t\t\tlogger.debug('Could not fetch avatar', { email: this.email })\n\t\t\t}\n\t\t}\n\n\t\tthis.loading = false\n\t},\n}\n</script>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Avatar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Avatar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Avatar.vue?vue&type=template&id=13a63765&\"\nimport script from \"./Avatar.vue?vue&type=script&lang=js&\"\nexport * from \"./Avatar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.loading || !_vm.hasAvatar)?_c('BaseAvatar',{attrs:{\"display-name\":_vm.displayName,\"size\":_vm.size,\"disable-tooltip\":_vm.disableTooltip}}):_c('BaseAvatar',{attrs:{\"display-name\":_vm.displayName,\"url\":_vm.avatarUrl,\"size\":_vm.size,\"disable-tooltip\":_vm.disableTooltip}})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import dragEventBus from '../util/dragEventBus'\nimport defer from 'lodash/defer'\n\nexport class DraggableEnvelope {\n\n\tconstructor(el, componentInstance, options) {\n\t\tthis.el = el\n\t\tthis.options = options\n\t\tthis.registerListeners.bind(this)(el)\n\t\tthis.setInitialAttributes()\n\t}\n\n\tsetInitialAttributes() {\n\t\tthis.el.setAttribute('draggable', 'true')\n\t\tthis.el.classList.add('draggable-envelope')\n\t}\n\n\tupdate(el, instance) {\n\t\tthis.options = instance.options\n\t}\n\n\tregisterListeners(el) {\n\t\tel.addEventListener('dragstart', this.onDragStart.bind(this))\n\t\tel.addEventListener('dragend', this.onDragEnd.bind(this))\n\t}\n\n\tremoveListeners(el) {\n\t\tel.removeEventListener('dragstart', this.onDragStart)\n\t\tel.removeEventListener('dragend', this.onDragEnd)\n\t}\n\n\tonDragStart(event) {\n\t\tconst { accountId, mailboxId, selectedEnvelopes } = this.options\n\n\t\tevent.dataTransfer.clearData()\n\t\tevent.dataTransfer.effectAllowed = 'move'\n\n\t\tconst envelopes = []\n\t\tif (selectedEnvelopes.length) {\n\t\t\t// handle dragged selection mode items\n\t\t\tselectedEnvelopes.forEach((envelope, index) => {\n\t\t\t\tenvelopes.push({\n\t\t\t\t\taccountId,\n\t\t\t\t\tmailboxId,\n\t\t\t\t\tenvelopeId: envelope.databaseId,\n\t\t\t\t\tdraggableLabel: `${envelope.subject} (${envelope.from[0].label})`,\n\t\t\t\t})\n\t\t\t})\n\t\t} else {\n\t\t\t// handle single dragged item\n\t\t\tconst { envelopeId, draggableLabel } = this.options\n\t\t\tenvelopes.push({ accountId, mailboxId, envelopeId, draggableLabel })\n\t\t}\n\n\t\tevent.dataTransfer.setData('text/plain', JSON.stringify(envelopes))\n\t\tthis.attachGhost({ event, envelopes })\n\n\t\tdragEventBus.$emit('drag-start', {\n\t\t\taccountId,\n\t\t\tmailboxId,\n\t\t\titemCount: envelopes.length,\n\t\t})\n\t}\n\n\tonDragEnd(event) {\n\t\tdragEventBus.$emit('drag-end', { accountId: this.options.accountId })\n\t}\n\n\tattachGhost({ event, envelopes }) {\n\t\tconst baseClass = 'draggable-envelope-ghost'\n\t\tconst dragNode = document.createElement('div')\n\t\tdragNode.classList.add(baseClass)\n\n\t\tconst counterNode = document.createElement('span')\n\t\tcounterNode.classList.add(`${baseClass}--counter`)\n\t\tconst textCountNode = document.createTextNode(envelopes.length)\n\t\tcounterNode.appendChild(textCountNode)\n\t\tdragNode.appendChild(counterNode)\n\n\t\tconst labelWrapperNode = document.createElement('div')\n\t\tlabelWrapperNode.classList.add(`${baseClass}--label-wrapper`)\n\n\t\tenvelopes.forEach(envelope => {\n\t\t\tconst labelNode = document.createElement('div')\n\t\t\tlabelNode.classList.add(`${baseClass}--label-wrapper--label`)\n\t\t\tconst textLabelNode = document.createTextNode(envelope.draggableLabel)\n\t\t\tlabelNode.appendChild(textLabelNode)\n\t\t\tlabelWrapperNode.appendChild(labelNode)\n\t\t})\n\n\t\tdragNode.appendChild(labelWrapperNode)\n\t\tdocument.body.appendChild(dragNode)\n\n\t\tevent.dataTransfer.setDragImage(dragNode, 0, 15)\n\n\t\t// the item can be removed immediately, because the\n\t\t// browser will take a \"screenshot\" of the dragImage\n\t\t// upon initialization to be used while dragging\n\t\tdefer(() => {\n\t\t\tdocument.body.removeChild(dragNode)\n\t\t})\n\t}\n\n}\n","import { DraggableEnvelope } from './draggable-envelope'\n\nlet instances = []\n\nexport const DraggableEnvelopeDirective = {\n\tbind(el, binding, vnode) {\n\t\tconst instance = new DraggableEnvelope(el, vnode.context, binding.value)\n\t\tinstances.push(instance)\n\t},\n\tcomponentUpdated(el, binding) {\n\t\tconst options = binding.value\n\t\tsetTimeout(() => {\n\t\t\tinstances.forEach(instance => {\n\t\t\t\tinstance.options.selectedEnvelopes = options.selectedEnvelopes\n\t\t\t\tinstance.update(el, instance)\n\t\t\t})\n\t\t})\n\t},\n\tunbind(el) {\n\t\tinstances = instances.filter((instance) => instance.el !== el)\n\t},\n}\n\nexport default DraggableEnvelope\n","/*\n * @copyright 2022 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @author 2022 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport curry from 'lodash/fp/curry'\nimport moment from '@nextcloud/moment'\n\nexport const shortDatetime = curry((ref, date) => {\n\tconst momentDate = moment(date)\n\t// Within the same day?\n\tif (ref.getFullYear() === date.getFullYear()\n\t\t&& ref.getMonth() === date.getMonth()\n\t\t&& ref.getDate() === date.getDate()) {\n\t\treturn momentDate.format('H:mm')\n\t}\n\t// Within the previous week?\n\tif (date.getTime() > (ref.getTime() - 30 * 60 * 24 * 7 * 1000)) {\n\t\treturn momentDate.format('dd')\n\t}\n\t// Within the previous year?\n\tif (date.getTime() > (ref.getTime() - 30 * 60 * 24 * 365 * 1000)) {\n\t\treturn momentDate.format('MMM D')\n\t}\n\t// Older\n\treturn momentDate.format('MMM D, YYYY')\n})\n\nexport const shortRelativeDatetime = shortDatetime(new Date())\n","<template>\n\t<MailboxPicker :account=\"account\"\n\t\t:selected.sync=\"destMailboxId\"\n\t\t:loading=\"moving\"\n\t\t:label-select=\"moveThread ? t('mail', 'Move thread') : t('mail', 'Move message')\"\n\t\t:label-select-loading=\"moveThread ? t('mail', 'Moving thread') : t('mail', 'Moving message')\"\n\t\t@select=\"onMove\"\n\t\t@close=\"onClose\" />\n</template>\n\n<script>\nimport logger from '../logger'\nimport MailboxPicker from './MailboxPicker'\n\nexport default {\n\tname: 'MoveModal',\n\tcomponents: {\n\t\tMailboxPicker,\n\t},\n\tprops: {\n\t\taccount: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tenvelopes: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tmoveThread: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tmoving: false,\n\t\t\tdestMailboxId: undefined,\n\t\t}\n\t},\n\tmethods: {\n\t\tonClose() {\n\t\t\tthis.$emit('close')\n\t\t},\n\t\tasync onMove() {\n\t\t\tthis.moving = true\n\n\t\t\ttry {\n\t\t\t\tconst envelopes = this.envelopes\n\t\t\t\t\t.filter(envelope => envelope.mailboxId !== this.destMailboxId)\n\n\t\t\t\tif (envelopes.length === 0) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tfor (const envelope of envelopes) {\n\t\t\t\t\tif (this.moveThread) {\n\t\t\t\t\t\tawait this.$store.dispatch('moveThread', { envelope, destMailboxId: this.destMailboxId })\n\t\t\t\t\t} else {\n\t\t\t\t\t\tawait this.$store.dispatch('moveMessage', { id: envelope.databaseId, destMailboxId: this.destMailboxId })\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tawait this.$store.dispatch('syncEnvelopes', { mailboxId: this.destMailboxId })\n\t\t\t\tthis.$emit('move')\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error('could not move messages', {\n\t\t\t\t\terror,\n\t\t\t\t})\n\t\t\t} finally {\n\t\t\t\tthis.moving = false\n\t\t\t\tthis.$emit('close')\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MoveModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MoveModal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MoveModal.vue?vue&type=template&id=de89f7bc&\"\nimport script from \"./MoveModal.vue?vue&type=script&lang=js&\"\nexport * from \"./MoveModal.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('MailboxPicker',{attrs:{\"account\":_vm.account,\"selected\":_vm.destMailboxId,\"loading\":_vm.moving,\"label-select\":_vm.moveThread ? _vm.t('mail', 'Move thread') : _vm.t('mail', 'Move message'),\"label-select-loading\":_vm.moveThread ? _vm.t('mail', 'Moving thread') : _vm.t('mail', 'Moving message')},on:{\"update:selected\":function($event){_vm.destMailboxId=$event},\"select\":_vm.onMove,\"close\":_vm.onClose}})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./JunkIcon.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./JunkIcon.vue?vue&type=script&lang=js&\"","<template functional>\n\t<span :aria-hidden=\"!props.title\"\n\t\t:aria-label=\"props.title\"\n\t\t:class=\"[data.class, data.staticClass]\"\n\t\tclass=\"material-design-icon junk-icon\"\n\t\trole=\"img\"\n\t\tv-bind=\"data.attrs\"\n\t\tv-on=\"listeners\">\n\t\t<svg :fill=\"props.fillColor\"\n\t\t\tclass=\"material-design-icon__svg\"\n\t\t\t:width=\"props.size\"\n\t\t\t:height=\"props.size\"\n\t\t\tviewBox=\"0 0 16 16\">\n\t\t\t<path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\n\t\t\t<path d=\"m5.5156 2l-3.5156 3.5156v4.9684l3.5156 3.516h4.9684l3.516-3.516v-4.9684l-3.516-3.5156h-4.9684zm1.4844 2h2v5h-2v-5zm0 6h2v2h-2v-2z\" />\n\t\t</svg>\n\t</span>\n</template>\n\n<script>\nexport default {\n\tname: 'JunkIcon',\n\tprops: {\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tsize: {\n\t\t\ttype: Number,\n\t\t\tdefault: 20,\n\t\t},\n\t\tfillColor: {\n\t\t\ttype: String,\n\t\t\tdefault: 'currentColor',\n\t\t},\n\t},\n}\n</script>\n","import { render, staticRenderFns } from \"./JunkIcon.vue?vue&type=template&id=342e4da8&functional=true&\"\nimport script from \"./JunkIcon.vue?vue&type=script&lang=js&\"\nexport * from \"./JunkIcon.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  true,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(_c,_vm){return _c('span',_vm._g(_vm._b({staticClass:\"material-design-icon junk-icon\",class:[_vm.data.class, _vm.data.staticClass],attrs:{\"aria-hidden\":!_vm.props.title,\"aria-label\":_vm.props.title,\"role\":\"img\"}},'span',_vm.data.attrs,false),_vm.listeners),[_c('svg',{staticClass:\"material-design-icon__svg\",attrs:{\"fill\":_vm.props.fillColor,\"width\":_vm.props.size,\"height\":_vm.props.size,\"viewBox\":\"0 0 16 16\"}},[_c('path',{attrs:{\"d\":\"M0 0h24v24H0V0z\",\"fill\":\"none\"}}),_vm._v(\" \"),_c('path',{attrs:{\"d\":\"m5.5156 2l-3.5156 3.5156v4.9684l3.5156 3.516h4.9684l3.516-3.516v-4.9684l-3.516-3.5156h-4.9684zm1.4844 2h2v5h-2v-5zm0 6h2v2h-2v-2z\"}})])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * @copyright 2022 Jonas Sulzer <jonas@violoncello.ch>\n *\n * @author 2022 Jonas Sulzer <jonas@violoncello.ch>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nexport const hiddenTags = {\n\tforwarded: '',\n\thasattachment: '',\n\thas_cal: '',\n\thasnoattachment: '',\n\tloadremoteimages: '',\n\t'unsubscribe newsletter': '',\n}\n","<!--\n  - @copyright 2021 Greta Doci <gretadoci@gmail.com>\n  -\n  - @author 2021 Greta Doci <gretadoci@gmail.com>\n  - @author 2022 Jonas Sulzer <jonas@violoncello.ch>\n  -\n  - @license AGPL-3.0-or-later\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<Modal size=\"large\" @close=\"onClose\">\n\t\t<div class=\"modal-content\">\n\t\t\t<h2 class=\"tag-title\">\n\t\t\t\t{{ t('mail', 'Add default tags') }}\n\t\t\t</h2>\n\t\t\t<div v-for=\"tag in tags\" :key=\"tag.id\" class=\"tag-group\">\n\t\t\t\t<button class=\"tag-group__label\"\n\t\t\t\t\t:style=\"{\n\t\t\t\t\t\tcolor: convertHex(tag.color, 1),\n\t\t\t\t\t\t'background-color': convertHex(tag.color, 0.15)\n\t\t\t\t\t}\">\n\t\t\t\t\t{{ tag.displayName }}\n\t\t\t\t</button>\n\t\t\t\t<Actions :force-menu=\"true\">\n\t\t\t\t\t<ActionButton v-if=\"renameTagLabel\"\n\t\t\t\t\t\t@click=\"openEditTag\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<IconRename :size=\"17\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t{{ t('mail','Rename tag') }}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t\t<ActionInput v-if=\"renameTagInput\"\n\t\t\t\t\t\t:value=\"tag.displayName\"\n\t\t\t\t\t\t@submit=\"renameTag(tag, $event)\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<IconTag :size=\"20\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</ActionInput>\n\t\t\t\t\t<ActionText\n\t\t\t\t\t\tv-if=\"showSaving\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<IconLoading :size=\"20\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t{{ t('mail', 'Saving new tag name …') }}\n\t\t\t\t\t</ActionText>\n\t\t\t\t</Actions>\n\t\t\t\t<button v-if=\"!isSet(tag.imapLabel)\"\n\t\t\t\t\tclass=\"tag-actions\"\n\t\t\t\t\t@click=\"addTag(tag.imapLabel)\">\n\t\t\t\t\t{{ t('mail','Set') }}\n\t\t\t\t</button>\n\t\t\t\t<button v-else\n\t\t\t\t\tclass=\"tag-actions\"\n\t\t\t\t\t@click=\"removeTag(tag.imapLabel)\">\n\t\t\t\t\t{{ t('mail','Unset') }}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<h2 class=\"tag-title\">\n\t\t\t\t{{ t('mail', 'Add tag') }}\n\t\t\t</h2>\n\t\t\t<div class=\"create-tag\">\n\t\t\t\t<button v-if=\"!editing\"\n\t\t\t\t\tclass=\"tagButton\"\n\t\t\t\t\t@click=\"addTagInput\">\n\t\t\t\t\t{{ t('mail', 'Add tag') }}\n\t\t\t\t</button>\n\t\t\t\t<ActionInput v-if=\"editing\" @submit=\"createTag\">\n\t\t\t\t\t<IconTag :size=\"20\" />\n\t\t\t\t</ActionInput>\n\t\t\t\t<ActionText\n\t\t\t\t\tv-if=\"showSaving\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<IconLoading :size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('mail', 'Saving tag …') }}\n\t\t\t\t</ActionText>\n\t\t\t</div>\n\t\t</div>\n\t</Modal>\n</template>\n\n<script>\nimport { NcModal as Modal, NcActions as Actions, NcActionText as ActionText, NcActionInput as ActionInput, NcActionButton as ActionButton, NcLoadingIcon as IconLoading } from '@nextcloud/vue'\nimport IconRename from 'vue-material-design-icons/Pencil'\nimport IconTag from 'vue-material-design-icons/Tag'\nimport { showError, showInfo } from '@nextcloud/dialogs'\nimport { hiddenTags } from './tags.js'\n\nfunction randomColor() {\n\tlet randomHexColor = ((1 << 24) * Math.random() | 0).toString(16)\n\twhile (randomHexColor.length < 6) {\n\t\trandomHexColor = '0' + randomHexColor\n\t}\n\treturn '#' + randomHexColor\n}\nexport default {\n\tname: 'TagModal',\n\tcomponents: {\n\t\tModal,\n\t\tActions,\n\t\tActionText,\n\t\tActionInput,\n\t\tActionButton,\n\t\tIconRename,\n\t\tIconTag,\n\t\tIconLoading,\n\t},\n\tprops: {\n\t\tenvelope: {\n\t\t\t// The envelope on which this menu will act\n\t\t\trequired: true,\n\t\t\ttype: Object,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tisAdded: false,\n\t\t\tediting: false,\n\t\t\ttagLabel: true,\n\t\t\ttagInput: false,\n\t\t\tshowSaving: false,\n\t\t\trenameTagLabel: true,\n\t\t\trenameTagInput: false,\n\t\t\tcolor: randomColor(),\n\t\t}\n\t},\n\tcomputed: {\n\t\ttags() {\n\t\t\treturn this.$store.getters.getTags.filter((tag) => tag.imapLabel !== '$label1' && !(tag.displayName.toLowerCase() in hiddenTags)).sort((a, b) => {\n\t\t\t\tif (a.isDefaultTag && !b.isDefaultTag) {\n\t\t\t\t\treturn -1\n\t\t\t\t}\n\t\t\t\tif (b.isDefaultTag && !a.isDefaultTag) {\n\t\t\t\t\treturn 1\n\t\t\t\t}\n\t\t\t\tif (a.isDefaultTag && b.isDefaultTag) {\n\t\t\t\t\tif (a.displayName < b.displayName) {\n\t\t\t\t\t\treturn 1\n\t\t\t\t\t}\n\t\t\t\t\treturn -1\n\t\t\t\t}\n\t\t\t\tif (this.isSet(a.imapLabel) && !this.isSet(b.imapLabel)) {\n\t\t\t\t\treturn -1\n\t\t\t\t}\n\t\t\t\tif (!this.isSet(a.imapLabel) && this.isSet(b.imapLabel)) {\n\t\t\t\t\treturn 1\n\t\t\t\t}\n\t\t\t\tif (a.displayName < b.displayName) {\n\t\t\t\t\treturn 1\n\t\t\t\t}\n\t\t\t\treturn -1\n\t\t\t})\n\t\t},\n\t},\n\tmethods: {\n\t\tonClose() {\n\t\t\tthis.$emit('close')\n\t\t},\n\t\tisSet(imapLabel) {\n\t\t\treturn this.$store.getters.getEnvelopeTags(this.envelope.databaseId).some(tag => tag.imapLabel === imapLabel)\n\t\t},\n\t\taddTag(imapLabel) {\n\t\t\tthis.isAdded = true\n\t\t\tthis.$store.dispatch('addEnvelopeTag', { envelope: this.envelope, imapLabel })\n\t\t},\n\t\tremoveTag(imapLabel) {\n\t\t\tthis.isAdded = false\n\t\t\tthis.$store.dispatch('removeEnvelopeTag', { envelope: this.envelope, imapLabel })\n\t\t},\n\t\taddTagInput() {\n\t\t\tthis.editing = true\n\t\t\tthis.showSaving = false\n\t\t},\n\t\tasync createTag(event) {\n\t\t\tthis.editing = true\n\t\t\tconst displayName = event.target.querySelector('input[type=text]').value\n\t\t\tif (displayName.toLowerCase() in hiddenTags) {\n\t\t\t\tshowError(this.t('mail', 'Tag name is a hidden system tag'))\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif (this.$store.getters.getTags.some(tag => tag.displayName === displayName)) {\n\t\t\t\tshowError(this.t('mail', 'Tag already exists'))\n\t\t\t\treturn\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tawait this.$store.dispatch('createTag', {\n\t\t\t\t\tdisplayName,\n\t\t\t\t\tcolor: randomColor(displayName),\n\t\t\t\t})\n\t\t\t} catch (error) {\n\t\t\t\tconsole.debug(error)\n\t\t\t\tshowError(this.t('mail', 'An error occurred, unable to create the tag.'))\n\t\t\t} finally {\n\t\t\t\tthis.showSaving = false\n\t\t\t\tthis.tagLabel = true\n\t\t\t}\n\t\t},\n\t\tconvertHex(color, opacity) {\n\t\t\tif (color.length === 4) {\n\t\t\t\tconst r = parseInt(color.substring(1, 2), 16)\n\t\t\t\tconst g = parseInt(color.substring(2, 3), 16)\n\t\t\t\tconst b = parseInt(color.substring(3, 4), 16)\n\t\t\t\treturn `rgba(${r}, ${g}, ${b}, ${opacity})`\n\t\t\t} else {\n\t\t\t\tconst r = parseInt(color.substring(1, 3), 16)\n\t\t\t\tconst g = parseInt(color.substring(3, 5), 16)\n\t\t\t\tconst b = parseInt(color.substring(5, 7), 16)\n\t\t\t\treturn `rgba(${r}, ${g}, ${b}, ${opacity})`\n\t\t\t}\n\t\t},\n\t\topenEditTag() {\n\t\t\tthis.renameTagLabel = false\n\t\t\tthis.renameTagInput = true\n\t\t\tthis.showSaving = false\n\n\t\t},\n\t\tasync renameTag(tag, event) {\n\t\t\tthis.renameTagInput = false\n\t\t\tthis.showSaving = false\n\t\t\tconst displayName = event.target.querySelector('input[type=text]').value\n\n\t\t\ttry {\n\t\t\t\tawait this.$store.dispatch('updateTag', {\n\t\t\t\t\ttag,\n\t\t\t\t\tdisplayName,\n\t\t\t\t\tcolor: tag.color,\n\t\t\t\t})\n\t\t\t\tthis.renameTagLabel = true\n\t\t\t\tthis.renameTagInput = false\n\t\t\t\tthis.showSaving = false\n\t\t\t} catch (error) {\n\t\t\t\tshowInfo(t('mail', 'An error occurred, unable to rename the tag.'))\n\t\t\t\tconsole.error(error)\n\t\t\t\tthis.renameTagLabel = false\n\t\t\t\tthis.renameTagInput = false\n\t\t\t\tthis.showSaving = true\n\t\t\t}\n\t\t},\n\n\t},\n}\n\n</script>\n\n<style lang=\"scss\" scoped>\n::v-deep .modal-content {\n\tpadding: 0 20px 20px 20px;\n\tmax-height: calc(100vh - 210px);\n\toverflow-y: auto;\n}\n::v-deep .modal-container {\n\twidth: auto !important;\n}\n.tag-title {\n\tmargin-top: 20px;\n\tmargin-left: 10px;\n}\n.tag-group {\n\tdisplay: block;\n\tposition: relative;\n\tmargin: 0 1px;\n\toverflow: hidden;\n\tleft: 4px;\n}\n.tag-actions {\n\tbackground-color: transparent;\n\tborder: none;\n\tfloat: right;\n\t&:hover,\n\t&:focus {\n\t\tbackground-color: var(--color-border-dark);\n\t}\n}\n.tag-group__label {\n\tz-index: 2;\n\tfont-weight: bold;\n\tborder: none;\n\tbackground-color: transparent;\n\tpadding-left: 10px;\n\tpadding-right: 10px;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\tmax-width: 94px;\n}\n.app-navigation-entry-bullet-wrapper {\n\twidth: 44px;\n\theight: 44px;\n\tdisplay: inline-block;\n\tposition: absolute;\n\tlist-style: none;\n\n\t.color0 {\n\t\twidth: 30px !important;\n\t\theight: 30px;\n\t\tborder-radius: 50%;\n\t\tbackground-size: 14px;\n\t\tmargin-top: -65px;\n\t\tmargin-left: 180px;\n\t\tz-index: 2;\n\t\tdisplay: flex;\n\t\tposition: relative;\n\t}\n}\n.icon-colorpicker {\n\tbackground-image: var(--icon-add-fff);\n}\n.tagButton {\n\tdisplay: inline-block;\n\tmargin-left: 10px;\n}\n\n.action-item {\n\tright: 8px;\n\tfloat: right;\n}\n.create-tag {\n\tlist-style: none;\n}\n@media only screen and (max-width: 512px) {\n\t::v-deep .modal-container {\n\ttop: 100px !important;\n\tmax-height: calc(100vh - 170px) !important\n\t}\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TagModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TagModal.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TagModal.vue?vue&type=style&index=0&id=2a5ebd9f&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TagModal.vue?vue&type=style&index=0&id=2a5ebd9f&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./TagModal.vue?vue&type=template&id=2a5ebd9f&scoped=true&\"\nimport script from \"./TagModal.vue?vue&type=script&lang=js&\"\nexport * from \"./TagModal.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TagModal.vue?vue&type=style&index=0&id=2a5ebd9f&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2a5ebd9f\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('Modal',{attrs:{\"size\":\"large\"},on:{\"close\":_vm.onClose}},[_c('div',{staticClass:\"modal-content\"},[_c('h2',{staticClass:\"tag-title\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Add default tags'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_vm._l((_vm.tags),function(tag){return _c('div',{key:tag.id,staticClass:\"tag-group\"},[_c('button',{staticClass:\"tag-group__label\",style:({\n\t\t\t\t\tcolor: _vm.convertHex(tag.color, 1),\n\t\t\t\t\t'background-color': _vm.convertHex(tag.color, 0.15)\n\t\t\t\t})},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(tag.displayName)+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('Actions',{attrs:{\"force-menu\":true}},[(_vm.renameTagLabel)?_c('ActionButton',{on:{\"click\":_vm.openEditTag},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('IconRename',{attrs:{\"size\":17}})]},proxy:true}],null,true)},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail','Rename tag'))+\"\\n\\t\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.renameTagInput)?_c('ActionInput',{attrs:{\"value\":tag.displayName},on:{\"submit\":function($event){return _vm.renameTag(tag, $event)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('IconTag',{attrs:{\"size\":20}})]},proxy:true}],null,true)}):_vm._e(),_vm._v(\" \"),(_vm.showSaving)?_c('ActionText',{scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('IconLoading',{attrs:{\"size\":20}})]},proxy:true}],null,true)},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Saving new tag name …'))+\"\\n\\t\\t\\t\\t\")]):_vm._e()],1),_vm._v(\" \"),(!_vm.isSet(tag.imapLabel))?_c('button',{staticClass:\"tag-actions\",on:{\"click\":function($event){return _vm.addTag(tag.imapLabel)}}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail','Set'))+\"\\n\\t\\t\\t\")]):_c('button',{staticClass:\"tag-actions\",on:{\"click\":function($event){return _vm.removeTag(tag.imapLabel)}}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail','Unset'))+\"\\n\\t\\t\\t\")])],1)}),_vm._v(\" \"),_c('h2',{staticClass:\"tag-title\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Add tag'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"create-tag\"},[(!_vm.editing)?_c('button',{staticClass:\"tagButton\",on:{\"click\":_vm.addTagInput}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Add tag'))+\"\\n\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.editing)?_c('ActionInput',{on:{\"submit\":_vm.createTag}},[_c('IconTag',{attrs:{\"size\":20}})],1):_vm._e(),_vm._v(\" \"),(_vm.showSaving)?_c('ActionText',{scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('IconLoading',{attrs:{\"size\":20}})]},proxy:true}],null,false,3081367109)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Saving tag …'))+\"\\n\\t\\t\\t\")]):_vm._e()],1)],2)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*\n * @copyright 2021 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @author 2021 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport * as webdav from 'webdav'\nimport axios from '@nextcloud/axios'\nimport memoize from 'lodash/fp/memoize'\nimport { generateRemoteUrl } from '@nextcloud/router'\nimport { getCurrentUser } from '@nextcloud/auth'\n\nexport const getClient = memoize((service) => {\n\t// Add this so the server knows it is an request from the browser\n\taxios.defaults.headers['X-Requested-With'] = 'XMLHttpRequest'\n\n\t// force our axios\n\tconst patcher = webdav.getPatcher()\n\tpatcher.patch('request', axios)\n\n\treturn webdav.createClient(\n\t\tgenerateRemoteUrl(`dav/${service}/${getCurrentUser().uid}`)\n\t)\n})\n","/**\n * @copyright Copyright (c) 2019 Georg Ehrke\n *\n * @author Georg Ehrke <oc.list@georgehrke.com>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport md5 from 'md5'\nimport convert from 'color-convert'\n\n/**\n * Generates a hex color based on RGB string\n *\n * @param {string} uid The string to generate a color from\n * @return {string} The hex color\n */\nexport function uidToHexColor(uid) {\n\tconst color = uidToColor(uid)\n\treturn '#' + convert.rgb.hex(color.r, color.g, color.b)\n}\n\n// copied from calendar\n// TODO: have it separately in a file\n\n/**\n * This is copied from nextcloud-vue for now, until it is exposed upstream.\n */\n\nexport const uidToColor = (uid) => {\n\t// Normalize hash\n\tlet hash = uid.toLowerCase()\n\n\t// Already a md5 hash?\n\tif (hash.match(/^([0-9a-f]{4}-?){8}$/) === null) {\n\t\thash = md5(hash)\n\t}\n\n\thash = hash.replace(/[^0-9a-f]/g, '')\n\n\tconst steps = 6\n\tconst finalPalette = GenColors(steps)\n\n\t// Convert a string to an integer evenly\n\tfunction hashToInt(hash, maximum) {\n\t\tlet finalInt = 0\n\t\tconst result = []\n\n\t\t// Splitting evenly the string\n\t\tfor (let i = 0; i < hash.length; i++) {\n\t\t\t// chars in md5 goes up to f, hex:16\n\t\t\tresult.push(parseInt(hash.charAt(i), 16) % 16)\n\t\t}\n\n\t\t// Adds up all results\n\t\tfor (const j in result) {\n\t\t\tfinalInt += result[j]\n\t\t}\n\n\t\t// chars in md5 goes up to f, hex:16\n\t\t// make sure we're always using int in our operation\n\t\treturn parseInt(parseInt(finalInt, 10) % maximum, 10)\n\t}\n\treturn finalPalette[hashToInt(hash, steps * 3)]\n}\n\nfunction Color(r, g, b) {\n\tthis.r = r\n\tthis.g = g\n\tthis.b = b\n}\n\nfunction stepCalc(steps, ends) {\n\tconst step = new Array(3)\n\tstep[0] = (ends[1].r - ends[0].r) / steps\n\tstep[1] = (ends[1].g - ends[0].g) / steps\n\tstep[2] = (ends[1].b - ends[0].b) / steps\n\treturn step\n}\n\nfunction mixPalette(steps, color1, color2) {\n\tconst palette = []\n\tpalette.push(color1)\n\tconst step = stepCalc(steps, [color1, color2])\n\tfor (let i = 1; i < steps; i++) {\n\t\tconst r = parseInt(color1.r + step[0] * i, 10)\n\t\tconst g = parseInt(color1.g + step[1] * i, 10)\n\t\tconst b = parseInt(color1.b + step[2] * i, 10)\n\t\tpalette.push(new Color(r, g, b))\n\t}\n\treturn palette\n}\n\n/**\n * Generate colors from the official nextcloud color\n * You can provide how many colors you want (multiplied by 3)\n * if step = 6\n * 3 colors * 6 will result in 18 generated colors\n *\n * @param {number} [steps=6] Number of steps to go from a color to another\n * @return {object[]}\n */\nfunction GenColors(steps) {\n\tif (!steps) {\n\t\tsteps = 6\n\t}\n\n\tconst red = new Color(182, 70, 157)\n\tconst yellow = new Color(221, 203, 85)\n\tconst blue = new Color(0, 130, 201) // Nextcloud blue\n\n\tconst palette1 = mixPalette(steps, red, yellow)\n\tconst palette2 = mixPalette(steps, yellow, blue)\n\tconst palette3 = mixPalette(steps, blue, red)\n\n\treturn palette1.concat(palette2).concat(palette3)\n}\n\nexport default uidToColor\n","/**\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * Mail\n *\n * This code is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License, version 3,\n * as published by the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License, version 3,\n * along with this program.  If not, see <http://www.gnu.org/licenses/>\n *\n */\n\nimport curry from 'lodash/fp/curry'\nimport ical from 'ical.js'\nimport { getClient } from '../dav/client'\nimport Axios from '@nextcloud/axios'\n\nimport Logger from '../logger'\nimport { generateRemoteUrl } from '@nextcloud/router'\nimport { getCurrentUser } from '@nextcloud/auth'\nimport { uidToHexColor } from '../util/calendarColor'\n\nconst canWrite = (properties) => {\n\tlet acls = properties?.acl?.ace\n\n\tif (!acls) {\n\t\treturn false\n\t}\n\t// There might only be one ACL, not a list\n\tif (!Array.isArray(acls)) {\n\t\tacls = [acls]\n\t}\n\n\tfor (const acl of acls) {\n\t\tif (acl.grant?.privilege?.write !== undefined) {\n\t\t\treturn true\n\t\t}\n\t}\n\n\treturn false\n}\n\nconst getCalendarData = (calendar) => {\n\treturn {\n\t\tdisplayname: calendar.props.displayname,\n\t\torder: calendar.props['calendar-order'],\n\t\tcomponents: {\n\t\t\tvevent: true, // check if VEVENT exists in props['supported-calendar-component-set'].comps\n\t\t},\n\t\twritable: canWrite(calendar.props),\n\t\turl: generateRemoteUrl(`dav/calendars/${getCurrentUser().uid}${calendar.filename}/`),\n\t\tcolor: calendar.props['calendar-color'] ?? uidToHexColor(calendar.props.displayname ?? ''),\n\n\t}\n}\n\n/**\n * @return {Promise}\n */\nexport const getUserCalendars = async () => {\n\tconst response = await getClient('calendars')\n\t\t.getDirectoryContents('/', {\n\t\t\tdata: `<?xml version=\"1.0\"?>\n<d:propfind  xmlns:d=\"DAV:\" xmlns:c=\"urn:ietf:params:xml:ns:caldav\" xmlns:aapl=\"http://apple.com/ns/ical/\" xmlns:oc=\"http://owncloud.org/ns\" xmlns:cs=\"http://calendarserver.org/ns/\">\n  <d:prop>\n    <d:displayname />\n    <c:calendar-description />\n    <c:calendar-timezone />\n    <aapl:calendar-order />\n    <aapl:calendar-color />\n    <c:supported-calendar-component-set />\n    <oc:calendar-enabled />\n    <d:acl />\n    <d:owner />\n    <oc:invite />\n  </d:prop>\n</d:propfind>`,\n\t\t\tdetails: true,\n\t\t})\n\n\treturn response.data\n\t\t.map(getCalendarData)\n\t\t.filter(props => props.components.vevent && props.writable === true)\n}\n\nconst getRandomString = () => {\n\tlet str = ''\n\tfor (let i = 0; i < 7; i++) {\n\t\tstr += Math.random().toString(36).substring(7)\n\t}\n\treturn str\n}\n\nconst createICalElement = () => {\n\tconst root = new ical.Component(['vcalendar', [], []])\n\n\troot.updatePropertyWithValue('prodid', '-//' + OC.theme.name + ' Mail')\n\n\treturn root\n}\n\nconst splitCalendar = (data) => {\n\tconst timezones = []\n\tconst allObjects = {}\n\tconst jCal = ical.parse(data)\n\tconst components = new ical.Component(jCal)\n\n\tconst vtimezones = components.getAllSubcomponents('vtimezone')\n\tvtimezones.forEach((vtimezone) => timezones.push(vtimezone))\n\n\tconst componentNames = ['vevent', 'vjournal', 'vtodo']\n\tcomponentNames.forEach((componentName) => {\n\t\tconst vobjects = components.getAllSubcomponents(componentName)\n\t\tallObjects[componentName] = {}\n\n\t\tvobjects.forEach((vobject) => {\n\t\t\tconst uid = vobject.getFirstPropertyValue('uid')\n\t\t\tallObjects[componentName][uid] = allObjects[componentName][uid] || []\n\t\t\tallObjects[componentName][uid].push(vobject)\n\t\t})\n\t})\n\n\tconst split = []\n\tcomponentNames.forEach((componentName) => {\n\t\tsplit[componentName] = []\n\t\tfor (const objectsId in allObjects[componentName]) {\n\t\t\tconst objects = allObjects[componentName][objectsId]\n\t\t\tconst component = createICalElement()\n\t\t\ttimezones.forEach(component.addSubcomponent.bind(component))\n\t\t\tfor (const objectId in objects) {\n\t\t\t\tcomponent.addSubcomponent(objects[objectId])\n\t\t\t}\n\t\t\tsplit[componentName].push(component.toString())\n\t\t}\n\t})\n\n\treturn {\n\t\tname: components.getFirstPropertyValue('x-wr-calname'),\n\t\tcolor: components.getFirstPropertyValue('x-apple-calendar-color'),\n\t\tsplit,\n\t}\n}\n\n/**\n * @param {string} url the url\n * @param {object} data the data\n * @return {Promise}\n */\nexport const importCalendarEvent = curry((url, data) => {\n\tLogger.debug('importing events into calendar', {\n\t\turl,\n\t\tdata,\n\t})\n\tconst promises = []\n\n\tconst file = splitCalendar(data)\n\tconst components = ['vevent', 'vjournal', 'vtodo']\n\tcomponents.forEach((componentName) => {\n\t\tfor (const componentId in file.split[componentName]) {\n\t\t\tconst component = file.split[componentName][componentId]\n\t\t\tLogger.info('importing event component', { component })\n\t\t\tpromises.push(\n\t\t\t\tPromise.resolve(\n\t\t\t\t\tAxios.put(url + getRandomString() + '.ics', component, {\n\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t'Content-Type': 'text/calendar; charset=utf-8',\n\t\t\t\t\t\t},\n\t\t\t\t\t})\n\t\t\t\t)\n\t\t\t)\n\t\t}\n\t})\n\n\treturn Promise.all(promises)\n})\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CalendarPickerOption.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CalendarPickerOption.vue?vue&type=script&lang=js&\"","<template>\n\t<div class=\"calendar-picker-option\">\n\t\t<div\n\t\t\tclass=\"calendar-picker-option__color-indicator\"\n\t\t\t:style=\"{ backgroundColor: color }\" />\n\n\t\t<span\n\t\t\tclass=\"calendar-picker-option__label\">\n\t\t\t{{ displayname }}\n\t\t</span>\n\t\t<span :class=\"displayIcon ? 'icon-caret-dark' : ''\" />\n\t</div>\n</template>\n\n<script>\nexport default {\n\tname: 'CalendarPickerOption',\n\tprops: {\n\t\tcolor: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdisplayname: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdisplayIcon: {\n\t\t  type: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.calendar-picker-option {\n\twidth: 100%;\n\tdisplay: flex;\n\talign-items: center;\n\n\t&__color-indicator {\n\t\twidth: 12px;\n\t\theight: 12px;\n\t\tborder-radius: 50%;\n\t\tborder: none;\n\t\tmargin-right: 8px;\n\t\tflex-basis: 12px;\n\t\tflex-shrink: 0;\n\t}\n\n\t&__label {\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\tflex-grow: 1;\n\t\tmax-width: 80px;\n\t}\n}\n\n</style>\n","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CalendarPickerOption.vue?vue&type=style&index=0&id=9bd234a6&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CalendarPickerOption.vue?vue&type=style&index=0&id=9bd234a6&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./CalendarPickerOption.vue?vue&type=template&id=9bd234a6&scoped=true&\"\nimport script from \"./CalendarPickerOption.vue?vue&type=script&lang=js&\"\nexport * from \"./CalendarPickerOption.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CalendarPickerOption.vue?vue&type=style&index=0&id=9bd234a6&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9bd234a6\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"calendar-picker-option\"},[_c('div',{staticClass:\"calendar-picker-option__color-indicator\",style:({ backgroundColor: _vm.color })}),_vm._v(\" \"),_c('span',{staticClass:\"calendar-picker-option__label\"},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.displayname)+\"\\n\\t\")]),_vm._v(\" \"),_c('span',{class:_vm.displayIcon ? 'icon-caret-dark' : ''})])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<Modal @close=\"onClose\">\n\t\t<div class=\"modal-content\">\n\t\t\t<h2>{{ t('mail', 'Create event') }}</h2>\n\t\t\t<div class=\"eventTitle\">\n\t\t\t\t<input v-model=\"eventTitle\" type=\"text\">\n\t\t\t</div>\n\t\t\t<div class=\"dateTimePicker\">\n\t\t\t\t<DatetimePicker v-model=\"startDate\"\n\t\t\t\t\t:format=\"dateFormat\"\n\t\t\t\t\t:clearable=\"false\"\n\t\t\t\t\t:minute-step=\"5\"\n\t\t\t\t\t:show-second=\"false\"\n\t\t\t\t\t:type=\"datePickerType\"\n\t\t\t\t\t:show-timezone-select=\"true\"\n\t\t\t\t\t:timezone-id=\"startTimezoneId\" />\n\t\t\t\t<DatetimePicker v-model=\"endDate\"\n\t\t\t\t\t:format=\"dateFormat\"\n\t\t\t\t\t:clearable=\"false\"\n\t\t\t\t\t:minute-step=\"5\"\n\t\t\t\t\t:show-second=\"false\"\n\t\t\t\t\t:type=\"datePickerType\"\n\t\t\t\t\t:show-timezone-select=\"true\"\n\t\t\t\t\t:timezone-id=\"endTimezoneId\" />\n\t\t\t</div>\n\t\t\t<div class=\"all-day\">\n\t\t\t\t<input\n\t\t\t\t\tid=\"allDay\"\n\t\t\t\t\tv-model=\"isAllDay\"\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tclass=\"checkbox\">\n\t\t\t\t<label\n\t\t\t\t\tfor=\"allDay\">\n\t\t\t\t\t{{ t('mail', 'All day') }}\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t<Multiselect\n\t\t\t\tv-model=\"selectedCalendar\"\n\t\t\t\tlabel=\"displayname\"\n\t\t\t\ttrack-by=\"url\"\n\t\t\t\t:allow-empty=\"false\"\n\t\t\t\t:options=\"calendars\">\n\t\t\t\t<template #option=\"{option}\">\n\t\t\t\t\t<CalendarPickerOption\n\t\t\t\t\t\tv-bind=\"option\" />\n\t\t\t\t</template>\n\t\t\t\t<template #singleLabel=\"{option}\">\n\t\t\t\t\t<CalendarPickerOption\n\t\t\t\t\t\t:display-icon=\"true\"\n\t\t\t\t\t\tv-bind=\"option\" />\n\t\t\t\t</template>\n\t\t\t</Multiselect>\n\t\t\t<br>\n\t\t\t<button class=\"primary\" @click=\"onSave\">\n\t\t\t\t{{ t('mail', 'Create') }}\n\t\t\t</button>\n\t\t</div>\n\t</Modal>\n</template>\n\n<script>\nimport { createEvent, getTimezoneManager, DateTimeValue, TextProperty } from '@nextcloud/calendar-js'\nimport { NcDatetimePicker as DatetimePicker, NcModal as Modal, NcMultiselect as Multiselect } from '@nextcloud/vue'\nimport jstz from 'jstz'\n\nimport { getUserCalendars, importCalendarEvent } from '../service/DAVService'\nimport logger from '../logger'\nimport CalendarPickerOption from './CalendarPickerOption'\nimport { showError, showSuccess } from '@nextcloud/dialogs'\n\nexport default {\n\tname: 'EventModal',\n\tcomponents: {\n\t\tCalendarPickerOption,\n\t\tDatetimePicker,\n\t\tModal,\n\t\tMultiselect,\n\t},\n\tprops: {\n\t\tenvelope: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\t// Try to determine the current timezone, and fall back to UTC otherwise\n\t\tconst defaultTimezone = jstz.determine()\n\t\tconst defaultTimezoneId = defaultTimezone ? defaultTimezone.name() : 'UTC'\n\n\t\treturn {\n\t\t\tcalendars: [],\n\t\t\teventTitle: this.envelope.subject,\n\t\t\tstartDate: new Date(),\n\t\t\tendDate: new Date(),\n\t\t\tisAllDay: false,\n\t\t\tstartTimezoneId: defaultTimezoneId,\n\t\t\tendTimezoneId: defaultTimezoneId,\n\t\t\tsaving: false,\n\t\t\tselectedCalendar: undefined,\n\t\t}\n\t},\n\tcomputed: {\n\t\tdateFormat() {\n\t\t\treturn this.isAllDay ? 'YYYY-MM-DD' : 'YYYY-MM-DD HH:mm'\n\t\t},\n\t\tdatePickerType() {\n\t\t\treturn this.isAllDay ? 'date' : 'datetime'\n\t\t},\n\t},\n\tcreated() {\n\t\tlogger.debug('creating event from envelope', {\n\t\t\tenvelope: this.envelope,\n\t\t})\n\t},\n\tasync mounted() {\n\t\tthis.calendars = (await getUserCalendars()).filter(c => c.writable)\n\n\t\tif (this.calendars.length) {\n\t\t\tthis.selectedCalendar = this.calendars[0]\n\t\t}\n\t},\n\tmethods: {\n\t\tonClose() {\n\t\t\tthis.$emit('close')\n\t\t},\n\t\tasync onSave() {\n\t\t\tthis.saving = true\n\n\t\t\ttry {\n\t\t\t\tlogger.debug('create event', {\n\t\t\t\t\tcalendar: this.selectedCalendar,\n\t\t\t\t\teventTitle: this.eventTitle,\n\t\t\t\t\tstartDate: this.startDate,\n\t\t\t\t\tstartTimezone: this.startTimezoneId,\n\t\t\t\t\tendTimezone: this.endTimezoneId,\n\t\t\t\t})\n\n\t\t\t\tconst timezoneManager = getTimezoneManager()\n\t\t\t\t// TODO: only do this once\n\t\t\t\ttimezoneManager.registerDefaultTimezones()\n\t\t\t\tconst startTimezone = timezoneManager.getTimezoneForId(this.startTimezoneId)\n\t\t\t\tconst startDateTime = DateTimeValue\n\t\t\t\t\t.fromJSDate(this.startDate, true)\n\t\t\t\t\t.getInTimezone(startTimezone)\n\t\t\t\tconst endTimezone = timezoneManager.getTimezoneForId(this.endTimezoneId)\n\t\t\t\tconst endDateTime = DateTimeValue\n\t\t\t\t\t.fromJSDate(this.endDate, true)\n\t\t\t\t\t.getInTimezone(endTimezone)\n\t\t\t\tif (this.isAllDay) {\n\t\t\t\t\tstartDateTime.isDate = true\n\t\t\t\t\tendDateTime.isDate = true\n\t\t\t\t}\n\n\t\t\t\tconst calendar = createEvent(startDateTime, endDateTime)\n\t\t\t\tconst event = calendar.getFirstComponent('VEVENT')\n\t\t\t\tevent.addProperty(new TextProperty('SUMMARY', this.eventTitle))\n\t\t\t\tfor (const vObject of calendar.getVObjectIterator()) {\n\t\t\t\t\tvObject.undirtify()\n\t\t\t\t}\n\t\t\t\tlogger.debug('calendar object created', { calendar, event })\n\n\t\t\t\tawait importCalendarEvent(\n\t\t\t\t\tthis.selectedCalendar.url,\n\t\t\t\t\tcalendar.toICS()\n\t\t\t\t)\n\n\t\t\t\tshowSuccess(t('mail', 'Event created'))\n\n\t\t\t\tthis.onClose()\n\t\t\t} catch (error) {\n\t\t\t\tshowError(t('mail', 'Could not create event'))\n\n\t\t\t\tlogger.error('Creating event from message failed', { error })\n\t\t\t} finally {\n\t\t\t\tthis.saving = false\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n::v-deep .modal-wrapper .modal-container {\n\twidth: calc(100vw - 120px) !important;\n\theight: calc(100vh - 120px) !important;\n\tmax-width: 490px !important;\n\tmax-height: 500px !important;\n}\n.modal-content {\n\tpadding: 30px 30px 20px !important;\n}\ninput {\n\twidth: 100%;\n}\n::v-deep input[type='text'].multiselect__input {\n\tpadding: 0 !important;\n}\n::v-deep .multiselect__single {\n\tmargin-left: -18px;\n\twidth: 100px;\n}\n::v-deep .multiselect__tags {\n\tborder: none !important;\n}\n.all-day {\n\tmargin-left: -1px;\n\tmargin-top: 5px;\n\tmargin-bottom: 5px;\n}\n.eventTitle {\n\tmargin-bottom: 5px;\n}\n.primary {\n\theight: 44px !important;\n\tfloat: right;\n}\n::v-deep .mx-datepicker {\n\twidth: 213px;\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EventModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EventModal.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EventModal.vue?vue&type=style&index=0&id=5f0d120e&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EventModal.vue?vue&type=style&index=0&id=5f0d120e&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./EventModal.vue?vue&type=template&id=5f0d120e&scoped=true&\"\nimport script from \"./EventModal.vue?vue&type=script&lang=js&\"\nexport * from \"./EventModal.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EventModal.vue?vue&type=style&index=0&id=5f0d120e&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5f0d120e\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('Modal',{on:{\"close\":_vm.onClose}},[_c('div',{staticClass:\"modal-content\"},[_c('h2',[_vm._v(_vm._s(_vm.t('mail', 'Create event')))]),_vm._v(\" \"),_c('div',{staticClass:\"eventTitle\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.eventTitle),expression:\"eventTitle\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.eventTitle)},on:{\"input\":function($event){if($event.target.composing)return;_vm.eventTitle=$event.target.value}}})]),_vm._v(\" \"),_c('div',{staticClass:\"dateTimePicker\"},[_c('DatetimePicker',{attrs:{\"format\":_vm.dateFormat,\"clearable\":false,\"minute-step\":5,\"show-second\":false,\"type\":_vm.datePickerType,\"show-timezone-select\":true,\"timezone-id\":_vm.startTimezoneId},model:{value:(_vm.startDate),callback:function ($$v) {_vm.startDate=$$v},expression:\"startDate\"}}),_vm._v(\" \"),_c('DatetimePicker',{attrs:{\"format\":_vm.dateFormat,\"clearable\":false,\"minute-step\":5,\"show-second\":false,\"type\":_vm.datePickerType,\"show-timezone-select\":true,\"timezone-id\":_vm.endTimezoneId},model:{value:(_vm.endDate),callback:function ($$v) {_vm.endDate=$$v},expression:\"endDate\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"all-day\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.isAllDay),expression:\"isAllDay\"}],staticClass:\"checkbox\",attrs:{\"id\":\"allDay\",\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.isAllDay)?_vm._i(_vm.isAllDay,null)>-1:(_vm.isAllDay)},on:{\"change\":function($event){var $$a=_vm.isAllDay,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.isAllDay=$$a.concat([$$v]))}else{$$i>-1&&(_vm.isAllDay=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.isAllDay=$$c}}}}),_vm._v(\" \"),_c('label',{attrs:{\"for\":\"allDay\"}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'All day'))+\"\\n\\t\\t\\t\")])]),_vm._v(\" \"),_c('Multiselect',{attrs:{\"label\":\"displayname\",\"track-by\":\"url\",\"allow-empty\":false,\"options\":_vm.calendars},scopedSlots:_vm._u([{key:\"option\",fn:function({option}){return [_c('CalendarPickerOption',_vm._b({},'CalendarPickerOption',option,false))]}},{key:\"singleLabel\",fn:function({option}){return [_c('CalendarPickerOption',_vm._b({attrs:{\"display-icon\":true}},'CalendarPickerOption',option,false))]}}]),model:{value:(_vm.selectedCalendar),callback:function ($$v) {_vm.selectedCalendar=$$v},expression:\"selectedCalendar\"}}),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('button',{staticClass:\"primary\",on:{\"click\":_vm.onSave}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Create'))+\"\\n\\t\\t\")])],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EnvelopePrimaryActions.vue?vue&type=style&index=0&id=209d492a&prod&lang=css&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EnvelopePrimaryActions.vue?vue&type=style&index=0&id=209d492a&prod&lang=css&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./EnvelopePrimaryActions.vue?vue&type=template&id=209d492a&\"\nimport script from \"./EnvelopePrimaryActions.vue?vue&type=script&lang=js&\"\nexport * from \"./EnvelopePrimaryActions.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EnvelopePrimaryActions.vue?vue&type=style&index=0&id=209d492a&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n\t<ul class=\"list-item-content__actions--primary\">\n\t\t<slot />\n\t</ul>\n</template>\n\n<script>\nexport default {\n\tname: 'EnvelopePrimaryActions',\n}\n</script>\n\n<style>\n.list-item-content__actions--primary {\n\tdisplay: flex;\n\tjustify-content: space-between;\n}\n\n.list-item-content__actions--primary .action--primary:first-child {\n\tpadding-left: 5px;\n}\n\n.list-item-content__actions--primary .action--primary:last-child {\n\tpadding-right: 5px;\n}\n\n.list-item-content__actions--primary .action--primary .action-button {\n\talign-items: center;\n\tflex-direction: column;\n\tpadding: 10px 10px 0 10px;\n\n\t.material-design-icon {\n\t\tmargin-bottom: -15px;\n\t}\n}\n\n.list-item-content__actions--primary .action--primary .action-button__text,\n.list-item-content__actions--primary .action--primary .action-button__icon {\n\theight: auto;\n}\n</style>\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('ul',{staticClass:\"list-item-content__actions--primary\"},[_vm._t(\"default\")],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<ListItem\n\t\tv-draggable-envelope=\"{\n\t\t\taccountId: data.accountId ? data.accountId : mailbox.accountId,\n\t\t\tmailboxId: data.mailboxId,\n\t\t\tenvelopeId: data.databaseId,\n\t\t\tdraggableLabel,\n\t\t\tselectedEnvelopes,\n\t\t}\"\n\t\tclass=\"list-item-style envelope\"\n\t\t:class=\"{seen: data.flags.seen, draft, selected: selected}\"\n\t\t:to=\"link\"\n\t\t:data-envelope-id=\"data.databaseId\"\n\t\t:title=\"addresses\"\n\t\t:details=\"formatted()\"\n\t\t@click=\"onClick\">\n\t\t<template #icon>\n\t\t\t<Star\n\t\t\t\tv-if=\"data.flags.flagged\"\n\t\t\t\tfill-color=\"#f9cf3d\"\n\t\t\t\t:size=\"18\"\n\t\t\t\tclass=\"app-content-list-item-star favorite-icon-style\"\n\t\t\t\t:data-starred=\"data.flags.flagged ? 'true' : 'false'\"\n\t\t\t\t@click.prevent=\"onToggleFlagged\" />\n\t\t\t<div\n\t\t\t\tv-if=\"isImportant\"\n\t\t\t\tclass=\"app-content-list-item-star svg icon-important\"\n\t\t\t\t:data-starred=\"isImportant ? 'true' : 'false'\"\n\t\t\t\t@click.prevent=\"onToggleImportant\"\n\t\t\t\tv-html=\"importantSvg\" />\n\t\t\t<JunkIcon\n\t\t\t\tv-if=\"data.flags.$junk\"\n\t\t\t\t:size=\"18\"\n\t\t\t\tclass=\"app-content-list-item-star junk-icon-style\"\n\t\t\t\t:data-starred=\"data.flags.$junk ? 'true' : 'false'\"\n\t\t\t\t@click.prevent=\"onToggleJunk\" />\n\t\t\t<div class=\"app-content-list-item-icon\">\n\t\t\t\t<Avatar :display-name=\"addresses\" :email=\"avatarEmail\" />\n\t\t\t\t<p v-if=\"selectMode\" class=\"app-content-list-item-select-checkbox\">\n\t\t\t\t\t<input :id=\"`select-checkbox-${data.uid}`\"\n\t\t\t\t\t\tclass=\"checkbox\"\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t:checked=\"selected\">\n\t\t\t\t\t<label\n\t\t\t\t\t\t:for=\"`select-checkbox-${data.uid}`\"\n\t\t\t\t\t\t@click.exact.prevent=\"toggleSelected\"\n\t\t\t\t\t\t@click.shift.prevent=\"onSelectMultiple\" />\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</template>\n\t\t<template #subtitle>\n\t\t\t<div class=\"envelope__subtitle\">\n\t\t\t\t<Reply v-if=\"data.flags.answered\"\n\t\t\t\t\tclass=\"seen-icon-style\"\n\t\t\t\t\t:size=\"18\" />\n\t\t\t\t<IconAttachment v-if=\"data.flags.hasAttachments === true\"\n\t\t\t\t\tclass=\"attachment-icon-style\"\n\t\t\t\t\t:size=\"18\" />\n\t\t\t\t<span v-else-if=\"draft\" class=\"draft\">\n\t\t\t\t\t<em>{{ t('mail', 'Draft: ') }}</em>\n\t\t\t\t</span>\n\t\t\t\t<span class=\"envelope__subtitle__subject\">\n\t\t\t\t\t{{ subjectForSubtitle }}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<div v-if=\"data.previewText\"\n\t\t\t\tclass=\"envelope__preview-text\">\n\t\t\t\t{{ data.previewText }}\n\t\t\t</div>\n\t\t</template>\n\t\t<template #indicator>\n\t\t\t<!-- Color dot -->\n\t\t\t<IconBullet v-if=\"!data.flags.seen\"\n\t\t\t\t:size=\"16\"\n\t\t\t\t:aria-hidden=\"false\"\n\t\t\t\t:aria-label=\"t('mail', 'This message is unread')\"\n\t\t\t\tfill-color=\"var(--color-primary-element)\" />\n\t\t</template>\n\t\t<template #actions>\n\t\t\t<EnvelopePrimaryActions v-if=\"!moreActionsOpen\">\n\t\t\t\t<ActionButton\n\t\t\t\t\tclass=\"action--primary\"\n\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t@click.prevent=\"onToggleFlagged\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<StarOutline v-if=\"showFavoriteIconVariant\"\n\t\t\t\t\t\t\t:size=\"24\" />\n\t\t\t\t\t\t<Star v-else\n\t\t\t\t\t\t\t:size=\"24\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{\n\t\t\t\t\t\tdata.flags.flagged ? t('mail', 'Unfavorite') : t('mail', 'Favorite')\n\t\t\t\t\t}}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton\n\t\t\t\t\tclass=\"action--primary\"\n\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t@click.prevent=\"onToggleSeen\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<EmailUnread v-if=\"showImportantIconVariant\"\n\t\t\t\t\t\t\t:size=\"24\" />\n\t\t\t\t\t\t<EmailRead v-else\n\t\t\t\t\t\t\t:size=\"24\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{\n\t\t\t\t\t\tdata.flags.seen ? t('mail', 'Unread') : t('mail', 'Read')\n\t\t\t\t\t}}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton\n\t\t\t\t\tclass=\"action--primary\"\n\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t@click.prevent=\"onToggleImportant\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<ImportantIcon\n\t\t\t\t\t\t\t:size=\"24\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{\n\t\t\t\t\t\tisImportant ? t('mail', 'Unimportant') : t('mail', 'Important')\n\t\t\t\t\t}}\n\t\t\t\t</ActionButton>\n\t\t\t</EnvelopePrimaryActions>\n\t\t\t<template v-if=\"!moreActionsOpen\">\n\t\t\t\t<ActionButton :close-after-click=\"true\"\n\t\t\t\t\t@click.prevent=\"onToggleJunk\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<AlertOctagonIcon\n\t\t\t\t\t\t\t:title=\"data.flags.$junk ? t('mail', 'Mark not spam') : t('mail', 'Mark as spam')\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{\n\t\t\t\t\t\tdata.flags.$junk ? t('mail', 'Mark not spam') : t('mail', 'Mark as spam')\n\t\t\t\t\t}}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton :close-after-click=\"true\"\n\t\t\t\t\t@click.prevent=\"toggleSelected\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<CheckIcon\n\t\t\t\t\t\t\t:title=\"selected ? t('mail', 'Unselect') : t('mail', 'Select')\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{\n\t\t\t\t\t\tselected ? t('mail', 'Unselect') : t('mail', 'Select')\n\t\t\t\t\t}}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton :close-after-click=\"true\"\n\t\t\t\t\t@click.prevent=\"onOpenTagModal\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<TagIcon\n\t\t\t\t\t\t\t:title=\"t('mail', 'Edit tags')\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('mail', 'Edit tags') }}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton :close-after-click=\"true\"\n\t\t\t\t\t@click.prevent=\"onOpenMoveModal\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<OpenInNewIcon\n\t\t\t\t\t\t\t:title=\"t('mail', 'Move')\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('mail', 'Move thread') }}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton :close-after-click=\"false\"\n\t\t\t\t\t@click=\"moreActionsOpen=true\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<DotsHorizontalIcon\n\t\t\t\t\t\t\t:title=\"t('mail', 'More actions')\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('mail', 'More actions') }}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton :close-after-click=\"true\"\n\t\t\t\t\t@click.prevent=\"onDelete\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<DeleteIcon\n\t\t\t\t\t\t\t:title=\"t('mail', 'Delete thread')\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('mail', 'Delete thread') }}\n\t\t\t\t</ActionButton>\n\t\t\t</template>\n\t\t\t<template v-if=\"moreActionsOpen\">\n\t\t\t\t<ActionButton :close-after-click=\"false\"\n\t\t\t\t\t@click=\"moreActionsOpen=false\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<ChevronLeft\n\t\t\t\t\t\t\t:title=\"t('mail', 'More actions')\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('mail', 'More actions') }}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton :close-after-click=\"true\"\n\t\t\t\t\t@click.prevent=\"onOpenEditAsNew\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<PlusIcon\n\t\t\t\t\t\t\t:title=\"t('mail', 'Edit as new message')\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('mail', 'Edit as new message') }}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton :close-after-click=\"true\"\n\t\t\t\t\t@click.prevent=\"showEventModal = true\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<IconCreateEvent\n\t\t\t\t\t\t\t:title=\"t('mail', 'Create event')\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('mail', 'Create event') }}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionLink\n\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t:href=\"exportMessageLink\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<DownloadIcon :size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('mail', 'Download message') }}\n\t\t\t\t</ActionLink>\n\t\t\t</template>\n\t\t</template>\n\t\t<template #extra>\n\t\t\t<div v-for=\"tag in tags\"\n\t\t\t\t:key=\"tag.id\"\n\t\t\t\tclass=\"tag-group\">\n\t\t\t\t<div class=\"tag-group__bg\"\n\t\t\t\t\t:style=\"{'background-color': tag.color}\" />\n\t\t\t\t<span class=\"tag-group__label\"\n\t\t\t\t\t:style=\"{color: tag.color}\">{{ tag.displayName }} </span>\n\t\t\t</div>\n\t\t\t<MoveModal v-if=\"showMoveModal\"\n\t\t\t\t:account=\"account\"\n\t\t\t\t:envelopes=\"[data]\"\n\t\t\t\t:move-thread=\"true\"\n\t\t\t\t@move=\"onMove\"\n\t\t\t\t@close=\"onCloseMoveModal\" />\n\t\t\t<EventModal v-if=\"showEventModal\"\n\t\t\t\t:envelope=\"data\"\n\t\t\t\t@close=\"showEventModal = false\" />\n\t\t\t<TagModal\n\t\t\t\tv-if=\"showTagModal\"\n\t\t\t\t:account=\"account\"\n\t\t\t\t:envelope=\"data\"\n\t\t\t\t@close=\"onCloseTagModal\" />\n\t\t</template>\n\t</ListItem>\n</template>\n<script>\nimport { NcListItem as ListItem, NcActionButton as ActionButton, NcActionLink as ActionLink } from '@nextcloud/vue'\nimport AlertOctagonIcon from 'vue-material-design-icons/AlertOctagon'\nimport Avatar from './Avatar'\nimport IconCreateEvent from 'vue-material-design-icons/Calendar'\nimport CheckIcon from 'vue-material-design-icons/Check'\nimport ChevronLeft from 'vue-material-design-icons/ChevronLeft'\nimport DeleteIcon from 'vue-material-design-icons/Delete'\nimport DotsHorizontalIcon from 'vue-material-design-icons/DotsHorizontal'\nimport importantSvg from '../../img/important.svg'\nimport { DraggableEnvelopeDirective } from '../directives/drag-and-drop/draggable-envelope'\nimport { buildRecipients as buildReplyRecipients } from '../ReplyBuilder'\nimport { shortRelativeDatetime } from '../util/shortRelativeDatetime'\nimport { showError } from '@nextcloud/dialogs'\nimport NoTrashMailboxConfiguredError\n\tfrom '../errors/NoTrashMailboxConfiguredError'\nimport logger from '../logger'\nimport { matchError } from '../errors/match'\nimport MoveModal from './MoveModal'\nimport OpenInNewIcon from 'vue-material-design-icons/OpenInNew'\nimport StarOutline from 'vue-material-design-icons/StarOutline'\nimport Star from 'vue-material-design-icons/Star'\nimport Reply from 'vue-material-design-icons/Reply'\nimport EmailRead from 'vue-material-design-icons/EmailOpen'\nimport EmailUnread from 'vue-material-design-icons/Email'\nimport IconAttachment from 'vue-material-design-icons/Paperclip'\nimport ImportantIcon from './icons/ImportantIcon'\nimport IconBullet from 'vue-material-design-icons/CheckboxBlankCircle'\nimport JunkIcon from './icons/JunkIcon'\nimport PlusIcon from 'vue-material-design-icons/Plus'\nimport TagIcon from 'vue-material-design-icons/Tag'\nimport TagModal from './TagModal'\nimport EventModal from './EventModal'\nimport EnvelopePrimaryActions from './EnvelopePrimaryActions'\nimport { hiddenTags } from './tags.js'\nimport { generateUrl } from '@nextcloud/router'\nimport DownloadIcon from 'vue-material-design-icons/Download'\n\nexport default {\n\tname: 'Envelope',\n\tcomponents: {\n\t\tAlertOctagonIcon,\n\t\tAvatar,\n\t\tIconCreateEvent,\n\t\tCheckIcon,\n\t\tChevronLeft,\n\t\tDeleteIcon,\n\t\tDotsHorizontalIcon,\n\t\tEnvelopePrimaryActions,\n\t\tEventModal,\n\t\tListItem,\n\t\tImportantIcon,\n\t\tJunkIcon,\n\t\tActionButton,\n\t\tMoveModal,\n\t\tOpenInNewIcon,\n\t\tPlusIcon,\n\t\tTagIcon,\n\t\tTagModal,\n\t\tStar,\n\t\tStarOutline,\n\t\tEmailRead,\n\t\tEmailUnread,\n\t\tIconAttachment,\n\t\tIconBullet,\n\t\tReply,\n\t\tActionLink,\n\t\tDownloadIcon,\n\t},\n\tdirectives: {\n\t\tdraggableEnvelope: DraggableEnvelopeDirective,\n\t},\n\tprops: {\n\t\twithReply: {\n\t\t\t// \"Reply\" action should only appear in envelopes from the envelope list\n\t\t\t// (Because in thread envelopes, this action is already set as primary button of this menu)\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\tdata: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tmailbox: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tselectMode: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tselected: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tselectedEnvelopes: {\n\t\t\ttype: Array,\n\t\t\trequired: false,\n\t\t\tdefault: () => [],\n\t\t},\n\t\thasMultipleAccounts: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\timportantSvg,\n\t\t\tshowMoveModal: false,\n\t\t\tshowEventModal: false,\n\t\t\tshowTagModal: false,\n\t\t\tmoreActionsOpen: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\thasMultipleRecipients() {\n\t\t\tif (!this.account) {\n\t\t\t\tconsole.error('account is undefined', {\n\t\t\t\t\taccountId: this.data.accountId,\n\t\t\t\t})\n\t\t\t}\n\t\t\tconst recipients = buildReplyRecipients(this.envelope, {\n\t\t\t\tlabel: this.account.name,\n\t\t\t\temail: this.account.emailAddress,\n\t\t\t})\n\t\t\treturn recipients.to.concat(recipients.cc).length > 1\n\t\t},\n\t\tdraft() {\n\t\t\treturn this.data.flags.draft\n\t\t},\n\t\taccount() {\n\t\t\tconst accountId = this.data.accountId\n\t\t\treturn this.$store.getters.getAccount(accountId)\n\t\t},\n\t\tlink() {\n\t\t\tif (this.draft) {\n\t\t\t\treturn undefined\n\t\t\t} else {\n\t\t\t\treturn {\n\t\t\t\t\tname: 'message',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\t\tfilter: this.$route.params.filter ? this.$route.params.filter : undefined,\n\t\t\t\t\t\tthreadId: this.data.databaseId,\n\t\t\t\t\t},\n\t\t\t\t\texact: true,\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\taddresses() {\n\t\t\t// Show recipients' label/address in a sent mailbox\n\t\t\tif (this.mailbox.specialRole === 'sent') {\n\t\t\t\tconst recipients = [this.data.to, this.data.cc].flat().map(function(recipient) {\n\t\t\t\t\treturn recipient.label ? recipient.label : recipient.email\n\t\t\t\t})\n\t\t\t\treturn recipients.length > 0 ? recipients.join(', ') : t('mail', 'Blind copy recipients only')\n\t\t\t}\n\t\t\t// Show sender label/address in other mailbox types\n\t\t\treturn this.data.from[0]?.label ?? this.data.from[0]?.email ?? '?'\n\t\t},\n\t\tavatarEmail() {\n\t\t\t// Show first recipients' avatar in a sent mailbox (or undefined when sent to Bcc only)\n\t\t\tif (this.mailbox.specialRole === 'sent') {\n\t\t\t\tconst recipients = [this.data.to, this.data.cc].flat().map(function(recipient) {\n\t\t\t\t\treturn recipient.email\n\t\t\t\t})\n\t\t\t\treturn recipients.length > 0 ? recipients[0] : ''\n\t\t\t}\n\n\t\t\t// Show sender avatar in other mailbox types\n\t\t\tif (this.data.from.length > 0) {\n\t\t\t\treturn this.data.from[0].email\n\t\t\t} else {\n\t\t\t\treturn ''\n\t\t\t}\n\t\t},\n\t\tshowFavoriteIconVariant() {\n\t\t\treturn this.data.flags.flagged\n\t\t},\n\t\tshowImportantIconVariant() {\n\t\t\treturn this.data.flags.seen\n\t\t},\n\t\tisImportant() {\n\t\t\treturn this.$store.getters\n\t\t\t\t.getEnvelopeTags(this.data.databaseId)\n\t\t\t\t.some((tag) => tag.imapLabel === '$label1')\n\t\t},\n\t\ttags() {\n\t\t\treturn this.$store.getters.getEnvelopeTags(this.data.databaseId).filter(\n\t\t\t\t(tag) => tag.imapLabel && tag.imapLabel !== '$label1' && !(tag.displayName.toLowerCase() in hiddenTags)\n\t\t\t)\n\t\t},\n\t\tdraggableLabel() {\n\t\t\tlet label = this.data.subject\n\t\t\tconst sender = this.data.from[0]?.label ?? this.data.from[0]?.email\n\t\t\tif (sender) {\n\t\t\t\tlabel += ` (${sender})`\n\t\t\t}\n\t\t\treturn label\n\t\t},\n\t\t/**\n\t\t * Subject of envelope or \"No Subject\".\n\t\t *\n\t\t * @return {string}\n\t\t */\n\t\tsubjectForSubtitle() {\n\t\t\t// We have to use || here (instead of ??) because the subject might be '', null\n\t\t\t// or undefined.\n\t\t\treturn this.data.subject || this.t('mail', 'No subject')\n\t\t},\n\t\t/**\n\t\t * Link to download the whole message (.eml).\n\t\t *\n\t\t * @return {string}\n\t\t */\n\t\texportMessageLink() {\n\t\t\treturn generateUrl('/apps/mail/api/messages/{id}/export', {\n\t\t\t\tid: this.data.databaseId,\n\t\t\t})\n\t\t},\n\t},\n\tmethods: {\n\t\tsetSelected(value) {\n\t\t\tif (this.selected !== value) {\n\t\t\t\tthis.$emit('update:selected', value)\n\t\t\t}\n\t\t},\n\t\tformatted() {\n\t\t\treturn shortRelativeDatetime(new Date(this.data.dateInt * 1000))\n\t\t},\n\t\tunselect() {\n\t\t\tif (this.selected) {\n\t\t\t\tthis.$emit('update:selected', false)\n\t\t\t}\n\t\t},\n\t\ttoggleSelected() {\n\t\t\tthis.$emit('update:selected', !this.selected)\n\t\t},\n\t\tonClick(event) {\n\t\t\tif (this.draft && !event.defaultPrevented) {\n\t\t\t\tthis.$store.dispatch('showMessageComposer', {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\t...this.data,\n\t\t\t\t\t\tdraftId: this.data.databaseId,\n\t\t\t\t\t},\n\t\t\t\t\ttemplateMessageId: this.data.databaseId,\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tonSelectMultiple() {\n\t\t\tthis.$emit('select-multiple')\n\t\t},\n\t\tonToggleImportant() {\n\t\t\tthis.$store.dispatch('toggleEnvelopeImportant', this.data)\n\t\t},\n\t\tonToggleFlagged() {\n\t\t\tthis.$store.dispatch('toggleEnvelopeFlagged', this.data)\n\t\t},\n\t\tonToggleSeen() {\n\t\t\tthis.$store.dispatch('toggleEnvelopeSeen', { envelope: this.data })\n\t\t},\n\t\tonToggleJunk() {\n\t\t\tthis.$store.dispatch('toggleEnvelopeJunk', this.data)\n\t\t},\n\t\tasync onDelete() {\n\t\t\t// Remove from selection first\n\t\t\tthis.setSelected(false)\n\t\t\t// Delete\n\t\t\tthis.$emit('delete', this.data.databaseId)\n\n\t\t\ttry {\n\t\t\t\tawait this.$store.dispatch('deleteThread', {\n\t\t\t\t\tenvelope: this.data,\n\t\t\t\t})\n\t\t\t} catch (error) {\n\t\t\t\tshowError(await matchError(error, {\n\t\t\t\t\t[NoTrashMailboxConfiguredError.getName()]() {\n\t\t\t\t\t\treturn t('mail', 'No trash mailbox configured')\n\t\t\t\t\t},\n\t\t\t\t\tdefault(error) {\n\t\t\t\t\t\tlogger.error('could not delete message', error)\n\t\t\t\t\t\treturn t('mail', 'Could not delete message')\n\t\t\t\t\t},\n\t\t\t\t}))\n\t\t\t}\n\t\t},\n\t\tasync onOpenEditAsNew() {\n\t\t\tawait this.$store.dispatch('showMessageComposer', {\n\t\t\t\ttemplateMessageId: this.data.databaseId,\n\t\t\t\tdata: this.data,\n\t\t\t})\n\t\t},\n\t\tonOpenMoveModal() {\n\t\t\tthis.showMoveModal = true\n\t\t},\n\t\tonOpenEventModal() {\n\t\t\tthis.showEventModal = true\n\t\t},\n\t\tonMove() {\n\t\t\tthis.$emit('move')\n\t\t},\n\t\tonCloseMoveModal() {\n\t\t\tthis.showMoveModal = false\n\t\t},\n\t\tonOpenTagModal() {\n\t\t\tthis.showTagModal = true\n\t\t},\n\t\tonCloseTagModal() {\n\t\t\tthis.showTagModal = false\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.mail-message-account-color {\n\tposition: absolute;\n\tleft: 0px;\n\twidth: 2px;\n\theight: 69px;\n\tz-index: 1;\n}\n\n.envelope {\n\t.app-content-list-item-icon {\n\t\theight: 40px; // To prevent some unexpected spacing below the avatar\n\t}\n\n\t&__subtitle {\n\t\tdisplay: flex;\n\t\tgap: 4px;\n\n\t\t&__subject {\n\t\t\tcolor: var(--color-main-text);\n\t\t\tline-height: 130%;\n\t\t\toverflow: hidden;\n\t\t\ttext-overflow: ellipsis;\n\t\t}\n\t}\n\t&__preview-text {\n\t\tcolor: var(--color-text-maxcontrast);\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\tfont-weight: initial;\n\t}\n}\n\n.icon-important {\n\t::v-deep path {\n\tfill: #ffcc00;\n\tstroke: var(--color-main-background);\n\t}\n\t.list-item:hover &,\n\t.list-item:focus &,\n\t.list-item.active & {\n\t::v-deep path {\n\tstroke: var(--color-background-dark);\n\t}\n\t}\n\n\t// In message list, but not the one in the action menu\n\t&.app-content-list-item-star {\n\tbackground-image: none;\n\tleft: 7px;\n\ttop: 13px;\n\topacity: 1;\n\n\t&:hover,\n\t&:focus {\n\topacity: 0.5;\n\t}\n\t}\n}\n\n.app-content-list-item-select-checkbox {\n\tdisplay: inline-block;\n\tvertical-align: middle;\n\tposition: absolute;\n\tleft: 33px;\n\ttop: 35px;\n\tz-index: 50; // same as icon-starred\n}\n\n.list-item-style:not(.seen) {\n\tfont-weight: bold;\n}\n.list-item-style.selected {\n\tbackground-color: var(--color-background-dark);\n}\n.list-item-style {\n\t.draft {\n\t\tline-height: 130%;\n\n\t\tem {\n\t\t\tfont-style: italic;\n\t\t}\n\t}\n}\n.junk-icon-style {\n\topacity: .2;\n\tdisplay: flex;\n\ttop: 14px;\n\tleft: 34px;\n\tbackground-size: 16px;\n\theight: 20px;\n\twidth: 20px;\n\tmargin: 0;\n\tpadding: 0;\n\tposition: absolute;\n\tz-index: 2;\n\t&:hover {\n\t\topacity: .1;\n\t}\n}\nlist-item-style.draft .app-content-list-item-line-two {\n\tfont-style: italic;\n}\n\n.icon-attachment {\n\t-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=25)';\n\topacity: 0.25;\n}\n\n\t// Fix layout of messages in list until we move to component\n\n.app-content-list .list-item {\n\tpadding-right: 0;\n\n\t.app-content-list-item-line-two {\n\tpadding-right: 0;\n\tmargin-top: -8px;\n\t}\n\n\t.app-content-list-item-menu {\n\tmargin-right: -2px;\n\tmargin-top: -8px;\n\n\t::v-deep .action-item__menu {\n\tright: 7px !important;\n\n\t.action-item__menu_arrow {\n\tright: 6px !important;\n\t}\n\t}\n\t}\n\n\t.app-content-list-item-details {\n\t\tpadding-right: 7px;\n\t\t}\n}\n::v-deep .action--primary {\n\t.material-design-icon {\n\t\tmargin-bottom: -14px;\n\t}\n}\n::v-deep .list-item__extra {\n\tmargin-left: 41px !important;\n}\n.tag-group__label {\n\tmargin: 0 7px;\n\tz-index: 2;\n\tfont-size: calc(var(--default-font-size) * 0.8);\n\tfont-weight: bold;\n\tpadding-left: 2px;\n\tpadding-right: 2px;\n}\n.tag-group__bg {\n\tposition: absolute;\n\twidth: 100%;\n\theight: 100%;\n\ttop: 0;\n\tleft: 0;\n\topacity: 15%;\n}\n.tag-group {\n\tdisplay: inline-block;\n\tborder: 1px solid transparent;\n\tborder-radius: var(--border-radius-pill);\n\tposition: relative;\n\tmargin: 0 1px;\n\toverflow: hidden;\n\tleft: 4px;\n}\n::v-deep.list-item__wrapper {\n\tlist-style: none;\n}\n.app-content-list-item-star.favorite-icon-style {\n\tdisplay: block;\n}\n::v-deep.icon-important.app-content-list-item-star {\n\tposition: absolute;\n\ttop: 14px;\n\tz-index: 1;\n}\n.app-content-list-item-star.favorite-icon-style {\n\tdisplay: inline-block;\n\tposition: absolute;\n\tmargin-bottom: 21px;\n\tmargin-left: 28px;\n\tcursor: pointer;\n\tstroke: var(--color-main-background);\n\tstroke-width: 2;\n\tz-index: 1;\n\t&:hover {\n\t\topacity: .4;\n\t}\n}\n::v-deep .svg svg{\n\theight: 16px;\n\twidth: 16px;\n}\n.seen-icon-style {\n\topacity: .6;\n}\n.attachment-icon-style {\n\topacity: .6;\n}\n::v-deep .list-item-content__wrapper {\n\tmargin-top: 6px;\n}\n::v-deep .list-item__extra {\n\tmargin-top: 9px;\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Envelope.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Envelope.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Envelope.vue?vue&type=style&index=0&id=433b9883&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Envelope.vue?vue&type=style&index=0&id=433b9883&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./Envelope.vue?vue&type=template&id=433b9883&scoped=true&\"\nimport script from \"./Envelope.vue?vue&type=script&lang=js&\"\nexport * from \"./Envelope.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Envelope.vue?vue&type=style&index=0&id=433b9883&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"433b9883\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('ListItem',{directives:[{name:\"draggable-envelope\",rawName:\"v-draggable-envelope\",value:({\n\t\taccountId: _vm.data.accountId ? _vm.data.accountId : _vm.mailbox.accountId,\n\t\tmailboxId: _vm.data.mailboxId,\n\t\tenvelopeId: _vm.data.databaseId,\n\t\tdraggableLabel: _vm.draggableLabel,\n\t\tselectedEnvelopes: _vm.selectedEnvelopes,\n\t}),expression:\"{\\n\\t\\taccountId: data.accountId ? data.accountId : mailbox.accountId,\\n\\t\\tmailboxId: data.mailboxId,\\n\\t\\tenvelopeId: data.databaseId,\\n\\t\\tdraggableLabel,\\n\\t\\tselectedEnvelopes,\\n\\t}\"}],staticClass:\"list-item-style envelope\",class:{seen: _vm.data.flags.seen, draft: _vm.draft, selected: _vm.selected},attrs:{\"to\":_vm.link,\"data-envelope-id\":_vm.data.databaseId,\"title\":_vm.addresses,\"details\":_vm.formatted()},on:{\"click\":_vm.onClick},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [(_vm.data.flags.flagged)?_c('Star',{staticClass:\"app-content-list-item-star favorite-icon-style\",attrs:{\"fill-color\":\"#f9cf3d\",\"size\":18,\"data-starred\":_vm.data.flags.flagged ? 'true' : 'false'},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleFlagged.apply(null, arguments)}}}):_vm._e(),_vm._v(\" \"),(_vm.isImportant)?_c('div',{staticClass:\"app-content-list-item-star svg icon-important\",attrs:{\"data-starred\":_vm.isImportant ? 'true' : 'false'},domProps:{\"innerHTML\":_vm._s(_vm.importantSvg)},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleImportant.apply(null, arguments)}}}):_vm._e(),_vm._v(\" \"),(_vm.data.flags.$junk)?_c('JunkIcon',{staticClass:\"app-content-list-item-star junk-icon-style\",attrs:{\"size\":18,\"data-starred\":_vm.data.flags.$junk ? 'true' : 'false'},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleJunk.apply(null, arguments)}}}):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"app-content-list-item-icon\"},[_c('Avatar',{attrs:{\"display-name\":_vm.addresses,\"email\":_vm.avatarEmail}}),_vm._v(\" \"),(_vm.selectMode)?_c('p',{staticClass:\"app-content-list-item-select-checkbox\"},[_c('input',{staticClass:\"checkbox\",attrs:{\"id\":`select-checkbox-${_vm.data.uid}`,\"type\":\"checkbox\"},domProps:{\"checked\":_vm.selected}}),_vm._v(\" \"),_c('label',{attrs:{\"for\":`select-checkbox-${_vm.data.uid}`},on:{\"click\":[function($event){if($event.ctrlKey||$event.shiftKey||$event.altKey||$event.metaKey)return null;$event.preventDefault();return _vm.toggleSelected.apply(null, arguments)},function($event){if(!$event.shiftKey)return null;$event.preventDefault();return _vm.onSelectMultiple.apply(null, arguments)}]}})]):_vm._e()],1)]},proxy:true},{key:\"subtitle\",fn:function(){return [_c('div',{staticClass:\"envelope__subtitle\"},[(_vm.data.flags.answered)?_c('Reply',{staticClass:\"seen-icon-style\",attrs:{\"size\":18}}):_vm._e(),_vm._v(\" \"),(_vm.data.flags.hasAttachments === true)?_c('IconAttachment',{staticClass:\"attachment-icon-style\",attrs:{\"size\":18}}):(_vm.draft)?_c('span',{staticClass:\"draft\"},[_c('em',[_vm._v(_vm._s(_vm.t('mail', 'Draft: ')))])]):_vm._e(),_vm._v(\" \"),_c('span',{staticClass:\"envelope__subtitle__subject\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.subjectForSubtitle)+\"\\n\\t\\t\\t\")])],1),_vm._v(\" \"),(_vm.data.previewText)?_c('div',{staticClass:\"envelope__preview-text\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.data.previewText)+\"\\n\\t\\t\")]):_vm._e()]},proxy:true},{key:\"indicator\",fn:function(){return [(!_vm.data.flags.seen)?_c('IconBullet',{attrs:{\"size\":16,\"aria-hidden\":false,\"aria-label\":_vm.t('mail', 'This message is unread'),\"fill-color\":\"var(--color-primary-element)\"}}):_vm._e()]},proxy:true},{key:\"actions\",fn:function(){return [(!_vm.moreActionsOpen)?_c('EnvelopePrimaryActions',[_c('ActionButton',{staticClass:\"action--primary\",attrs:{\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleFlagged.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [(_vm.showFavoriteIconVariant)?_c('StarOutline',{attrs:{\"size\":24}}):_c('Star',{attrs:{\"size\":24}})]},proxy:true}],null,false,2798023345)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.data.flags.flagged ? _vm.t('mail', 'Unfavorite') : _vm.t('mail', 'Favorite'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{staticClass:\"action--primary\",attrs:{\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleSeen.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [(_vm.showImportantIconVariant)?_c('EmailUnread',{attrs:{\"size\":24}}):_c('EmailRead',{attrs:{\"size\":24}})]},proxy:true}],null,false,3941285336)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.data.flags.seen ? _vm.t('mail', 'Unread') : _vm.t('mail', 'Read'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{staticClass:\"action--primary\",attrs:{\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleImportant.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('ImportantIcon',{attrs:{\"size\":24}})]},proxy:true}],null,false,2028812097)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.isImportant ? _vm.t('mail', 'Unimportant') : _vm.t('mail', 'Important'))+\"\\n\\t\\t\\t\")])],1):_vm._e(),_vm._v(\" \"),(!_vm.moreActionsOpen)?[_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleJunk.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('AlertOctagonIcon',{attrs:{\"title\":_vm.data.flags.$junk ? _vm.t('mail', 'Mark not spam') : _vm.t('mail', 'Mark as spam'),\"size\":20}})]},proxy:true}],null,false,922843479)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.data.flags.$junk ? _vm.t('mail', 'Mark not spam') : _vm.t('mail', 'Mark as spam'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.toggleSelected.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('CheckIcon',{attrs:{\"title\":_vm.selected ? _vm.t('mail', 'Unselect') : _vm.t('mail', 'Select'),\"size\":20}})]},proxy:true}],null,false,805099236)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.selected ? _vm.t('mail', 'Unselect') : _vm.t('mail', 'Select'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onOpenTagModal.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('TagIcon',{attrs:{\"title\":_vm.t('mail', 'Edit tags'),\"size\":20}})]},proxy:true}],null,false,1760434282)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Edit tags'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onOpenMoveModal.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('OpenInNewIcon',{attrs:{\"title\":_vm.t('mail', 'Move'),\"size\":20}})]},proxy:true}],null,false,1852981371)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Move thread'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"close-after-click\":false},on:{\"click\":function($event){_vm.moreActionsOpen=true}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('DotsHorizontalIcon',{attrs:{\"title\":_vm.t('mail', 'More actions'),\"size\":20}})]},proxy:true}],null,false,2458825807)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'More actions'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onDelete.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('DeleteIcon',{attrs:{\"title\":_vm.t('mail', 'Delete thread'),\"size\":20}})]},proxy:true}],null,false,2482086091)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Delete thread'))+\"\\n\\t\\t\\t\")])]:_vm._e(),_vm._v(\" \"),(_vm.moreActionsOpen)?[_c('ActionButton',{attrs:{\"close-after-click\":false},on:{\"click\":function($event){_vm.moreActionsOpen=false}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('ChevronLeft',{attrs:{\"title\":_vm.t('mail', 'More actions'),\"size\":20}})]},proxy:true}],null,false,194182918)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'More actions'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onOpenEditAsNew.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('PlusIcon',{attrs:{\"title\":_vm.t('mail', 'Edit as new message'),\"size\":20}})]},proxy:true}],null,false,2673016614)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Edit as new message'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();_vm.showEventModal = true}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('IconCreateEvent',{attrs:{\"title\":_vm.t('mail', 'Create event'),\"size\":20}})]},proxy:true}],null,false,3445410757)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Create event'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionLink',{attrs:{\"close-after-click\":true,\"href\":_vm.exportMessageLink},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('DownloadIcon',{attrs:{\"size\":20}})]},proxy:true}],null,false,2598526839)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Download message'))+\"\\n\\t\\t\\t\")])]:_vm._e()]},proxy:true},{key:\"extra\",fn:function(){return [_vm._l((_vm.tags),function(tag){return _c('div',{key:tag.id,staticClass:\"tag-group\"},[_c('div',{staticClass:\"tag-group__bg\",style:({'background-color': tag.color})}),_vm._v(\" \"),_c('span',{staticClass:\"tag-group__label\",style:({color: tag.color})},[_vm._v(_vm._s(tag.displayName)+\" \")])])}),_vm._v(\" \"),(_vm.showMoveModal)?_c('MoveModal',{attrs:{\"account\":_vm.account,\"envelopes\":[_vm.data],\"move-thread\":true},on:{\"move\":_vm.onMove,\"close\":_vm.onCloseMoveModal}}):_vm._e(),_vm._v(\" \"),(_vm.showEventModal)?_c('EventModal',{attrs:{\"envelope\":_vm.data},on:{\"close\":function($event){_vm.showEventModal = false}}}):_vm._e(),_vm._v(\" \"),(_vm.showTagModal)?_c('TagModal',{attrs:{\"account\":_vm.account,\"envelope\":_vm.data},on:{\"close\":_vm.onCloseTagModal}}):_vm._e()]},proxy:true}])})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div>\n\t\t<transition name=\"multiselect-header\">\n\t\t\t<div v-if=\"selectMode\" key=\"multiselect-header\" class=\"multiselect-header\">\n\t\t\t\t<div class=\"button primary\" @click.prevent=\"markSelectedSeenOrUnseen\">\n\t\t\t\t\t<span id=\"action-label\">{{\n\t\t\t\t\t\tareAllSelectedRead\n\t\t\t\t\t\t\t? n(\n\t\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t\t'Mark {number} unread',\n\t\t\t\t\t\t\t\t'Mark {number} unread',\n\t\t\t\t\t\t\t\tselection.length,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tnumber: selection.length,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t: n(\n\t\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t\t'Mark {number} read',\n\t\t\t\t\t\t\t\t'Mark {number} read',\n\t\t\t\t\t\t\t\tselection.length,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tnumber: selection.length,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)\n\t\t\t\t\t}}</span>\n\t\t\t\t</div>\n\t\t\t\t<Actions class=\"app-content-list-item-menu\" menu-align=\"right\">\n\t\t\t\t\t<ActionButton\n\t\t\t\t\t\tv-if=\"isAtLeastOneSelectedUnimportant\"\n\t\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t\t@click.prevent=\"markSelectionImportant\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<ImportantIcon\n\t\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t{{\n\t\t\t\t\t\t\tn(\n\t\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t\t'Mark {number} as important',\n\t\t\t\t\t\t\t\t'Mark {number} as important',\n\t\t\t\t\t\t\t\tselection.length,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tnumber: selection.length,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t\t<ActionButton\n\t\t\t\t\t\tv-if=\"isAtLeastOneSelectedImportant\"\n\t\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t\t@click.prevent=\"markSelectionUnimportant\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<ImportantIcon\n\t\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t{{\n\t\t\t\t\t\t\tn(\n\t\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t\t'Mark {number} as unimportant',\n\t\t\t\t\t\t\t\t'Mark {number} as unimportant',\n\t\t\t\t\t\t\t\tselection.length,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tnumber: selection.length,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t\t<ActionButton\n\t\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t\t@click.prevent=\"favoriteOrUnfavoriteAll\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<IconFavorite\n\t\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t{{\n\t\t\t\t\t\t\tareAllSelectedFavorite\n\t\t\t\t\t\t\t\t? n(\n\t\t\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t\t\t'Unfavorite {number}',\n\t\t\t\t\t\t\t\t\t'Unfavorite {number}',\n\t\t\t\t\t\t\t\t\tselection.length,\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tnumber: selection.length,\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t: n(\n\t\t\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t\t\t'Favorite {number}',\n\t\t\t\t\t\t\t\t\t'Favorite {number}',\n\t\t\t\t\t\t\t\t\tselection.length,\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tnumber: selection.length,\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t\t<ActionButton\n\t\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t\t@click.prevent=\"unselectAll\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<IconSelect\n\t\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t{{ n(\n\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t'Unselect {number}',\n\t\t\t\t\t\t\t'Unselect {number}',\n\t\t\t\t\t\t\tselection.length,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tnumber: selection.length,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t) }}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t\t<ActionButton\n\t\t\t\t\t\tv-if=\"!account.isUnified\"\n\t\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t\t@click.prevent=\"onOpenMoveModal\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<OpenInNewIcon\n\t\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t{{ n(\n\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t'Move {number} thread',\n\t\t\t\t\t\t\t'Move {number} threads',\n\t\t\t\t\t\t\tselection.length,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tnumber: selection.length,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t) }}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t\t<ActionButton\n\t\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t\t@click.prevent=\"forwardSelectedAsAttachment\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<ShareIcon\n\t\t\t\t\t\t\t\t:title=\"t('mail', 'Forward')\"\n\t\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t{{ n(\n\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t'Forward {number} as attachment',\n\t\t\t\t\t\t\t'Forward {number} as attachment',\n\t\t\t\t\t\t\tselection.length,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tnumber: selection.length,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t) }}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t\t<ActionButton\n\t\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t\t@click.prevent=\"deleteAllSelected\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<IconDelete\n\t\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t{{\n\t\t\t\t\t\t\tn(\n\t\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t\t'Delete {number} thread',\n\t\t\t\t\t\t\t\t'Delete {number} threads',\n\t\t\t\t\t\t\t\tselection.length,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tnumber:\n\t\t\t\t\t\t\t\t\t\tselection.length,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t</Actions>\n\t\t\t\t<MoveModal\n\t\t\t\t\tv-if=\"showMoveModal\"\n\t\t\t\t\t:account=\"account\"\n\t\t\t\t\t:envelopes=\"selectedEnvelopes\"\n\t\t\t\t\t:move-thread=\"true\"\n\t\t\t\t\t@close=\"onCloseMoveModal\" />\n\t\t\t</div>\n\t\t</transition>\n\t\t<transition-group name=\"list\">\n\t\t\t<IconLoading v-if=\"refreshing\" key=\"loading-icon\" />\n\t\t\t<Envelope\n\t\t\t\tv-for=\"(env, index) in envelopes\"\n\t\t\t\t:key=\"env.databaseId\"\n\t\t\t\t:data=\"env\"\n\t\t\t\t:mailbox=\"mailbox\"\n\t\t\t\t:selected=\"selection.includes(env.databaseId)\"\n\t\t\t\t:select-mode=\"selectMode\"\n\t\t\t\t:has-multiple-accounts=\"hasMultipleAccounts\"\n\t\t\t\t:selected-envelopes=\"selectedEnvelopes\"\n\t\t\t\t@delete=\"$emit('delete', env.databaseId)\"\n\t\t\t\t@update:selected=\"onEnvelopeSelectToggle(env, index, $event)\"\n\t\t\t\t@select-multiple=\"onEnvelopeSelectMultiple(env, index)\" />\n\t\t\t<div\n\t\t\t\tv-if=\"loadMoreButton && !loadingMore\"\n\t\t\t\t:key=\"'list-collapse-' + searchQuery\"\n\t\t\t\tclass=\"load-more\"\n\t\t\t\t@click=\"$emit('load-more')\">\n\t\t\t\t{{ t('mail', 'Load more') }}\n\t\t\t</div>\n\t\t\t<div id=\"load-more-mail-messages\" key=\"loadingMore\" :class=\"{'icon-loading-small': loadingMore}\" />\n\t\t</transition-group>\n\t</div>\n</template>\n\n<script>\nimport { NcActions as Actions, NcActionButton as ActionButton, NcLoadingIcon as IconLoading } from '@nextcloud/vue'\nimport { showError } from '@nextcloud/dialogs'\nimport Envelope from './Envelope'\nimport IconDelete from 'vue-material-design-icons/Delete'\nimport ImportantIcon from './icons/ImportantIcon'\nimport IconSelect from 'vue-material-design-icons/CloseThick'\nimport IconFavorite from 'vue-material-design-icons/Star'\nimport logger from '../logger'\nimport MoveModal from './MoveModal'\nimport { matchError } from '../errors/match'\nimport NoTrashMailboxConfiguredError\n\tfrom '../errors/NoTrashMailboxConfiguredError'\nimport { differenceWith } from 'ramda'\nimport dragEventBus from '../directives/drag-and-drop/util/dragEventBus'\nimport OpenInNewIcon from 'vue-material-design-icons/OpenInNew'\nimport ShareIcon from 'vue-material-design-icons/Share'\n\nexport default {\n\tname: 'EnvelopeList',\n\tcomponents: {\n\t\tActions,\n\t\tActionButton,\n\t\tEnvelope,\n\t\tIconDelete,\n\t\tImportantIcon,\n\t\tIconFavorite,\n\t\tIconSelect,\n\t\tIconLoading,\n\t\tMoveModal,\n\t\tOpenInNewIcon,\n\t\tShareIcon,\n\t},\n\tprops: {\n\t\taccount: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tmailbox: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tenvelopes: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tsearchQuery: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: undefined,\n\t\t},\n\t\trefreshing: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t\tdefault: true,\n\t\t},\n\t\tloadingMore: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tloadMoreButton: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tselection: [],\n\t\t\tshowMoveModal: false,\n\t\t\tlastToggledIndex: undefined,\n\t\t}\n\t},\n\tcomputed: {\n\t\tselectMode() {\n\t\t\t// returns true when in selection mode (where the user selects several emails at once)\n\t\t\treturn this.selection.length > 0\n\t\t},\n\t\tareAllSelectedRead() {\n\t\t\t// returns false if at least one selected message has not been read yet\n\t\t\treturn this.selectedEnvelopes.every((env) => env.flags.seen === true)\n\t\t},\n\t\tisAtLeastOneSelectedImportant() {\n\t\t\t// returns true if at least one selected message is marked as important\n\t\t\treturn this.selectedEnvelopes.some((env) => {\n\t\t\t\treturn this.$store.getters\n\t\t\t\t\t.getEnvelopeTags(env.databaseId)\n\t\t\t\t\t.some((tag) => tag.imapLabel === '$label1')\n\t\t\t})\n\t\t},\n\t\tisAtLeastOneSelectedUnimportant() {\n\t\t\t// returns true if at least one selected message is not marked as important\n\t\t\treturn this.selectedEnvelopes.some((env) => {\n\t\t\t\treturn !this.$store.getters\n\t\t\t\t\t.getEnvelopeTags(env.databaseId)\n\t\t\t\t\t.some((tag) => tag.imapLabel === '$label1')\n\t\t\t})\n\t\t},\n\t\tareAllSelectedFavorite() {\n\t\t\t// returns false if at least one selected message has not been favorited yet\n\t\t\treturn this.selectedEnvelopes.every((env) => env.flags.flagged === true)\n\t\t},\n\t\tselectedEnvelopes() {\n\t\t\treturn this.envelopes.filter((env) => this.selection.includes(env.databaseId))\n\t\t},\n\t\thasMultipleAccounts() {\n\t\t\tconst mailboxIds = this.envelopes.map(envelope => envelope.mailboxId)\n\t\t\treturn Array.from(new Set(mailboxIds)).length > 1\n\t\t},\n\t},\n\twatch: {\n\t\tenvelopes(newVal, oldVal) {\n\t\t\t// Unselect vanished envelopes\n\t\t\tconst newIds = newVal.map((env) => env.databaseId)\n\t\t\tthis.selection = this.selection.filter((id) => newIds.includes(id))\n\t\t\tdifferenceWith((a, b) => a.databaseId === b.databaseId, oldVal, newVal)\n\t\t\t\t.forEach((env) => {\n\t\t\t\t\tenv.flags.selected = false\n\t\t\t\t})\n\t\t},\n\t},\n\tmounted() {\n\t\tdragEventBus.$on('envelopes-dropped', this.unselectAll)\n\t},\n\tbeforeDestroy() {\n\t\tdragEventBus.$off('envelopes-dropped', this.unselectAll)\n\t},\n\tmethods: {\n\t\tisEnvelopeSelected(idx) {\n\t\t\tif (this.selection.length === 0) {\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\treturn this.selection.includes(idx)\n\t\t},\n\t\tmarkSelectedSeenOrUnseen() {\n\t\t\tconst seen = !this.areAllSelectedRead\n\t\t\tthis.selectedEnvelopes.forEach((envelope) => {\n\t\t\t\tthis.$store.dispatch('toggleEnvelopeSeen', {\n\t\t\t\t\tenvelope,\n\t\t\t\t\tseen,\n\t\t\t\t})\n\t\t\t})\n\t\t\tthis.unselectAll()\n\t\t},\n\t\tmarkSelectionImportant() {\n\t\t\tthis.selectedEnvelopes.forEach((envelope) => {\n\t\t\t\tthis.$store.dispatch('markEnvelopeImportantOrUnimportant', {\n\t\t\t\t\tenvelope,\n\t\t\t\t\taddTag: true,\n\t\t\t\t})\n\t\t\t})\n\t\t\tthis.unselectAll()\n\t\t},\n\t\tmarkSelectionUnimportant() {\n\t\t\tthis.selectedEnvelopes.forEach((envelope) => {\n\t\t\t\tthis.$store.dispatch('markEnvelopeImportantOrUnimportant', {\n\t\t\t\t\tenvelope,\n\t\t\t\t\taddTag: false,\n\t\t\t\t})\n\t\t\t})\n\t\t\tthis.unselectAll()\n\t\t},\n\t\tfavoriteOrUnfavoriteAll() {\n\t\t\tconst favFlag = !this.areAllSelectedFavorite\n\t\t\tthis.selectedEnvelopes.forEach((envelope) => {\n\t\t\t\tthis.$store.dispatch('markEnvelopeFavoriteOrUnfavorite', {\n\t\t\t\t\tenvelope,\n\t\t\t\t\tfavFlag,\n\t\t\t\t})\n\t\t\t})\n\t\t\tthis.unselectAll()\n\t\t},\n\t\tasync deleteAllSelected() {\n\t\t\tlet nextEnvelopeToNavigate\n\t\t\tlet isAllSelected\n\n\t\t\tif (this.selectedEnvelopes.length === this.envelopes.length) {\n\t\t\t\tisAllSelected = true\n\t\t\t} else {\n\t\t\t\tconst indexSelectedEnvelope = this.selectedEnvelopes.findIndex((selectedEnvelope) =>\n\t\t\t\t\tselectedEnvelope.databaseId === this.$route.params.threadId)\n\n\t\t\t\t// one of threads is selected\n\t\t\t\tif (indexSelectedEnvelope !== -1) {\n\t\t\t\t\tconst lastSelectedEnvelope = this.selectedEnvelopes[this.selectedEnvelopes.length - 1]\n\t\t\t\t\tconst diff = this.envelopes.filter(envelope => envelope === lastSelectedEnvelope || !this.selectedEnvelopes.includes(envelope))\n\t\t\t\t\tconst lastIndex = diff.indexOf(lastSelectedEnvelope)\n\t\t\t\t\tnextEnvelopeToNavigate = diff[lastIndex === 0 ? 1 : lastIndex - 1]\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tawait Promise.all(this.selectedEnvelopes.map(async (envelope) => {\n\t\t\t\tlogger.info(`deleting thread ${envelope.threadRootId}`)\n\t\t\t\tawait this.$store.dispatch('deleteThread', {\n\t\t\t\t\tenvelope,\n\t\t\t\t})\n\t\t\t})).catch(async error => {\n\t\t\t\tshowError(await matchError(error, {\n\t\t\t\t\t[NoTrashMailboxConfiguredError.getName()]() {\n\t\t\t\t\t\treturn t('mail', 'No trash mailbox configured')\n\t\t\t\t\t},\n\t\t\t\t\tdefault(error) {\n\t\t\t\t\t\tlogger.error('could not delete message', error)\n\t\t\t\t\t\treturn t('mail', 'Could not delete message')\n\t\t\t\t\t},\n\t\t\t\t}))\n\t\t\t})\n\t\t\tif (nextEnvelopeToNavigate) {\n\t\t\t\tawait this.$router.push({\n\t\t\t\t\tname: 'message',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\t\tthreadId: nextEnvelopeToNavigate.databaseId,\n\t\t\t\t\t},\n\t\t\t\t})\n\n\t\t\t\t// Get new messages\n\t\t\t\tawait this.$store.dispatch('fetchNextEnvelopes', {\n\t\t\t\t\tmailboxId: this.mailbox.databaseId,\n\t\t\t\t\tquery: this.searchQuery,\n\t\t\t\t\tquantity: this.selectedEnvelopes.length,\n\t\t\t\t})\n\t\t\t} else if (isAllSelected) {\n\t\t\t\tawait this.$router.push({\n\t\t\t\t\tname: 'mailbox',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t}\n\t\t\tthis.unselectAll()\n\t\t},\n\t\tsetEnvelopeSelected(envelope, selected) {\n\t\t\tconst alreadySelected = this.selection.includes(envelope.databaseId)\n\t\t\tif (selected && !alreadySelected) {\n\t\t\t\tenvelope.flags.selected = true\n\t\t\t\tthis.selection.push(envelope.databaseId)\n\t\t\t} else if (!selected && alreadySelected) {\n\t\t\t\tenvelope.flags.selected = false\n\t\t\t\tthis.selection.splice(this.selection.indexOf(envelope.databaseId), 1)\n\t\t\t}\n\t\t},\n\t\tonEnvelopeSelectToggle(envelope, index, selected) {\n\t\t\tthis.lastToggledIndex = index\n\t\t\tthis.setEnvelopeSelected(envelope, selected)\n\t\t},\n\t\tonEnvelopeSelectMultiple(envelope, index) {\n\t\t\tif (this.lastToggledIndex === undefined) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst start = Math.min(this.lastToggledIndex, index)\n\t\t\tconst end = Math.max(this.lastToggledIndex, index)\n\t\t\tconst selected = this.selection.includes(envelope.databaseId)\n\t\t\tfor (let i = start; i <= end; i++) {\n\t\t\t\tthis.setEnvelopeSelected(this.envelopes[i], !selected)\n\t\t\t}\n\t\t\tthis.lastToggledIndex = index\n\t\t},\n\t\tunselectAll() {\n\t\t\tthis.envelopes.forEach((env) => {\n\t\t\t\tenv.flags.selected = false\n\t\t\t})\n\t\t\tthis.selection = []\n\t\t},\n\t\tonOpenMoveModal() {\n\t\t\tthis.showMoveModal = true\n\t\t},\n\t\tasync forwardSelectedAsAttachment() {\n\t\t\tawait this.$store.dispatch('showMessageComposer', {\n\t\t\t\tforwardedMessages: this.selection,\n\t\t\t})\n\t\t\tthis.unselectAll()\n\t\t},\n\t\tonCloseMoveModal() {\n\t\t\tthis.showMoveModal = false\n\t\t\tthis.unselectAll()\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\ndiv {\n\t// So we can align the loading spinner in the Priority inbox\n\tposition: relative;\n}\n\n.load-more {\n\ttext-align: center;\n\tmargin-top: 10px;\n\tcursor: pointer;\n\tcolor: var(--color-text-maxcontrast);\n}\n\n.multiselect-header {\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: center;\n\tjustify-content: center;\n\tbackground-color: var(--color-main-background-translucent);\n\tposition: sticky;\n\ttop: 0px;\n\theight: 48px;\n\tz-index: 100;\n}\n\n#load-more-mail-messages {\n\tmargin: 10px auto;\n\tpadding: 10px;\n\tmargin-top: 50px;\n\tmargin-bottom: 50px;\n}\n\n/* TODO: put this in core icons.css as general rule for buttons with icons */\n#load-more-mail-messages {\n\tpadding-left: 32px;\n\tbackground-position: 9px center;\n}\n\n.multiselect-header-enter-active,\n.multiselect-header-leave-active,\n.list-enter-active,\n.list-leave-active {\n\ttransition: all var(--animation-slow);\n}\n\n.multiselect-header-enter,\n.multiselect-header-leave-to,\n.list-enter,\n.list-leave-to {\n\topacity: 0;\n\theight: 0px;\n\ttransform: scaleY(0);\n}\n\n#action-label {\n\tvertical-align: middle;\n}\n@media only screen and (min-width: 600px) {\n\t#action-label {\n\t\tdisplay: block;\n\t}\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EnvelopeList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EnvelopeList.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EnvelopeList.vue?vue&type=style&index=0&id=6568f604&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EnvelopeList.vue?vue&type=style&index=0&id=6568f604&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./EnvelopeList.vue?vue&type=template&id=6568f604&scoped=true&\"\nimport script from \"./EnvelopeList.vue?vue&type=script&lang=js&\"\nexport * from \"./EnvelopeList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EnvelopeList.vue?vue&type=style&index=0&id=6568f604&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6568f604\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('transition',{attrs:{\"name\":\"multiselect-header\"}},[(_vm.selectMode)?_c('div',{key:\"multiselect-header\",staticClass:\"multiselect-header\"},[_c('div',{staticClass:\"button primary\",on:{\"click\":function($event){$event.preventDefault();return _vm.markSelectedSeenOrUnseen.apply(null, arguments)}}},[_c('span',{attrs:{\"id\":\"action-label\"}},[_vm._v(_vm._s(_vm.areAllSelectedRead\n\t\t\t\t\t\t? _vm.n(\n\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t'Mark {number} unread',\n\t\t\t\t\t\t\t'Mark {number} unread',\n\t\t\t\t\t\t\t_vm.selection.length,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tnumber: _vm.selection.length,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)\n\t\t\t\t\t\t: _vm.n(\n\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t'Mark {number} read',\n\t\t\t\t\t\t\t'Mark {number} read',\n\t\t\t\t\t\t\t_vm.selection.length,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tnumber: _vm.selection.length,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)))])]),_vm._v(\" \"),_c('Actions',{staticClass:\"app-content-list-item-menu\",attrs:{\"menu-align\":\"right\"}},[(_vm.isAtLeastOneSelectedUnimportant)?_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.markSelectionImportant.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('ImportantIcon',{attrs:{\"size\":20}})]},proxy:true}],null,false,4006335173)},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.n(\n\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t'Mark {number} as important',\n\t\t\t\t\t\t\t'Mark {number} as important',\n\t\t\t\t\t\t\t_vm.selection.length,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tnumber: _vm.selection.length,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t))+\"\\n\\t\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.isAtLeastOneSelectedImportant)?_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.markSelectionUnimportant.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('ImportantIcon',{attrs:{\"size\":20}})]},proxy:true}],null,false,4006335173)},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.n(\n\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t'Mark {number} as unimportant',\n\t\t\t\t\t\t\t'Mark {number} as unimportant',\n\t\t\t\t\t\t\t_vm.selection.length,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tnumber: _vm.selection.length,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t))+\"\\n\\t\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.favoriteOrUnfavoriteAll.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('IconFavorite',{attrs:{\"size\":20}})]},proxy:true}],null,false,747028727)},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.areAllSelectedFavorite\n\t\t\t\t\t\t\t? _vm.n(\n\t\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t\t'Unfavorite {number}',\n\t\t\t\t\t\t\t\t'Unfavorite {number}',\n\t\t\t\t\t\t\t\t_vm.selection.length,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tnumber: _vm.selection.length,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t: _vm.n(\n\t\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t\t'Favorite {number}',\n\t\t\t\t\t\t\t\t'Favorite {number}',\n\t\t\t\t\t\t\t\t_vm.selection.length,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tnumber: _vm.selection.length,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t))+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.unselectAll.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('IconSelect',{attrs:{\"size\":20}})]},proxy:true}],null,false,3052863531)},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.n(\n\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t'Unselect {number}',\n\t\t\t\t\t\t'Unselect {number}',\n\t\t\t\t\t\t_vm.selection.length,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnumber: _vm.selection.length,\n\t\t\t\t\t\t}\n\t\t\t\t\t))+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),(!_vm.account.isUnified)?_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onOpenMoveModal.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('OpenInNewIcon',{attrs:{\"size\":20}})]},proxy:true}],null,false,1266168172)},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.n(\n\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t'Move {number} thread',\n\t\t\t\t\t\t'Move {number} threads',\n\t\t\t\t\t\t_vm.selection.length,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnumber: _vm.selection.length,\n\t\t\t\t\t\t}\n\t\t\t\t\t))+\"\\n\\t\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.forwardSelectedAsAttachment.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('ShareIcon',{attrs:{\"title\":_vm.t('mail', 'Forward'),\"size\":20}})]},proxy:true}],null,false,3681882419)},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.n(\n\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t'Forward {number} as attachment',\n\t\t\t\t\t\t'Forward {number} as attachment',\n\t\t\t\t\t\t_vm.selection.length,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnumber: _vm.selection.length,\n\t\t\t\t\t\t}\n\t\t\t\t\t))+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.deleteAllSelected.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('IconDelete',{attrs:{\"size\":20}})]},proxy:true}],null,false,881161434)},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.n(\n\t\t\t\t\t\t\t'mail',\n\t\t\t\t\t\t\t'Delete {number} thread',\n\t\t\t\t\t\t\t'Delete {number} threads',\n\t\t\t\t\t\t\t_vm.selection.length,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tnumber:\n\t\t\t\t\t\t\t\t\t_vm.selection.length,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t))+\"\\n\\t\\t\\t\\t\")])],1),_vm._v(\" \"),(_vm.showMoveModal)?_c('MoveModal',{attrs:{\"account\":_vm.account,\"envelopes\":_vm.selectedEnvelopes,\"move-thread\":true},on:{\"close\":_vm.onCloseMoveModal}}):_vm._e()],1):_vm._e()]),_vm._v(\" \"),_c('transition-group',{attrs:{\"name\":\"list\"}},[(_vm.refreshing)?_c('IconLoading',{key:\"loading-icon\"}):_vm._e(),_vm._v(\" \"),_vm._l((_vm.envelopes),function(env,index){return _c('Envelope',{key:env.databaseId,attrs:{\"data\":env,\"mailbox\":_vm.mailbox,\"selected\":_vm.selection.includes(env.databaseId),\"select-mode\":_vm.selectMode,\"has-multiple-accounts\":_vm.hasMultipleAccounts,\"selected-envelopes\":_vm.selectedEnvelopes},on:{\"delete\":function($event){return _vm.$emit('delete', env.databaseId)},\"update:selected\":function($event){return _vm.onEnvelopeSelectToggle(env, index, $event)},\"select-multiple\":function($event){return _vm.onEnvelopeSelectMultiple(env, index)}}})}),_vm._v(\" \"),(_vm.loadMoreButton && !_vm.loadingMore)?_c('div',{key:'list-collapse-' + _vm.searchQuery,staticClass:\"load-more\",on:{\"click\":function($event){return _vm.$emit('load-more')}}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Load more'))+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),_c('div',{key:\"loadingMore\",class:{'icon-loading-small': _vm.loadingMore},attrs:{\"id\":\"load-more-mail-messages\"}})],2)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Error.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Error.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license AGPL-3.0-or-later\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<div class=\"emptycontent\">\n\t\t<h2>{{ error }}</h2>\n\t\t<p>{{ message }}</p>\n\t\t<p v-if=\"data && data.debug\">\n\t\t\t<a class=\"button\"\n\t\t\t\t:href=\"reportUrl\"\n\t\t\t\ttarget=\"_blank\"\n\t\t\t\trel=\"noopener\">{{ t('mail', 'Report this bug') }}</a>\n\t\t</p>\n\t</div>\n</template>\n\n<script>\nimport { getReportUrl } from '../util/CrashReport'\n\nexport default {\n\tname: 'Error',\n\tprops: {\n\t\terror: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdata: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => undefined,\n\t\t},\n\t},\n\tcomputed: {\n\t\treportUrl() {\n\t\t\treturn getReportUrl(this.data)\n\t\t},\n\t},\n}\n</script>\n","/*\n * @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport IssueTemplateBuilder from 'nextcloud_issuetemplate_builder'\n\nconst flattenError = (error) => {\n\tlet text = ''\n\tif (error.type) {\n\t\ttext += error.type + ': '\n\t}\n\ttext += error.message\n\ttext += '\\n'\n\tif (error.trace) {\n\t\ttext += flattenTrace(error.trace)\n\t}\n\tif (error.stack) {\n\t\ttext += error.stack\n\t}\n\treturn text\n}\n\nconst flattenTrace = (trace) => {\n\treturn trace.reduce(function(acc, entry) {\n\t\tlet text = ''\n\t\tif (entry.class) {\n\t\t\ttext += '  at ' + entry.class + '::' + entry.function\n\t\t} else {\n\t\t\ttext += '  at ' + entry.function\n\t\t}\n\t\tif (entry.file) {\n\t\t\ttext += '\\n     ' + entry.file + ', line ' + entry.line\n\t\t}\n\t\treturn acc + text + '\\n'\n\t}, '')\n}\n\nexport const getReportUrl = (error) => {\n\tconsole.error(error)\n\tlet message = error.message || 'An unkown error occurred.'\n\tif (!message.endsWith('.')) {\n\t\tmessage += '.'\n\t}\n\tconst builder = new IssueTemplateBuilder()\n\tconst template = builder\n\t\t.addEmptyStepsToReproduce()\n\t\t.addExpectedActualBehaviour()\n\t\t.addLogs('Error', flattenError(error))\n\t\t.render()\n\n\treturn (\n\t\t'https://github.com/nextcloud/mail/issues/new'\n\t\t+ '?title='\n\t\t+ encodeURIComponent(message)\n\t\t+ '&body='\n\t\t+ encodeURIComponent(template)\n\t)\n}\n","import { render, staticRenderFns } from \"./Error.vue?vue&type=template&id=89466342&\"\nimport script from \"./Error.vue?vue&type=script&lang=js&\"\nexport * from \"./Error.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"emptycontent\"},[_c('h2',[_vm._v(_vm._s(_vm.error))]),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(_vm.message))]),_vm._v(\" \"),(_vm.data && _vm.data.debug)?_c('p',[_c('a',{staticClass:\"button\",attrs:{\"href\":_vm.reportUrl,\"target\":\"_blank\",\"rel\":\"noopener\"}},[_vm._v(_vm._s(_vm.t('mail', 'Report this bug')))])]):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loading.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loading.vue?vue&type=script&lang=js&\"","<template>\n\t<div class=\"wrapper\">\n\t\t<div v-if=\"hint\" class=\"emptycontent\">\n\t\t\t<IconLoading :size=\"20\" />\n\t\t\t<h2>{{ hint }}</h2>\n\t\t\t<transition name=\"fade\">\n\t\t\t\t<em v-if=\"slowHint && slow\">{{ slowHint }}</em>\n\t\t\t</transition>\n\t\t</div>\n\t\t<IconLoading v-else class=\"container\" />\n\t</div>\n</template>\n\n<script>\nimport { NcLoadingIcon as IconLoading } from '@nextcloud/vue'\nexport default {\n\tname: 'Loading',\n\tcomponents: {\n\t\tIconLoading,\n\t},\n\tprops: {\n\t\thint: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t\trequired: false,\n\t\t},\n\t\tslowHint: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t\trequired: false,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tslow: false,\n\t\t\tslowTimer: undefined,\n\t\t}\n\t},\n\tmounted() {\n\t\tclearTimeout(this.slowTimer)\n\n\t\tthis.slowTimer = setTimeout(() => {\n\t\t\tthis.slow = true\n\t\t}, 3500)\n\t},\n\tbeforeDestroy() {\n\t\tclearTimeout(this.slowTimer)\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.fade-enter-active,\n.fade-leave-active {\n\ttransition: opacity 0.5s;\n}\n.fade-enter,\n.fade-leave-to {\n\topacity: 0;\n}\n\n.wrapper {\n\tdisplay: flex;\n\tjustify-content: space-around;\n\tflex-direction: column;\n\tflex: 1 auto;\n}\n</style>\n","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loading.vue?vue&type=style&index=0&id=c46faebc&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loading.vue?vue&type=style&index=0&id=c46faebc&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./Loading.vue?vue&type=template&id=c46faebc&scoped=true&\"\nimport script from \"./Loading.vue?vue&type=script&lang=js&\"\nexport * from \"./Loading.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Loading.vue?vue&type=style&index=0&id=c46faebc&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c46faebc\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"wrapper\"},[(_vm.hint)?_c('div',{staticClass:\"emptycontent\"},[_c('IconLoading',{attrs:{\"size\":20}}),_vm._v(\" \"),_c('h2',[_vm._v(_vm._s(_vm.hint))]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.slowHint && _vm.slow)?_c('em',[_vm._v(_vm._s(_vm.slowHint))]):_vm._e()])],1):_c('IconLoading',{staticClass:\"container\"})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EmptyMailboxSection.vue?vue&type=style&index=0&id=f18db8d4&prod&scoped=true&lang=scss&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EmptyMailboxSection.vue?vue&type=style&index=0&id=f18db8d4&prod&scoped=true&lang=scss&\";\n       export default content && content.locals ? content.locals : undefined;\n","<!--\n  - @copyright 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license AGPL-3.0-or-later\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<Error v-if=\"error\"\n\t\t:error=\"t('mail', 'Could not open mailbox')\"\n\t\tmessage=\"\"\n\t\trole=\"alert\" />\n\t<Loading v-else-if=\"loadingEnvelopes\" :hint=\"t('mail', 'Loading messages …')\" role=\"alert\" />\n\t<Loading\n\t\tv-else-if=\"loadingCacheInitialization\"\n\t\t:hint=\"t('mail', 'Loading messages …')\"\n\t\t:slow-hint=\"t('mail', 'Indexing your messages. This can take a bit longer for larger mailboxes.')\" />\n\t<EmptyMailboxSection v-else-if=\"isPriorityInbox && !hasMessages\" key=\"empty\" />\n\t<EmptyMailbox v-else-if=\"!hasMessages\" key=\"empty\" />\n\t<EnvelopeList\n\t\tv-else\n\t\t:account=\"account\"\n\t\t:mailbox=\"mailbox\"\n\t\t:search-query=\"searchQuery\"\n\t\t:envelopes=\"envelopesToShow\"\n\t\t:refreshing=\"refreshing\"\n\t\t:loading-more=\"loadingMore\"\n\t\t:load-more-button=\"showLoadMore\"\n\t\t@delete=\"onDelete\"\n\t\t@load-more=\"loadMore\" />\n</template>\n\n<script>\nimport EmptyMailbox from './EmptyMailbox'\nimport EnvelopeList from './EnvelopeList'\nimport Error from './Error'\nimport { findIndex, propEq } from 'ramda'\nimport isMobile from '@nextcloud/vue/dist/Mixins/isMobile'\nimport Loading from './Loading'\nimport logger from '../logger'\nimport MailboxLockedError from '../errors/MailboxLockedError'\nimport MailboxNotCachedError from '../errors/MailboxNotCachedError'\nimport { matchError } from '../errors/match'\nimport { wait } from '../util/wait'\nimport EmptyMailboxSection from './EmptyMailboxSection'\nimport { showError } from '@nextcloud/dialogs'\nimport NoTrashMailboxConfiguredError\n\tfrom '../errors/NoTrashMailboxConfiguredError'\n\nexport default {\n\tname: 'Mailbox',\n\tcomponents: {\n\t\tEmptyMailboxSection,\n\t\tEmptyMailbox,\n\t\tEnvelopeList,\n\t\tError,\n\t\tLoading,\n\t},\n\tmixins: [isMobile],\n\tprops: {\n\t\taccount: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tmailbox: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tbus: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tpaginate: {\n\t\t\ttype: String,\n\t\t\tdefault: 'scroll',\n\t\t},\n\t\tinitialPageSize: {\n\t\t\ttype: Number,\n\t\t\tdefault: 20,\n\t\t},\n\t\topenFirst: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\tsearchQuery: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: undefined,\n\t\t},\n\t\tisPriorityInbox: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\terror: false,\n\t\t\trefreshing: false,\n\t\t\tloadingMore: false,\n\t\t\tloadingEnvelopes: true,\n\t\t\tloadingCacheInitialization: false,\n\t\t\tloadMailboxInterval: undefined,\n\t\t\texpanded: false,\n\t\t\tendReached: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\tenvelopes() {\n\t\t\treturn this.$store.getters.getEnvelopes(this.mailbox.databaseId, this.searchQuery)\n\t\t},\n\t\tenvelopesToShow() {\n\t\t\tif (this.paginate === 'manual' && !this.expanded) {\n\t\t\t\treturn this.envelopes.slice(0, 8)\n\t\t\t}\n\t\t\treturn this.envelopes\n\t\t},\n\t\thasMessages() {\n\t\t\treturn this.envelopes.length > 0\n\t\t},\n\t\tshowLoadMore() {\n\t\t\treturn !this.endReached && this.paginate === 'manual'\n\t\t},\n\t},\n\twatch: {\n\t\t// Force the envelope list to re-render when user clicks on the folder it's currently in\n\t\t$route(to) {\n\t\t\tif (to.params.threadId === undefined && !this.isMobile) {\n\t\t\t\tconst first = this.envelopes[0]\n\t\t\t\tif (typeof first !== 'undefined') {\n\t\t\t\t\tlogger.debug('refreshing mailbox')\n\t\t\t\t\tif (this.$route.params.mailboxId === this.account.draftsMailboxId) {\n\t\t\t\t\t\t// Don't navigate\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.$router.replace({\n\t\t\t\t\t\t\tname: 'message',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\t\t\t\tfilter: this.$route.params.filter ? this.$route.params.filter : undefined,\n\t\t\t\t\t\t\t\tthreadId: first.databaseId,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\taccount() {\n\t\t\tthis.loadEnvelopes()\n\t\t},\n\t\tmailbox() {\n\t\t\tthis.loadEnvelopes()\n\t\t\t\t.then(() => {\n\t\t\t\t\tlogger.debug(`syncing mailbox ${this.mailbox.databaseId} (${this.searchQuery}) after mailbox change`)\n\t\t\t\t\tthis.sync(false)\n\t\t\t\t})\n\t\t},\n\t\tsearchQuery() {\n\t\t\tthis.loadEnvelopes()\n\t\t},\n\t},\n\tcreated() {\n\t\tthis.bus.$on('load-more', this.onScroll)\n\t\tthis.bus.$on('delete', this.onDelete)\n\t\tthis.bus.$on('shortcut', this.handleShortcut)\n\t\tthis.loadMailboxInterval = setInterval(this.loadMailbox, 60000)\n\t},\n\tasync mounted() {\n\t\tthis.loadEnvelopes()\n\t\t\t.then(() => {\n\t\t\t\tlogger.debug(`syncing mailbox ${this.mailbox.databaseId} (${this.searchQuery}) after mount`)\n\t\t\t\tthis.sync(false)\n\t\t\t})\n\t},\n\tdestroyed() {\n\t\tthis.bus.$off('load-more', this.onScroll)\n\t\tthis.bus.$off('delete', this.onDelete)\n\t\tthis.bus.$off('shortcut', this.handleShortcut)\n\t\tthis.stopInterval()\n\t},\n\tmethods: {\n\t\tinitializeCache() {\n\t\t\tthis.loadingCacheInitialization = true\n\t\t\tthis.error = false\n\n\t\t\tlogger.debug(`syncing mailbox ${this.mailbox.databaseId} (${this.searchQuery}) during cache initalization`)\n\t\t\tthis.sync(true)\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.loadingCacheInitialization = false\n\n\t\t\t\t\treturn this.loadEnvelopes()\n\t\t\t\t})\n\t\t},\n\t\tasync loadEnvelopes() {\n\t\t\tlogger.debug(`Fetching envelopes for mailbox ${this.mailbox.databaseId} (${this.searchQuery})`, this.mailbox)\n\t\t\tthis.loadingEnvelopes = true\n\t\t\tthis.loadingCacheInitialization = false\n\t\t\tthis.error = false\n\n\t\t\ttry {\n\t\t\t\tconst envelopes = await this.$store.dispatch('fetchEnvelopes', {\n\t\t\t\t\tmailboxId: this.mailbox.databaseId,\n\t\t\t\t\tquery: this.searchQuery,\n\t\t\t\t\tlimit: this.initialPageSize,\n\t\t\t\t})\n\n\t\t\t\tlogger.debug(envelopes.length + ' envelopes fetched', { envelopes })\n\n\t\t\t\tthis.loadingEnvelopes = false\n\t\t\t\tif (this.openFirst && !this.isMobile && this.$route.name !== 'message' && envelopes.length > 0) {\n\t\t\t\t\t// Show first message\n\t\t\t\t\tconst first = envelopes[0]\n\n\t\t\t\t\t// Keep the selected account-mailbox combination, but navigate to the message\n\t\t\t\t\t// (it's not a bug that we don't use first.accountId and first.mailboxId here)\n\t\t\t\t\tlogger.debug('showing the first message of mailbox ' + this.$route.params.mailboxId)\n\t\t\t\t\tif (this.$route.params.mailboxId === this.account.draftsMailboxId) {\n\t\t\t\t\t\tthis.$router.replace({\n\t\t\t\t\t\t\tname: 'message',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\t\t\t\tfilter: this.$route.params.filter ? this.$route.params.filter : undefined,\n\t\t\t\t\t\t\t\tthreadId: 'new',\n\t\t\t\t\t\t\t\tdraftId: first.databaseId,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t})\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.$router.replace({\n\t\t\t\t\t\t\tname: 'message',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\t\t\t\tfilter: this.$route.params.filter ? this.$route.params.filter : undefined,\n\t\t\t\t\t\t\t\tthreadId: first.databaseId,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tawait matchError(error, {\n\t\t\t\t\t[MailboxLockedError.getName()]: async (error) => {\n\t\t\t\t\t\tlogger.info(`Mailbox ${this.mailbox.databaseId} (${this.searchQuery}) is locked`, { error })\n\n\t\t\t\t\t\tawait wait(15 * 1000)\n\t\t\t\t\t\t// Keep trying\n\t\t\t\t\t\tawait this.loadEnvelopes()\n\t\t\t\t\t},\n\t\t\t\t\t[MailboxNotCachedError.getName()]: async (error) => {\n\t\t\t\t\t\tlogger.info(`Mailbox ${this.mailbox.databaseId} (${this.searchQuery}) not cached. Triggering initialization`, { error })\n\t\t\t\t\t\tthis.loadingEnvelopes = false\n\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tawait this.initializeCache()\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tlogger.error(`Could not initialize cache of mailbox ${this.mailbox.databaseId} (${this.searchQuery})`, { error })\n\t\t\t\t\t\t\tthis.error = error\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tdefault: (error) => {\n\t\t\t\t\t\tlogger.error(`Could not fetch envelopes of mailbox ${this.mailbox.databaseId} (${this.searchQuery})`, { error })\n\t\t\t\t\t\tthis.loadingEnvelopes = false\n\t\t\t\t\t\tthis.error = error\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tasync loadMore() {\n\t\t\tif (!this.expanded) {\n\t\t\t\tlogger.debug('expanding envelope list')\n\t\t\t\tthis.expanded = true\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tlogger.debug('fetching next envelope page')\n\t\t\tthis.loadingMore = true\n\n\t\t\ttry {\n\t\t\t\tconst envelopes = await this.$store.dispatch('fetchNextEnvelopePage', {\n\t\t\t\t\tmailboxId: this.mailbox.databaseId,\n\t\t\t\t\tquery: this.searchQuery,\n\t\t\t\t})\n\t\t\t\tif (envelopes.length === 0) {\n\t\t\t\t\tlogger.info('envelope list end reached')\n\t\t\t\t\tthis.endReached = true\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error('could not fetch next envelope page', { error })\n\t\t\t} finally {\n\t\t\t\tthis.loadingMore = false\n\t\t\t}\n\t\t},\n\t\tasync handleShortcut(e) {\n\t\t\tconst envelopes = this.envelopes\n\t\t\tconst currentId = parseInt(this.$route.params.threadId, 10)\n\n\t\t\tconst env = envelopes.find((e) => e.databaseId === currentId)\n\t\t\tconst idx = envelopes.indexOf(env)\n\t\t\tlet next\n\n\t\t\tif (e.srcKey !== 'refresh' && !env) {\n\t\t\t\tlogger.debug('envelope is not in the list, ignoring shortcut', {\n\t\t\t\t\tsrcKey: e.srcKey,\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tswitch (e.srcKey) {\n\t\t\tcase 'next':\n\t\t\tcase 'prev':\n\t\t\t\tif (e.srcKey === 'next') {\n\t\t\t\t\tnext = envelopes[idx + 1]\n\t\t\t\t} else {\n\t\t\t\t\tnext = envelopes[idx - 1]\n\t\t\t\t}\n\n\t\t\t\tif (!next) {\n\t\t\t\t\tlogger.debug('ignoring shortcut: head or tail of envelope list reached', {\n\t\t\t\t\t\tenvelopes,\n\t\t\t\t\t\tidx,\n\t\t\t\t\t\tsrcKey: e.srcKey,\n\t\t\t\t\t})\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\t// Keep the selected account-mailbox combination, but navigate to a different message\n\t\t\t\t// (it's not a bug that we don't use next.accountId and next.mailboxId here)\n\t\t\t\tthis.$router.push({\n\t\t\t\t\tname: 'message',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\t\tfilter: this.$route.params.filter ? this.$route.params.filter : undefined,\n\t\t\t\t\t\tthreadId: next.databaseId,\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t\tbreak\n\t\t\tcase 'del':\n\t\t\t\tlogger.debug('deleting', { env })\n\t\t\t\tthis.onDelete(env.databaseId)\n\t\t\t\ttry {\n\t\t\t\t\tawait this.$store.dispatch('deleteThread', {\n\t\t\t\t\t\tenvelope: env,\n\t\t\t\t\t})\n\t\t\t\t} catch (error) {\n\t\t\t\t\tlogger.error('could not delete envelope', {\n\t\t\t\t\t\tenv,\n\t\t\t\t\t\terror,\n\t\t\t\t\t})\n\n\t\t\t\t\tshowError(await matchError(error, {\n\t\t\t\t\t\t[NoTrashMailboxConfiguredError.getName()]() {\n\t\t\t\t\t\t\treturn t('mail', 'No trash mailbox configured')\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdefault() {\n\t\t\t\t\t\t\treturn t('mail', 'Could not delete message')\n\t\t\t\t\t\t},\n\t\t\t\t\t}))\n\t\t\t\t}\n\n\t\t\t\tbreak\n\t\t\tcase 'flag':\n\t\t\t\tlogger.debug('flagging envelope via shortkey', { env })\n\t\t\t\tthis.$store.dispatch('toggleEnvelopeFlagged', env).catch((error) =>\n\t\t\t\t\tlogger.error('could not flag envelope via shortkey', {\n\t\t\t\t\t\tenv,\n\t\t\t\t\t\terror,\n\t\t\t\t\t})\n\t\t\t\t)\n\t\t\t\tbreak\n\t\t\tcase 'refresh':\n\t\t\t\tlogger.debug(`syncing mailbox ${this.mailbox.databaseId} (${this.searchQuery}) per shortcut`)\n\t\t\t\tthis.sync(false)\n\n\t\t\t\tbreak\n\t\t\tcase 'unseen':\n\t\t\t\tlogger.debug('marking message as seen/unseen via shortkey', { env })\n\t\t\t\tthis.$store.dispatch('toggleEnvelopeSeen', { envelope: env }).catch((error) =>\n\t\t\t\t\tlogger.error('could not mark envelope as seen/unseen via shortkey', {\n\t\t\t\t\t\tenv,\n\t\t\t\t\t\terror,\n\t\t\t\t\t})\n\t\t\t\t)\n\t\t\t\tbreak\n\t\t\tdefault:\n\t\t\t\tlogger.warn('shortcut ' + e.srcKey + ' is unknown. ignoring.')\n\t\t\t}\n\t\t},\n\t\tasync sync(init = false) {\n\t\t\tif (this.refreshing) {\n\t\t\t\tlogger.debug(`already sync'ing mailbox ${this.mailbox.databaseId} (${this.searchQuery}), aborting`, { init })\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthis.refreshing = true\n\t\t\ttry {\n\t\t\t\tawait this.$store.dispatch('syncEnvelopes', {\n\t\t\t\t\tmailboxId: this.mailbox.databaseId,\n\t\t\t\t\tquery: this.searchQuery,\n\t\t\t\t\tinit,\n\t\t\t\t})\n\t\t\t} catch (error) {\n\t\t\t\tmatchError(error, {\n\t\t\t\t\t[MailboxLockedError.getName()](error) {\n\t\t\t\t\t\tlogger.info('Background sync failed because the mailbox is locked', { error, init })\n\t\t\t\t\t},\n\t\t\t\t\tdefault(error) {\n\t\t\t\t\t\tlogger.error('Could not sync envelopes: ' + error.message, { error, init })\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t} finally {\n\t\t\t\tthis.refreshing = false\n\t\t\t\tlogger.debug(`finished sync'ing mailbox ${this.mailbox.databaseId} (${this.searchQuery})`, { init })\n\t\t\t}\n\t\t},\n\t\t// onDelete(id): Load more message and navigate to other message if needed\n\t\t// id: The id of the message being delete\n\t\tonDelete(id) {\n\t\t\t// Get a new message\n\t\t\tthis.$store.dispatch('fetchNextEnvelopes', {\n\t\t\t\tmailboxId: this.mailbox.databaseId,\n\t\t\t\tquery: this.searchQuery,\n\t\t\t\tquantity: 1,\n\t\t\t})\n\t\t\tconst idx = findIndex(propEq('databaseId', id), this.envelopes)\n\t\t\tif (idx === -1) {\n\t\t\t\tlogger.debug('envelope to delete does not exist in envelope list')\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif (id !== this.$route.params.threadId) {\n\t\t\t\tlogger.debug('other message open, not jumping to the next/previous message')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst next = this.envelopes[idx === 0 ? 1 : idx - 1]\n\t\t\tif (!next) {\n\t\t\t\tlogger.debug('no next/previous envelope, not navigating')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t// Keep the selected mailbox, but navigate to a different message\n\t\t\t// (it's not a bug that we don't use next.mailboxId here)\n\t\t\tthis.$router.push({\n\t\t\t\tname: 'message',\n\t\t\t\tparams: {\n\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\tfilter: this.$route.params.filter ? this.$route.params.filter : undefined,\n\t\t\t\t\tthreadId: next.databaseId,\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t\tonScroll() {\n\t\t\tif (this.paginate !== 'scroll') {\n\t\t\t\tlogger.debug('ignoring scroll pagination')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthis.loadMore()\n\t\t},\n\t\tasync loadMailbox() {\n\t\t\t// When the account is unified or inbox, return nothing, else sync the mailbox\n\t\t\tif (this.account.isUnified || this.mailbox.specialRole === 'inbox') {\n\t\t\t\treturn\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tlogger.debug(`syncing mailbox ${this.mailbox.databaseId} (${this.searchQuery}) in background`)\n\t\t\t\tawait this.sync(false)\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error('Background sync failed: ' + error.message, { error })\n\t\t\t}\n\t\t},\n\t\tstopInterval() {\n\t\t\tclearInterval(this.loadMailboxInterval)\n\t\t\tthis.loadMailboxInterval = undefined\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n// Fix vertical space between sections in priority inbox\n.nameimportant {\n\t::v-deep #load-more-mail-messages {\n\t\tmargin-top: 0;\n\t\tmargin-bottom: 8px;\n\t}\n}\n</style>\n","import { render, staticRenderFns } from \"./EmptyMailboxSection.vue?vue&type=template&id=f18db8d4&scoped=true&\"\nimport script from \"./EmptyMailboxSection.vue?vue&type=script&lang=js&\"\nexport * from \"./EmptyMailboxSection.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EmptyMailboxSection.vue?vue&type=style&index=0&id=f18db8d4&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f18db8d4\",\n  null\n  \n)\n\nexport default component.exports","<template>\n\t<div id=\"emptycontent\">\n\t\t<slot> {{ t('mail', 'Messages marked as important will show up here') }} </slot>\n\t</div>\n</template>\n\n<script>\nexport default {\n\tname: 'EmptyMailboxSection',\n}\n</script>\n<style scoped lang=\"scss\">\n#emptycontent {\n\tmargin-top: 10px;\n\tcolor: var(--color-text-maxcontrast);\n\tfont-size: inherit;\n\ttext-align: left;\n\tpadding-left: 16px;\n}\n</style>\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"emptycontent\"}},[_vm._t(\"default\",function(){return [_vm._v(\" \"+_vm._s(_vm.t('mail', 'Messages marked as important will show up here'))+\" \")]})],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Mailbox.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Mailbox.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Mailbox.vue?vue&type=style&index=0&id=228917a9&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Mailbox.vue?vue&type=style&index=0&id=228917a9&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./Mailbox.vue?vue&type=template&id=228917a9&scoped=true&\"\nimport script from \"./Mailbox.vue?vue&type=script&lang=js&\"\nexport * from \"./Mailbox.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Mailbox.vue?vue&type=style&index=0&id=228917a9&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"228917a9\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.error)?_c('Error',{attrs:{\"error\":_vm.t('mail', 'Could not open mailbox'),\"message\":\"\",\"role\":\"alert\"}}):(_vm.loadingEnvelopes)?_c('Loading',{attrs:{\"hint\":_vm.t('mail', 'Loading messages …'),\"role\":\"alert\"}}):(_vm.loadingCacheInitialization)?_c('Loading',{attrs:{\"hint\":_vm.t('mail', 'Loading messages …'),\"slow-hint\":_vm.t('mail', 'Indexing your messages. This can take a bit longer for larger mailboxes.')}}):(_vm.isPriorityInbox && !_vm.hasMessages)?_c('EmptyMailboxSection',{key:\"empty\"}):(!_vm.hasMessages)?_c('EmptyMailbox',{key:\"empty\"}):_c('EnvelopeList',{attrs:{\"account\":_vm.account,\"mailbox\":_vm.mailbox,\"search-query\":_vm.searchQuery,\"envelopes\":_vm.envelopesToShow,\"refreshing\":_vm.refreshing,\"loading-more\":_vm.loadingMore,\"load-more-button\":_vm.showLoadMore},on:{\"delete\":_vm.onDelete,\"load-more\":_vm.loadMore}})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NoMessageSelected.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NoMessageSelected.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license AGPL-3.0-or-later\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<AppContentDetails>\n\t\t<div id=\"emptycontent\">\n\t\t\t<IconMail :size=\"65\" />\n\t\t\t<h2>{{ t('mail', 'No message selected') }}</h2>\n\t\t\t<p />\n\t\t</div>\n\t</AppContentDetails>\n</template>\n\n<script>\nimport { NcAppContentDetails as AppContentDetails } from '@nextcloud/vue'\nimport IconMail from 'vue-material-design-icons/Email'\n\nexport default {\n\tname: 'NoMessageSelected',\n\tcomponents: {\n\t\tAppContentDetails,\n\t\tIconMail,\n\t},\n}\n</script>\n\n<style scoped>\nh2,\np {\n\ttext-align: center;\n}\n</style>\n","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NoMessageSelected.vue?vue&type=style&index=0&id=4a605894&prod&scoped=true&lang=css&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NoMessageSelected.vue?vue&type=style&index=0&id=4a605894&prod&scoped=true&lang=css&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./NoMessageSelected.vue?vue&type=template&id=4a605894&scoped=true&\"\nimport script from \"./NoMessageSelected.vue?vue&type=script&lang=js&\"\nexport * from \"./NoMessageSelected.vue?vue&type=script&lang=js&\"\nimport style0 from \"./NoMessageSelected.vue?vue&type=style&index=0&id=4a605894&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4a605894\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('AppContentDetails',[_c('div',{attrs:{\"id\":\"emptycontent\"}},[_c('IconMail',{attrs:{\"size\":65}}),_vm._v(\" \"),_c('h2',[_vm._v(_vm._s(_vm.t('mail', 'No message selected')))]),_vm._v(\" \"),_c('p')],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * @author Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * Mail\n *\n * This code is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License, version 3,\n * as published by the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License, version 3,\n * along with this program.  If not, see <http://www.gnu.org/licenses/>\n *\n */\n\nimport { translate as t } from '@nextcloud/l10n'\n\nconst smileys = [':-(', ':-/', ':-\\\\', ':-|', \":'-(\", \":'-/\", \":'-\\\\\", \":'-|\"]\n\nconst getRandomSmiley = () => {\n\treturn smileys[Math.floor(Math.random() * smileys.length)]\n}\n\n/**\n * @param {object} folder a folder\n * @return {string}\n */\nexport const getRandomFolderErrorMessage = (folder) => {\n\tconst folderName = folder.get('name')\n\tconst rawTexts = [\n\t\tt('mail', 'Could not load {tag}{name}{endtag}', {\n\t\t\tname: folderName,\n\t\t}),\n\t\tt('mail', 'Could not load {tag}{name}{endtag}', {\n\t\t\tname: folderName,\n\t\t}),\n\t\tt('mail', 'There was a problem loading {tag}{name}{endtag}', {\n\t\t\tname: folderName,\n\t\t}),\n\t]\n\tconst texts = rawTexts.map((text) => text.replace('{tag}', '<strong>').replace('{endtag}', '</strong>'))\n\tconst text = texts[Math.floor(Math.random() * texts.length)]\n\treturn text + ' ' + getRandomSmiley()\n}\n\n/**\n * @return {string}\n */\nexport const getRandomMessageErrorMessage = () => {\n\tconst texts = [\n\t\tt('mail', 'Could not load your message'),\n\t\tt('mail', 'Could not load the desired message'),\n\t\tt('mail', 'Could not load the message'),\n\t]\n\tconst text = texts[Math.floor(Math.random() * texts.length)]\n\treturn text + ' ' + getRandomSmiley()\n}\n","<!--\n  - @copyright 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license AGPL-3.0-or-later\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<Popover trigger=\"click\" class=\"contact-popover\">\n\t\t<UserBubble slot=\"trigger\"\n\t\t\t:display-name=\"label\"\n\t\t\t:avatar-image=\"avatarUrlAbsolute\"\n\t\t\t@click=\"onClickOpenContactDialog\">\n\t\t\t<span class=\"user-bubble-email\">{{ email }}</span>\n\t\t</UserBubble>\n\t\t<div class=\"contact-wrapper\">\n\t\t\t<ButtonVue v-if=\"contactsWithEmail && contactsWithEmail.length > 0\" type=\"tertiary-no-background\" class=\"contact-existing\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<IconDetails :size=\"20\" />\n\t\t\t\t</template>\n\t\t\t\t{{ t('mail', 'Contacts with this address') }}:\n\t\t\t\t<span>\n\t\t\t\t\t{{ contactsWithEmailComputed }}\n\t\t\t\t</span>\n\t\t\t</ButtonVue>\n\t\t\t<div v-if=\"selection === ContactSelectionStateEnum.select\" class=\"contact-menu\">\n\t\t\t\t<ButtonVue type=\"tertiary-no-background\" @click=\"onClickReply\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<IconReply :size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('mail', 'Reply') }}\n\t\t\t\t</ButtonVue>\n\t\t\t\t<ButtonVue type=\"tertiary-no-background\" @click=\"selection = ContactSelectionStateEnum.existing\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<IconUser :size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('mail', 'Add to Contact') }}\n\t\t\t\t</ButtonVue>\n\t\t\t\t<ButtonVue type=\"tertiary-no-background\" @click=\"selection = ContactSelectionStateEnum.new\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<IconAdd :size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('mail', 'New Contact') }}\n\t\t\t\t</ButtonVue>\n\t\t\t\t<ButtonVue type=\"tertiary-no-background\" @click=\"onClickCopyToClipboard\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<IconClipboard :size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('mail', 'Copy to clipboard') }}\n\t\t\t\t</ButtonVue>\n\t\t\t</div>\n\t\t\t<div v-else class=\"contact-input-wrapper\">\n\t\t\t\t<Multiselect\n\t\t\t\t\tv-if=\"selection === ContactSelectionStateEnum.existing\"\n\t\t\t\t\tid=\"contact-selection\"\n\t\t\t\t\tref=\"contact-selection-label\"\n\t\t\t\t\tv-model=\"selectedContact\"\n\t\t\t\t\t:options=\"selectableContacts\"\n\t\t\t\t\t:taggable=\"true\"\n\t\t\t\t\tlabel=\"label\"\n\t\t\t\t\ttrack-by=\"label\"\n\t\t\t\t\t:multiple=\"false\"\n\t\t\t\t\t:placeholder=\"t('name', 'Contact name …')\"\n\t\t\t\t\t:clear-on-select=\"false\"\n\t\t\t\t\t:show-no-options=\"false\"\n\t\t\t\t\t:preserve-search=\"true\"\n\t\t\t\t\t@search-change=\"onAutocomplete\" />\n\n\t\t\t\t<input v-else-if=\"selection === ContactSelectionStateEnum.new\" v-model=\"newContactName\">\n\t\t\t</div>\n\t\t\t<div v-if=\"selection !== ContactSelectionStateEnum.select\">\n\t\t\t\t<ButtonVue type=\"tertiary-no-background\" @click=\"selection = ContactSelectionStateEnum.select\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<IconClose :size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('mail', 'Go back') }}\n\t\t\t\t</ButtonVue>\n\n\t\t\t\t<ButtonVue\n\t\t\t\t\tv-close-popover\n\t\t\t\t\t:disabled=\"addButtonDisabled\"\n\t\t\t\t\ttype=\"tertiary-no-background\"\n\t\t\t\t\t@click=\"onClickAddToContact\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<IconCheck :size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('mail', 'Add') }}\n\t\t\t\t</ButtonVue>\n\t\t\t</div>\n\t\t</div>\n\t</Popover>\n</template>\n\n<script>\nimport { generateUrl } from '@nextcloud/router'\n\nimport { NcUserBubble as UserBubble, NcPopover as Popover, NcMultiselect as Multiselect, NcButton as ButtonVue } from '@nextcloud/vue'\n\nimport IconReply from 'vue-material-design-icons/Reply'\nimport IconAdd from 'vue-material-design-icons/Plus'\nimport IconClose from 'vue-material-design-icons/Close'\nimport IconClipboard from 'vue-material-design-icons/ClipboardText'\nimport IconDetails from 'vue-material-design-icons/Information'\nimport IconCheck from 'vue-material-design-icons/Check'\nimport IconUser from 'vue-material-design-icons/Account'\nimport { fetchAvatarUrlMemoized } from '../service/AvatarService'\nimport { addToContact, findMatches, newContact, autoCompleteByName } from '../service/ContactIntegrationService'\nimport uniqBy from 'lodash/fp/uniqBy'\nimport debouncePromise from 'debounce-promise'\n\nconst debouncedSearch = debouncePromise(autoCompleteByName, 500)\n\nconst ContactSelectionStateEnum = Object.freeze({ new: 1, existing: 2, select: 3 })\n\nexport default {\n\tname: 'RecipientBubble',\n\tcomponents: {\n\t\tButtonVue,\n\t\tUserBubble,\n\t\tPopover,\n\t\tMultiselect,\n\t\tIconReply,\n\t\tIconUser,\n\t\tIconAdd,\n\t\tIconClose,\n\t\tIconClipboard,\n\t\tIconDetails,\n\t\tIconCheck,\n\t},\n\tprops: {\n\t\temail: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tlabel: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tavatarUrl: undefined,\n\t\t\tloadingContacts: false,\n\t\t\tcontactsWithEmail: [],\n\t\t\tautoCompleteContacts: [],\n\t\t\tselectedContact: '',\n\t\t\tnewContactName: '',\n\t\t\tContactSelectionStateEnum,\n\t\t\tselection: ContactSelectionStateEnum.select,\n\t\t\tisContactPopoverOpen: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\tavatarUrlAbsolute() {\n\t\t\tif (!this.avatarUrl) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif (this.avatarUrl.startsWith('http')) {\n\t\t\t\treturn this.avatarUrl\n\t\t\t}\n\n\t\t\t// Make it an absolute URL because the user bubble component doesn't work with relative URLs\n\t\t\treturn window.location.protocol + '//' + window.location.host + generateUrl(this.avatarUrl)\n\t\t},\n\t\tselectableContacts() {\n\t\t\treturn this.autoCompleteContacts\n\t\t\t\t.map((contact) => ({ ...contact, label: contact.label }))\n\t\t},\n\t\tcontactsWithEmailComputed() {\n\t\t\tlet additional = ''\n\t\t\tif (this.contactsWithEmail && this.contactsWithEmail.length > 3) {\n\t\t\t\tadditional = ` + ${this.contactsWithEmail.length - 3}`\n\t\t\t}\n\t\t\treturn this.contactsWithEmail.slice(0, 3).map(e => e.label).join(', ').concat(additional)\n\t\t},\n\t\taddButtonDisabled() {\n\t\t\treturn !((this.selection === ContactSelectionStateEnum.existing && this.selectedContact)\n\t\t\t\t\t|| (this.selection === ContactSelectionStateEnum.new && this.newContactName.trim() !== ''))\n\t\t},\n\t},\n\tasync mounted() {\n\t\ttry {\n\t\t\tthis.avatarUrl = await fetchAvatarUrlMemoized(this.email)\n\t\t} catch (error) {\n\t\t\tconsole.debug('no avatar for ' + this.email, {\n\t\t\t\terror,\n\t\t\t})\n\t\t}\n\t\tthis.newContactName = this.label\n\t},\n\tmethods: {\n\t\tonClickCopyToClipboard() {\n\t\t\tthis.$copyText(this.email)\n\t\t},\n\t\tonClickReply() {\n\t\t\tthis.$router.push({\n\t\t\t\tname: 'message',\n\t\t\t\tparams: {\n\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\tthreadId: 'mailto',\n\t\t\t\t},\n\t\t\t\tquery: {\n\t\t\t\t\tto: this.email,\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t\tonClickOpenContactDialog() {\n\t\t\tif (this.contactsWithEmail.length === 0) { // TODO fix me\n\t\t\t\tfindMatches(this.email).then(res => {\n\t\t\t\t\tif (res && res.length > 0) {\n\t\t\t\t\t\tthis.contactsWithEmail = res\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tonClickAddToContact() {\n\t\t\tif (this.selection === ContactSelectionStateEnum.new) {\n\t\t\t\tif (this.newContactName !== '') {\n\t\t\t\t\tnewContact(this.newContactName.trim(), this.email).then(res => console.debug('ContactIntegration', res))\n\t\t\t\t}\n\t\t\t} else if (this.selection === ContactSelectionStateEnum.existing) {\n\t\t\t\tif (this.selectedContact) {\n\t\t\t\t\taddToContact(this.selectedContact.id, this.email).then(res => console.debug('ContactIntegration', res))\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tonAutocomplete(term) {\n\t\t\tif (term === undefined || term === '') {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tdebouncedSearch(term).then((results) => {\n\t\t\t\tthis.autoCompleteContacts = uniqBy('id')(this.autoCompleteContacts.concat(results))\n\t\t\t})\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.user-bubble__title {\n\tmax-width: 30vw;\n}\n.user-bubble-email {\n\tmargin: 10px;\n}\n\n.contact-menu {\n\tdisplay: flex;\n\tflex-wrap: wrap;\n}\n.contact-popover {\n\tdisplay: inline-block;\n}\n.contact-wrapper {\n\tpadding:10px;\n\tmin-width: 300px;\n\n\ta {\n\t\topacity: 0.7;\n\t}\n\ta:hover {\n\t\topacity: 1;\n\t}\n}\n.contact-input-wrapper {\n\tmargin-top: 10px;\n    margin-bottom: 10px;\n\tinput,\n\t.multiselect {\n\t\twidth: 100%;\n\t}\n}\n\n.contact-existing {\n\tfont-size: small !important;\n}\n::v-deep .button-vue__text {\n\tfont-weight: normal !important;\n}\n</style>\n","/*\n * @copyright 2021 Kristian Lebold <kristian@lebold.info>\n *\n * @author 2021 Kristian Lebold <kristian@lebold.info>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport Axios from '@nextcloud/axios'\nimport { generateUrl } from '@nextcloud/router'\n\nexport const findMatches = (mail) => {\n\tconst url = generateUrl('/apps/mail/api/contactIntegration/match/{mail}', {\n\t\tmail,\n\t})\n\n\treturn Axios.get(url).then((resp) => resp.data)\n}\n\nexport const addToContact = (id, mailAddr) => {\n\tconst url = generateUrl('/apps/mail/api/contactIntegration/add')\n\n\treturn Axios.put(url, { uid: id, mail: mailAddr }).then((resp) => resp.data)\n}\n\nexport const newContact = (name, mailAddr) => {\n\tconst url = generateUrl('/apps/mail/api/contactIntegration/new')\n\n\treturn Axios.put(url, { contactName: name, mail: mailAddr }).then((resp) => resp.data)\n}\n\nexport const autoCompleteByName = (term) => {\n\tconst url = generateUrl('/apps/mail/api/contactIntegration/autoComplete/{term}', {\n\t\tterm,\n\t})\n\n\treturn Axios.get(url).then((resp) => resp.data)\n}\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RecipientBubble.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RecipientBubble.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RecipientBubble.vue?vue&type=style&index=0&id=1393430a&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RecipientBubble.vue?vue&type=style&index=0&id=1393430a&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./RecipientBubble.vue?vue&type=template&id=1393430a&scoped=true&\"\nimport script from \"./RecipientBubble.vue?vue&type=script&lang=js&\"\nexport * from \"./RecipientBubble.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RecipientBubble.vue?vue&type=style&index=0&id=1393430a&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1393430a\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('Popover',{staticClass:\"contact-popover\",attrs:{\"trigger\":\"click\"}},[_c('UserBubble',{attrs:{\"slot\":\"trigger\",\"display-name\":_vm.label,\"avatar-image\":_vm.avatarUrlAbsolute},on:{\"click\":_vm.onClickOpenContactDialog},slot:\"trigger\"},[_c('span',{staticClass:\"user-bubble-email\"},[_vm._v(_vm._s(_vm.email))])]),_vm._v(\" \"),_c('div',{staticClass:\"contact-wrapper\"},[(_vm.contactsWithEmail && _vm.contactsWithEmail.length > 0)?_c('ButtonVue',{staticClass:\"contact-existing\",attrs:{\"type\":\"tertiary-no-background\"},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('IconDetails',{attrs:{\"size\":20}})]},proxy:true}],null,false,2417736673)},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Contacts with this address'))+\":\\n\\t\\t\\t\"),_c('span',[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.contactsWithEmailComputed)+\"\\n\\t\\t\\t\")])]):_vm._e(),_vm._v(\" \"),(_vm.selection === _vm.ContactSelectionStateEnum.select)?_c('div',{staticClass:\"contact-menu\"},[_c('ButtonVue',{attrs:{\"type\":\"tertiary-no-background\"},on:{\"click\":_vm.onClickReply},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('IconReply',{attrs:{\"size\":20}})]},proxy:true}],null,false,806667217)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Reply'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('ButtonVue',{attrs:{\"type\":\"tertiary-no-background\"},on:{\"click\":function($event){_vm.selection = _vm.ContactSelectionStateEnum.existing}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('IconUser',{attrs:{\"size\":20}})]},proxy:true}],null,false,207893778)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Add to Contact'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('ButtonVue',{attrs:{\"type\":\"tertiary-no-background\"},on:{\"click\":function($event){_vm.selection = _vm.ContactSelectionStateEnum.new}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('IconAdd',{attrs:{\"size\":20}})]},proxy:true}],null,false,2388353250)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'New Contact'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('ButtonVue',{attrs:{\"type\":\"tertiary-no-background\"},on:{\"click\":_vm.onClickCopyToClipboard},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('IconClipboard',{attrs:{\"size\":20}})]},proxy:true}],null,false,1207266895)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Copy to clipboard'))+\"\\n\\t\\t\\t\")])],1):_c('div',{staticClass:\"contact-input-wrapper\"},[(_vm.selection === _vm.ContactSelectionStateEnum.existing)?_c('Multiselect',{ref:\"contact-selection-label\",attrs:{\"id\":\"contact-selection\",\"options\":_vm.selectableContacts,\"taggable\":true,\"label\":\"label\",\"track-by\":\"label\",\"multiple\":false,\"placeholder\":_vm.t('name', 'Contact name …'),\"clear-on-select\":false,\"show-no-options\":false,\"preserve-search\":true},on:{\"search-change\":_vm.onAutocomplete},model:{value:(_vm.selectedContact),callback:function ($$v) {_vm.selectedContact=$$v},expression:\"selectedContact\"}}):(_vm.selection === _vm.ContactSelectionStateEnum.new)?_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newContactName),expression:\"newContactName\"}],domProps:{\"value\":(_vm.newContactName)},on:{\"input\":function($event){if($event.target.composing)return;_vm.newContactName=$event.target.value}}}):_vm._e()],1),_vm._v(\" \"),(_vm.selection !== _vm.ContactSelectionStateEnum.select)?_c('div',[_c('ButtonVue',{attrs:{\"type\":\"tertiary-no-background\"},on:{\"click\":function($event){_vm.selection = _vm.ContactSelectionStateEnum.select}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('IconClose',{attrs:{\"size\":20}})]},proxy:true}],null,false,2888946197)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Go back'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('ButtonVue',{directives:[{name:\"close-popover\",rawName:\"v-close-popover\"}],attrs:{\"disabled\":_vm.addButtonDisabled,\"type\":\"tertiary-no-background\"},on:{\"click\":_vm.onClickAddToContact},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('IconCheck',{attrs:{\"size\":20}})]},proxy:true}],null,false,905113861)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Add'))+\"\\n\\t\\t\\t\")])],1):_vm._e()],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * @copyright 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @author 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\n/**\n * @param {Text} message the message\n * @return {boolean|*}\n */\nexport const isPgpgMessage = (message) =>\n\tmessage.format === 'plain' && message.value.startsWith('-----BEGIN PGP MESSAGE-----')\n","<!--\n  - @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license AGPL-3.0-or-later\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<Actions v-if=\"calendars.length\">\n\t\t<template #icon>\n\t\t\t<IconAdd :size=\"20\" />\n\t\t</template>\n\t\t<ActionButton\n\t\t\tv-for=\"(calendar, idx) in cals\"\n\t\t\t:key=\"idx\"\n\t\t\t@click=\"onImport(calendar)\">\n\t\t\t<template #icon>\n\t\t\t\t<IconLoading v-if=\"calendar.loading\" :size=\"20\" />\n\t\t\t\t<IconAdd v-else :size=\"20\" />\n\t\t\t</template>\n\t\t\t{{ t('mail', 'Import into {calendar}', {calendar: calendar.displayname}) }}\n\t\t</ActionButton>\n\t</Actions>\n</template>\n\n<script>\n\nimport { NcActions as Actions, NcActionButton as ActionButton, NcLoadingIcon as IconLoading } from '@nextcloud/vue'\n\nimport IconAdd from 'vue-material-design-icons/Plus'\nimport ical from 'ical.js'\nimport moment from '@nextcloud/moment'\n\nexport default {\n\tname: 'CalendarImport',\n\tcomponents: {\n\t\tActions,\n\t\tActionButton,\n\t\tIconAdd,\n\t\tIconLoading,\n\t},\n\tprops: {\n\t\tcalendars: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\thandler: {\n\t\t\ttype: Function,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tcals() {\n\t\t\treturn this.calendars.map((original) => {\n\t\t\t\tthis.$set(original, 'loading', false)\n\t\t\t\treturn original\n\t\t\t})\n\t\t},\n\t},\n\tmethods: {\n\t\tonImport(calendar) {\n\t\t\tcalendar.loading = true\n\n\t\t\tthis.handler(calendar)\n\t\t\t\t.catch(console.error.bind(this))\n\t\t\t\t.then(() => {\n\t\t\t\t\tcalendar.loading = false\n\t\t\t\t})\n\t\t},\n\t},\n\n\titineraryDateTime(dt) {\n\t\tif (typeof dt === 'string') {\n\t\t\treturn dt\n\t\t}\n\t\treturn dt['@value']\n\t},\n\n\taddIcalTimeProperty(icalEvent, itineraryDt, icalPropertyName) {\n\t\tconst t = moment(this.itineraryDateTime(itineraryDt)).format()\n\t\tconst prop = icalEvent.updatePropertyWithValue(icalPropertyName, ical.Time.fromDateTimeString(t))\n\t\tif (typeof itineraryDt !== 'string') {\n\t\t\tprop.setParameter('TZID', itineraryDt.timezone)\n\t\t}\n\t},\n}\n</script>\n\n<style scoped></style>\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CalendarImport.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CalendarImport.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CalendarImport.vue?vue&type=template&id=d2c71462&scoped=true&\"\nimport script from \"./CalendarImport.vue?vue&type=script&lang=js&\"\nexport * from \"./CalendarImport.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d2c71462\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.calendars.length)?_c('Actions',{scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('IconAdd',{attrs:{\"size\":20}})]},proxy:true}],null,false,2388353250)},[_vm._v(\" \"),_vm._l((_vm.cals),function(calendar,idx){return _c('ActionButton',{key:idx,on:{\"click\":function($event){return _vm.onImport(calendar)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [(calendar.loading)?_c('IconLoading',{attrs:{\"size\":20}}):_c('IconAdd',{attrs:{\"size\":20}})]},proxy:true}],null,true)},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'Import into {calendar}', {calendar: calendar.displayname}))+\"\\n\\t\")])})],2):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EventReservation.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EventReservation.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2019 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license AGPL-3.0-or-later\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<div class=\"reservation\">\n\t\t<div class=\"event\">\n\t\t\t<div class=\"event-name\">\n\t\t\t\t{{ eventName }}\n\t\t\t</div>\n\t\t\t<div v-if=\"location\" class=\"venue\">\n\t\t\t\t{{ location }}\n\t\t\t</div>\n\t\t\t<div v-if=\"date\">\n\t\t\t\t{{ date }}\n\t\t\t</div>\n\t\t\t<div v-if=\"time\">\n\t\t\t\t{{ time }}\n\t\t\t</div>\n\t\t</div>\n\t\t<CalendarImport v-if=\"canImport\" :calendars=\"calendars\" :handler=\"handleImport\" />\n\t</div>\n</template>\n\n<script>\nimport ical from 'ical.js'\nimport md5 from 'md5'\nimport moment from '@nextcloud/moment'\nimport { showError, showSuccess } from '@nextcloud/dialogs'\n\nimport CalendarImport from './CalendarImport'\nimport { importCalendarEvent } from '../../service/DAVService'\nimport logger from '../../logger'\n\nexport default {\n\tname: 'EventReservation',\n\tcomponents: { CalendarImport },\n\tprops: {\n\t\tdata: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tcalendars: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tmessageId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\teventName() {\n\t\t\treturn this.data.reservationFor.name\n\t\t},\n\t\ttime() {\n\t\t\tif (!('startDate' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.startDate)).format('LT')\n\t\t},\n\t\tdate() {\n\t\t\tif (!('startDate' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.startDate)).format('L')\n\t\t},\n\t\tlocation() {\n\t\t\tif (!('location' in this.data.reservationFor) || !('name' in this.data.reservationFor.location)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn this.data.reservationFor.location.name\n\t\t},\n\t\tcanImport() {\n\t\t\treturn 'startDate' in this.data.reservationFor\n\t\t},\n\t},\n\tmethods: {\n\t\tgetEndDateTime(event) {\n\t\t\tif ('endDate' in this.data.reservationFor) {\n\t\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.endDate)).format()\n\t\t\t} else if ('startDate' in this.data.reservationFor) {\n\t\t\t\t// Assume it's 2h and user will adjust if necessary\n\t\t\t\t// TODO: handle 'duration' https://schema.org/Event\n\t\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.startDate)).add(2, 'hours').format()\n\t\t\t}\n\t\t},\n\t\thandleImport(calendar) {\n\t\t\tconst event = new ical.Component('VEVENT')\n\t\t\tevent.updatePropertyWithValue('SUMMARY', this.eventName)\n\n\t\t\tconst start = moment(CalendarImport.itineraryDateTime(this.data.reservationFor.startDate)).format()\n\t\t\tevent.updatePropertyWithValue('DTSTART', ical.Time.fromDateTimeString(start))\n\t\t\tconst end = this.getEndDateTime(this.data.reservationFor)\n\t\t\tevent.updatePropertyWithValue('DTEND', ical.Time.fromDateTimeString(end))\n\n\t\t\tif ('location' in this.data.reservationFor) {\n\t\t\t\tevent.updatePropertyWithValue('LOCATION', this.data.reservationFor.location.name)\n\t\t\t\tif ('geo' in this.data.reservationFor.location) {\n\t\t\t\t\t// https://www.kanzaki.com/docs/ical/geo.html\n\t\t\t\t\tevent.updatePropertyWithValue(\n\t\t\t\t\t\t'GEO',\n\t\t\t\t\t\t`${this.data.reservationFor.location.geo.latitude};${this.data.reservationFor.location.geo.longitude}`\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// TODO: read version from package.json\n\t\t\tevent.updatePropertyWithValue('PRODID', 'Nextcloud Mail')\n\n\t\t\t// TODO: is this free of collisions? the bug reports will tell us!\n\t\t\tevent.updatePropertyWithValue('UID', md5(this.messageId + this.eventName))\n\n\t\t\tconst cal = new ical.Component('VCALENDAR')\n\t\t\tcal.addSubcomponent(event)\n\t\t\tlogger.debug('generated calendar event from event reservation data', { ical: cal.toString() })\n\t\t\treturn importCalendarEvent(calendar.url)(cal.toString())\n\t\t\t\t.then(() => {\n\t\t\t\t\tlogger.debug('event successfully imported')\n\t\t\t\t\tshowSuccess(t('mail', 'Event imported into {calendar}', { calendar: calendar.displayname }))\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tlogger.error('Could not import event', { error })\n\t\t\t\t\tshowError(t('mail', 'Could not create event'))\n\t\t\t\t})\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\n.reservation {\n\tdisplay: flex;\n\tflex-direction: row;\n\tmargin: 30px 38px;\n\tborder: 1px solid var(--color-border);\n\tborder-radius: var(--border-radius);\n\tpadding: 20px;\n\talign-items: center;\n}\n\n.event {\n\tflex-grow: 1;\n}\n\n.event-name {\n\tfont-size: larger;\n\tfont-weight: bold;\n}\n</style>\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EventReservation.vue?vue&type=style&index=0&id=397d55d8&prod&scoped=true&lang=css&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EventReservation.vue?vue&type=style&index=0&id=397d55d8&prod&scoped=true&lang=css&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./EventReservation.vue?vue&type=template&id=397d55d8&scoped=true&\"\nimport script from \"./EventReservation.vue?vue&type=script&lang=js&\"\nexport * from \"./EventReservation.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EventReservation.vue?vue&type=style&index=0&id=397d55d8&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"397d55d8\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"reservation\"},[_c('div',{staticClass:\"event\"},[_c('div',{staticClass:\"event-name\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.eventName)+\"\\n\\t\\t\")]),_vm._v(\" \"),(_vm.location)?_c('div',{staticClass:\"venue\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.location)+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.date)?_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.date)+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.time)?_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.time)+\"\\n\\t\\t\")]):_vm._e()]),_vm._v(\" \"),(_vm.canImport)?_c('CalendarImport',{attrs:{\"calendars\":_vm.calendars,\"handler\":_vm.handleImport}}):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FlightReservation.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FlightReservation.vue?vue&type=script&lang=js&\"","<template>\n\t<div class=\"reservation\">\n\t\t<div class=\"departure\">\n\t\t\t<div class=\"iata\">\n\t\t\t\t{{ data.reservationFor.departureAirport.iataCode }}\n\t\t\t</div>\n\t\t\t<div class=\"airport\">\n\t\t\t\t{{ data.reservationFor.departureAirport.name }}\n\t\t\t</div>\n\t\t\t<div v-if=\"departureDate\">\n\t\t\t\t{{ departureDate }}\n\t\t\t</div>\n\t\t\t<div v-if=\"departureTime\">\n\t\t\t\t{{ departureTime }}\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"connection\">\n\t\t\t<div><AirplaneIcon :title=\"t('mail', 'Airplane')\" /></div>\n\t\t\t<div>{{ flightNumber }}</div>\n\t\t\t<div v-if=\"reservation\">\n\t\t\t\t{{ t('mail', 'Reservation {id}', {id: reservation}) }}\n\t\t\t</div>\n\t\t\t<div v-else>\n\t\t\t\t<ArrowIcon decorative />\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"arrival\">\n\t\t\t<div class=\"iata\">\n\t\t\t\t{{ data.reservationFor.arrivalAirport.iataCode }}\n\t\t\t</div>\n\t\t\t<div class=\"airport\">\n\t\t\t\t{{ data.reservationFor.arrivalAirport.name }}\n\t\t\t</div>\n\t\t\t<div v-if=\"arrivalDate\">\n\t\t\t\t{{ arrivalDate }}\n\t\t\t</div>\n\t\t\t<div v-if=\"arrivalTime\">\n\t\t\t\t{{ arrivalTime }}\n\t\t\t</div>\n\t\t</div>\n\t\t<CalendarImport :calendars=\"calendars\" :handler=\"handleImport\" />\n\t</div>\n</template>\n\n<script>\nimport AirplaneIcon from 'vue-material-design-icons/Airplane'\nimport ArrowIcon from 'vue-material-design-icons/ArrowRight'\nimport ical from 'ical.js'\nimport md5 from 'md5'\nimport moment from '@nextcloud/moment'\nimport { showError, showSuccess } from '@nextcloud/dialogs'\n\nimport CalendarImport from './CalendarImport'\nimport { importCalendarEvent } from '../../service/DAVService'\nimport logger from '../../logger'\n\nexport default {\n\tname: 'FlightReservation',\n\tcomponents: {\n\t\tAirplaneIcon,\n\t\tArrowIcon,\n\t\tCalendarImport,\n\t},\n\tprops: {\n\t\tdata: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tcalendars: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tmessageId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tdepartureTime() {\n\t\t\tif (!('departureTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.departureTime)).format('LT')\n\t\t},\n\t\tdepartureDate() {\n\t\t\tif (!('departureTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.departureTime)).format('L')\n\t\t},\n\t\tarrivalTime() {\n\t\t\tif (!('arrivalTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.arrivalTime)).format('LT')\n\t\t},\n\t\tarrivalDate() {\n\t\t\tif (!('arrivalTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.arrivalTime)).format('L')\n\t\t},\n\t\tflightNumber() {\n\t\t\treturn this.data.reservationFor.airline.iataCode + this.data.reservationFor.flightNumber\n\t\t},\n\t\treservation() {\n\t\t\tif (!('reservationNumber' in this.data)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn this.data.reservationNumber\n\t\t},\n\t\tcanImport() {\n\t\t\treturn 'departureTime' in this.data.reservationFor && 'arrivalTime' in this.data.reservationFor\n\t\t},\n\t},\n\tmethods: {\n\t\thandleImport(calendar) {\n\t\t\tconst event = new ical.Component('VEVENT')\n\t\t\tevent.updatePropertyWithValue(\n\t\t\t\t'SUMMARY',\n\t\t\t\tt('mail', 'Flight {flightNr} from {depAirport} to {arrAirport}', {\n\t\t\t\t\tflightNr: this.flightNumber,\n\t\t\t\t\tdepAirport: this.data.reservationFor.departureAirport.iataCode,\n\t\t\t\t\tarrAirport: this.data.reservationFor.arrivalAirport.iataCode,\n\t\t\t\t})\n\t\t\t)\n\n\t\t\tCalendarImport.addIcalTimeProperty(event, this.data.reservationFor.departureTime, 'DTSTART')\n\t\t\tCalendarImport.addIcalTimeProperty(event, this.data.reservationFor.arrivalTime, 'DTEND')\n\n\t\t\t// TODO: read version from package.json\n\t\t\tevent.updatePropertyWithValue('PRODID', 'Nextcloud Mail')\n\n\t\t\t// TODO: is this free of collisions? the bug reports will tell us!\n\t\t\tevent.updatePropertyWithValue('UID', md5(this.messageId + this.flightNumber))\n\n\t\t\tconst cal = new ical.Component('VCALENDAR')\n\t\t\tcal.addSubcomponent(event)\n\t\t\tlogger.debug('generated calendar event from flight reservation data', { ical: cal.toString() })\n\n\t\t\treturn importCalendarEvent(calendar.url)(cal.toString())\n\t\t\t\t.then(() => {\n\t\t\t\t\tlogger.debug('event successfully imported')\n\t\t\t\t\tshowSuccess(t('mail', 'Event imported into {calendar}', { calendar: calendar.displayname }))\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tlogger.error('Could not import event', { error })\n\t\t\t\t\tshowError(t('mail', 'Could not create event'))\n\t\t\t\t})\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\n.reservation {\n\tdisplay: flex;\n\tflex-direction: row;\n\tmargin: 30px 38px;\n\tborder: 1px solid var(--color-border);\n\tborder-radius: var(--border-radius);\n\tpadding: 20px;\n\talign-items: center;\n}\n\n.departure,\n.arrival {\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex-grow: 1;\n}\n\n.departure,\n.arrival,\n.connection {\n\tjustify-content: center;\n}\n\n.iata {\n\tfont-size: larger;\n\tfont-weight: bold;\n}\n\n.airport {\n\tfont-size: large;\n}\n\n.departure {\n\ttext-align: right;\n}\n\n.connection {\n\ttext-align: center;\n\tpadding: 0 40px;\n}\n</style>\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FlightReservation.vue?vue&type=style&index=0&id=2a317718&prod&scoped=true&lang=css&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FlightReservation.vue?vue&type=style&index=0&id=2a317718&prod&scoped=true&lang=css&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./FlightReservation.vue?vue&type=template&id=2a317718&scoped=true&\"\nimport script from \"./FlightReservation.vue?vue&type=script&lang=js&\"\nexport * from \"./FlightReservation.vue?vue&type=script&lang=js&\"\nimport style0 from \"./FlightReservation.vue?vue&type=style&index=0&id=2a317718&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2a317718\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"reservation\"},[_c('div',{staticClass:\"departure\"},[_c('div',{staticClass:\"iata\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.data.reservationFor.departureAirport.iataCode)+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"airport\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.data.reservationFor.departureAirport.name)+\"\\n\\t\\t\")]),_vm._v(\" \"),(_vm.departureDate)?_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.departureDate)+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.departureTime)?_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.departureTime)+\"\\n\\t\\t\")]):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"connection\"},[_c('div',[_c('AirplaneIcon',{attrs:{\"title\":_vm.t('mail', 'Airplane')}})],1),_vm._v(\" \"),_c('div',[_vm._v(_vm._s(_vm.flightNumber))]),_vm._v(\" \"),(_vm.reservation)?_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Reservation {id}', {id: _vm.reservation}))+\"\\n\\t\\t\")]):_c('div',[_c('ArrowIcon',{attrs:{\"decorative\":\"\"}})],1)]),_vm._v(\" \"),_c('div',{staticClass:\"arrival\"},[_c('div',{staticClass:\"iata\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.data.reservationFor.arrivalAirport.iataCode)+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"airport\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.data.reservationFor.arrivalAirport.name)+\"\\n\\t\\t\")]),_vm._v(\" \"),(_vm.arrivalDate)?_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.arrivalDate)+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.arrivalTime)?_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.arrivalTime)+\"\\n\\t\\t\")]):_vm._e()]),_vm._v(\" \"),_c('CalendarImport',{attrs:{\"calendars\":_vm.calendars,\"handler\":_vm.handleImport}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrainReservation.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrainReservation.vue?vue&type=script&lang=js&\"","<template>\n\t<div class=\"reservation\">\n\t\t<div class=\"departure\">\n\t\t\t<div class=\"station\">\n\t\t\t\t{{ data.reservationFor.departureStation.name }}\n\t\t\t</div>\n\t\t\t<div v-if=\"departureDate\">\n\t\t\t\t{{ departureDate }}\n\t\t\t</div>\n\t\t\t<div v-if=\"departureTime\">\n\t\t\t\t{{ departureTime }}\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"connection\">\n\t\t\t<div><TrainIcon :title=\"t('mail', 'Train')\" /></div>\n\t\t\t<div>{{ trainNumber }}</div>\n\t\t\t<div><ArrowIcon decorative /></div>\n\t\t</div>\n\t\t<div class=\"arrival\">\n\t\t\t<div class=\"station\">\n\t\t\t\t{{ data.reservationFor.arrivalStation.name }}\n\t\t\t</div>\n\t\t\t<div v-if=\"arrivalDate\">\n\t\t\t\t{{ arrivalDate }}\n\t\t\t</div>\n\t\t\t<div v-if=\"arrivalTime\">\n\t\t\t\t{{ arrivalTime }}\n\t\t\t</div>\n\t\t</div>\n\t\t<CalendarImport v-if=\"canImport\" :calendars=\"calendars\" :handler=\"handleImport\" />\n\t</div>\n</template>\n\n<script>\nimport ArrowIcon from 'vue-material-design-icons/ArrowRight'\nimport ical from 'ical.js'\nimport md5 from 'md5'\nimport moment from '@nextcloud/moment'\nimport { showError, showSuccess } from '@nextcloud/dialogs'\nimport TrainIcon from 'vue-material-design-icons/Train'\n\nimport CalendarImport from './CalendarImport'\nimport { importCalendarEvent } from '../../service/DAVService'\nimport logger from '../../logger'\n\nexport default {\n\tname: 'TrainReservation',\n\tcomponents: {\n\t\tArrowIcon,\n\t\tCalendarImport,\n\t\tTrainIcon,\n\t},\n\tprops: {\n\t\tdata: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tcalendars: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tmessageId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tdepartureTime() {\n\t\t\tif (!('departureTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.departureTime)).format('LT')\n\t\t},\n\t\tdepartureDate() {\n\t\t\tif ('departureTime' in this.data.reservationFor) {\n\t\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.departureTime)).format('L')\n\t\t\t}\n\t\t\tif ('departureDay' in this.data.reservationFor) {\n\t\t\t\treturn moment(this.data.reservationFor.departureDay).format('L')\n\t\t\t}\n\t\t\treturn undefined\n\t\t},\n\t\tarrivalTime() {\n\t\t\tif (!('arrivalTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.arrivalTime)).format('LT')\n\t\t},\n\t\tarrivalDate() {\n\t\t\tif (!('arrivalTime' in this.data.reservationFor)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn moment(CalendarImport.itineraryDateTime(this.data.reservationFor.arrivalTime)).format('L')\n\t\t},\n\t\ttrainNumber() {\n\t\t\treturn this.data.reservationFor.trainNumber\n\t\t},\n\t\tcanImport() {\n\t\t\treturn (\n\t\t\t\t('departureTime' in this.data.reservationFor && 'arrivalTime' in this.data.reservationFor)\n\t\t\t\t|| 'departureDay' in this.data.reservationFor\n\t\t\t)\n\t\t},\n\t},\n\tmethods: {\n\t\thandleImport(calendar) {\n\t\t\tconst event = new ical.Component('VEVENT')\n\t\t\tif ('trainNumber' in this.data.reservationFor) {\n\t\t\t\tevent.updatePropertyWithValue(\n\t\t\t\t\t'SUMMARY',\n\t\t\t\t\tt('mail', '{trainNr} from {depStation} to {arrStation}', {\n\t\t\t\t\t\ttrainNr: this.data.reservationFor.trainNumber,\n\t\t\t\t\t\tdepStation: this.data.reservationFor.departureStation.name,\n\t\t\t\t\t\tarrStation: this.data.reservationFor.arrivalStation.name,\n\t\t\t\t\t})\n\t\t\t\t)\n\t\t\t} else {\n\t\t\t\tevent.updatePropertyWithValue(\n\t\t\t\t\t'SUMMARY',\n\t\t\t\t\tt('mail', 'Train from {depStation} to {arrStation}', {\n\t\t\t\t\t\tdepStation: this.data.reservationFor.departureStation.name,\n\t\t\t\t\t\tarrStation: this.data.reservationFor.arrivalStation.name,\n\t\t\t\t\t})\n\t\t\t\t)\n\t\t\t}\n\n\t\t\tif ('departureTime' in this.data.reservationFor && 'arrivalTime' in this.data.reservationFor) {\n\t\t\t\tCalendarImport.addIcalTimeProperty(event, this.data.reservationFor.departureTime, 'DTSTART')\n\t\t\t\tCalendarImport.addIcalTimeProperty(event, this.data.reservationFor.arrivalTime, 'DTEND')\n\t\t\t} else if ('departureDay' in this.data.reservationFor) {\n\t\t\t\tconst date = moment(this.data.reservationFor.departureDay).format()\n\t\t\t\tevent.updatePropertyWithValue('DTSTART', ical.Time.fromDateTimeString(date))\n\t\t\t}\n\n\t\t\t// TODO: read version from package.json\n\t\t\tevent.updatePropertyWithValue('PRODID', 'Nextcloud Mail')\n\n\t\t\t// TODO: is this free of collisions? the bug reports will tell us!\n\t\t\tevent.updatePropertyWithValue('UID', md5(this.messageId + this.departureTime))\n\n\t\t\tconst cal = new ical.Component('VCALENDAR')\n\t\t\tcal.addSubcomponent(event)\n\t\t\tlogger.debug('generated calendar event from train reservation data', { ical: cal.toString() })\n\n\t\t\treturn importCalendarEvent(calendar.url)(cal.toString())\n\t\t\t\t.then(() => {\n\t\t\t\t\tlogger.debug('event successfully imported')\n\t\t\t\t\tshowSuccess(t('mail', 'Event imported into {calendar}', { calendar: calendar.displayname }))\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tlogger.error('Could not import event', { error })\n\t\t\t\t\tshowError(t('mail', 'Could not create event'))\n\t\t\t\t})\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\n.reservation {\n\tdisplay: flex;\n\tflex-direction: row;\n\tmargin: 30px 38px;\n\tborder: 1px solid var(--color-border);\n\tborder-radius: var(--border-radius);\n\tpadding: 20px;\n\talign-items: center;\n}\n\n.departure,\n.arrival {\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex-grow: 1;\n}\n\n.departure,\n.arrival,\n.connection {\n\tjustify-content: center;\n}\n\n.station {\n\tfont-size: larger;\n\tfont-weight: bold;\n}\n\n.departure {\n\ttext-align: right;\n}\n\n.connection {\n\ttext-align: center;\n\tpadding: 0 40px;\n}\n</style>\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrainReservation.vue?vue&type=style&index=0&id=08dee74f&prod&scoped=true&lang=css&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TrainReservation.vue?vue&type=style&index=0&id=08dee74f&prod&scoped=true&lang=css&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./TrainReservation.vue?vue&type=template&id=08dee74f&scoped=true&\"\nimport script from \"./TrainReservation.vue?vue&type=script&lang=js&\"\nexport * from \"./TrainReservation.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TrainReservation.vue?vue&type=style&index=0&id=08dee74f&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"08dee74f\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"reservation\"},[_c('div',{staticClass:\"departure\"},[_c('div',{staticClass:\"station\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.data.reservationFor.departureStation.name)+\"\\n\\t\\t\")]),_vm._v(\" \"),(_vm.departureDate)?_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.departureDate)+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.departureTime)?_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.departureTime)+\"\\n\\t\\t\")]):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"connection\"},[_c('div',[_c('TrainIcon',{attrs:{\"title\":_vm.t('mail', 'Train')}})],1),_vm._v(\" \"),_c('div',[_vm._v(_vm._s(_vm.trainNumber))]),_vm._v(\" \"),_c('div',[_c('ArrowIcon',{attrs:{\"decorative\":\"\"}})],1)]),_vm._v(\" \"),_c('div',{staticClass:\"arrival\"},[_c('div',{staticClass:\"station\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.data.reservationFor.arrivalStation.name)+\"\\n\\t\\t\")]),_vm._v(\" \"),(_vm.arrivalDate)?_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.arrivalDate)+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.arrivalTime)?_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.arrivalTime)+\"\\n\\t\\t\")]):_vm._e()]),_vm._v(\" \"),(_vm.canImport)?_c('CalendarImport',{attrs:{\"calendars\":_vm.calendars,\"handler\":_vm.handleImport}}):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div>\n\t\t<template v-for=\"(entry, idx) in entries\">\n\t\t\t<EventReservation\n\t\t\t\tv-if=\"entry['@type'] === 'EventReservation'\"\n\t\t\t\t:key=\"idx\"\n\t\t\t\t:data=\"entry\"\n\t\t\t\t:calendars=\"calendars\"\n\t\t\t\t:message-id=\"messageId\" />\n\t\t\t<FlightReservation\n\t\t\t\tv-else-if=\"entry['@type'] === 'FlightReservation'\"\n\t\t\t\t:key=\"idx\"\n\t\t\t\t:data=\"entry\"\n\t\t\t\t:calendars=\"calendars\"\n\t\t\t\t:message-id=\"messageId\" />\n\t\t\t<TrainReservation\n\t\t\t\tv-else-if=\"entry['@type'] === 'TrainReservation'\"\n\t\t\t\t:key=\"idx\"\n\t\t\t\t:data=\"entry\"\n\t\t\t\t:calendars=\"calendars\"\n\t\t\t\t:message-id=\"messageId\" />\n\t\t\t<span v-else :key=\"idx\">{{\n\t\t\t\tt('mail', 'Itinerary for {type} is not supported yet', {type: entry['@type']})\n\t\t\t}}</span>\n\t\t</template>\n\t</div>\n</template>\n\n<script>\nimport once from 'lodash/fp/once'\n\nimport { getUserCalendars } from '../service/DAVService'\nimport logger from '../logger'\nimport EventReservation from './itinerary/EventReservation'\nimport FlightReservation from './itinerary/FlightReservation'\nimport TrainReservation from './itinerary/TrainReservation'\n\nconst getUserCalendarsOnce = once(getUserCalendars)\n\nexport default {\n\tname: 'Itinerary',\n\tcomponents: {\n\t\tEventReservation,\n\t\tFlightReservation,\n\t\tTrainReservation,\n\t},\n\tprops: {\n\t\tentries: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tmessageId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tcalendars: [],\n\t\t}\n\t},\n\tmounted() {\n\t\tgetUserCalendarsOnce()\n\t\t\t.then((calendars) => (this.calendars = calendars))\n\t\t\t.catch((error) => logger.error('Could not load calendars', { error }))\n\t},\n}\n</script>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Itinerary.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Itinerary.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Itinerary.vue?vue&type=template&id=5044772a&\"\nimport script from \"./Itinerary.vue?vue&type=script&lang=js&\"\nexport * from \"./Itinerary.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_vm._l((_vm.entries),function(entry,idx){return [(entry['@type'] === 'EventReservation')?_c('EventReservation',{key:idx,attrs:{\"data\":entry,\"calendars\":_vm.calendars,\"message-id\":_vm.messageId}}):(entry['@type'] === 'FlightReservation')?_c('FlightReservation',{key:idx,attrs:{\"data\":entry,\"calendars\":_vm.calendars,\"message-id\":_vm.messageId}}):(entry['@type'] === 'TrainReservation')?_c('TrainReservation',{key:idx,attrs:{\"data\":entry,\"calendars\":_vm.calendars,\"message-id\":_vm.messageId}}):_c('span',{key:idx},[_vm._v(_vm._s(_vm.t('mail', 'Itinerary for {type} is not supported yet', {type: entry['@type']})))])]})],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*\n * @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport Axios from '@nextcloud/axios'\nimport { generateUrl } from '@nextcloud/router'\n\nexport function saveAttachmentToFiles(id, attachmentId, directory) {\n\tconst url = generateUrl(\n\t\t'/apps/mail/api/messages/{id}/attachment/{attachmentId}',\n\t\t{\n\t\t\tid,\n\t\t\tattachmentId,\n\t\t}\n\t)\n\n\treturn Axios.post(url, {\n\t\ttargetPath: directory,\n\t})\n}\n\nexport function saveAttachmentsToFiles(id, directory) {\n\t// attachmentId = 0 means 'all attachments' (see MessageController.php::saveAttachement)\n\treturn saveAttachmentToFiles(id, 0, directory)\n}\n\nexport function downloadAttachment(url) {\n\treturn Axios.get(url).then((res) => res.data)\n}\n\nexport const uploadLocalAttachment = (file, progress, controller) => {\n\tconst url = generateUrl('/apps/mail/api/attachments')\n\tconst data = new FormData()\n\tconst opts = {\n\t\tonUploadProgress: (prog) => progress(prog, prog.loaded, prog.total),\n\t}\n\tif (controller) {\n\t\topts.signal = controller.signal\n\t}\n\tdata.append('attachment', file)\n\n\treturn Axios.post(url, data, opts)\n\t\t.then((resp) => resp.data)\n\t\t.then(({ id }) => {\n\t\t\treturn {\n\t\t\t\tfile,\n\t\t\t\tid,\n\t\t\t}\n\t\t})\n}\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageAttachment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageAttachment.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license AGPL-3.0-or-later\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<div class=\"attachment\" :class=\"{'message-attachment--can-preview': canPreview }\">\n\t\t<div class=\"mail-attachment-img--wrapper\" @click=\"$emit('open', $event)\">\n\t\t\t<img v-if=\"isImage\"\n\t\t\t\tclass=\"mail-attached-image\"\n\t\t\t\t:src=\"url\">\n\t\t\t<img v-else class=\"attachment-icon\" :src=\"mimeUrl\">\n\t\t</div>\n\t\t<div class=\"mail-attached--content\" @click=\"$emit('open', $event)\">\n\t\t\t<span class=\"attachment-name\"\n\t\t\t\t:title=\"label\">{{ name }}\n\t\t\t</span>\n\t\t\t<span class=\"attachment-size\">{{ humanReadable(size) }}</span>\n\t\t</div>\n\t\t<Actions :boundaries-element=\"boundariesElement\">\n\t\t\t<ActionButton\n\t\t\t\tv-if=\"isCalendarEvent\"\n\t\t\t\tclass=\"attachment-import calendar\"\n\t\t\t\t:disabled=\"loadingCalendars\"\n\t\t\t\t@click.stop=\"loadCalendars\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<IconAdd v-if=\"!loadingCalendars\" :size=\"20\" />\n\t\t\t\t\t<IconLoading v-else-if=\"loadingCalendars\" :size=\"20\" />\n\t\t\t\t</template>\n\t\t\t\t{{ t('mail', 'Import into calendar') }}\n\t\t\t</ActionButton>\n\t\t\t<ActionButton\n\t\t\t\tclass=\"attachment-download\"\n\t\t\t\t@click=\"download\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<IconDownload :size=\"20\" />\n\t\t\t\t</template>\n\t\t\t\t{{ t('mail', 'Download attachment') }}\n\t\t\t</ActionButton>\n\t\t\t<ActionButton\n\t\t\t\tclass=\"attachment-save-to-cloud\"\n\t\t\t\t:disabled=\"savingToCloud\"\n\t\t\t\t@click.stop=\"saveToCloud\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<IconSave v-if=\"!savingToCloud\" :size=\"20\" />\n\t\t\t\t\t<IconLoading v-else-if=\"savingToCloud\" :size=\"20\" />\n\t\t\t\t</template>\n\t\t\t\t{{ t('mail', 'Save to Files') }}\n\t\t\t</ActionButton>\n\t\t\t<div\n\t\t\t\tv-on-click-outside=\"closeCalendarPopover\"\n\t\t\t\tclass=\"popovermenu bubble attachment-import-popover hidden\"\n\t\t\t\t:class=\"{open: showCalendarPopover}\">\n\t\t\t\t<PopoverMenu :menu=\"calendarMenuEntries\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<IconAdd :size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t</PopoverMenu>\n\t\t\t</div>\n\t\t</Actions>\n\t</div>\n</template>\n\n<script>\n\nimport { formatFileSize } from '@nextcloud/files'\nimport { translate as t } from '@nextcloud/l10n'\nimport { getFilePickerBuilder } from '@nextcloud/dialogs'\nimport { mixin as onClickOutside } from 'vue-on-click-outside'\n\nimport { NcPopoverMenu as PopoverMenu, NcActions as Actions, NcActionButton as ActionButton, NcLoadingIcon as IconLoading } from '@nextcloud/vue'\n\nimport IconAdd from 'vue-material-design-icons/Plus'\nimport IconSave from 'vue-material-design-icons/Folder'\nimport IconDownload from 'vue-material-design-icons/Download'\nimport Logger from '../logger'\n\nimport { downloadAttachment, saveAttachmentToFiles } from '../service/AttachmentService'\nimport { getUserCalendars, importCalendarEvent } from '../service/DAVService'\n\nexport default {\n\tname: 'MessageAttachment',\n\tcomponents: {\n\t\tPopoverMenu,\n\t\tActions,\n\t\tActionButton,\n\t\tIconAdd,\n\t\tIconLoading,\n\t\tIconSave,\n\t\tIconDownload,\n\t},\n\tmixins: [onClickOutside],\n\tprops: {\n\t\tid: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tfileName: {\n\t\t\ttype: String,\n\t\t\tdefault: t('mail', 'Unnamed'),\n\t\t\trequired: false,\n\t\t},\n\t\turl: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tsize: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tmime: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tmimeUrl: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tisImage: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tisCalendarEvent: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tcanPreview: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tsavingToCloud: false,\n\t\t\tloadingCalendars: false,\n\t\t\tcalendars: [],\n\t\t\tshowCalendarPopover: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\tname() {\n\t\t\tif (this.mime === 'message/rfc822') {\n\t\t\t\treturn t('mail', 'Embedded message')\n\t\t\t}\n\t\t\treturn this.fileName\n\t\t},\n\t\tlabel() {\n\t\t\tif (this.mime === 'message/rfc822') {\n\t\t\t\treturn t('mail', 'Embedded message') + ' (' + formatFileSize(this.size) + ')'\n\t\t\t}\n\t\t\treturn this.fileName + ' (' + formatFileSize(this.size) + ')'\n\t\t},\n\t\tcalendarMenuEntries() {\n\t\t\treturn this.calendars.map((cal) => {\n\t\t\t\treturn {\n\t\t\t\t\ttext: cal.displayname,\n\t\t\t\t\taction: this.importCalendar(cal.url),\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tboundariesElement() {\n\t\t\treturn document.querySelector('#content-vue')\n\t\t},\n\t},\n\tmethods: {\n\t\thumanReadable(size) {\n\t\t\treturn formatFileSize(size)\n\t\t},\n\t\tsaveToCloud() {\n\t\t\tconst saveAttachment = (id, attachmentId) => (directory) => {\n\t\t\t\treturn saveAttachmentToFiles(id, attachmentId, directory)\n\t\t\t}\n\t\t\tconst id = this.$route.params.threadId\n\t\t\tconst picker = getFilePickerBuilder(t('mail', 'Choose a folder to store the attachment in'))\n\t\t\t\t.setMultiSelect(false)\n\t\t\t\t.addMimeTypeFilter('httpd/unix-directory')\n\t\t\t\t.setModal(true)\n\t\t\t\t.setType(1)\n\t\t\t\t.allowDirectories(true)\n\t\t\t\t.build()\n\n\t\t\treturn picker\n\t\t\t\t.pick()\n\t\t\t\t.then((dest) => {\n\t\t\t\t\tthis.savingToCloud = true\n\t\t\t\t\treturn dest\n\t\t\t\t})\n\t\t\t\t.then(saveAttachment(id, this.id))\n\t\t\t\t.then(() => Logger.info('saved'))\n\t\t\t\t.catch((e) => Logger.error('not saved', { error: e }))\n\t\t\t\t.then(() => (this.savingToCloud = false))\n\t\t},\n\t\tdownload() {\n\t\t\twindow.location = this.url\n\t\t},\n\t\tloadCalendars() {\n\t\t\tthis.loadingCalendars = true\n\t\t\tgetUserCalendars().then((calendars) => {\n\t\t\t\tthis.calendars = calendars\n\t\t\t\tthis.showCalendarPopover = true\n\t\t\t\tthis.loadingCalendars = false\n\t\t\t})\n\t\t},\n\t\tcloseCalendarPopover() {\n\t\t\tthis.showCalendarPopover = false\n\t\t},\n\t\timportCalendar(url) {\n\t\t\treturn () => {\n\t\t\t\tdownloadAttachment(this.url)\n\t\t\t\t\t.then(importCalendarEvent(url))\n\t\t\t\t\t.then(() => Logger.info('calendar imported'))\n\t\t\t\t\t.catch((e) => Logger.error('import error', { error: e }))\n\t\t\t\t\t.then(() => (this.showCalendarPopover = false))\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n\n.attachment {\n\theight: auto;\n    display: inline-flex;\n    flex-wrap: wrap;\n    justify-content: space-between;\n    width: calc(33.3334% - 4px);\n    margin: 2px;\n\tpadding: 5px;\n    position: relative;\n    align-items: center;\n\n\t&:hover {\n\t\tborder-radius: 6px;\n\t}\n}\n\n.attachment:hover,\n.attachment span:hover {\n\tbackground-color: var(--color-background-hover);\n\n\t&.message-attachment--can-preview * {\n\t\tcursor: pointer;\n\t}\n}\n\n.mail-attachment-img--wrapper {\n\theight: 44px;\n\twidth: 44px;\n\toverflow: hidden;\n\tdisplay:flex;\n\tjustify-content: center;\n\tposition: relative;\n\tborder-radius: 6px;\n\n\timg {\n\t\ttransition: 0.3s;\n\t\topacity: 1;\n\t\twidth: 44px;\n\t\theight: 44px;\n\t}\n\n\t.mail-attached-image {\n\t\twidth: 100px;\n\t}\n}\n\n.mail-attached--content {\n\twidth: calc(100% - 100px);\n\tdisplay: flex;\n    flex-direction: column;\n}\n\n.mail-attached-image {\n\tdisplay: block;\n\tmax-width: 100%;\n\tborder-radius: var(--border-radius);\n}\n.attachment-import-popover {\n\tright: 32px;\n\ttop: 42px;\n}\n.mail-attached-image:hover {\n\topacity: 0.8;\n}\n.attachment-name {\n\tdisplay: inline-block;\n\twidth: 100%;\n\twhite-space: nowrap;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\tvertical-align: middle;\n}\n\n/* show attachment size less prominent */\n.attachment-size {\n\t-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=50)';\n\topacity: 0.5;\n\tfont-size: 12px;\n\tline-height: 14px;\n}\n\n.attachment-icon {\n\tvertical-align: middle;\n\ttext-align: left;\n\tmargin-bottom: 20px;\n}\n.action-item {\n\ttransition: 0.4s;\n}\n.mail-message-attachments {\n\toverflow-x: auto;\n\toverflow-y: auto;\n}\n</style>\n","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageAttachment.vue?vue&type=style&index=0&id=78709c6d&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageAttachment.vue?vue&type=style&index=0&id=78709c6d&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./MessageAttachment.vue?vue&type=template&id=78709c6d&scoped=true&\"\nimport script from \"./MessageAttachment.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageAttachment.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessageAttachment.vue?vue&type=style&index=0&id=78709c6d&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"78709c6d\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"attachment\",class:{'message-attachment--can-preview': _vm.canPreview }},[_c('div',{staticClass:\"mail-attachment-img--wrapper\",on:{\"click\":function($event){return _vm.$emit('open', $event)}}},[(_vm.isImage)?_c('img',{staticClass:\"mail-attached-image\",attrs:{\"src\":_vm.url}}):_c('img',{staticClass:\"attachment-icon\",attrs:{\"src\":_vm.mimeUrl}})]),_vm._v(\" \"),_c('div',{staticClass:\"mail-attached--content\",on:{\"click\":function($event){return _vm.$emit('open', $event)}}},[_c('span',{staticClass:\"attachment-name\",attrs:{\"title\":_vm.label}},[_vm._v(_vm._s(_vm.name)+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('span',{staticClass:\"attachment-size\"},[_vm._v(_vm._s(_vm.humanReadable(_vm.size)))])]),_vm._v(\" \"),_c('Actions',{attrs:{\"boundaries-element\":_vm.boundariesElement}},[(_vm.isCalendarEvent)?_c('ActionButton',{staticClass:\"attachment-import calendar\",attrs:{\"disabled\":_vm.loadingCalendars},on:{\"click\":function($event){$event.stopPropagation();return _vm.loadCalendars.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [(!_vm.loadingCalendars)?_c('IconAdd',{attrs:{\"size\":20}}):(_vm.loadingCalendars)?_c('IconLoading',{attrs:{\"size\":20}}):_vm._e()]},proxy:true}],null,false,3426611203)},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Import into calendar'))+\"\\n\\t\\t\")]):_vm._e(),_vm._v(\" \"),_c('ActionButton',{staticClass:\"attachment-download\",on:{\"click\":_vm.download},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('IconDownload',{attrs:{\"size\":20}})]},proxy:true}])},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Download attachment'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{staticClass:\"attachment-save-to-cloud\",attrs:{\"disabled\":_vm.savingToCloud},on:{\"click\":function($event){$event.stopPropagation();return _vm.saveToCloud.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [(!_vm.savingToCloud)?_c('IconSave',{attrs:{\"size\":20}}):(_vm.savingToCloud)?_c('IconLoading',{attrs:{\"size\":20}}):_vm._e()]},proxy:true}])},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Save to Files'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('div',{directives:[{name:\"on-click-outside\",rawName:\"v-on-click-outside\",value:(_vm.closeCalendarPopover),expression:\"closeCalendarPopover\"}],staticClass:\"popovermenu bubble attachment-import-popover hidden\",class:{open: _vm.showCalendarPopover}},[_c('PopoverMenu',{attrs:{\"menu\":_vm.calendarMenuEntries},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('IconAdd',{attrs:{\"size\":20}})]},proxy:true}])})],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageAttachments.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageAttachments.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license AGPL-3.0-or-later\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<div v-if=\"attachments.length > 0\" class=\"mail-message-attachments\" :class=\"hasNextLine ? 'has-next-line' : ''\">\n\t\t<div class=\"mail-message-attachments--wrapper\" :class=\"(hasNextLine === true && isToggled === true) ? 'hide' : ''\">\n\t\t\t<div class=\"attachments\">\n\t\t\t\t<MessageAttachment\n\t\t\t\t\tv-for=\"(attachment, idx) in attachments\"\n\t\t\t\t\t:id=\"attachment.id\"\n\t\t\t\t\tref=\"attachments\"\n\t\t\t\t\t:key=\"attachment.id\"\n\t\t\t\t\t:file-name=\"attachment.fileName\"\n\t\t\t\t\t:size=\"attachment.size\"\n\t\t\t\t\t:url=\"attachment.downloadUrl\"\n\t\t\t\t\t:is-image=\"attachment.isImage\"\n\t\t\t\t\t:is-calendar-event=\"attachment.isCalendarEvent\"\n\t\t\t\t\t:mime=\"attachment.mime\"\n\t\t\t\t\t:mime-url=\"attachment.mimeUrl\"\n\t\t\t\t\t:can-preview=\"canPreview(fileInfos[idx])\"\n\t\t\t\t\t@open=\"showViewer(fileInfos[idx])\" />\n\t\t\t</div>\n\t\t</div>\n\t\t<div v-if=\"hasNextLine\"\n\t\t\tclass=\"show-more-attachments\"\n\t\t\t@click=\"isToggled = !isToggled\">\n\t\t\t<ChevronDown v-if=\"isToggled\" :size=\"24\" />\n\t\t\t<ChevronUp v-if=\"!isToggled\" :size=\"24\" />\n\t\t\t<span v-if=\"isToggled\">\n\t\t\t\t{{ n('mail', 'View {count} more attachment', 'View {count} more attachments', (attachments.length - visible), { count: attachments.length - visible }) }}\n\t\t\t</span>\n\t\t\t<span v-else>\n\t\t\t\t{{ t('mail', 'View fewer attachments') }}\n\t\t\t</span>\n\t\t</div>\n\t\t<p v-if=\"moreThanOne\" class=\"attachments-button-wrapper\">\n\t\t\t<span class=\"attachment-link\"\n\t\t\t\t:disabled=\"savingToCloud\"\n\t\t\t\t@click=\"saveAll\">\n\t\t\t\t<CloudDownload v-if=\"!savingToCloud\" :size=\"18\" />\n\t\t\t\t<IconLoading v-else class=\"spin\" :size=\"18\" />\n\t\t\t\t{{ t('mail', 'Save all to Files') }}\n\t\t\t</span>\n\t\t\t<span class=\"attachment-link\"\n\t\t\t\t@click=\"downloadZip\">\n\t\t\t\t<Download :size=\"18\" />\n\t\t\t\t{{ t('mail', 'Download Zip') }}\n\t\t\t</span>\n\t\t</p>\n\t</div>\n</template>\n\n<script>\nimport { basename } from '@nextcloud/paths'\nimport { NcLoadingIcon as IconLoading } from '@nextcloud/vue'\nimport { generateUrl } from '@nextcloud/router'\nimport { getFilePickerBuilder } from '@nextcloud/dialogs'\nimport { saveAttachmentsToFiles } from '../service/AttachmentService'\n\nimport MessageAttachment from './MessageAttachment'\nimport Logger from '../logger'\n\nimport Download from 'vue-material-design-icons/Download'\nimport CloudDownload from 'vue-material-design-icons/CloudDownload'\nimport ChevronDown from 'vue-material-design-icons/ChevronDown'\nimport ChevronUp from 'vue-material-design-icons/ChevronUp'\n\nexport default {\n\tname: 'MessageAttachments',\n\tcomponents: {\n\t\tMessageAttachment,\n\t\tIconLoading,\n\t\tDownload,\n\t\tCloudDownload,\n\t\tChevronDown,\n\t\tChevronUp,\n\t},\n\tprops: {\n\t\tenvelope: {\n\t\t\trequired: true,\n\t\t\ttype: Object,\n\t\t},\n\t\tattachments: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tvisible: 0,\n\t\t\tsavingToCloud: false,\n\t\t\tshowPreview: false,\n\t\t\tattachmentImageURL: '',\n\t\t\thasNextLine: false,\n\t\t\tisToggled: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\tfileInfos() {\n\t\t\treturn this.attachments.map(attachment => ({\n\t\t\t\tfilename: attachment.downloadUrl,\n\t\t\t\tsource: attachment.downloadUrl,\n\t\t\t\tbasename: basename(attachment.downloadUrl),\n\t\t\t\tmime: attachment.mime,\n\t\t\t\tetag: 'fixme',\n\t\t\t\thasPreview: false,\n\t\t\t\tfileid: parseInt(attachment.id, 10),\n\t\t\t}))\n\t\t},\n\t\tpreviewableFileInfos() {\n\t\t\treturn this.fileInfos.filter(fileInfo => (fileInfo.mime.startsWith('image/')\n\t\t\t\t\t|| fileInfo.mime.startsWith('video/')\n\t\t\t\t\t|| fileInfo.mime.startsWith('audio/')\n\t\t\t\t\t|| fileInfo.mime === 'application/pdf')\n\t\t\t\t&& OCA.Viewer.mimetypes.includes(fileInfo.mime))\n\t\t},\n\t\tmoreThanOne() {\n\t\t\treturn this.attachments.length > 1\n\t\t},\n\t\tzipUrl() {\n\t\t\treturn generateUrl('/apps/mail/api/messages/{id}/attachments', {\n\t\t\t\tid: this.envelope.databaseId,\n\t\t\t})\n\t\t},\n\t},\n\tmounted() {\n\t\tlet prevTop = null\n\t\tthis.visible = 0\n\t\tthis.$nextTick(function() {\n\t\t\tif (this.$refs.attachments) {\n\t\t\t\tthis.$refs.attachments.some((attachment, i) => {\n\t\t\t\t\tconst top = attachment.$el.getBoundingClientRect().top\n\t\t\t\t\tif (prevTop !== null && prevTop !== top) {\n\t\t\t\t\t\tthis.isToggled = true\n\t\t\t\t\t\tthis.hasNextLine = true\n\t\t\t\t\t\treturn true\n\t\t\t\t\t} else {\n\t\t\t\t\t\tprevTop = top\n\t\t\t\t\t\tthis.visible++\n\t\t\t\t\t}\n\t\t\t\t\treturn false\n\t\t\t\t})\n\t\t\t}\n\t\t})\n\n\t},\n\tmethods: {\n\t\tcanPreview(fileInfo) {\n\t\t\treturn this.previewableFileInfos.includes(fileInfo)\n\t\t},\n\t\tsaveAll() {\n\t\t\tconst picker = getFilePickerBuilder(t('mail', 'Choose a folder to store the attachments in'))\n\t\t\t\t.setMultiSelect(false)\n\t\t\t\t.addMimeTypeFilter('httpd/unix-directory')\n\t\t\t\t.setModal(true)\n\t\t\t\t.setType(1)\n\t\t\t\t.allowDirectories(true)\n\t\t\t\t.build()\n\n\t\t\tconst saveAttachments = (id) => (directory) => {\n\t\t\t\treturn saveAttachmentsToFiles(id, directory)\n\t\t\t}\n\t\t\tconst id = this.$route.params.threadId\n\n\t\t\treturn picker\n\t\t\t\t.pick()\n\t\t\t\t.then((dest) => {\n\t\t\t\t\tthis.savingToCloud = true\n\t\t\t\t\treturn dest\n\t\t\t\t})\n\t\t\t\t.then(saveAttachments(id))\n\t\t\t\t.then(() => Logger.info('saved'))\n\t\t\t\t.catch((error) => Logger.error('not saved', { error }))\n\t\t\t\t.then(() => (this.savingToCloud = false))\n\t\t},\n\t\tdownloadZip() {\n\t\t\twindow.location = this.zipUrl\n\t\t},\n\t\tshowViewer(fileInfo) {\n\t\t\tif (!this.canPreview(fileInfo)) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tif (this.previewableFileInfos.includes(fileInfo)) {\n\t\t\t\tOCA.Viewer.open({\n\t\t\t\t\tfileInfo,\n\t\t\t\t\tlist: this.previewableFileInfos,\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\">\n.attachments {\n\twidth: 100%;\n    box-sizing: border-box;\n    position: relative;\n    display: flex;\n    flex-wrap: wrap;\n    margin: 10px 0;\n}\n\n/* show icon + text for Download all button\n\t\tas well as when there is only one attachment */\n.attachments-button-wrapper {\n\ttext-align: center;\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.show-more-attachments {\n\tdisplay: flex;\n    align-items: center;\n\tcursor: pointer;\n\tpadding: 2px 0;\n\tcolor: var(--color-text-lighter);\n\n\tspan {\n\t\tcursor: pointer;\n\t}\n\n\t&:hover {\n\t\tcolor: var(--color-main-text);\n\t}\n}\n\n@keyframes spin {\n  0% {\n    transform: rotate(0deg);\n  }\n  50% {\n    transform: rotate(180deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n\n.spin {\n  animation: spin 1s linear infinite;\n}\n\n.attachment-link {\n\tcursor: pointer;\n\tdisplay:flex;\n\talign-items: center;\n\tcolor: var(--color-text-lighter);\n\n\t&:hover {\n\t\tcolor: var(--color-main-text);\n\t}\n\n\tspan {\n\t\tmargin: 0 4px 0 16px;\n\t}\n}\n\n.oc-dialog {\n\tz-index: 10000000;\n}\n.mail-message-attachments {\n\tdisplay:flex;\n\tflex-wrap: wrap;\n\tpadding: 10px 6px 10px 46px;\n\tmargin-top: 4px;\n\tmargin-bottom: -40px;\n\tposition:sticky;\n\tbottom:0;\n\tbackground: linear-gradient(0deg, var(--color-main-background), var(--color-main-background) 90%, rgba(255, 255, 255, 0));\n}\n.mail-message-attachments--wrapper {\n\tdisplay:flex;\n\twidth:100%;\n\theight:auto;\n\toverflow: hidden;\n\tmax-height: none;\n}\n\n.mail-message-attachments--wrapper.hide {\n\tdisplay:flex;\n\tmax-height: 70px;\n}\n</style>\n","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageAttachments.vue?vue&type=style&index=0&id=81bbcae8&prod&lang=scss&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageAttachments.vue?vue&type=style&index=0&id=81bbcae8&prod&lang=scss&\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * @copyright 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @author 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport logger from '../logger'\n\nlet mailvelope\n\nconst loadMailvelopeStatically = () => window.mailvelope\n\nconst loadMailvelopeDynamically = () =>\n\tnew Promise((resolve) => {\n\t\twindow.addEventListener('mailvelope', () => resolve(window.mailvelope), false)\n\t})\n\nexport const getMailvelope = async () => {\n\tif (mailvelope) {\n\t\treturn mailvelope\n\t}\n\n\tmailvelope = loadMailvelopeStatically()\n\tif (mailvelope) {\n\t\tlogger.debug('mailvelope found statically')\n\t\treturn mailvelope\n\t}\n\n\tlogger.debug('loading mailvelope dynamically')\n\tmailvelope = await loadMailvelopeDynamically()\n\tlogger.debug('mailvelope found dynamically')\n\treturn mailvelope\n}\n","import { render, staticRenderFns } from \"./MessageAttachments.vue?vue&type=template&id=81bbcae8&\"\nimport script from \"./MessageAttachments.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageAttachments.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessageAttachments.vue?vue&type=style&index=0&id=81bbcae8&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.attachments.length > 0)?_c('div',{staticClass:\"mail-message-attachments\",class:_vm.hasNextLine ? 'has-next-line' : ''},[_c('div',{staticClass:\"mail-message-attachments--wrapper\",class:(_vm.hasNextLine === true && _vm.isToggled === true) ? 'hide' : ''},[_c('div',{staticClass:\"attachments\"},_vm._l((_vm.attachments),function(attachment,idx){return _c('MessageAttachment',{key:attachment.id,ref:\"attachments\",refInFor:true,attrs:{\"id\":attachment.id,\"file-name\":attachment.fileName,\"size\":attachment.size,\"url\":attachment.downloadUrl,\"is-image\":attachment.isImage,\"is-calendar-event\":attachment.isCalendarEvent,\"mime\":attachment.mime,\"mime-url\":attachment.mimeUrl,\"can-preview\":_vm.canPreview(_vm.fileInfos[idx])},on:{\"open\":function($event){return _vm.showViewer(_vm.fileInfos[idx])}}})}),1)]),_vm._v(\" \"),(_vm.hasNextLine)?_c('div',{staticClass:\"show-more-attachments\",on:{\"click\":function($event){_vm.isToggled = !_vm.isToggled}}},[(_vm.isToggled)?_c('ChevronDown',{attrs:{\"size\":24}}):_vm._e(),_vm._v(\" \"),(!_vm.isToggled)?_c('ChevronUp',{attrs:{\"size\":24}}):_vm._e(),_vm._v(\" \"),(_vm.isToggled)?_c('span',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.n('mail', 'View {count} more attachment', 'View {count} more attachments', (_vm.attachments.length - _vm.visible), { count: _vm.attachments.length - _vm.visible }))+\"\\n\\t\\t\")]):_c('span',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'View fewer attachments'))+\"\\n\\t\\t\")])],1):_vm._e(),_vm._v(\" \"),(_vm.moreThanOne)?_c('p',{staticClass:\"attachments-button-wrapper\"},[_c('span',{staticClass:\"attachment-link\",attrs:{\"disabled\":_vm.savingToCloud},on:{\"click\":_vm.saveAll}},[(!_vm.savingToCloud)?_c('CloudDownload',{attrs:{\"size\":18}}):_c('IconLoading',{staticClass:\"spin\",attrs:{\"size\":18}}),_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Save all to Files'))+\"\\n\\t\\t\")],1),_vm._v(\" \"),_c('span',{staticClass:\"attachment-link\",on:{\"click\":_vm.downloadZip}},[_c('Download',{attrs:{\"size\":18}}),_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Download Zip'))+\"\\n\\t\\t\")],1)]):_vm._e()]):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div v-if=\"hasMdnRequest && !mdnSent\" class=\"mail-message-has-mdn-request\">\n\t\t{{\n\t\t\tt('mail', 'The sender of this message has asked to be notified when you read this message.')\n\t\t}}\n\t\t<button :disabled=\"loading\" @click=\"sendMdn\">\n\t\t\t{{ t('mail', 'Notify the sender') }}\n\t\t</button>\n\t</div>\n\t<div v-else-if=\"mdnSent\" class=\"mail-message-has-mdn-request\">\n\t\t{{\n\t\t\tt('mail', 'You sent a read confirmation to the sender of this message.')\n\t\t}}\n\t</div>\n</template>\n\n<script>\nimport logger from '../logger'\nimport { sendMdn } from '../service/MessageService'\nimport { showError } from '@nextcloud/dialogs'\n\nexport default {\n\tname: 'MdnRequest',\n\tprops: {\n\t\tmessage: {\n\t\t\trequired: true,\n\t\t\ttype: Object,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\thasMdnRequest: this.message.dispositionNotificationTo && this.message.dispositionNotificationTo.length > 0,\n\t\t\tloading: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\tmdnSent() {\n\t\t\treturn this.message.flags.mdnsent\n\t\t},\n\t},\n\tmethods: {\n\t\tasync sendMdn() {\n\t\t\tthis.loading = true\n\t\t\tlogger.debug('send return receipt')\n\n\t\t\ttry {\n\t\t\t\tawait sendMdn(this.message.databaseId)\n\t\t\t\tthis.$store.commit('flagEnvelope', { envelope: this.message, flag: 'mdnsent', value: true })\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error('could not send mdn', error)\n\t\t\t\tshowError(t('mail', 'Could not send mdn'))\n\t\t\t}\n\n\t\t\tthis.loading = false\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.mail-message-has-mdn-request {\n\twhite-space: normal;\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MdnRequest.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MdnRequest.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MdnRequest.vue?vue&type=style&index=0&id=3bf60f28&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MdnRequest.vue?vue&type=style&index=0&id=3bf60f28&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./MdnRequest.vue?vue&type=template&id=3bf60f28&scoped=true&\"\nimport script from \"./MdnRequest.vue?vue&type=script&lang=js&\"\nexport * from \"./MdnRequest.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MdnRequest.vue?vue&type=style&index=0&id=3bf60f28&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3bf60f28\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.hasMdnRequest && !_vm.mdnSent)?_c('div',{staticClass:\"mail-message-has-mdn-request\"},[_vm._v(\"\\n\\t\"+_vm._s(_vm.t('mail', 'The sender of this message has asked to be notified when you read this message.'))+\"\\n\\t\"),_c('button',{attrs:{\"disabled\":_vm.loading},on:{\"click\":_vm.sendMdn}},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'Notify the sender'))+\"\\n\\t\")])]):(_vm.mdnSent)?_c('div',{staticClass:\"mail-message-has-mdn-request\"},[_vm._v(\"\\n\\t\"+_vm._s(_vm.t('mail', 'You sent a read confirmation to the sender of this message.'))+\"\\n\")]):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div>\n\t\t<div v-if=\"mailvelope\" id=\"mail-content\">\n\t\t\t<MdnRequest :message=\"message\" />\n\t\t</div>\n\t\t<span v-else>{{ t('mail', 'This message is encrypted with PGP. Install Mailvelope to decrypt it.') }}</span>\n\t</div>\n</template>\n\n<script>\nimport { getMailvelope } from '../crypto/mailvelope'\nimport MdnRequest from './MdnRequest'\n\nexport default {\n\tname: 'MessageEncryptedBody',\n\tcomponents: { MdnRequest },\n\tprops: {\n\t\tbody: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tfrom: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: undefined,\n\t\t},\n\t\tmessage: {\n\t\t\trequired: true,\n\t\t\ttype: Object,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tmailvelope: false,\n\t\t}\n\t},\n\tasync mounted() {\n\t\tthis.mailvelope = await getMailvelope()\n\t\tthis.mailvelope.createDisplayContainer('#mail-content', this.body, undefined, {\n\t\t\tsenderAddress: this.from,\n\t\t})\n\t},\n}\n</script>\n\n<style scoped>\n#mail-content {\n\theight: 450px;\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageEncryptedBody.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageEncryptedBody.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageEncryptedBody.vue?vue&type=style&index=0&id=812ccd96&prod&scoped=true&lang=css&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageEncryptedBody.vue?vue&type=style&index=0&id=812ccd96&prod&scoped=true&lang=css&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./MessageEncryptedBody.vue?vue&type=template&id=812ccd96&scoped=true&\"\nimport script from \"./MessageEncryptedBody.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageEncryptedBody.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessageEncryptedBody.vue?vue&type=style&index=0&id=812ccd96&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"812ccd96\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[(_vm.mailvelope)?_c('div',{attrs:{\"id\":\"mail-content\"}},[_c('MdnRequest',{attrs:{\"message\":_vm.message}})],1):_c('span',[_vm._v(_vm._s(_vm.t('mail', 'This message is encrypted with PGP. Install Mailvelope to decrypt it.')))])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div id=\"mail-content\">\n\t\t<MdnRequest :message=\"message\" />\n\t\t<div v-if=\"hasBlockedContent\" id=\"mail-message-has-blocked-content\" style=\"color: #000000\">\n\t\t\t{{ t('mail', 'The images have been blocked to protect your privacy.') }}\n\t\t\t<Actions type=\"tertiary\" :menu-title=\"t('mail', 'Show images')\">\n\t\t\t\t<ActionButton\n\t\t\t\t\t@click=\"displayIframe\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<IconImage :size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('mail', 'Show images temporarily') }}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton v-if=\"sender\"\n\t\t\t\t\t@click=\"onShowBlockedContent\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<IconMail :size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('mail', 'Always show images from {sender}', { sender }) }}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton v-if=\"domain\"\n\t\t\t\t\t@click=\"onShowBlockedContentForDomain\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<IconDomain :size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('mail', 'Always show images from {domain}', { domain }) }}\n\t\t\t\t</ActionButton>\n\t\t\t</Actions>\n\t\t</div>\n\t\t<IconLoading v-if=\"loading\" />\n\t\t<div id=\"message-container\" :class=\"{hidden: loading, scroll: !fullHeight}\">\n\t\t\t<iframe ref=\"iframe\"\n\t\t\t\tclass=\"message-frame\"\n\t\t\t\t:title=\"t('mail', 'Message frame')\"\n\t\t\t\t:src=\"url\"\n\t\t\t\tseamless\n\t\t\t\t@load=\"onMessageFrameLoad\" />\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport { iframeResizer } from 'iframe-resizer'\nimport PrintScout from 'printscout'\nimport { trustSender } from '../service/TrustedSenderService'\nimport { NcActionButton as ActionButton, NcActions as Actions, NcLoadingIcon as IconLoading } from '@nextcloud/vue'\nimport IconImage from 'vue-material-design-icons/ImageSizeSelectActual'\nimport IconMail from 'vue-material-design-icons/Email'\nimport IconDomain from 'vue-material-design-icons/Domain'\n\nimport logger from '../logger'\nimport MdnRequest from './MdnRequest'\nconst scout = new PrintScout()\n\nexport default {\n\tname: 'MessageHTMLBody',\n\tcomponents: {\n\t\tMdnRequest,\n\t\tActions,\n\t\tActionButton,\n\t\tIconImage,\n\t\tIconMail,\n\t\tIconDomain,\n\t\tIconLoading,\n\t},\n\tprops: {\n\t\turl: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tfullHeight: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t\tmessage: {\n\t\t\trequired: true,\n\t\t\ttype: Object,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tloading: true,\n\t\t\thasBlockedContent: false,\n\t\t\tisSenderTrusted: this.message.isSenderTrusted,\n\t\t}\n\t},\n\tcomputed: {\n\t\tsender() {\n\t\t\treturn this.message.from[0]?.email\n\t\t},\n\t\tdomain() {\n\t\t\treturn this.sender?.split('@').pop()\n\t\t},\n\t},\n\tbeforeMount() {\n\t\tscout.on('beforeprint', this.onBeforePrint)\n\t},\n\tmounted() {\n\t\tiframeResizer({ log: false, heightCalculationMethod: 'taggedElement' }, this.$refs.iframe)\n\t},\n\tbeforeDestroy() {\n\t\tscout.off('beforeprint', this.onBeforePrint)\n\t\tthis.$refs.iframe.iFrameResizer.close()\n\t},\n\tmethods: {\n\t\tgetIframeDoc() {\n\t\t\tconst iframe = this.$refs.iframe\n\t\t\treturn iframe.contentDocument || iframe.contentWindow.document\n\t\t},\n\t\tonMessageFrameLoad() {\n\t\t\tconst iframeDoc = this.getIframeDoc()\n\t\t\tthis.hasBlockedContent\n\t\t\t\t= iframeDoc.querySelectorAll('[data-original-src]').length > 0\n\t\t\t\t|| iframeDoc.querySelectorAll('[data-original-style]').length > 0\n\t\t\t\t|| iframeDoc.querySelectorAll('style[data-original-content]').length > 0\n\n\t\t\tthis.loading = false\n\t\t\tif (this.isSenderTrusted) {\n\t\t\t\tthis.displayIframe()\n\t\t\t}\n\t\t},\n\t\tonBeforePrint() {\n\t\t\tthis.$refs.iframe.style.setProperty('height', `${this.getIframeDoc().body.scrollHeight}px`, 'important')\n\t\t},\n\t\tdisplayIframe() {\n\t\t\tconst iframeDoc = this.getIframeDoc()\n\t\t\tlogger.debug('showing external images')\n\t\t\tiframeDoc.querySelectorAll('[data-original-src]').forEach((node) => {\n\t\t\t\tnode.style.display = null\n\t\t\t\tnode.setAttribute('src', node.getAttribute('data-original-src'))\n\t\t\t})\n\t\t\tiframeDoc\n\t\t\t\t.querySelectorAll('[data-original-style]')\n\t\t\t\t.forEach((node) => node.setAttribute('style', node.getAttribute('data-original-style')))\n\t\t\tiframeDoc\n\t\t\t\t.querySelectorAll('style[data-original-content]')\n\t\t\t\t.forEach((node) => {\n\t\t\t\t\tnode.innerHTML = node.getAttribute('data-original-content')\n\t\t\t\t})\n\t\t\tthis.hasBlockedContent = false\n\t\t},\n\t\tasync onShowBlockedContent() {\n\t\t\tthis.displayIframe()\n\t\t\tawait trustSender(this.message.from[0].email, 'individual', true)\n\t\t},\n\t\tasync onShowBlockedContentForDomain() {\n\t\t\tthis.displayIframe()\n\t\t\t// TODO: there might be more than one @ in an email address\n\t\t\tawait trustSender(this.domain, 'domain', true)\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n// account for 8px margin on iframe body\n#mail-content {\n\tmargin-left: 50px;\n\tmargin-top: 2px;\n\tdisplay: flex;\n\tflex-direction: column;\n\theight: 100%;\n\tbackground-color: #FFFFFF;\n}\n#mail-message-has-blocked-content {\n\tmargin-left: 10px;\n\tcolor: var(--color-text-maxcontrast) !important;\n}\n\n#message-container {\n\tflex: 1;\n\tdisplay: flex;\n\tbackground-color: #FFFFFF;\n\n\t// TODO: collapse quoted text and remove inner scrollbar\n\t&.scroll {\n\t\tmax-height: 50vh;\n\t\toverflow-y: auto;\n\t}\n}\n::v-deep .button-vue__text {\n\tborder: none !important;\n\tfont-weight: normal !important;\n\tpadding-left: 14px !important;\n\tpadding-right: 10px !important;\n\ttext-decoration: underline !important;\n}\n.message-frame {\n\twidth: 100%;\n}\n::v-deep .button-vue__icon {\n\tdisplay: none !important;\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageHTMLBody.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageHTMLBody.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageHTMLBody.vue?vue&type=style&index=0&id=f1093178&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageHTMLBody.vue?vue&type=style&index=0&id=f1093178&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./MessageHTMLBody.vue?vue&type=template&id=f1093178&scoped=true&\"\nimport script from \"./MessageHTMLBody.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageHTMLBody.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessageHTMLBody.vue?vue&type=style&index=0&id=f1093178&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f1093178\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"mail-content\"}},[_c('MdnRequest',{attrs:{\"message\":_vm.message}}),_vm._v(\" \"),(_vm.hasBlockedContent)?_c('div',{staticStyle:{\"color\":\"#000000\"},attrs:{\"id\":\"mail-message-has-blocked-content\"}},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'The images have been blocked to protect your privacy.'))+\"\\n\\t\\t\"),_c('Actions',{attrs:{\"type\":\"tertiary\",\"menu-title\":_vm.t('mail', 'Show images')}},[_c('ActionButton',{on:{\"click\":_vm.displayIframe},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('IconImage',{attrs:{\"size\":20}})]},proxy:true}],null,false,1558549604)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Show images temporarily'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),(_vm.sender)?_c('ActionButton',{on:{\"click\":_vm.onShowBlockedContent},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('IconMail',{attrs:{\"size\":20}})]},proxy:true}],null,false,212336778)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Always show images from {sender}', { sender: _vm.sender }))+\"\\n\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.domain)?_c('ActionButton',{on:{\"click\":_vm.onShowBlockedContentForDomain},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('IconDomain',{attrs:{\"size\":20}})]},proxy:true}],null,false,1878072675)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Always show images from {domain}', { domain: _vm.domain }))+\"\\n\\t\\t\\t\")]):_vm._e()],1)],1):_vm._e(),_vm._v(\" \"),(_vm.loading)?_c('IconLoading'):_vm._e(),_vm._v(\" \"),_c('div',{class:{hidden: _vm.loading, scroll: !_vm.fullHeight},attrs:{\"id\":\"message-container\"}},[_c('iframe',{ref:\"iframe\",staticClass:\"message-frame\",attrs:{\"title\":_vm.t('mail', 'Message frame'),\"src\":_vm.url,\"seamless\":\"\"},on:{\"load\":_vm.onMessageFrameLoad}})])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div id=\"mail-content\">\n\t\t<MdnRequest :message=\"message\" />\n\t\t<div id=\"message-container\" v-html=\"nl2br(enhancedBody)\" />\n\t\t<details v-if=\"signature\" class=\"mail-signature\">\n\t\t\t<summary v-html=\"nl2br(signatureSummaryAndBody.summary)\" />\n\t\t\t<span v-html=\"nl2br(signatureSummaryAndBody.body)\" />\n\t\t</details>\n\t</div>\n</template>\n\n<script>\nimport MdnRequest from './MdnRequest'\nconst regFirstParagraph = /(.+\\n\\r?)+(\\n\\r?)+/\n\nexport default {\n\tname: 'MessagePlainTextBody',\n\tcomponents: { MdnRequest },\n\tprops: {\n\t\tbody: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tsignature: {\n\t\t\ttype: String,\n\t\t\tdefault: () => undefined,\n\t\t},\n\t\tmessage: {\n\t\t\trequired: true,\n\t\t\ttype: Object,\n\t\t},\n\t},\n\tcomputed: {\n\t\tenhancedBody() {\n\t\t\treturn this.body.replace(/(^&gt;.*\\n)+/gm, (match) => {\n\t\t\t\treturn `<details class=\"quoted-text\"><summary>${t('mail', 'Quoted text')}</summary>${match}</details>`\n\t\t\t})\n\t\t},\n\t\tsignatureSummaryAndBody() {\n\t\t\tconst matches = this.signature.trim().match(regFirstParagraph)\n\n\t\t\tif (matches && matches[0]) {\n\t\t\t\treturn {\n\t\t\t\t\tsummary: matches[0],\n\t\t\t\t\tbody: this.signature.substring(matches[0].length),\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst lines = this.signature.trim().split(/\\r?\\n/)\n\t\t\treturn {\n\t\t\t\tsummary: lines[0],\n\t\t\t\tbody: lines.slice(1).join('\\n'),\n\t\t\t}\n\t\t},\n\t\tsignatureSummary() {\n\t\t\tconsole.info(this.signature.match(regFirstParagraph))\n\n\t\t\treturn this.signatureSummaryAndBody.summary\n\t\t},\n\t},\n\tmethods: {\n\t\tnl2br(str) {\n\t\t\treturn str.replace(/(\\r\\n|\\n\\r|\\n|\\r)/g, '<br />')\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\">\n.quoted-text {\n\tcolor: var(--color-text-maxcontrast)\n\n\tsummary {\n\t\tcursor: pointer\n\t}\n}\n</style>\n<style lang=\"scss\" scoped>\n.message-container,\n.mail-signature {\n\twhite-space: pre-wrap;\n}\n.mail-signature, .quoted {\n\tcolor: var(--color-text-maxcontrast)\n\n\tsummary {\n\t\tcursor: pointer\n\t}\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessagePlainTextBody.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessagePlainTextBody.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessagePlainTextBody.vue?vue&type=style&index=0&id=5820b73d&prod&lang=scss&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessagePlainTextBody.vue?vue&type=style&index=0&id=5820b73d&prod&lang=scss&\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessagePlainTextBody.vue?vue&type=style&index=1&id=5820b73d&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessagePlainTextBody.vue?vue&type=style&index=1&id=5820b73d&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./MessagePlainTextBody.vue?vue&type=template&id=5820b73d&scoped=true&\"\nimport script from \"./MessagePlainTextBody.vue?vue&type=script&lang=js&\"\nexport * from \"./MessagePlainTextBody.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MessagePlainTextBody.vue?vue&type=style&index=0&id=5820b73d&prod&lang=scss&\"\nimport style1 from \"./MessagePlainTextBody.vue?vue&type=style&index=1&id=5820b73d&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5820b73d\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"mail-content\"}},[_c('MdnRequest',{attrs:{\"message\":_vm.message}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"message-container\"},domProps:{\"innerHTML\":_vm._s(_vm.nl2br(_vm.enhancedBody))}}),_vm._v(\" \"),(_vm.signature)?_c('details',{staticClass:\"mail-signature\"},[_c('summary',{domProps:{\"innerHTML\":_vm._s(_vm.nl2br(_vm.signatureSummaryAndBody.summary))}}),_vm._v(\" \"),_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.nl2br(_vm.signatureSummaryAndBody.body))}})]):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * @copyright Copyright (c) 2022 Richard Steinmetz <richard@steinmetz.cloud>\n *\n * @author Richard Steinmetz <richard@steinmetz.cloud>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\n/*\n * Remove the mailto prefix from a URI and return it\n *\n * @param {string} uri URI to remove the prefix from\n * @return {string} URI without a mailto prefix\n */\nexport function removeMailtoPrefix(uri) {\n\tif (uri.startsWith('mailto:')) {\n\t\treturn uri.substr(7)\n\t}\n\n\treturn uri\n}\n","<!--\n  - @copyright Copyright (c) 2022 Richard Steinmetz <richard@steinmetz.cloud>\n  -\n  - @author Richard Steinmetz <richard@steinmetz.cloud>\n  -\n  - @license AGPL-3.0-or-later\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n  -->\n\n<template>\n\t<div class=\"event-data\">\n\t\t<h2 class=\"event-data__heading\">\n\t\t\t{{ title }}\n\t\t</h2>\n\n\t\t<div class=\"event-data__row event-data__row--date\">\n\t\t\t<CalendarIcon class=\"event-data__row__icon\" :size=\"20\" />\n\t\t\t<div>\n\t\t\t\t{{ startDate }}\n\t\t\t\t<span v-if=\"startTimezone && startTimezone !== endTimezone\" class=\"muted\">\n\t\t\t\t\t{{ startTimezone }}\n\t\t\t\t</span>\n\t\t\t\t<template v-if=\"endDate\">\n\t\t\t\t\t<span> - </span>\n\t\t\t\t\t{{ endDate }}\n\t\t\t\t\t<span v-if=\"endTimezone\" class=\"muted\">{{ endTimezone }}</span>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div\n\t\t\tv-if=\"location\"\n\t\t\tclass=\"event-data__row event-data__row--location\">\n\t\t\t<MapMarkerIcon class=\"event-data__row__icon\" :size=\"20\" />\n\t\t\t<span>{{ location }}</span>\n\t\t</div>\n\n\t\t<div class=\"event-data__row event-data__row--participants\">\n\t\t\t<AccountMultipleIcon class=\"event-data__row__icon\" :size=\"20\" />\n\t\t\t<ul>\n\t\t\t\t<li v-for=\"{ name, isOrganizer, key } in attendees\" :key=\"key\">\n\t\t\t\t\t{{ name }}\n\t\t\t\t\t<span v-if=\"isOrganizer\" class=\"muted\">{{ t('mail', '(organizer)') }}</span>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport AccountMultipleIcon from 'vue-material-design-icons/AccountMultiple'\nimport CalendarIcon from 'vue-material-design-icons/Calendar'\nimport MapMarkerIcon from 'vue-material-design-icons/MapMarker'\nimport { getReadableTimezoneName } from '@nextcloud/calendar-js'\nimport moment from '@nextcloud/moment'\nimport { removeMailtoPrefix } from '../../util/eventAttendee'\n\n/**\n * Check whether two dates are on the exact same day, month and year.\n *\n * @param {Date} a Date a\n * @param {Date} b Date b\n * @return {boolean} True if both dates a and b are on the same day, month and year.\n */\nfunction isSameDay(a, b) {\n\treturn a.getFullYear() === b.getFullYear()\n\t\t&& a.getMonth() === b.getMonth()\n\t\t&& a.getDate() === b.getDate()\n}\n\n/**\n * Get a human readable timezone name from a DateTimeValue.\n * If timezone is floating, undefined will be returned.\n *\n * @param {DateTimeValue} date Date\n * @return {string|undefined} Human readable timezone name or undefined\n */\nfunction getTimezoneFromDate(date) {\n\tconst timezoneId = date.timezoneId\n\tif (!timezoneId || timezoneId === 'floating') {\n\t\treturn undefined\n\t}\n\n\treturn getReadableTimezoneName(timezoneId)\n}\n\nexport default {\n\tname: 'EventData',\n\tcomponents: {\n\t\tAccountMultipleIcon,\n\t\tCalendarIcon,\n\t\tMapMarkerIcon,\n\t},\n\tprops: {\n\t\tevent: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\t/**\n\t\t * @return {string}\n\t\t */\n\t\ttitle() {\n\t\t\t// Use || here to handle empty strings as well\n\t\t\treturn this.event.title || this.t('mail', 'Untitled event')\n\t\t},\n\n\t\t/**\n\t\t * @return {string}\n\t\t */\n\t\tstartDate() {\n\t\t\tif (this.event.isAllDay()) {\n\t\t\t\treturn moment(this.event.startDate.jsDate).format('ll')\n\t\t\t}\n\n\t\t\treturn moment(this.event.startDate.jsDate).format('ll LT')\n\t\t},\n\n\t\t/**\n\t\t * @return {string|undefined}\n\t\t */\n\t\tendDate() {\n\t\t\tconst start = this.event.startDate.jsDate\n\t\t\tconst end = this.event.endDate.jsDate\n\n\t\t\tlet date\n\t\t\tif (this.event.isAllDay()) {\n\t\t\t\t// All day events end a day later, so we need to subtract a day\n\t\t\t\tend.setDate(end.getDate() - 1)\n\t\t\t\tif (isSameDay(start, end)) {\n\t\t\t\t\treturn undefined\n\t\t\t\t}\n\t\t\t\tdate = moment(end).format('ll')\n\t\t\t} else {\n\t\t\t\tif (isSameDay(start, end)) {\n\t\t\t\t\tdate = moment(end).format('LT')\n\t\t\t\t} else {\n\t\t\t\t\tdate = moment(end).format('ll LT')\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn date\n\t\t},\n\n\t\t/**\n\t\t * @return {string|undefined}\n\t\t */\n\t\tstartTimezone() {\n\t\t\treturn getTimezoneFromDate(this.event.startDate)\n\t\t},\n\n\t\t/**\n\t\t * @return {string|undefined}\n\t\t */\n\t\tendTimezone() {\n\t\t\treturn getTimezoneFromDate(this.event.endDate)\n\t\t},\n\n\t\t/**\n\t\t * @return {string|undefined|null}\n\t\t */\n\t\tlocation() {\n\t\t\treturn this.event.location\n\t\t},\n\n\t\t/**\n\t\t * @return {{name: string, isOrganizer: boolean, key: string}[]}\n\t\t */\n\t\tattendees() {\n\t\t\tconst attendees = []\n\t\t\tfor (const attendee of [\n\t\t\t\t...this.event.getPropertyIterator('ORGANIZER'),\n\t\t\t\t...this.event.getAttendeeIterator(),\n\t\t\t]) {\n\t\t\t\tconst name = attendee.commonName ?? removeMailtoPrefix(attendee.email)\n\t\t\t\tconst isOrganizer = attendee.isOrganizer()\n\t\t\t\tconst key = (isOrganizer ? 'organizer_' : 'attendee_') + name\n\n\t\t\t\tattendees.push({ name, isOrganizer, key })\n\t\t\t}\n\t\t\treturn attendees\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.event-data {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 5px;\n\n\t&__heading {\n\t\tmargin-left: 36px;\n\t}\n\n\t&__row {\n\t\tdisplay: flex;\n\n\t\t&__icon {\n\t\t\talign-self: start;\n\t\t\tmargin: 0 8px;\n\n\t\t\t// Fix slight misalignment caused by align-self: start\n\t\t\tpadding-top: 2px;\n\t\t}\n\t}\n}\n\n.muted {\n\tcolor: var(--color-text-lighter);\n}\n</style>\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EventData.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EventData.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EventData.vue?vue&type=style&index=0&id=853d0690&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EventData.vue?vue&type=style&index=0&id=853d0690&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./EventData.vue?vue&type=template&id=853d0690&scoped=true&\"\nimport script from \"./EventData.vue?vue&type=script&lang=js&\"\nexport * from \"./EventData.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EventData.vue?vue&type=style&index=0&id=853d0690&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"853d0690\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"event-data\"},[_c('h2',{staticClass:\"event-data__heading\"},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.title)+\"\\n\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"event-data__row event-data__row--date\"},[_c('CalendarIcon',{staticClass:\"event-data__row__icon\",attrs:{\"size\":20}}),_vm._v(\" \"),_c('div',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.startDate)+\"\\n\\t\\t\\t\"),(_vm.startTimezone && _vm.startTimezone !== _vm.endTimezone)?_c('span',{staticClass:\"muted\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.startTimezone)+\"\\n\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.endDate)?[_c('span',[_vm._v(\" - \")]),_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.endDate)+\"\\n\\t\\t\\t\\t\"),(_vm.endTimezone)?_c('span',{staticClass:\"muted\"},[_vm._v(_vm._s(_vm.endTimezone))]):_vm._e()]:_vm._e()],2)],1),_vm._v(\" \"),(_vm.location)?_c('div',{staticClass:\"event-data__row event-data__row--location\"},[_c('MapMarkerIcon',{staticClass:\"event-data__row__icon\",attrs:{\"size\":20}}),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.location))])],1):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"event-data__row event-data__row--participants\"},[_c('AccountMultipleIcon',{staticClass:\"event-data__row__icon\",attrs:{\"size\":20}}),_vm._v(\" \"),_c('ul',_vm._l((_vm.attendees),function({ name, isOrganizer, key }){return _c('li',{key:key},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(name)+\"\\n\\t\\t\\t\\t\"),(isOrganizer)?_c('span',{staticClass:\"muted\"},[_vm._v(_vm._s(_vm.t('mail', '(organizer)')))]):_vm._e()])}),0)],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * @copyright Copyright (c) 2022 Richard Steinmetz <richard@steinmetz.cloud>\n *\n * @author Richard Steinmetz <richard@steinmetz.cloud>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\n/**\n * Generate a random hex id to use with vue components.\n *\n * WARNING: This method does not use a secure random generator and isn't suited for\n * cryptographic purposes.\n *\n * @return {string} A random hex id\n */\nexport function randomId() {\n\treturn Math.random().toString(16).slice(2)\n}\n","<!--\n  - @copyright Copyright (c) 2022 Richard Steinmetz <richard@steinmetz.cloud>\n  -\n  - @author Richard Steinmetz <richard@steinmetz.cloud>\n  -\n  - @license AGPL-3.0-or-later\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n  -->\n\n<template>\n\t<div class=\"imip\">\n\t\t<div\n\t\t\tv-if=\"isRequest\"\n\t\t\tclass=\"imip__type\">\n\t\t\t<template v-if=\"existingEventFetched\">\n\t\t\t\t<span v-if=\"wasProcessed && existingParticipationStatus === ACCEPTED\">\n\t\t\t\t\t{{ t('mail', 'You accepted this invitation') }}\n\t\t\t\t</span>\n\t\t\t\t<span v-else-if=\"wasProcessed && existingParticipationStatus === TENTATIVE\">\n\t\t\t\t\t{{ t('mail', 'You tentatively accepted this invitation') }}\n\t\t\t\t</span>\n\t\t\t\t<span v-else-if=\"wasProcessed && existingParticipationStatus === DECLINED\">\n\t\t\t\t\t{{ t('mail', 'You declined this invitation') }}\n\t\t\t\t</span>\n\t\t\t\t<span v-else-if=\"wasProcessed && existingParticipationStatus !== NEEDS_ACTION\">\n\t\t\t\t\t{{ t('mail', 'You already reacted to this invitation') }}\n\t\t\t\t</span>\n\t\t\t\t<span v-else-if=\"userIsAttendee\">\n\t\t\t\t\t{{ t('mail', 'You have been invited to an event') }}\n\t\t\t\t</span>\n\t\t\t</template>\n\t\t</div>\n\t\t<div\n\t\t\tv-else-if=\"isReply\"\n\t\t\tclass=\"imip__type\">\n\t\t\t<CalendarIcon :size=\"20\" />\n\t\t\t<span>{{ replyStatusMessage }}</span>\n\t\t</div>\n\t\t<div\n\t\t\tv-else-if=\"isCancel\"\n\t\t\tclass=\"imip__type\">\n\t\t\t<CloseIcon :size=\"20\" fill-color=\"red\" />\n\t\t\t<span>{{ t('mail', 'This event was cancelled') }}</span>\n\t\t</div>\n\n\t\t<EventData :event=\"attachedVEvent\" />\n\n\t\t<div v-if=\"showMoreOptions\" class=\"imip__more-options\">\n\t\t\t<!-- Hide calendar picker if editing an existing event (e.g. an internal event is\n\t\t\t shared by default and thus existing even if the attendee didn't react yet). -->\n\t\t\t<div\n\t\t\t\tv-if=\"!isExistingEvent\"\n\t\t\t\tclass=\"imip__more-options__row imip__more-options__row--calendar\">\n\t\t\t\t<label for=\"targetCalendarPickerId\">{{ t('mail', 'Save to') }}</label>\n\t\t\t\t<div class=\"imip__more-options__row--calendar__multiselect\">\n\t\t\t\t\t<Multiselect\n\t\t\t\t\t\tv-if=\"calendarsForPicker.length > 1\"\n\t\t\t\t\t\t:id=\"targetCalendarPickerId\"\n\t\t\t\t\t\tv-model=\"targetCalendar\"\n\t\t\t\t\t\tlabel=\"displayname\"\n\t\t\t\t\t\ttrack-by=\"url\"\n\t\t\t\t\t\t:allow-empty=\"false\"\n\t\t\t\t\t\t:options=\"calendarsForPicker\">\n\t\t\t\t\t\t<template #option=\"{option}\">\n\t\t\t\t\t\t\t<CalendarPickerOption v-bind=\"option\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template #singleLabel=\"{option}\">\n\t\t\t\t\t\t\t<CalendarPickerOption :display-icon=\"true\" v-bind=\"option\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</Multiselect>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"imip__more-options__row imip__more-options__row--comment\">\n\t\t\t\t<label for=\"commentFieldId\">{{ t('mail', 'Comment') }}</label>\n\t\t\t\t<textarea :id=\"commentFieldId\" v-model=\"comment\" rows=\"3\" />\n\t\t\t</div>\n\t\t</div>\n\n\t\t<template v-if=\"isRequest && userIsAttendee\">\n\t\t\t<div\n\t\t\t\tv-if=\"!wasProcessed && eventIsInFuture && existingEventFetched\"\n\t\t\t\tclass=\"imip__actions imip__actions--buttons\">\n\t\t\t\t<Button\n\t\t\t\t\ttype=\"secondary\"\n\t\t\t\t\t:loading=\"loading\"\n\t\t\t\t\t@click=\"accept\">\n\t\t\t\t\t{{ t('mail', 'Accept') }}\n\t\t\t\t</Button>\n\t\t\t\t<Button\n\t\t\t\t\ttype=\"tertiary\"\n\t\t\t\t\t:loading=\"loading\"\n\t\t\t\t\t@click=\"decline\">\n\t\t\t\t\t{{ t('mail', 'Decline') }}\n\t\t\t\t</Button>\n\t\t\t\t<Button\n\t\t\t\t\ttype=\"tertiary\"\n\t\t\t\t\t:loading=\"loading\"\n\t\t\t\t\t@click=\"acceptTentatively\">\n\t\t\t\t\t{{ t('mail', 'Tentatively accept') }}\n\t\t\t\t</Button>\n\t\t\t\t<Button\n\t\t\t\t\tv-if=\"!showMoreOptions\"\n\t\t\t\t\ttype=\"tertiary\"\n\t\t\t\t\t@click=\"showMoreOptions = true\">\n\t\t\t\t\t{{ t('mail', 'More options') }}\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t\t<p v-else-if=\"!eventIsInFuture\" class=\"imip__actions imip__actions--hint\">\n\t\t\t\t{{ t('mail', 'This event is in the past.') }}\n\t\t\t</p>\n\t\t</template>\n\t</div>\n</template>\n\n<script>\nimport EventData from './imip/EventData'\nimport { NcButton as Button, NcMultiselect as Multiselect } from '@nextcloud/vue'\nimport CloseIcon from 'vue-material-design-icons/Close'\nimport CalendarIcon from 'vue-material-design-icons/Calendar'\nimport { getParserManager, Parameter, Property } from '@nextcloud/calendar-js'\nimport { mapGetters } from 'vuex'\nimport { removeMailtoPrefix } from '../util/eventAttendee'\nimport logger from '../logger'\nimport { namespaces as NS } from '@nextcloud/cdav-library'\nimport CalendarPickerOption from './CalendarPickerOption'\nimport { uidToHexColor } from '../util/calendarColor'\nimport { randomId } from '../util/randomId'\nimport pLimit from 'p-limit'\nimport { flatten } from 'ramda'\n\n// iMIP methods\nconst REQUEST = 'REQUEST'\nconst REPLY = 'REPLY'\nconst CANCEL = 'CANCEL'\n\n// Participation status\nconst NEEDS_ACTION = 'NEEDS-ACTION'\nconst ACCEPTED = 'ACCEPTED'\nconst TENTATIVE = 'TENTATIVE'\nconst DECLINED = 'DECLINED'\n\n/**\n * Search a vEvent for an attendee by mail.\n *\n * @param {EventComponent|undefined|null} vEvent The event providing the attendee haystack.\n * @param {string} email The email address (with or without a mailto prefix) to use as the needle.\n * @return {AttendeeProperty|undefined} The attendee property or undefined if the given email is not matching an attendee.\n */\nfunction findAttendee(vEvent, email) {\n\tif (!vEvent) {\n\t\treturn undefined\n\t}\n\n\temail = removeMailtoPrefix(email)\n\tfor (const attendee of vEvent.getAttendeeIterator()) {\n\t\tif (removeMailtoPrefix(attendee.email) === email) {\n\t\t\treturn attendee\n\t\t}\n\t}\n\n\treturn undefined\n}\n\nexport default {\n\tname: 'Imip',\n\tcomponents: {\n\t\tEventData,\n\t\tButton,\n\t\tCloseIcon,\n\t\tCalendarIcon,\n\t\tCalendarPickerOption,\n\t\tMultiselect,\n\t},\n\tprops: {\n\t\tscheduling: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tNEEDS_ACTION,\n\t\t\tACCEPTED,\n\t\t\tTENTATIVE,\n\t\t\tDECLINED,\n\n\t\t\tcommentFieldId: randomId(),\n\t\t\ttargetCalendarPickerId: randomId(),\n\n\t\t\tshowMoreOptions: false,\n\t\t\tloading: false,\n\t\t\texistingEvent: undefined,\n\t\t\texistingEventFetched: false,\n\t\t\ttargetCalendar: undefined,\n\t\t\tcomment: '',\n\t\t}\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tcurrentUserPrincipalEmail: 'getCurrentUserPrincipalEmail',\n\t\t\tclonedCalendars: 'getClonedCalendars',\n\t\t}),\n\n\t\t/**\n\t\t * The method of the iMIP message.\n\t\t *\n\t\t * @return {string}\n\t\t */\n\t\tmethod() {\n\t\t\treturn this.scheduling.method\n\t\t},\n\n\t\t/**\n\t\t * @return {boolean}\n\t\t */\n\t\tisRequest() {\n\t\t\treturn this.method === REQUEST\n\t\t},\n\n\t\t/**\n\t\t * @return {boolean}\n\t\t */\n\t\tisReply() {\n\t\t\treturn this.method === REPLY\n\t\t},\n\n\t\t/**\n\t\t * @return {boolean}\n\t\t */\n\t\tisCancel() {\n\t\t\treturn this.method === CANCEL\n\t\t},\n\n\t\t/**\n\t\t * @return {boolean}\n\t\t */\n\t\tisExistingEvent() {\n\t\t\treturn !!this.existingEvent\n\t\t},\n\n\t\t/**\n\t\t * Did the attendee already react to the invitation?\n\t\t *\n\t\t * @return {boolean}\n\t\t */\n\t\twasProcessed() {\n\t\t\treturn !!this.existingParticipationStatus && this.existingParticipationStatus !== NEEDS_ACTION\n\t\t},\n\n\t\t/**\n\t\t * @return {CalendarComponent|undefined}\n\t\t */\n\t\tattachedVCalendar() {\n\t\t\tconst parserManager = getParserManager()\n\t\t\tconst parser = parserManager.getParserForFileType('text/calendar')\n\t\t\tparser.parse(this.scheduling.contents)\n\n\t\t\tconst vCalendar = parser.getItemIterator().next().value\n\t\t\treturn vCalendar ?? undefined\n\t\t},\n\n\t\t/**\n\t\t * @return {EventComponent|undefined}\n\t\t */\n\t\tattachedVEvent() {\n\t\t\treturn this.attachedVCalendar?.getFirstComponent('VEVENT') ?? undefined\n\t\t},\n\n\t\t/**\n\t\t * @return {CalendarComponent|undefined}\n\t\t */\n\t\texistingVCalendar() {\n\t\t\tif (!this.existingEvent) {\n\t\t\t\treturn undefined\n\t\t\t}\n\n\t\t\tconst parserManager = getParserManager()\n\t\t\tconst parser = parserManager.getParserForFileType('text/calendar')\n\t\t\tparser.parse(this.existingEvent.data)\n\n\t\t\tconst vCalendar = parser.getItemIterator().next().value\n\t\t\treturn vCalendar ?? undefined\n\t\t},\n\n\t\t/**\n\t\t * @return {EventComponent|undefined}\n\t\t */\n\t\texistingVEvent() {\n\t\t\treturn this.existingVCalendar?.getFirstComponent('VEVENT') ?? undefined\n\t\t},\n\n\t\t/**\n\t\t * @return {boolean}\n\t\t */\n\t\teventIsInFuture() {\n\t\t\treturn this.attachedVEvent.startDate.jsDate.getTime() > new Date().getTime()\n\t\t},\n\n\t\t/**\n\t\t * Check if the user is an attendee of the attached event.\n\t\t *\n\t\t * @return {boolean}\n\t\t */\n\t\tuserIsAttendee() {\n\t\t\treturn !!findAttendee(this.attachedVEvent, this.currentUserPrincipalEmail)\n\t\t},\n\n\t\t/**\n\t\t * The users participation status taken from the existing event.\n\t\t *\n\t\t * @return {string|undefined}\n\t\t */\n\t\texistingParticipationStatus() {\n\t\t\tconst attendee = findAttendee(this.existingVEvent, this.currentUserPrincipalEmail)\n\t\t\treturn attendee?.participationStatus ?? undefined\n\t\t},\n\n\t\t/**\n\t\t * The status message to show in case of REPLY messages.\n\t\t *\n\t\t * @return {string}\n\t\t */\n\t\treplyStatusMessage() {\n\t\t\tconst attendees = this.attachedVEvent?.getAttendeeList()\n\t\t\tif (!attendees || attendees.length !== 1) {\n\t\t\t\t// As per the RFCs there should only be one attendee, but you never know.\n\t\t\t\treturn this.t('mail', 'This event was updated')\n\t\t\t}\n\n\t\t\tconst attendee = attendees[0]\n\t\t\tconst partStat = attendee.participationStatus\n\t\t\tconst name = attendee.commonName ?? attendee.email\n\t\t\tif (partStat === ACCEPTED) {\n\t\t\t\treturn this.t('mail', '{attendeeName} accepted your invitation', {\n\t\t\t\t\tattendeeName: name,\n\t\t\t\t})\n\t\t\t} else if (partStat === TENTATIVE) {\n\t\t\t\treturn this.t('mail', '{attendeeName} tentatively accepted your invitation', {\n\t\t\t\t\tattendeeName: name,\n\t\t\t\t})\n\t\t\t} else if (partStat === DECLINED) {\n\t\t\t\treturn this.t('mail', '{attendeeName} declined your invitation', {\n\t\t\t\t\tattendeeName: name,\n\t\t\t\t})\n\t\t\t}\n\n\t\t\treturn this.t('mail', '{attendeeName} reacted to your invitation', {\n\t\t\t\tattendeeName: name,\n\t\t\t})\n\t\t},\n\n\t\t/**\n\t\t * List of calendar options for the target calendar picker.\n\t\t *\n\t\t * @return {object[]}\n\t\t */\n\t\tcalendarsForPicker() {\n\t\t\tconst getCalendarData = (calendar) => {\n\t\t\t\treturn {\n\t\t\t\t\tdisplayname: calendar.displayname,\n\t\t\t\t\tcolor: calendar.color ?? uidToHexColor(calendar.displayname ?? ''),\n\t\t\t\t\torder: calendar.order,\n\t\t\t\t\tcomponents: {\n\t\t\t\t\t\tvevent: true, // check if VEVENT exists in props['supported-calendar-component-set'].comps\n\t\t\t\t\t},\n\t\t\t\t\twritable: calendar.currentUserPrivilegeSet.indexOf('{DAV:}write') !== -1,\n\t\t\t\t\turl: calendar.url,\n\t\t\t\t\tdav: calendar,\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this.clonedCalendars\n\t\t\t\t.map(getCalendarData)\n\t\t\t\t.filter(props => props.components.vevent && props.writable === true)\n\t\t},\n\t},\n\twatch: {\n\t\tattachedVEvent: {\n\t\t\timmediate: true,\n\t\t\tasync handler() {\n\t\t\t\tawait this.fetchExistingEvent(this.attachedVEvent.uid)\n\t\t\t},\n\t\t},\n\t\tclonedCalendars: {\n\t\t\timmediate: true,\n\t\t\tasync handler() {\n\t\t\t\tawait this.fetchExistingEvent(this.attachedVEvent.uid)\n\t\t\t},\n\t\t},\n\t\tcalendarsForPicker: {\n\t\t\timmediate: true,\n\t\t\thandler(calendarsForPicker) {\n\t\t\t\tif (calendarsForPicker.length > 0 && !this.targetCalendar) {\n\t\t\t\t\tthis.targetCalendar = calendarsForPicker[0]\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t},\n\tmethods: {\n\t\tasync accept() {\n\t\t\tawait this.saveEventWithParticipationStatus(ACCEPTED)\n\t\t},\n\t\tasync acceptTentatively() {\n\t\t\tawait this.saveEventWithParticipationStatus(TENTATIVE)\n\t\t},\n\t\tasync decline() {\n\t\t\tawait this.saveEventWithParticipationStatus(DECLINED)\n\t\t},\n\t\tasync saveEventWithParticipationStatus(status) {\n\t\t\tlet vCalendar\n\t\t\tif (this.isExistingEvent) {\n\t\t\t\tvCalendar = this.existingVCalendar\n\t\t\t} else {\n\t\t\t\tvCalendar = this.attachedVCalendar\n\t\t\t}\n\t\t\tconst vEvent = vCalendar.getFirstComponent('VEVENT')\n\t\t\tconst attendee = findAttendee(vEvent, this.currentUserPrincipalEmail)\n\t\t\tif (!attendee) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst calendar = this.targetCalendar?.dav\n\t\t\tif (!calendar) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tattendee.participationStatus = status\n\t\t\tif (this.comment) {\n\t\t\t\tattendee.setParameter(new Parameter('X-RESPONSE-COMMENT', this.comment))\n\t\t\t\tvEvent.addProperty(new Property('COMMENT', this.comment))\n\t\t\t}\n\t\t\t// TODO: implement an input for guests and save it to the attendee via X-NUM-GUESTS\n\n\t\t\tthis.loading = true\n\t\t\ttry {\n\t\t\t\tif (this.isExistingEvent) {\n\t\t\t\t\t// TODO: don't show buttons if calendar is not writable\n\t\t\t\t\tthis.existingEvent.data = vCalendar.toICS()\n\t\t\t\t\tawait this.existingEvent.update()\n\t\t\t\t} else {\n\t\t\t\t\tawait calendar.createVObject(vCalendar.toICS())\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error('Failed to save event to calendar', {\n\t\t\t\t\terror,\n\t\t\t\t\tattendee,\n\t\t\t\t\tcalendar,\n\t\t\t\t\tvEvent,\n\t\t\t\t\tvCalendar,\n\t\t\t\t\texistingEvent: this.existingEvent,\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t} finally {\n\t\t\t\tthis.loading = false\n\t\t\t}\n\n\t\t\tthis.showMoreOptions = false\n\n\t\t\t// Refetch the event to update the shown status message.\n\t\t\tthis.existingEventFetched = false\n\t\t\tawait this.fetchExistingEvent(vEvent.uid)\n\t\t},\n\t\tasync fetchExistingEvent(uid) {\n\t\t\tif (this.existingEventFetched) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t// TODO: can this query be reduced to a single request?\n\t\t\tconst limit = pLimit(5)\n\t\t\tconst promises = this.clonedCalendars.map(async (calendar) => {\n\t\t\t\t// Query adapted from https://datatracker.ietf.org/doc/html/rfc4791#section-7.8.6\n\t\t\t\treturn limit(() => calendar.calendarQuery([{\n\t\t\t\t\tname: [NS.IETF_CALDAV, 'comp-filter'],\n\t\t\t\t\tattributes: [['name', 'VCALENDAR']],\n\t\t\t\t\tchildren: [{\n\t\t\t\t\t\tname: [NS.IETF_CALDAV, 'comp-filter'],\n\t\t\t\t\t\tattributes: [['name', 'VEVENT']],\n\t\t\t\t\t\tchildren: [{\n\t\t\t\t\t\t\tname: [NS.IETF_CALDAV, 'prop-filter'],\n\t\t\t\t\t\t\tattributes: [['name', 'UID']],\n\t\t\t\t\t\t\tchildren: [{\n\t\t\t\t\t\t\t\tname: [NS.IETF_CALDAV, 'text-match'],\n\t\t\t\t\t\t\t\tvalue: uid,\n\t\t\t\t\t\t\t}],\n\t\t\t\t\t\t}],\n\t\t\t\t\t}],\n\t\t\t\t}]))\n\t\t\t})\n\t\t\tconst results = flatten(await Promise.all(promises))\n\n\t\t\tif (results.length > 1) {\n\t\t\t\tlogger.warn('Fetched more than one event for iMIP invitation', { results })\n\t\t\t}\n\n\t\t\tthis.existingEvent = results[0]\n\t\t\tthis.existingEventFetched = true\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.imip {\n\tdisplay: flex;\n\tflex-direction: column;\n\tborder: solid 2px var(--color-border);\n\tborder-radius: var(--border-radius-large);\n\tpadding: 10px;\n\n\t&__type {\n\t\tdisplay: flex;\n\t\tgap: 5px;\n\t\tmargin-left: 36px;\n\t}\n\n\t&__more-options {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tmargin-top: 15px;\n\t\tgap: 10px;\n\n\t\t&__row {\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\n\t\t\t&--calendar {\n\t\t\t\tdisplay: flex;\n\t\t\t\twidth: 100%;\n\n\t\t\t\t&__multiselect {\n\t\t\t\t\twidth: 100%;\n\n\t\t\t\t\t::v-deep .calendar-picker-option__label {\n\t\t\t\t\t\tmax-width: unset !important;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t&--comment {\n\t\t\t\ttextarea {\n\t\t\t\t\tdisplay: block;\n\t\t\t\t\twidth: 100%;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t&__actions {\n\t\tmargin-top: 15px;\n\t\tmargin-left: 36px;\n\n\t\t&--buttons {\n\t\t\tdisplay: flex;\n\t\t}\n\n\t\t&--hint {\n\t\t\tfont-style: italic;\n\t\t}\n\t}\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Imip.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Imip.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Imip.vue?vue&type=style&index=0&id=17f3fe21&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Imip.vue?vue&type=style&index=0&id=17f3fe21&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n  - @author 2021 Richard Steinmetz <richard@steinmetz.cloud>\n  -\n  - @license AGPL-3.0-or-later\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<div :class=\"[message.hasHtmlBody ? 'mail-message-body mail-message-body-html' : 'mail-message-body']\"\n\t\trole=\"region\"\n\t\t:aria-label=\"t('mail','Message body')\">\n\t\t<div v-if=\"itineraries.length > 0\" class=\"message-itinerary\">\n\t\t\t<Itinerary :entries=\"itineraries\" :message-id=\"message.messageId\" />\n\t\t</div>\n\t\t<div v-if=\"message.scheduling.length > 0\" class=\"message-imip\">\n\t\t\t<Imip\n\t\t\t\tv-for=\"scheduling in message.scheduling\"\n\t\t\t\t:key=\"scheduling.id\"\n\t\t\t\t:scheduling=\"scheduling\" />\n\t\t</div>\n\t\t<MessageHTMLBody v-if=\"message.hasHtmlBody\"\n\t\t\t:url=\"htmlUrl\"\n\t\t\t:message=\"message\"\n\t\t\t:full-height=\"fullHeight\" />\n\t\t<MessageEncryptedBody v-else-if=\"isEncrypted\"\n\t\t\t:body=\"message.body\"\n\t\t\t:from=\"from\"\n\t\t\t:message=\"message\" />\n\t\t<MessagePlainTextBody v-else\n\t\t\t:body=\"message.body\"\n\t\t\t:signature=\"message.signature\"\n\t\t\t:message=\"message\" />\n\t\t<MessageAttachments :attachments=\"message.attachments\" :envelope=\"envelope\" />\n\t\t<div id=\"reply-composer\" />\n\t</div>\n</template>\n\n<script>\nimport { generateUrl } from '@nextcloud/router'\n\nimport { html, plain } from '../util/text'\nimport { isPgpgMessage } from '../crypto/pgp'\nimport Itinerary from './Itinerary'\nimport MessageAttachments from './MessageAttachments'\nimport MessageEncryptedBody from './MessageEncryptedBody'\nimport MessageHTMLBody from './MessageHTMLBody'\nimport MessagePlainTextBody from './MessagePlainTextBody'\nimport Imip from './Imip'\n\nexport default {\n\tname: 'Message',\n\tcomponents: {\n\t\tItinerary,\n\t\tMessageAttachments,\n\t\tMessageEncryptedBody,\n\t\tMessageHTMLBody,\n\t\tMessagePlainTextBody,\n\t\tImip,\n\t},\n\tprops: {\n\t\tenvelope: {\n\t\t\trequired: true,\n\t\t\ttype: Object,\n\t\t},\n\t\tmessage: {\n\t\t\trequired: true,\n\t\t\ttype: Object,\n\t\t},\n\t\tfullHeight: {\n\t\t\trequired: false,\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tcomputed: {\n\t\tfrom() {\n\t\t\treturn this.message.from.length === 0 ? '?' : this.message.from[0].label || this.message.from[0].email\n\t\t},\n\t\thtmlUrl() {\n\t\t\treturn generateUrl('/apps/mail/api/messages/{id}/html', {\n\t\t\t\tid: this.envelope.databaseId,\n\t\t\t})\n\t\t},\n\t\tisEncrypted() {\n\t\t\treturn isPgpgMessage(this.message.hasHtmlBody ? html(this.message.body) : plain(this.message.body))\n\t\t},\n\t\titineraries() {\n\t\t\treturn this.message.itineraries ?? []\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.v-popover > .trigger > .action-item {\n\tborder-radius: 22px;\n\tbackground-color: var(--color-background-darker);\n}\n\n.message-imip {\n\tpadding: 5px 10px;\n}\n</style>\n","import { render, staticRenderFns } from \"./Imip.vue?vue&type=template&id=17f3fe21&scoped=true&\"\nimport script from \"./Imip.vue?vue&type=script&lang=js&\"\nexport * from \"./Imip.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Imip.vue?vue&type=style&index=0&id=17f3fe21&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"17f3fe21\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"imip\"},[(_vm.isRequest)?_c('div',{staticClass:\"imip__type\"},[(_vm.existingEventFetched)?[(_vm.wasProcessed && _vm.existingParticipationStatus === _vm.ACCEPTED)?_c('span',[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'You accepted this invitation'))+\"\\n\\t\\t\\t\")]):(_vm.wasProcessed && _vm.existingParticipationStatus === _vm.TENTATIVE)?_c('span',[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'You tentatively accepted this invitation'))+\"\\n\\t\\t\\t\")]):(_vm.wasProcessed && _vm.existingParticipationStatus === _vm.DECLINED)?_c('span',[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'You declined this invitation'))+\"\\n\\t\\t\\t\")]):(_vm.wasProcessed && _vm.existingParticipationStatus !== _vm.NEEDS_ACTION)?_c('span',[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'You already reacted to this invitation'))+\"\\n\\t\\t\\t\")]):(_vm.userIsAttendee)?_c('span',[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'You have been invited to an event'))+\"\\n\\t\\t\\t\")]):_vm._e()]:_vm._e()],2):(_vm.isReply)?_c('div',{staticClass:\"imip__type\"},[_c('CalendarIcon',{attrs:{\"size\":20}}),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.replyStatusMessage))])],1):(_vm.isCancel)?_c('div',{staticClass:\"imip__type\"},[_c('CloseIcon',{attrs:{\"size\":20,\"fill-color\":\"red\"}}),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.t('mail', 'This event was cancelled')))])],1):_vm._e(),_vm._v(\" \"),_c('EventData',{attrs:{\"event\":_vm.attachedVEvent}}),_vm._v(\" \"),(_vm.showMoreOptions)?_c('div',{staticClass:\"imip__more-options\"},[(!_vm.isExistingEvent)?_c('div',{staticClass:\"imip__more-options__row imip__more-options__row--calendar\"},[_c('label',{attrs:{\"for\":\"targetCalendarPickerId\"}},[_vm._v(_vm._s(_vm.t('mail', 'Save to')))]),_vm._v(\" \"),_c('div',{staticClass:\"imip__more-options__row--calendar__multiselect\"},[(_vm.calendarsForPicker.length > 1)?_c('Multiselect',{attrs:{\"id\":_vm.targetCalendarPickerId,\"label\":\"displayname\",\"track-by\":\"url\",\"allow-empty\":false,\"options\":_vm.calendarsForPicker},scopedSlots:_vm._u([{key:\"option\",fn:function({option}){return [_c('CalendarPickerOption',_vm._b({},'CalendarPickerOption',option,false))]}},{key:\"singleLabel\",fn:function({option}){return [_c('CalendarPickerOption',_vm._b({attrs:{\"display-icon\":true}},'CalendarPickerOption',option,false))]}}],null,false,2046873210),model:{value:(_vm.targetCalendar),callback:function ($$v) {_vm.targetCalendar=$$v},expression:\"targetCalendar\"}}):_vm._e()],1)]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"imip__more-options__row imip__more-options__row--comment\"},[_c('label',{attrs:{\"for\":\"commentFieldId\"}},[_vm._v(_vm._s(_vm.t('mail', 'Comment')))]),_vm._v(\" \"),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.comment),expression:\"comment\"}],attrs:{\"id\":_vm.commentFieldId,\"rows\":\"3\"},domProps:{\"value\":(_vm.comment)},on:{\"input\":function($event){if($event.target.composing)return;_vm.comment=$event.target.value}}})])]):_vm._e(),_vm._v(\" \"),(_vm.isRequest && _vm.userIsAttendee)?[(!_vm.wasProcessed && _vm.eventIsInFuture && _vm.existingEventFetched)?_c('div',{staticClass:\"imip__actions imip__actions--buttons\"},[_c('Button',{attrs:{\"type\":\"secondary\",\"loading\":_vm.loading},on:{\"click\":_vm.accept}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Accept'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('Button',{attrs:{\"type\":\"tertiary\",\"loading\":_vm.loading},on:{\"click\":_vm.decline}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Decline'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('Button',{attrs:{\"type\":\"tertiary\",\"loading\":_vm.loading},on:{\"click\":_vm.acceptTentatively}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Tentatively accept'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),(!_vm.showMoreOptions)?_c('Button',{attrs:{\"type\":\"tertiary\"},on:{\"click\":function($event){_vm.showMoreOptions = true}}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'More options'))+\"\\n\\t\\t\\t\")]):_vm._e()],1):(!_vm.eventIsInFuture)?_c('p',{staticClass:\"imip__actions imip__actions--hint\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'This event is in the past.'))+\"\\n\\t\\t\")]):_vm._e()]:_vm._e()],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=style&index=0&id=1be9f328&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=style&index=0&id=1be9f328&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./Message.vue?vue&type=template&id=1be9f328&scoped=true&\"\nimport script from \"./Message.vue?vue&type=script&lang=js&\"\nexport * from \"./Message.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Message.vue?vue&type=style&index=0&id=1be9f328&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1be9f328\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{class:[_vm.message.hasHtmlBody ? 'mail-message-body mail-message-body-html' : 'mail-message-body'],attrs:{\"role\":\"region\",\"aria-label\":_vm.t('mail','Message body')}},[(_vm.itineraries.length > 0)?_c('div',{staticClass:\"message-itinerary\"},[_c('Itinerary',{attrs:{\"entries\":_vm.itineraries,\"message-id\":_vm.message.messageId}})],1):_vm._e(),_vm._v(\" \"),(_vm.message.scheduling.length > 0)?_c('div',{staticClass:\"message-imip\"},_vm._l((_vm.message.scheduling),function(scheduling){return _c('Imip',{key:scheduling.id,attrs:{\"scheduling\":scheduling}})}),1):_vm._e(),_vm._v(\" \"),(_vm.message.hasHtmlBody)?_c('MessageHTMLBody',{attrs:{\"url\":_vm.htmlUrl,\"message\":_vm.message,\"full-height\":_vm.fullHeight}}):(_vm.isEncrypted)?_c('MessageEncryptedBody',{attrs:{\"body\":_vm.message.body,\"from\":_vm.from,\"message\":_vm.message}}):_c('MessagePlainTextBody',{attrs:{\"body\":_vm.message.body,\"signature\":_vm.message.signature,\"message\":_vm.message}}),_vm._v(\" \"),_c('MessageAttachments',{attrs:{\"attachments\":_vm.message.attachments,\"envelope\":_vm.envelope}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"reply-composer\"}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!-- Standard Actions menu for Envelopes -->\n<template>\n\t<div>\n\t\t<Actions\n\t\t\tmenu-align=\"right\"\n\t\t\tevent=\"\"\n\t\t\t@click.native.prevent>\n\t\t\t<template v-if=\"!moreActionsOpen\">\n\t\t\t\t<ActionButton\n\t\t\t\t\tclass=\"action--primary\"\n\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t@click.prevent=\"onToggleImportant\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<ImportantIcon\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{\n\t\t\t\t\t\tisImportant ? t('mail', 'Unimportant') : t('mail', 'Important')\n\t\t\t\t\t}}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton v-if=\"withReply\"\n\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t@click=\"onReply\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<ReplyAllIcon v-if=\"hasMultipleRecipients\"\n\t\t\t\t\t\t\t:title=\"t('mail', 'Reply all')\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t\t<ReplyIcon v-else\n\t\t\t\t\t\t\t:title=\"t('mail', 'Reply')\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('mail', 'Reply') }}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton v-if=\"hasMultipleRecipients\"\n\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t@click=\"onReply(true)\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<ReplyIcon\n\t\t\t\t\t\t\t:title=\"t('mail', 'Reply to sender only')\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('mail', 'Reply to sender only') }}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton :close-after-click=\"true\"\n\t\t\t\t\t@click=\"onForward\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<ShareIcon\n\t\t\t\t\t\t\t:title=\"t('mail', 'Forward')\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('mail', 'Forward') }}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton :close-after-click=\"true\"\n\t\t\t\t\t@click.prevent=\"onToggleJunk\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<AlertOctagonIcon\n\t\t\t\t\t\t\t:title=\"envelope.flags.$junk ? t('mail', 'Mark not spam') : t('mail', 'Mark as spam')\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{\n\t\t\t\t\t\tenvelope.flags.$junk ? t('mail', 'Mark not spam') : t('mail', 'Mark as spam')\n\t\t\t\t\t}}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton :close-after-click=\"true\"\n\t\t\t\t\t@click.prevent=\"onOpenTagModal\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<TagIcon\n\t\t\t\t\t\t\t:title=\"t('mail', 'Edit tags')\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('mail', 'Edit tags') }}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton v-if=\"withSelect\"\n\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t@click.prevent=\"toggleSelected\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<CheckIcon\n\t\t\t\t\t\t\t:title=\"isSelected ? t('mail', 'Unselect') : t('mail', 'Select')\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{\n\t\t\t\t\t\tisSelected ? t('mail', 'Unselect') : t('mail', 'Select')\n\t\t\t\t\t}}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton :close-after-click=\"true\"\n\t\t\t\t\t@click.prevent=\"onOpenMoveModal\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<OpenInNewIcon\n\t\t\t\t\t\t\t:title=\"t('mail', 'Move message')\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('mail', 'Move message') }}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton :close-after-click=\"false\"\n\t\t\t\t\t@click=\"moreActionsOpen=true\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<DotsHorizontalIcon\n\t\t\t\t\t\t\t:title=\"t('mail', 'More actions')\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('mail', 'More actions') }}\n\t\t\t\t</ActionButton>\n\t\t\t</template>\n\t\t\t<template v-if=\"moreActionsOpen\">\n\t\t\t\t<ActionButton :close-after-click=\"false\"\n\t\t\t\t\t@click=\"moreActionsOpen=false\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<ChevronLeft\n\t\t\t\t\t\t\t:title=\"t('mail', 'More actions')\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t\t{{ t('mail', 'More actions') }}\n\t\t\t\t\t</template>\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton :close-after-click=\"true\"\n\t\t\t\t\t@click.prevent=\"forwardSelectedAsAttachment\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<ShareIcon\n\t\t\t\t\t\t\t:title=\"t('mail', 'Forward message as attachment')\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('mail', 'Forward message as attachment') }}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton :close-after-click=\"true\"\n\t\t\t\t\t@click=\"onOpenEditAsNew\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<PlusIcon\n\t\t\t\t\t\t\t:title=\"t('mail', 'Edit as new message')\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('mail', 'Edit as new message') }}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton :close-after-click=\"true\"\n\t\t\t\t\t@click.prevent=\"showEventModal = true\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<CalendarBlankIcon\n\t\t\t\t\t\t\t:title=\"t('mail', 'Create event')\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('mail', 'Create event') }}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton v-if=\"withShowSource\"\n\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t@click.prevent=\"onShowSourceModal\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<InformationIcon\n\t\t\t\t\t\t\t:title=\"t('mail', 'View source')\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('mail', 'View source') }}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionLink\n\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t:href=\"exportMessageLink\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<DownloadIcon :size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('mail', 'Download message') }}\n\t\t\t\t</ActionLink>\n\t\t\t\t<ActionLink v-if=\"debug\"\n\t\t\t\t\t:download=\"threadingFileName\"\n\t\t\t\t\t:href=\"threadingFile\"\n\t\t\t\t\t:close-after-click=\"true\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<DownloadIcon\n\t\t\t\t\t\t\t:title=\"t('mail', 'Download thread data for debugging')\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('mail', 'Download thread data for debugging') }}\n\t\t\t\t</ActionLink>\n\t\t\t</template>\n\t\t</Actions>\n\t\t<Modal v-if=\"showSourceModal\" class=\"source-modal\" @close=\"onCloseSourceModal\">\n\t\t\t<div class=\"source-modal-content\">\n\t\t\t\t<div class=\"section\">\n\t\t\t\t\t<h2>{{ t('mail', 'Message source') }}</h2>\n\t\t\t\t\t<pre class=\"message-source\">{{ rawMessage }}</pre>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Modal>\n\t\t<MoveModal v-if=\"showMoveModal\"\n\t\t\t:account=\"account\"\n\t\t\t:envelopes=\"[envelope]\"\n\t\t\t@move=\"onMove\"\n\t\t\t@close=\"onCloseMoveModal\" />\n\t\t<EventModal v-if=\"showEventModal\"\n\t\t\t:envelope=\"envelope\"\n\t\t\t@close=\"showEventModal = false\" />\n\t\t<TagModal\n\t\t\tv-if=\"showTagModal\"\n\t\t\t:account=\"account\"\n\t\t\t:envelope=\"envelope\"\n\t\t\t@close=\"onCloseTagModal\" />\n\t</div>\n</template>\n\n<script>\nimport axios from '@nextcloud/axios'\nimport { NcActions as Actions, NcActionButton as ActionButton, NcActionLink as ActionLink, NcModal as Modal } from '@nextcloud/vue'\nimport AlertOctagonIcon from 'vue-material-design-icons/AlertOctagon'\nimport { Base64 } from 'js-base64'\nimport { buildRecipients as buildReplyRecipients } from '../ReplyBuilder'\nimport CalendarBlankIcon from 'vue-material-design-icons/CalendarBlank'\nimport CheckIcon from 'vue-material-design-icons/Check'\nimport ChevronLeft from 'vue-material-design-icons/ChevronLeft'\nimport DotsHorizontalIcon from 'vue-material-design-icons/DotsHorizontal'\nimport DownloadIcon from 'vue-material-design-icons/Download'\nimport EventModal from './EventModal'\nimport { generateUrl } from '@nextcloud/router'\nimport InformationIcon from 'vue-material-design-icons/Information'\nimport ImportantIcon from './icons/ImportantIcon'\nimport MoveModal from './MoveModal'\nimport OpenInNewIcon from 'vue-material-design-icons/OpenInNew'\nimport PlusIcon from 'vue-material-design-icons/Plus'\nimport ReplyIcon from 'vue-material-design-icons/Reply'\nimport ReplyAllIcon from 'vue-material-design-icons/ReplyAll'\nimport ShareIcon from 'vue-material-design-icons/Share'\n\nimport TagIcon from 'vue-material-design-icons/Tag'\nimport TagModal from './TagModal'\n\nexport default {\n\tname: 'MenuEnvelope',\n\tcomponents: {\n\t\tActions,\n\t\tActionButton,\n\t\tActionLink,\n\t\tAlertOctagonIcon,\n\t\tCalendarBlankIcon,\n\t\tChevronLeft,\n\t\tCheckIcon,\n\t\tDotsHorizontalIcon,\n\t\tDownloadIcon,\n\t\tEventModal,\n\t\tInformationIcon,\n\t\tModal,\n\t\tMoveModal,\n\t\tOpenInNewIcon,\n\t\tPlusIcon,\n\t\tReplyIcon,\n\t\tReplyAllIcon,\n\t\tShareIcon,\n\t\tTagIcon,\n\t\tTagModal,\n\t\tImportantIcon,\n\t},\n\tprops: {\n\t\tenvelope: {\n\t\t\t// The envelope on which this menu will act\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tmailbox: {\n\t\t\t// It is just used to get the accountId when envelope doesn't have it\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: undefined,\n\t\t},\n\t\tisSelected: {\n\t\t\t// Indicates if the envelope is currently selected\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\twithReply: {\n\t\t\t// \"Reply\" action should only appear in envelopes from the envelope list\n\t\t\t// (Because in thread envelopes, this action is already set as primary button of this menu)\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\twithSelect: {\n\t\t\t// \"Select\" action should only appear in envelopes from the envelope list\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\twithShowSource: {\n\t\t\t// \"Show source\" action should only appear in thread envelopes\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tdebug: window?.OC?.debug || false,\n\t\t\trawMessage: '', // Will hold the raw source of the message when requested\n\t\t\tshowSourceModal: false,\n\t\t\tshowMoveModal: false,\n\t\t\tshowEventModal: false,\n\t\t\tshowTagModal: false,\n\t\t\tmoreActionsOpen: false,\n\t\t\tforwardMessages: this.envelope.databaseId,\n\t\t}\n\t},\n\tcomputed: {\n\t\taccount() {\n\t\t\tconst accountId = this.envelope.accountId ?? this.mailbox.accountId\n\t\t\treturn this.$store.getters.getAccount(accountId)\n\t\t},\n\t\thasMultipleRecipients() {\n\t\t\tif (!this.account) {\n\t\t\t\tconsole.error('account is undefined', {\n\t\t\t\t\taccountId: this.envelope.accountId,\n\t\t\t\t})\n\t\t\t}\n\t\t\tconst recipients = buildReplyRecipients(this.envelope, {\n\t\t\t\tlabel: this.account.name,\n\t\t\t\temail: this.account.emailAddress,\n\t\t\t})\n\t\t\treturn recipients.to.concat(recipients.cc).length > 1\n\t\t},\n\t\tthreadingFile() {\n\t\t\treturn `data:text/plain;base64,${Base64.encode(JSON.stringify({\n\t\t\t\tsubject: this.envelope.subject,\n\t\t\t\tmessageId: this.envelope.messageId,\n\t\t\t\tinReplyTo: this.envelope.inReplyTo,\n\t\t\t\treferences: this.envelope.references,\n\t\t\t\tthreadRootId: this.envelope.threadRootId,\n\t\t\t}, null, 2))}`\n\t\t},\n\t\tthreadingFileName() {\n\t\t\treturn `${this.envelope.databaseId}.json`\n\t\t},\n\t\tshowFavoriteIconVariant() {\n\t\t\treturn this.envelope.flags.flagged\n\t\t},\n\t\tshowImportantIconVariant() {\n\t\t\treturn this.envelope.flags.seen\n\t\t},\n\t\tisImportant() {\n\t\t\treturn this.$store.getters\n\t\t\t\t.getEnvelopeTags(this.envelope.databaseId)\n\t\t\t\t.some((tag) => tag.imapLabel === '$label1')\n\t\t},\n\t\t/**\n\t\t * Link to download the whole message (.eml).\n\t\t *\n\t\t * @return {string}\n\t\t */\n\t\texportMessageLink() {\n\t\t\treturn generateUrl('/apps/mail/api/messages/{id}/export', {\n\t\t\t\tid: this.envelope.databaseId,\n\t\t\t})\n\t\t},\n\t},\n\tmethods: {\n\t\tonForward() {\n\t\t\tthis.$store.dispatch('showMessageComposer', {\n\t\t\t\treply: {\n\t\t\t\t\tmode: 'forward',\n\t\t\t\t\tdata: this.envelope,\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t\tonToggleFlagged() {\n\t\t\tthis.$store.dispatch('toggleEnvelopeFlagged', this.envelope)\n\t\t},\n\t\tonToggleImportant() {\n\t\t\tthis.$store.dispatch('toggleEnvelopeImportant', this.envelope)\n\t\t},\n\t\tonToggleSeen() {\n\t\t\tthis.$store.dispatch('toggleEnvelopeSeen', { envelope: this.envelope })\n\t\t},\n\t\tonToggleJunk() {\n\t\t\tthis.$store.dispatch('toggleEnvelopeJunk', this.envelope)\n\t\t},\n\t\ttoggleSelected() {\n\t\t\tthis.$emit('update:selected')\n\t\t},\n\t\tasync forwardSelectedAsAttachment() {\n\t\t\tthis.forwardedMessages = [this.envelope.databaseId]\n\t\t\tawait this.$store.dispatch('showMessageComposer', {\n\t\t\t\tforwardedMessages: this.forwardedMessages,\n\t\t\t})\n\t\t},\n\t\tasync onShowSourceModal() {\n\t\t\tconst resp = await axios.get(\n\t\t\t\tgenerateUrl('/apps/mail/api/messages/{id}/source', {\n\t\t\t\t\tid: this.envelope.databaseId,\n\t\t\t\t})\n\t\t\t)\n\n\t\t\tthis.rawMessage = resp.data.source\n\t\t\tthis.showSourceModal = true\n\t\t},\n\t\tonCloseSourceModal() {\n\t\t\tthis.showSourceModal = false\n\t\t},\n\t\tonMove() {\n\t\t\tthis.$emit('move')\n\t\t},\n\t\tonOpenMoveModal() {\n\t\t\tthis.showMoveModal = true\n\t\t},\n\t\tonCloseMoveModal() {\n\t\t\tthis.showMoveModal = false\n\t\t},\n\t\tonOpenEventModal() {\n\t\t\tthis.showEventModal = true\n\t\t},\n\t\tonOpenTagModal() {\n\t\t\tthis.showTagModal = true\n\t\t},\n\t\tonReply(onlySender = false) {\n\t\t\tthis.$store.dispatch('showMessageComposer', {\n\t\t\t\treply: {\n\t\t\t\t\tmode: onlySender ? 'reply' : 'replyAll',\n\t\t\t\t\tdata: this.envelope,\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t\tonCloseTagModal() {\n\t\t\tthis.showTagModal = false\n\t\t},\n\t\tasync onOpenEditAsNew() {\n\t\t\tawait this.$store.dispatch('showMessageComposer', {\n\t\t\t\ttemplateMessageId: this.envelope.databaseId,\n\t\t\t\tdata: this.envelope,\n\t\t\t})\n\t\t},\n\t},\n}\n</script>\n<style lang=\"scss\" scoped>\n\t.source-modal {\n\t\t::v-deep .modal-container {\n\t\t\theight: 800px;\n\t\t}\n\n\t\t.source-modal-content {\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t\toverflow-y: scroll !important;\n\t\t}\n\t}\n\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuEnvelope.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuEnvelope.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuEnvelope.vue?vue&type=style&index=0&id=49eb8878&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuEnvelope.vue?vue&type=style&index=0&id=49eb8878&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./MenuEnvelope.vue?vue&type=template&id=49eb8878&scoped=true&\"\nimport script from \"./MenuEnvelope.vue?vue&type=script&lang=js&\"\nexport * from \"./MenuEnvelope.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MenuEnvelope.vue?vue&type=style&index=0&id=49eb8878&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"49eb8878\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('Actions',{attrs:{\"menu-align\":\"right\",\"event\":\"\"},nativeOn:{\"click\":function($event){$event.preventDefault();}}},[(!_vm.moreActionsOpen)?[_c('ActionButton',{staticClass:\"action--primary\",attrs:{\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleImportant.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('ImportantIcon',{attrs:{\"size\":20}})]},proxy:true}],null,false,4006335173)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.isImportant ? _vm.t('mail', 'Unimportant') : _vm.t('mail', 'Important'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),(_vm.withReply)?_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":_vm.onReply},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [(_vm.hasMultipleRecipients)?_c('ReplyAllIcon',{attrs:{\"title\":_vm.t('mail', 'Reply all'),\"size\":20}}):_c('ReplyIcon',{attrs:{\"title\":_vm.t('mail', 'Reply'),\"size\":20}})]},proxy:true}],null,false,1812719128)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Reply'))+\"\\n\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.hasMultipleRecipients)?_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":function($event){return _vm.onReply(true)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('ReplyIcon',{attrs:{\"title\":_vm.t('mail', 'Reply to sender only'),\"size\":20}})]},proxy:true}],null,false,1847095553)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Reply to sender only'))+\"\\n\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":_vm.onForward},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('ShareIcon',{attrs:{\"title\":_vm.t('mail', 'Forward'),\"size\":20}})]},proxy:true}],null,false,3681882419)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Forward'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleJunk.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('AlertOctagonIcon',{attrs:{\"title\":_vm.envelope.flags.$junk ? _vm.t('mail', 'Mark not spam') : _vm.t('mail', 'Mark as spam'),\"size\":20}})]},proxy:true}],null,false,3018406441)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.envelope.flags.$junk ? _vm.t('mail', 'Mark not spam') : _vm.t('mail', 'Mark as spam'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onOpenTagModal.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('TagIcon',{attrs:{\"title\":_vm.t('mail', 'Edit tags'),\"size\":20}})]},proxy:true}],null,false,1760434282)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Edit tags'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),(_vm.withSelect)?_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.toggleSelected.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('CheckIcon',{attrs:{\"title\":_vm.isSelected ? _vm.t('mail', 'Unselect') : _vm.t('mail', 'Select'),\"size\":20}})]},proxy:true}],null,false,3004720510)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.isSelected ? _vm.t('mail', 'Unselect') : _vm.t('mail', 'Select'))+\"\\n\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onOpenMoveModal.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('OpenInNewIcon',{attrs:{\"title\":_vm.t('mail', 'Move message'),\"size\":20}})]},proxy:true}],null,false,3082800176)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Move message'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"close-after-click\":false},on:{\"click\":function($event){_vm.moreActionsOpen=true}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('DotsHorizontalIcon',{attrs:{\"title\":_vm.t('mail', 'More actions'),\"size\":20}})]},proxy:true}],null,false,2458825807)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'More actions'))+\"\\n\\t\\t\\t\")])]:_vm._e(),_vm._v(\" \"),(_vm.moreActionsOpen)?[_c('ActionButton',{attrs:{\"close-after-click\":false},on:{\"click\":function($event){_vm.moreActionsOpen=false}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('ChevronLeft',{attrs:{\"title\":_vm.t('mail', 'More actions'),\"size\":20}}),_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'More actions'))+\"\\n\\t\\t\\t\\t\")]},proxy:true}],null,false,2293545807)}),_vm._v(\" \"),_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.forwardSelectedAsAttachment.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('ShareIcon',{attrs:{\"title\":_vm.t('mail', 'Forward message as attachment'),\"size\":20}})]},proxy:true}],null,false,1446130195)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Forward message as attachment'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":_vm.onOpenEditAsNew},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('PlusIcon',{attrs:{\"title\":_vm.t('mail', 'Edit as new message'),\"size\":20}})]},proxy:true}],null,false,2673016614)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Edit as new message'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();_vm.showEventModal = true}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('CalendarBlankIcon',{attrs:{\"title\":_vm.t('mail', 'Create event'),\"size\":20}})]},proxy:true}],null,false,3283461621)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Create event'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),(_vm.withShowSource)?_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onShowSourceModal.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('InformationIcon',{attrs:{\"title\":_vm.t('mail', 'View source'),\"size\":20}})]},proxy:true}],null,false,3604652729)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'View source'))+\"\\n\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),_c('ActionLink',{attrs:{\"close-after-click\":true,\"href\":_vm.exportMessageLink},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('DownloadIcon',{attrs:{\"size\":20}})]},proxy:true}],null,false,2598526839)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Download message'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),(_vm.debug)?_c('ActionLink',{attrs:{\"download\":_vm.threadingFileName,\"href\":_vm.threadingFile,\"close-after-click\":true},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('DownloadIcon',{attrs:{\"title\":_vm.t('mail', 'Download thread data for debugging'),\"size\":20}})]},proxy:true}],null,false,1608243158)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Download thread data for debugging'))+\"\\n\\t\\t\\t\")]):_vm._e()]:_vm._e()],2),_vm._v(\" \"),(_vm.showSourceModal)?_c('Modal',{staticClass:\"source-modal\",on:{\"close\":_vm.onCloseSourceModal}},[_c('div',{staticClass:\"source-modal-content\"},[_c('div',{staticClass:\"section\"},[_c('h2',[_vm._v(_vm._s(_vm.t('mail', 'Message source')))]),_vm._v(\" \"),_c('pre',{staticClass:\"message-source\"},[_vm._v(_vm._s(_vm.rawMessage))])])])]):_vm._e(),_vm._v(\" \"),(_vm.showMoveModal)?_c('MoveModal',{attrs:{\"account\":_vm.account,\"envelopes\":[_vm.envelope]},on:{\"move\":_vm.onMove,\"close\":_vm.onCloseMoveModal}}):_vm._e(),_vm._v(\" \"),(_vm.showEventModal)?_c('EventModal',{attrs:{\"envelope\":_vm.envelope},on:{\"close\":function($event){_vm.showEventModal = false}}}):_vm._e(),_vm._v(\" \"),(_vm.showTagModal)?_c('TagModal',{attrs:{\"account\":_vm.account,\"envelope\":_vm.envelope},on:{\"close\":_vm.onCloseTagModal}}):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Moment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Moment.vue?vue&type=script&lang=js&\"","<template>\n\t<span :data-timestamp=\"timestamp * 1000\" :title=\"title\">{{ formatted }}</span>\n</template>\n\n<script>\nimport moment from '@nextcloud/moment'\nimport { shortRelativeDatetime } from '../util/shortRelativeDatetime'\n\nexport default {\n\tname: 'Moment',\n\tprops: {\n\t\ttimestamp: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tformat: {\n\t\t\ttype: String,\n\t\t\tdefault: 'LLL',\n\t\t},\n\t},\n\tcomputed: {\n\t\ttitle() {\n\t\t\treturn moment.unix(this.timestamp).format(this.format)\n\t\t},\n\t\tformatted() {\n\t\t\treturn shortRelativeDatetime(new Date(this.timestamp * 1000))\n\t\t},\n\t},\n}\n</script>\n","import { render, staticRenderFns } from \"./Moment.vue?vue&type=template&id=a4adcc90&\"\nimport script from \"./Moment.vue?vue&type=script&lang=js&\"\nexport * from \"./Moment.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('span',{attrs:{\"data-timestamp\":_vm.timestamp * 1000,\"title\":_vm.title}},[_vm._v(_vm._s(_vm.formatted))])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n  - @copyright 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n  - @author 2021 Richard Steinmetz <richard@steinmetz.cloud>\n  - @author 2022 Jonas Sulzer <jonas@violoncello.ch>\n  -\n  - @license AGPL-3.0-or-later\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<div class=\"envelope\">\n\t\t<div class=\"envelope--header\"\n\t\t\t:class=\"{'list-item-style' : expanded }\">\n\t\t\t<Avatar v-if=\"envelope.from && envelope.from[0]\"\n\t\t\t\t:email=\"envelope.from[0].email\"\n\t\t\t\t:display-name=\"envelope.from[0].label\"\n\t\t\t\t:disable-tooltip=\"true\"\n\t\t\t\t:size=\"40\" />\n\t\t\t<div\n\t\t\t\tv-if=\"isImportant\"\n\t\t\t\tclass=\"app-content-list-item-star icon-important\"\n\t\t\t\t:data-starred=\"isImportant ? 'true' : 'false'\"\n\t\t\t\t@click.prevent=\"onToggleImportant\"\n\t\t\t\tv-html=\"importantSvg\" />\n\t\t\t<IconFavorite\n\t\t\t\tv-if=\"envelope.flags.flagged\"\n\t\t\t\tfill-color=\"#f9cf3d\"\n\t\t\t\t:size=\"18\"\n\t\t\t\t:class=\"{ 'junk-favorite-position': junkFavoritePosition, 'junk-favorite-position-with-tag-subline': junkFavoritePositionWithTagSubline }\"\n\t\t\t\tclass=\"app-content-list-item-star favorite-icon-style\"\n\t\t\t\t:data-starred=\"envelope.flags.flagged ? 'true' : 'false'\"\n\t\t\t\t@click.prevent=\"onToggleFlagged\" />\n\t\t\t<JunkIcon\n\t\t\t\tv-if=\"envelope.flags.$junk\"\n\t\t\t\t:size=\"18\"\n\t\t\t\t:class=\"{ 'junk-favorite-position': junkFavoritePosition, 'junk-favorite-position-with-tag-subline': junkFavoritePositionWithTagSubline }\"\n\t\t\t\tclass=\"app-content-list-item-star junk-icon-style\"\n\t\t\t\t:data-starred=\"envelope.flags.$junk ? 'true' : 'false'\"\n\t\t\t\t@click.prevent=\"onToggleJunk\" />\n\t\t\t<router-link\n\t\t\t\t:to=\"route\"\n\t\t\t\tevent=\"\"\n\t\t\t\tclass=\"left\"\n\t\t\t\t:class=\"{seen: envelope.flags.seen}\"\n\t\t\t\t@click.native.prevent=\"$emit('toggle-expand', $event)\">\n\t\t\t\t<div class=\"sender\">\n\t\t\t\t\t{{ envelope.from && envelope.from[0] ? envelope.from[0].label : '' }}\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"showSubline\" class=\"subline\">\n\t\t\t\t\t<span class=\"preview\">\n\t\t\t\t\t\t{{ envelope.previewText }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div v-for=\"tag in tags\"\n\t\t\t\t\t:key=\"tag.id\"\n\t\t\t\t\tclass=\"tag-group\">\n\t\t\t\t\t<div class=\"tag-group__bg\"\n\t\t\t\t\t\t:style=\"{'background-color': tag.color}\" />\n\t\t\t\t\t<span class=\"tag-group__label\"\n\t\t\t\t\t\t:style=\"{color: tag.color}\">{{ tag.displayName }} </span>\n\t\t\t\t</div>\n\t\t\t</router-link>\n\t\t\t<div class=\"right\">\n\t\t\t\t<Moment class=\"timestamp\" :timestamp=\"envelope.dateInt\" />\n\t\t\t\t<template v-if=\"expanded\">\n\t\t\t\t\t<ButtonVue\n\t\t\t\t\t\t:class=\"{ primary: expanded}\"\n\t\t\t\t\t\t:title=\"hasMultipleRecipients ? t('mail', 'Reply all') : t('mail', 'Reply')\"\n\t\t\t\t\t\ttype=\"tertiary-no-background\"\n\t\t\t\t\t\t@click=\"onReply\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<ReplyAllIcon v-if=\"hasMultipleRecipients\"\n\t\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t\t\t<ReplyIcon v-else\n\t\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</ButtonVue>\n\t\t\t\t\t<ButtonVue\n\t\t\t\t\t\ttype=\"tertiary-no-background\"\n\t\t\t\t\t\tclass=\"action--primary\"\n\t\t\t\t\t\t:title=\"envelope.flags.flagged ? t('mail', 'Mark as unfavorite') : t('mail', 'Mark as favorite')\"\n\t\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t\t@click.prevent=\"onToggleFlagged\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<StarOutline v-if=\"showFavoriteIconVariant\"\n\t\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t\t\t<IconFavorite v-else\n\t\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</ButtonVue>\n\t\t\t\t\t<ButtonVue\n\t\t\t\t\t\ttype=\"tertiary-no-background\"\n\t\t\t\t\t\tclass=\"action--primary\"\n\t\t\t\t\t\t:title=\"envelope.flags.seen ? t('mail', 'Mark as unread') : t('mail', 'Mark as read')\"\n\t\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t\t@click.prevent=\"onToggleSeen\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<EmailRead v-if=\"showImportantIconVariant\"\n\t\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t\t\t<EmailUnread v-else\n\t\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</ButtonVue>\n\t\t\t\t\t<ButtonVue :close-after-click=\"true\"\n\t\t\t\t\t\ttype=\"tertiary-no-background\"\n\t\t\t\t\t\t@click.prevent=\"onDelete\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<DeleteIcon\n\t\t\t\t\t\t\t\t:title=\"t('mail', 'Delete message')\"\n\t\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</ButtonVue>\n\t\t\t\t\t<MenuEnvelope class=\"app-content-list-item-menu\"\n\t\t\t\t\t\t:envelope=\"envelope\"\n\t\t\t\t\t\t:with-reply=\"false\"\n\t\t\t\t\t\t:with-select=\"false\"\n\t\t\t\t\t\t:with-show-source=\"true\"\n\t\t\t\t\t\t@delete=\"$emit('delete',envelope.databaseId)\" />\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t</div>\n\t\t<Loading v-if=\"loading\" />\n\t\t<Message v-else-if=\"message\"\n\t\t\t:envelope=\"envelope\"\n\t\t\t:message=\"message\"\n\t\t\t:full-height=\"fullHeight\" />\n\t\t<Error v-else-if=\"error\"\n\t\t\t:error=\"error && error.message ? error.message : t('mail', 'Not found')\"\n\t\t\t:message=\"errorMessage\"\n\t\t\t:data=\"error\"\n\t\t\trole=\"alert\" />\n\t</div>\n</template>\n<script>\nimport Avatar from './Avatar'\nimport { NcButton as ButtonVue } from '@nextcloud/vue'\nimport Error from './Error'\nimport importantSvg from '../../img/important.svg'\nimport IconFavorite from 'vue-material-design-icons/Star'\nimport JunkIcon from './icons/JunkIcon'\nimport Loading from './Loading'\nimport logger from '../logger'\nimport Message from './Message'\nimport MenuEnvelope from './MenuEnvelope'\nimport Moment from './Moment'\nimport ReplyIcon from 'vue-material-design-icons/Reply'\nimport ReplyAllIcon from 'vue-material-design-icons/ReplyAll'\nimport StarOutline from 'vue-material-design-icons/StarOutline'\nimport DeleteIcon from 'vue-material-design-icons/Delete'\nimport EmailUnread from 'vue-material-design-icons/Email'\nimport EmailRead from 'vue-material-design-icons/EmailOpen'\nimport { buildRecipients as buildReplyRecipients } from '../ReplyBuilder'\nimport { hiddenTags } from './tags.js'\nimport { showError } from '@nextcloud/dialogs'\nimport { matchError } from '../errors/match'\nimport NoTrashMailboxConfiguredError from '../errors/NoTrashMailboxConfiguredError'\n\nexport default {\n\tname: 'ThreadEnvelope',\n\tcomponents: {\n\t\tAvatar,\n\t\tButtonVue,\n\t\tError,\n\t\tIconFavorite,\n\t\tJunkIcon,\n\t\tLoading,\n\t\tMenuEnvelope,\n\t\tMoment,\n\t\tMessage,\n\t\tReplyIcon,\n\t\tReplyAllIcon,\n\t\tStarOutline,\n\t\tEmailRead,\n\t\tEmailUnread,\n\t\tDeleteIcon,\n\n\t},\n\tprops: {\n\t\tenvelope: {\n\t\t\trequired: true,\n\t\t\ttype: Object,\n\t\t},\n\t\tmailboxId: {\n\t\t\trequired: false,\n\t\t\ttype: [\n\t\t\t\tString,\n\t\t\t\tNumber,\n\t\t\t],\n\t\t\tdefault: undefined,\n\t\t},\n\t\texpanded: {\n\t\t\trequired: false,\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tfullHeight: {\n\t\t\trequired: false,\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\twithSelect: {\n\t\t\t// \"Select\" action should only appear in envelopes from the envelope list\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tloading: false,\n\t\t\terror: undefined,\n\t\t\tmessage: undefined,\n\t\t\timportantSvg,\n\t\t\tseenTimer: undefined,\n\t\t}\n\t},\n\tcomputed: {\n\t\taccount() {\n\t\t\treturn this.$store.getters.getAccount(this.envelope.accountId)\n\t\t},\n\t\thasMultipleRecipients() {\n\t\t\tif (!this.account) {\n\t\t\t\tconsole.error('account is undefined', {\n\t\t\t\t\taccountId: this.envelope.accountId,\n\t\t\t\t})\n\t\t\t}\n\t\t\tconst recipients = buildReplyRecipients(this.envelope, {\n\t\t\t\tlabel: this.account.name,\n\t\t\t\temail: this.account.emailAddress,\n\t\t\t})\n\t\t\treturn recipients.to.concat(recipients.cc).length > 1\n\t\t},\n\t\troute() {\n\t\t\treturn {\n\t\t\t\tname: 'message',\n\t\t\t\tparams: {\n\t\t\t\t\tmailboxId: this.mailboxId || this.envelope.mailboxId,\n\t\t\t\t\tthreadId: this.envelope.databaseId,\n\t\t\t\t},\n\t\t\t}\n\t\t},\n\t\tisImportant() {\n\t\t\treturn this.$store.getters\n\t\t\t\t.getEnvelopeTags(this.envelope.databaseId)\n\t\t\t\t.find((tag) => tag.imapLabel === '$label1')\n\t\t},\n\t\ttags() {\n\t\t\treturn this.$store.getters.getEnvelopeTags(this.envelope.databaseId).filter(\n\t\t\t\t(tag) => tag.imapLabel !== '$label1' && !(tag.displayName.toLowerCase() in hiddenTags)\n\t\t\t)\n\t\t},\n\t\tshowSubline() {\n\t\t\treturn !this.expanded && !!this.envelope.previewText\n\t\t},\n\t\tjunkFavoritePosition() {\n\t\t\treturn this.showSubline && this.tags.length > 0\n\t\t},\n\t\tjunkFavoritePositionWithTagSubline() {\n\t\t\treturn !this.showSubline && this.tags.length > 0\n\t\t},\n\t\tshowFavoriteIconVariant() {\n\t\t\treturn this.envelope.flags.flagged\n\t\t},\n\t\tshowImportantIconVariant() {\n\t\t\treturn this.envelope.flags.seen\n\t\t},\n\t},\n\twatch: {\n\t\texpanded(expanded) {\n\t\t\tif (expanded) {\n\t\t\t\tthis.fetchMessage()\n\t\t\t} else {\n\t\t\t\tthis.message = undefined\n\t\t\t}\n\t\t},\n\t},\n\tasync mounted() {\n\t\tif (this.expanded) {\n\t\t\tawait this.fetchMessage()\n\n\t\t\t// Only one envelope is expanded at the time of mounting so we can\n\t\t\t// assume that this is the relevant envelope to be scrolled to.\n\t\t\tthis.$nextTick(() => this.scrollToCurrentEnvelope())\n\t\t}\n\t},\n\tbeforeDestroy() {\n\t\tif (this.seenTimer !== undefined) {\n\t\t\tlogger.info('Navigating away before seenTimer delay, will not mark message as seen/read')\n\t\t\tclearTimeout(this.seenTimer)\n\t\t}\n\t},\n\tmethods: {\n\t\tasync fetchMessage() {\n\t\t\tthis.loading = true\n\n\t\t\tlogger.debug(`fetching thread message ${this.envelope.databaseId}`)\n\n\t\t\ttry {\n\t\t\t\tthis.message = await this.$store.dispatch('fetchMessage', this.envelope.databaseId)\n\t\t\t\tlogger.debug(`message ${this.envelope.databaseId} fetched`, { message: this.message })\n\n\t\t\t\tif (!this.envelope.flags.seen) {\n\t\t\t\t\tlogger.info('Starting timer to mark message as seen/read')\n\t\t\t\t\tthis.seenTimer = setTimeout(() => {\n\t\t\t\t\t\tthis.$store.dispatch('toggleEnvelopeSeen', { envelope: this.envelope })\n\t\t\t\t\t\tthis.seenTimer = undefined\n\t\t\t\t\t}, 2000)\n\t\t\t\t}\n\n\t\t\t\tthis.loading = false\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error('Could not fetch message', { error })\n\t\t\t}\n\n\t\t\t// Fetch itineraries if they haven't been included in the message data\n\t\t\tif (this.message && !this.message.itineraries) {\n\t\t\t\tawait this.fetchItineraries()\n\t\t\t}\n\t\t},\n\t\tasync fetchItineraries() {\n\t\t\t// Sanity check before actually making the request\n\t\t\tif (!this.message.hasHtmlBody && this.message.attachments.length === 0) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tlogger.debug(`Fetching itineraries for message ${this.envelope.databaseId}`)\n\n\t\t\ttry {\n\t\t\t\tconst itineraries = await this.$store.dispatch('fetchItineraries', this.envelope.databaseId)\n\t\t\t\tlogger.debug(`Itineraries of message ${this.envelope.databaseId} fetched`, { itineraries })\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error(`Could not fetch itineraries of message ${this.envelope.databaseId}`, { error })\n\t\t\t}\n\t\t},\n\t\tscrollToCurrentEnvelope() {\n\t\t\t// Account for global navigation bar and thread header\n\t\t\tconst globalHeader = document.querySelector('#header').clientHeight\n\t\t\tconst threadHeader = document.querySelector('#mail-thread-header').clientHeight\n\t\t\tconst top = this.$el.getBoundingClientRect().top - globalHeader - threadHeader\n\t\t\twindow.scrollTo({ top })\n\t\t},\n\t\tonReply() {\n\t\t\tthis.$store.dispatch('showMessageComposer', {\n\t\t\t\treply: {\n\t\t\t\t\tmode: this.hasMultipleRecipients ? 'replyAll' : 'reply',\n\t\t\t\t\tdata: this.envelope,\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t\tonToggleImportant() {\n\t\t\tthis.$store.dispatch('toggleEnvelopeImportant', this.envelope)\n\t\t},\n\t\tonToggleFlagged() {\n\t\t\tthis.$store.dispatch('toggleEnvelopeFlagged', this.envelope)\n\t\t},\n\t\tonToggleJunk() {\n\t\t\tthis.$store.dispatch('toggleEnvelopeJunk', this.envelope)\n\t\t},\n\t\tonToggleSeen() {\n\t\t\tthis.$store.dispatch('toggleEnvelopeSeen', { envelope: this.envelope })\n\t\t},\n\t\tasync onDelete() {\n\t\t\t// Remove from selection first\n\t\t\tif (this.withSelect) {\n\t\t\t\tthis.$emit('unselect')\n\t\t\t}\n\n\t\t\t// Delete\n\t\t\tthis.$emit('delete', this.envelope.databaseId)\n\n\t\t\tlogger.info(`deleting message ${this.envelope.databaseId}`)\n\n\t\t\ttry {\n\t\t\t\tawait this.$store.dispatch('deleteMessage', {\n\t\t\t\t\tid: this.envelope.databaseId,\n\t\t\t\t})\n\t\t\t} catch (error) {\n\t\t\t\tshowError(await matchError(error, {\n\t\t\t\t\t[NoTrashMailboxConfiguredError.getName()]() {\n\t\t\t\t\t\treturn t('mail', 'No trash mailbox configured')\n\t\t\t\t\t},\n\t\t\t\t\tdefault(error) {\n\t\t\t\t\t\tlogger.error('could not delete message', error)\n\t\t\t\t\t\treturn t('mail', 'Could not delete message')\n\t\t\t\t\t},\n\t\t\t\t}))\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n\t.sender {\n\t\tmargin-left: 8px;\n\t}\n\n\t.right {\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\talign-items: center;\n\t\tjustify-content: flex-end;\n\t\tmargin-left: 10px;\n\t\theight: 44px;\n\n\t\t.app-content-list-item-menu {\n\t\t\tmargin-left: 4px;\n\t\t}\n\n\t\t.timestamp {\n\t\t\tmargin-right: 10px;\n\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t\twhite-space: nowrap;\n\t\t\tmargin-bottom: 0;\n\t\t}\n\t}\n\t.button {\n\t\tcolor: var(--color-main-background);\n\t\t&:not(.active):not(.primary) {\n\t\t\tdisplay: none;\n\n\t\t\t&.primary {\n\t\t\t\tbackground-color: var(--color-primary);\n\t\t\t\topacity: 1;\n\t\t\t\tmargin-bottom: 0;\n\n\t\t\t}\n\t\t}\n\t}\n\t.subline {\n\t\tmargin-left: 8px;\n\t\tcolor: var(--color-text-maxcontrast);\n\t\tcursor: default;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\twhite-space: nowrap;\n\t}\n\n\t.envelope {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tborder: 2px solid var(--color-border);\n\t\tborder-radius: 16px;\n\t\tmargin-left: 10px;\n\t\tmargin-right: 10px;\n\t\tbackground-color: var(--color-main-background);\n\t\tpadding-bottom: 28px;\n\n\t\t& + .envelope {\n\t\t\tmargin-top: -28px;\n\t\t}\n\n\t\t&:last-of-type {\n\t\t\tmargin-bottom: 10px;\n\t\t\tpadding-bottom: 0;\n\t\t}\n\t}\n\n\t.envelope--header {\n\t\tposition: relative;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tpadding: 10px;\n\t\tborder-radius: var(--border-radius);\n\t\tmin-height: 68px; /* prevents jumping between open/collapsed */\n\t}\n\t.left {\n\t\tflex-grow: 1;\n\t\tmin-width: 0; /* https://css-tricks.com/flexbox-truncated-text/ */\n\t}\n\t.icon-important {\n\t\t::v-deep path {\n\t\t\tfill: #ffcc00;\n\t\t\tstroke: var(--color-main-background);\n\t\t\tcursor: pointer;\n\t\t}\n\n\t\t&.app-content-list-item-star {\n\t\t\tbackground-image: none;\n\t\t\tposition: absolute;\n\t\t\topacity: 1;\n\t\t\twidth: 16px;\n\t\t\theight: 16px;\n\t\t\tmargin-left: -1px;\n\t\t\tdisplay: flex;\n\t\t\ttop: 12px;\n\n\t\t\t&:hover,\n\t\t\t&:focus {\n\t\t\t\topacity: 0.5;\n\t\t\t}\n\t\t}\n\t}\n\t.app-content-list-item-star.favorite-icon-style {\n\t\tdisplay: inline-block;\n\t\tposition: absolute;\n\t\ttop: 10px;\n\t\tleft: 36px;\n\t\tcursor: pointer;\n\t\tstroke: var(--color-main-background);\n\t\tstroke-width: 2;\n\t\t&:hover {\n\t\t\topacity: .5;\n\t\t}\n\t}\n\t.app-content-list-item-star.junk-icon-style {\n\t\tdisplay: inline-block;\n\t\tposition: absolute;\n\t\ttop: 10px;\n\t\tleft: 36px;\n\t\tcursor: pointer;\n\t\topacity: .2;\n\t\t&:hover {\n\t\t\topacity: .1;\n\t\t}\n\t}\n\t.left:not(.seen) {\n\t\tfont-weight: bold;\n\t}\n\t.tag-group__label {\n\t\tmargin: 0 7px;\n\t\tz-index: 2;\n\t\tfont-size: calc(var(--default-font-size) * 0.8);\n\t\tfont-weight: bold;\n\t\tpadding-left: 2px;\n\t\tpadding-right: 2px;\n\t}\n\t.tag-group__bg {\n\t\tposition: absolute;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\topacity: 15%;\n\t}\n\t.tag-group {\n\t\tdisplay: inline-block;\n\t\tborder: 1px solid transparent;\n\t\tborder-radius: var(--border-radius-pill);\n\t\tposition: relative;\n\t\tmargin: 0 1px;\n\t\toverflow: hidden;\n\t\tleft: 4px;\n\t}\n\t.envelope--header.list-item-style {\n\t\tborder-radius: 16px;\n\t}\n\t.junk-favorite-position-with-tag-subline {\n\t\tmargin-bottom: 14px !important;\n\t}\n\t.junk-favorite-position {\n\t\tmargin-bottom: 36px !important;\n\t}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ThreadEnvelope.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ThreadEnvelope.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ThreadEnvelope.vue?vue&type=style&index=0&id=0e2a1146&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ThreadEnvelope.vue?vue&type=style&index=0&id=0e2a1146&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./ThreadEnvelope.vue?vue&type=template&id=0e2a1146&scoped=true&\"\nimport script from \"./ThreadEnvelope.vue?vue&type=script&lang=js&\"\nexport * from \"./ThreadEnvelope.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ThreadEnvelope.vue?vue&type=style&index=0&id=0e2a1146&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0e2a1146\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"envelope\"},[_c('div',{staticClass:\"envelope--header\",class:{'list-item-style' : _vm.expanded }},[(_vm.envelope.from && _vm.envelope.from[0])?_c('Avatar',{attrs:{\"email\":_vm.envelope.from[0].email,\"display-name\":_vm.envelope.from[0].label,\"disable-tooltip\":true,\"size\":40}}):_vm._e(),_vm._v(\" \"),(_vm.isImportant)?_c('div',{staticClass:\"app-content-list-item-star icon-important\",attrs:{\"data-starred\":_vm.isImportant ? 'true' : 'false'},domProps:{\"innerHTML\":_vm._s(_vm.importantSvg)},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleImportant.apply(null, arguments)}}}):_vm._e(),_vm._v(\" \"),(_vm.envelope.flags.flagged)?_c('IconFavorite',{staticClass:\"app-content-list-item-star favorite-icon-style\",class:{ 'junk-favorite-position': _vm.junkFavoritePosition, 'junk-favorite-position-with-tag-subline': _vm.junkFavoritePositionWithTagSubline },attrs:{\"fill-color\":\"#f9cf3d\",\"size\":18,\"data-starred\":_vm.envelope.flags.flagged ? 'true' : 'false'},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleFlagged.apply(null, arguments)}}}):_vm._e(),_vm._v(\" \"),(_vm.envelope.flags.$junk)?_c('JunkIcon',{staticClass:\"app-content-list-item-star junk-icon-style\",class:{ 'junk-favorite-position': _vm.junkFavoritePosition, 'junk-favorite-position-with-tag-subline': _vm.junkFavoritePositionWithTagSubline },attrs:{\"size\":18,\"data-starred\":_vm.envelope.flags.$junk ? 'true' : 'false'},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleJunk.apply(null, arguments)}}}):_vm._e(),_vm._v(\" \"),_c('router-link',{staticClass:\"left\",class:{seen: _vm.envelope.flags.seen},attrs:{\"to\":_vm.route,\"event\":\"\"},nativeOn:{\"click\":function($event){$event.preventDefault();return _vm.$emit('toggle-expand', $event)}}},[_c('div',{staticClass:\"sender\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.envelope.from && _vm.envelope.from[0] ? _vm.envelope.from[0].label : '')+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),(_vm.showSubline)?_c('div',{staticClass:\"subline\"},[_c('span',{staticClass:\"preview\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.envelope.previewText)+\"\\n\\t\\t\\t\\t\")])]):_vm._e(),_vm._v(\" \"),_vm._l((_vm.tags),function(tag){return _c('div',{key:tag.id,staticClass:\"tag-group\"},[_c('div',{staticClass:\"tag-group__bg\",style:({'background-color': tag.color})}),_vm._v(\" \"),_c('span',{staticClass:\"tag-group__label\",style:({color: tag.color})},[_vm._v(_vm._s(tag.displayName)+\" \")])])})],2),_vm._v(\" \"),_c('div',{staticClass:\"right\"},[_c('Moment',{staticClass:\"timestamp\",attrs:{\"timestamp\":_vm.envelope.dateInt}}),_vm._v(\" \"),(_vm.expanded)?[_c('ButtonVue',{class:{ primary: _vm.expanded},attrs:{\"title\":_vm.hasMultipleRecipients ? _vm.t('mail', 'Reply all') : _vm.t('mail', 'Reply'),\"type\":\"tertiary-no-background\"},on:{\"click\":_vm.onReply},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [(_vm.hasMultipleRecipients)?_c('ReplyAllIcon',{attrs:{\"size\":20}}):_c('ReplyIcon',{attrs:{\"size\":20}})]},proxy:true}],null,false,1928057497)}),_vm._v(\" \"),_c('ButtonVue',{staticClass:\"action--primary\",attrs:{\"type\":\"tertiary-no-background\",\"title\":_vm.envelope.flags.flagged ? _vm.t('mail', 'Mark as unfavorite') : _vm.t('mail', 'Mark as favorite'),\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleFlagged.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [(_vm.showFavoriteIconVariant)?_c('StarOutline',{attrs:{\"size\":20}}):_c('IconFavorite',{attrs:{\"size\":20}})]},proxy:true}],null,false,1876880570)}),_vm._v(\" \"),_c('ButtonVue',{staticClass:\"action--primary\",attrs:{\"type\":\"tertiary-no-background\",\"title\":_vm.envelope.flags.seen ? _vm.t('mail', 'Mark as unread') : _vm.t('mail', 'Mark as read'),\"close-after-click\":true},on:{\"click\":function($event){$event.preventDefault();return _vm.onToggleSeen.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [(_vm.showImportantIconVariant)?_c('EmailRead',{attrs:{\"size\":20}}):_c('EmailUnread',{attrs:{\"size\":20}})]},proxy:true}],null,false,939729496)}),_vm._v(\" \"),_c('ButtonVue',{attrs:{\"close-after-click\":true,\"type\":\"tertiary-no-background\"},on:{\"click\":function($event){$event.preventDefault();return _vm.onDelete.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('DeleteIcon',{attrs:{\"title\":_vm.t('mail', 'Delete message'),\"size\":20}})]},proxy:true}],null,false,698101614)}),_vm._v(\" \"),_c('MenuEnvelope',{staticClass:\"app-content-list-item-menu\",attrs:{\"envelope\":_vm.envelope,\"with-reply\":false,\"with-select\":false,\"with-show-source\":true},on:{\"delete\":function($event){return _vm.$emit('delete',_vm.envelope.databaseId)}}})]:_vm._e()],2)],1),_vm._v(\" \"),(_vm.loading)?_c('Loading'):(_vm.message)?_c('Message',{attrs:{\"envelope\":_vm.envelope,\"message\":_vm.message,\"full-height\":_vm.fullHeight}}):(_vm.error)?_c('Error',{attrs:{\"error\":_vm.error && _vm.error.message ? _vm.error.message : _vm.t('mail', 'Not found'),\"message\":_vm.errorMessage,\"data\":_vm.error,\"role\":\"alert\"}}):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<AppContentDetails id=\"mail-message\">\n\t\t<Loading v-if=\"loading\" />\n\t\t<template v-else>\n\t\t\t<div id=\"mail-thread-header\">\n\t\t\t\t<div id=\"mail-thread-header-fields\">\n\t\t\t\t\t<h2 :title=\"threadSubject\">\n\t\t\t\t\t\t{{ threadSubject }}\n\t\t\t\t\t</h2>\n\t\t\t\t\t<div ref=\"avatarHeader\" class=\"avatar-header\">\n\t\t\t\t\t\t<!-- Participants that can fit in the parent div -->\n\t\t\t\t\t\t<RecipientBubble v-for=\"participant in threadParticipants.slice(0, participantsToDisplay)\"\n\t\t\t\t\t\t\t:key=\"participant.email\"\n\t\t\t\t\t\t\t:email=\"participant.email\"\n\t\t\t\t\t\t\t:label=\"participant.label\" />\n\t\t\t\t\t\t<!-- Indicator to show that there are more participants than displayed -->\n\t\t\t\t\t\t<Popover v-if=\"threadParticipants.length > participantsToDisplay\"\n\t\t\t\t\t\t\tclass=\"avatar-more\">\n\t\t\t\t\t\t\t<span slot=\"trigger\" class=\"avatar-more\">\n\t\t\t\t\t\t\t\t{{ moreParticipantsString }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<RecipientBubble v-for=\"participant in threadParticipants.slice(participantsToDisplay)\"\n\t\t\t\t\t\t\t\t:key=\"participant.email\"\n\t\t\t\t\t\t\t\t:email=\"participant.email\"\n\t\t\t\t\t\t\t\t:label=\"participant.label\" />\n\t\t\t\t\t\t</Popover>\n\t\t\t\t\t\t<!-- Remaining participants, if any (Needed to have avatarHeader reactive) -->\n\t\t\t\t\t\t<RecipientBubble v-for=\"participant in threadParticipants.slice(participantsToDisplay)\"\n\t\t\t\t\t\t\t:key=\"participant.email\"\n\t\t\t\t\t\t\tclass=\"avatar-hidden\"\n\t\t\t\t\t\t\t:email=\"participant.email\"\n\t\t\t\t\t\t\t:label=\"participant.label\" />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<ThreadEnvelope v-for=\"env in thread\"\n\t\t\t\t:key=\"env.databaseId\"\n\t\t\t\t:envelope=\"env\"\n\t\t\t\t:mailbox-id=\"$route.params.mailboxId\"\n\t\t\t\t:expanded=\"expandedThreads.includes(env.databaseId)\"\n\t\t\t\t:full-height=\"thread.length === 1\"\n\t\t\t\t@delete=\"$emit('delete', env.databaseId)\"\n\t\t\t\t@move=\"onMove(env.databaseId)\"\n\t\t\t\t@toggle-expand=\"toggleExpand(env.databaseId)\" />\n\t\t</template>\n\t</AppContentDetails>\n</template>\n\n<script>\nimport { NcAppContentDetails as AppContentDetails, NcPopover as Popover } from '@nextcloud/vue'\n\nimport { prop, uniqBy } from 'ramda'\nimport debounce from 'lodash/fp/debounce'\n\nimport { getRandomMessageErrorMessage } from '../util/ErrorMessageFactory'\nimport Loading from './Loading'\nimport logger from '../logger'\nimport RecipientBubble from './RecipientBubble'\nimport ThreadEnvelope from './ThreadEnvelope'\n\nexport default {\n\tname: 'Thread',\n\tcomponents: {\n\t\tRecipientBubble,\n\t\tAppContentDetails,\n\t\tLoading,\n\t\tThreadEnvelope,\n\t\tPopover,\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tloading: true,\n\t\t\tmessage: undefined,\n\t\t\terrorMessage: '',\n\t\t\terror: undefined,\n\t\t\texpandedThreads: [],\n\t\t\tparticipantsToDisplay: 999,\n\t\t\tresizeDebounced: debounce(500, this.updateParticipantsToDisplay),\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tmoreParticipantsString() {\n\t\t\t// Returns a number showing the number of thread participants that are not shown in the avatar-header\n\t\t\treturn `+${this.threadParticipants.length - this.participantsToDisplay}`\n\t\t},\n\t\tthreadId() {\n\t\t\treturn parseInt(this.$route.params.threadId, 10)\n\t\t},\n\t\tthread() {\n\t\t\tconst envelope = this.$store.getters.getEnvelope(this.threadId)\n\t\t\tif (envelope === undefined) {\n\t\t\t\treturn []\n\t\t\t}\n\n\t\t\tconst envelopes = this.$store.getters.getEnvelopesByThreadRootId(envelope.accountId, envelope.threadRootId)\n\t\t\tif (envelopes.length === 0) {\n\t\t\t\treturn []\n\t\t\t}\n\n\t\t\tconst currentMailbox = this.$store.getters.getMailbox(envelope.mailboxId)\n\t\t\tconst trashMailbox = this.$store.getters.getMailboxes(currentMailbox.accountId).find(mailbox => mailbox.specialRole === 'trash')\n\n\t\t\tif (trashMailbox === undefined) {\n\t\t\t\treturn envelopes\n\t\t\t}\n\n\t\t\tif (currentMailbox.databaseId === trashMailbox.databaseId) {\n\t\t\t\treturn envelopes.filter(envelope => envelope.mailboxId === trashMailbox.databaseId)\n\t\t\t} else {\n\t\t\t\treturn envelopes.filter(envelope => envelope.mailboxId !== trashMailbox.databaseId)\n\t\t\t}\n\t\t},\n\t\tthreadParticipants() {\n\t\t\tconst recipients = this.thread.flatMap(envelope => {\n\t\t\t\treturn envelope.from.concat(envelope.to).concat(envelope.cc)\n\t\t\t})\n\t\t\treturn uniqBy(prop('email'), recipients)\n\t\t},\n\t\tthreadSubject() {\n\t\t\tconst thread = this.thread\n\t\t\tif (thread.length === 0) {\n\t\t\t\tconsole.warn('thread is empty')\n\t\t\t\treturn ''\n\t\t\t}\n\t\t\treturn thread[0].subject || this.t('mail', 'No subject')\n\t\t},\n\t},\n\twatch: {\n\t\t$route(to, from) {\n\t\t\tif (\n\t\t\t\tfrom.name === to.name\n\t\t\t\t&& from.params.mailboxId === to.params.mailboxId\n\t\t\t\t&& from.params.threadId === to.params.threadId\n\t\t\t\t&& from.params.filter === to.params.filter\n\t\t\t) {\n\t\t\t\tlogger.debug('navigated but the thread is still the same')\n\t\t\t\treturn\n\t\t\t}\n\t\t\tlogger.debug('navigated to another thread', { to, from })\n\t\t\tthis.resetThread()\n\t\t},\n\t},\n\tcreated() {\n\t\tthis.resetThread()\n\t\twindow.addEventListener('resize', this.resizeDebounced)\n\t},\n\tbeforeDestroy() {\n\t\twindow.removeEventListener('resize', this.resizeDebounced)\n\t},\n\tmethods: {\n\t\tupdateParticipantsToDisplay() {\n\t\t\t// Wait until everything is in place\n\t\t\tif (!this.$refs.avatarHeader || !this.threadParticipants) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t// Compute the number of participants to display depending on the width available\n\t\t\tconst avatarHeader = this.$refs.avatarHeader\n\t\t\tconst maxWidth = (avatarHeader.clientWidth - 100) // Reserve 100px for the avatar-more span\n\t\t\tlet childrenWidth = 0\n\t\t\tlet fits = 0\n\t\t\tlet idx = 0\n\t\t\twhile (childrenWidth < maxWidth && fits < this.threadParticipants.length) {\n\t\t\t\t// Skipping the 'avatar-more' span\n\t\t\t\tif (avatarHeader.childNodes[idx].clientWidth === undefined) {\n\t\t\t\t\tidx += 3\n\t\t\t\t\tcontinue\n\t\t\t\t}\n\t\t\t\tchildrenWidth += avatarHeader.childNodes[idx].clientWidth\n\t\t\t\tfits++\n\t\t\t\tidx++\n\t\t\t}\n\n\t\t\tif (childrenWidth > maxWidth) {\n\t\t\t\t// There's not enough space to show all thread participants\n\t\t\t\tif (fits > 1) {\n\t\t\t\t\tthis.participantsToDisplay = fits - 1\n\t\t\t\t} else if (fits === 0) {\n\t\t\t\t\tthis.participantsToDisplay = 1\n\t\t\t\t} else {\n\t\t\t\t\tthis.participantsToDisplay = fits\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// There's enough space to show all thread participants\n\t\t\t\tthis.participantsToDisplay = this.threadParticipants.length\n\t\t\t}\n\t\t},\n\t\ttoggleExpand(threadId) {\n\t\t\tif (!this.expandedThreads.includes(threadId)) {\n\t\t\t\tconsole.debug(`expand thread ${threadId}`)\n\t\t\t\tthis.expandedThreads.push(threadId)\n\t\t\t} else {\n\t\t\t\tconsole.debug(`collapse thread ${threadId}`)\n\t\t\t\tthis.expandedThreads = this.expandedThreads.filter(t => t !== threadId)\n\t\t\t}\n\t\t},\n\t\tonMove(threadId) {\n\t\t\tif (threadId === this.threadId) {\n\t\t\t\tthis.$router.replace({\n\t\t\t\t\tname: 'mailbox',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tthis.expandedThreads = this.expandedThreads.filter((id) => id !== threadId)\n\t\t\t\tthis.fetchThread()\n\t\t\t}\n\t\t},\n\t\tasync resetThread() {\n\t\t\tthis.expandedThreads = [this.threadId]\n\t\t\tawait this.fetchThread()\n\t\t\tthis.updateParticipantsToDisplay()\n\t\t},\n\t\tasync fetchThread() {\n\t\t\tthis.loading = true\n\t\t\tthis.errorMessage = ''\n\t\t\tthis.error = undefined\n\t\t\tconst threadId = this.threadId\n\n\t\t\ttry {\n\t\t\t\tconst thread = await this.$store.dispatch('fetchThread', threadId)\n\t\t\t\tlogger.debug(`thread for envelope ${threadId} fetched`, { thread })\n\t\t\t\t// TODO: add timeout so that envelope isn't flagged when only viewed\n\t\t\t\t//       for a few seconds\n\t\t\t\tif (threadId !== parseInt(this.$route.params.threadId, 10)) {\n\t\t\t\t\tlogger.debug(\"User navigated away, loaded envelope won't be shown nor flagged as seen\", {\n\t\t\t\t\t\toldId: threadId,\n\t\t\t\t\t\tnewId: this.$route.params.threadId,\n\t\t\t\t\t})\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tif (thread.length === 0) {\n\t\t\t\t\tlogger.info('thread could not be found and is empty', { threadId })\n\t\t\t\t\tthis.errorMessage = getRandomMessageErrorMessage()\n\t\t\t\t\tthis.loading = false\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tthis.loading = false\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error('could not load envelope thread', { threadId, error })\n\t\t\t\tif (error.isError) {\n\t\t\t\t\tthis.errorMessage = t('mail', 'Could not load your message thread')\n\t\t\t\t\tthis.error = error\n\t\t\t\t\tthis.loading = false\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\">\n#mail-message {\n\tflex-grow: 1;\n\tmax-height: calc(100vh - 50px);\n\tmargin-bottom: 30vh;\n\toverflow: auto;\n\n\t.icon-loading {\n\t\t&:only-child:after {\n\t\t\tmargin-top: 20px;\n\t\t}\n\t}\n}\n\n.mail-message-body {\n\tflex: 1;\n\tmargin-bottom: 60px;\n\tposition: relative;\n}\n\n#mail-thread-header {\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: space-between;\n\talign-items: center;\n\tpadding: 30px 0;\n\t// somehow ios doesn't care about this !important rule\n\t// so we have to manually set left/right padding to chidren\n\t// for 100% to be used\n\tbox-sizing: content-box !important;\n\theight: 44px;\n\twidth: 100%;\n\n\tz-index: 100;\n\tposition: fixed; // ie fallback\n\tposition: -webkit-sticky; // ios/safari fallback\n\tposition: sticky;\n\ttop: 0;\n\tbackground: -webkit-linear-gradient(var(--color-main-background), var(--color-main-background) 80%, rgba(255,255,255,0));\n\tbackground: -o-linear-gradient(var(--color-main-background), var(--color-main-background)  80%, rgba(255,255,255,0));\n\tbackground: -moz-linear-gradient(var(--color-main-background), var(--color-main-background)  80%, rgba(255,255,255,0));\n\tbackground: linear-gradient(var(--color-main-background), var(--color-main-background)  80%, rgba(255,255,255,0));\n}\n\n#mail-thread-header-fields {\n\t// initial width\n\twidth: 0;\n\tpadding-left: 70px;\n\t// grow and try to fill 100%\n\tflex: 1 1 auto;\n\th2,\n\tp {\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\tpadding-bottom: 7px;\n\t\tmargin-bottom: 0;\n\t}\n\n\t.transparency {\n\t\topacity: 0.6;\n\t\ta {\n\t\t\tfont-weight: bold;\n\t\t}\n\t}\n}\n\n.attachment-popover {\n\tposition: sticky;\n\tbottom: 12px;\n\ttext-align: center;\n}\n\n.tooltip-inner {\n\ttext-align: left;\n}\n\n#mail-content {\n\tmargin: 10px 38px 0 59px;\n}\n\n#mail-content iframe {\n\twidth: 100%;\n}\n\n#show-images-text {\n\tdisplay: none;\n}\n\n#mail-content a,\n.mail-signature a {\n\tcolor: #07d;\n\tborder-bottom: 1px dotted #07d;\n\ttext-decoration: none;\n\tword-wrap: break-word;\n}\n\n/* Show action button label and move icon to the left\n   on screens larger than 600px */\n@media only screen and (max-width: 600px) {\n\t.action-label {\n\t\tdisplay: none;\n\t}\n}\n@media only screen and (min-width: 600px) {\n\t.icon-reply-white,\n\t.icon-reply-all-white {\n\t\tbackground-position: 12px center;\n\t}\n}\n\n@media print {\n\t#mail-thread-header-fields {\n\t\tposition: relative;\n\t}\n\t.app-content-details,\n\t.splitpanes__pane-details {\n\t\tmax-width: unset !important;\n\t\twidth: 100% !important;\n\t}\n\t#header,\n\t.app-navigation,\n\t#reply-composer,\n\t#forward-button,\n\t#mail-message-has-blocked-content,\n\t.app-content-list,\n\t.message-composer,\n\t.splitpanes__pane-list,\n\t.mail-message-attachments {\n\t\tdisplay: none !important;\n\t}\n\t.app-content {\n\t\tmargin-left: 0 !important;\n\t}\n\t.mail-message-body {\n\t\tmargin-bottom: 0 !important;\n\t}\n}\n\n.message-source {\n\tfont-family: monospace;\n\twhite-space: pre-wrap;\n\tuser-select: text;\n}\n\n.avatar-header {\n\tmax-height: 24px;\n\toverflow: hidden;\n}\n.avatar-more {\n\tdisplay: inline;\n\tbackground-color: var(--color-background-dark);\n\tpadding: 0px 0px 1px 1px;\n\tborder-radius: 10px;\n\tcursor: pointer;\n}\n.avatar-hidden {\n\tvisibility: hidden;\n}\n.popover__wrapper {\n\tmax-width: 500px;\n}\n\n.app-content-list-item-star.icon-starred {\n\tdisplay: none;\n}\n.user-bubble__wrapper {\n\tmargin-right: 4px;\n}\n.user-bubble__title {\n\tcursor: pointer;\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Thread.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Thread.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Thread.vue?vue&type=style&index=0&id=f163c4c2&prod&lang=scss&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Thread.vue?vue&type=style&index=0&id=f163c4c2&prod&lang=scss&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./Thread.vue?vue&type=template&id=f163c4c2&\"\nimport script from \"./Thread.vue?vue&type=script&lang=js&\"\nexport * from \"./Thread.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Thread.vue?vue&type=style&index=0&id=f163c4c2&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('AppContentDetails',{attrs:{\"id\":\"mail-message\"}},[(_vm.loading)?_c('Loading'):[_c('div',{attrs:{\"id\":\"mail-thread-header\"}},[_c('div',{attrs:{\"id\":\"mail-thread-header-fields\"}},[_c('h2',{attrs:{\"title\":_vm.threadSubject}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.threadSubject)+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('div',{ref:\"avatarHeader\",staticClass:\"avatar-header\"},[_vm._l((_vm.threadParticipants.slice(0, _vm.participantsToDisplay)),function(participant){return _c('RecipientBubble',{key:participant.email,attrs:{\"email\":participant.email,\"label\":participant.label}})}),_vm._v(\" \"),(_vm.threadParticipants.length > _vm.participantsToDisplay)?_c('Popover',{staticClass:\"avatar-more\"},[_c('span',{staticClass:\"avatar-more\",attrs:{\"slot\":\"trigger\"},slot:\"trigger\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.moreParticipantsString)+\"\\n\\t\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_vm._l((_vm.threadParticipants.slice(_vm.participantsToDisplay)),function(participant){return _c('RecipientBubble',{key:participant.email,attrs:{\"email\":participant.email,\"label\":participant.label}})})],2):_vm._e(),_vm._v(\" \"),_vm._l((_vm.threadParticipants.slice(_vm.participantsToDisplay)),function(participant){return _c('RecipientBubble',{key:participant.email,staticClass:\"avatar-hidden\",attrs:{\"email\":participant.email,\"label\":participant.label}})})],2)])]),_vm._v(\" \"),_vm._l((_vm.thread),function(env){return _c('ThreadEnvelope',{key:env.databaseId,attrs:{\"envelope\":env,\"mailbox-id\":_vm.$route.params.mailboxId,\"expanded\":_vm.expandedThreads.includes(env.databaseId),\"full-height\":_vm.thread.length === 1},on:{\"delete\":function($event){return _vm.$emit('delete', env.databaseId)},\"move\":function($event){return _vm.onMove(env.databaseId)},\"toggle-expand\":function($event){return _vm.toggleExpand(env.databaseId)}}})})]],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<AppContent pane-config-key=\"mail\" :show-details=\"isThreadShown\" @update:showDetails=\"hideMessage\">\n\t\t<div slot=\"list\"\n\t\t\t:class=\"{ header__button: !showThread || !isMobile }\">\n\t\t\t<NewMessageButtonHeader v-if=\"!showThread || !isMobile\" />\n\t\t\t<AppContentList\n\t\t\t\tv-infinite-scroll=\"onScroll\"\n\t\t\t\tv-shortkey.once=\"shortkeys\"\n\t\t\t\tclass=\"envelope-list\"\n\t\t\t\tinfinite-scroll-immediate-check=\"false\"\n\t\t\t\t:show-details=\"showThread\"\n\t\t\t\t:infinite-scroll-disabled=\"false\"\n\t\t\t\t:infinite-scroll-distance=\"10\"\n\t\t\t\trole=\"heading\"\n\t\t\t\t:aria-level=\"2\"\n\t\t\t\t@shortkey.native=\"onShortcut\">\n\t\t\t\t<Mailbox\n\t\t\t\t\tv-if=\"!mailbox.isPriorityInbox\"\n\t\t\t\t\t:account=\"account\"\n\t\t\t\t\t:mailbox=\"mailbox\"\n\t\t\t\t\t:search-query=\"query\"\n\t\t\t\t\t:bus=\"bus\"\n\t\t\t\t\t:open-first=\"mailbox.specialRole !== 'drafts'\" />\n\t\t\t\t<template v-else>\n\t\t\t\t\t<div class=\"app-content-list-item\">\n\t\t\t\t\t\t<SectionTitle class=\"important\" :name=\"t('mail', 'Important')\" />\n\t\t\t\t\t\t<Popover trigger=\"hover focus\">\n\t\t\t\t\t\t\t<ButtonVue slot=\"trigger\"\n\t\t\t\t\t\t\t\ttype=\"tertiary-no-background\"\n\t\t\t\t\t\t\t\t:aria-label=\"t('mail', 'Important info')\"\n\t\t\t\t\t\t\t\tclass=\"button\">\n\t\t\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t\t\t<IconInfo :size=\"20\" />\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t</ButtonVue>\n\t\t\t\t\t\t\t<p class=\"important-info\">\n\t\t\t\t\t\t\t\t{{ importantInfo }}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</Popover>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Mailbox\n\t\t\t\t\t\tclass=\"nameimportant\"\n\t\t\t\t\t\t:account=\"unifiedAccount\"\n\t\t\t\t\t\t:mailbox=\"unifiedInbox\"\n\t\t\t\t\t\t:search-query=\"appendToSearch(priorityImportantQuery)\"\n\t\t\t\t\t\t:paginate=\"'manual'\"\n\t\t\t\t\t\t:is-priority-inbox=\"true\"\n\t\t\t\t\t\t:initial-page-size=\"8\"\n\t\t\t\t\t\t:collapsible=\"true\"\n\t\t\t\t\t\t:bus=\"bus\" />\n\t\t\t\t\t<SectionTitle class=\"app-content-list-item other\" :name=\"t('mail', 'Other')\" />\n\t\t\t\t\t<Mailbox\n\t\t\t\t\t\tclass=\"nameother\"\n\t\t\t\t\t\t:account=\"unifiedAccount\"\n\t\t\t\t\t\t:mailbox=\"unifiedInbox\"\n\t\t\t\t\t\t:open-first=\"false\"\n\t\t\t\t\t\t:search-query=\"appendToSearch(priorityOtherQuery)\"\n\t\t\t\t\t\t:is-priority-inbox=\"true\"\n\t\t\t\t\t\t:bus=\"bus\" />\n\t\t\t\t</template>\n\t\t\t</AppContentList>\n\t\t</div>\n\t\t<Thread v-if=\"showThread\" @delete=\"deleteMessage\" />\n\t\t<NoMessageSelected v-else-if=\"hasEnvelopes && !isMobile\" />\n\t</AppContent>\n</template>\n\n<script>\nimport { NcAppContent as AppContent, NcAppContentList as AppContentList, NcButton as ButtonVue, NcPopover as Popover } from '@nextcloud/vue'\n\nimport isMobile from '@nextcloud/vue/dist/Mixins/isMobile'\nimport SectionTitle from './SectionTitle'\nimport NewMessageButtonHeader from './NewMessageButtonHeader'\nimport Vue from 'vue'\n\nimport infiniteScroll from '../directives/infinite-scroll'\nimport IconInfo from 'vue-material-design-icons/Information'\nimport logger from '../logger'\nimport Mailbox from './Mailbox'\nimport NoMessageSelected from './NoMessageSelected'\nimport Thread from './Thread'\nimport { UNIFIED_ACCOUNT_ID, UNIFIED_INBOX_ID } from '../store/constants'\nimport {\n\tpriorityImportantQuery,\n\tpriorityOtherQuery,\n} from '../util/priorityInbox'\nimport { detect, html } from '../util/text'\n\nconst START_MAILBOX_DEBOUNCE = 5 * 1000\n\nexport default {\n\tname: 'MailboxThread',\n\tdirectives: {\n\t\tinfiniteScroll,\n\t},\n\tcomponents: {\n\t\tAppContent,\n\t\tAppContentList,\n\t\tButtonVue,\n\t\tIconInfo,\n\t\tMailbox,\n\t\tNoMessageSelected,\n\t\tPopover,\n\t\tNewMessageButtonHeader,\n\t\tSectionTitle,\n\t\tThread,\n\t},\n\tmixins: [isMobile],\n\tprops: {\n\t\taccount: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tmailbox: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\t// eslint-disable-next-line\n\t\t\timportantInfo: t('mail', 'Messages will automatically be marked as important based on which messages you interacted with or marked as important. In the beginning you might have to manually change the importance to teach the system, but it will improve over time.'),\n\t\t\tbus: new Vue(),\n\t\t\tsearchQuery: undefined,\n\t\t\tshortkeys: {\n\t\t\t\tdel: ['del'],\n\t\t\t\tflag: ['s'],\n\t\t\t\tnext: ['arrowright'],\n\t\t\t\tprev: ['arrowleft'],\n\t\t\t\trefresh: ['r'],\n\t\t\t\tunseen: ['u'],\n\t\t\t},\n\t\t\tpriorityImportantQuery,\n\t\t\tpriorityOtherQuery,\n\t\t\tstartMailboxTimer: undefined,\n\t\t}\n\t},\n\tcomputed: {\n\t\tunifiedAccount() {\n\t\t\treturn this.$store.getters.getAccount(UNIFIED_ACCOUNT_ID)\n\t\t},\n\t\tunifiedInbox() {\n\t\t\treturn this.$store.getters.getMailbox(UNIFIED_INBOX_ID)\n\t\t},\n\t\thasEnvelopes() {\n\t\t\treturn this.$store.getters.getEnvelopes(this.mailbox.databaseId, this.searchQuery).length > 0\n\t\t},\n\t\tshowThread() {\n\t\t\treturn (this.mailbox.isPriorityInbox === true || this.hasEnvelopes) && this.$route.name === 'message'\n\t\t},\n\t\tquery() {\n\t\t\tif (this.$route.params.filter === 'starred') {\n\t\t\t\tif (this.searchQuery) {\n\t\t\t\t\treturn this.searchQuery + ' is:starred'\n\t\t\t\t}\n\t\t\t\treturn 'is:starred'\n\t\t\t}\n\t\t\treturn this.searchQuery\n\t\t},\n\t\tisThreadShown() {\n\t\t\treturn !!this.$route.params.threadId\n\t\t},\n\t},\n\twatch: {\n\t\t$route() {\n\t\t\tthis.handleMailto()\n\t\t},\n\t\tmailbox() {\n\t\t\tclearTimeout(this.startMailboxTimer)\n\t\t\tsetTimeout(this.saveStartMailbox, START_MAILBOX_DEBOUNCE)\n\t\t},\n\t},\n\tcreated() {\n\t\tthis.handleMailto()\n\t},\n\tmounted() {\n\t\tsetTimeout(this.saveStartMailbox, START_MAILBOX_DEBOUNCE)\n\t},\n\tbeforeUnmount() {\n\t\tclearTimeout(this.startMailboxTimer)\n\t},\n\tmethods: {\n\t\tdeleteMessage(id) {\n\t\t\tthis.bus.$emit('delete', id)\n\t\t},\n\t\tonScroll(event) {\n\t\t\tlogger.debug('scroll', { event })\n\n\t\t\tthis.bus.$emit('load-more')\n\t\t},\n\t\tonShortcut(e) {\n\t\t\tthis.bus.$emit('shortcut', e)\n\t\t},\n\t\tappendToSearch(str) {\n\t\t\tif (this.searchQuery === undefined) {\n\t\t\t\treturn str\n\t\t\t}\n\t\t\treturn this.searchQuery + ' ' + str\n\t\t},\n\t\thideMessage() {\n\t\t\tthis.$router.replace({\n\t\t\t\tname: 'mailbox',\n\t\t\t\tparams: {\n\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\tfilter: this.$route.params?.filter,\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t\thandleMailto() {\n\t\t\tif (this.$route.name === 'message' && this.$route.params.threadId === 'mailto') {\n\t\t\t\tlet accountId\n\t\t\t\t// Only preselect an account when we're not in a unified mailbox\n\t\t\t\tif (this.$route.params.accountId !== 0 && this.$route.params.accountId !== '0') {\n\t\t\t\t\taccountId = parseInt(this.$route.params.accountId, 10)\n\t\t\t\t}\n\t\t\t\tthis.$store.dispatch('showMessageComposer', {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\taccountId,\n\t\t\t\t\t\tto: this.stringToRecipients(this.$route.query.to),\n\t\t\t\t\t\tcc: this.stringToRecipients(this.$route.query.cc),\n\t\t\t\t\t\tsubject: this.$route.query.subject || '',\n\t\t\t\t\t\tbody: this.$route.query.body ? detect(this.$route.query.body) : html(''),\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tasync saveStartMailbox() {\n\t\t\tconst currentStartMailboxId = this.$store.getters.getPreference('start-mailbox-id')\n\t\t\tif (currentStartMailboxId === this.mailbox.databaseId) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tlogger.debug(`Saving mailbox ${this.mailbox.databaseId} as start mailbox`)\n\n\t\t\ttry {\n\t\t\t\tawait this.$store\n\t\t\t\t\t.dispatch('savePreference', {\n\t\t\t\t\t\tkey: 'start-mailbox-id',\n\t\t\t\t\t\tvalue: this.mailbox.databaseId,\n\t\t\t\t\t})\n\t\t\t} catch (error) {\n\t\t\t\t// Catch and log. This is not critical.\n\t\t\t\tlogger.warn('Could not update start mailbox id', {\n\t\t\t\t\terror,\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tstringToRecipients(str) {\n\t\t\tif (str === undefined) {\n\t\t\t\treturn []\n\t\t\t}\n\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tlabel: str,\n\t\t\t\t\temail: str,\n\t\t\t\t},\n\t\t\t]\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.v-popover > .trigger > {\n\tz-index: 1;\n}\n\n.important-info {\n\tmax-width: 230px;\n\tpadding: 16px;\n}\n\n.app-content-list {\n\t// Required for centering the loading indicator\n\tdisplay: flex;\n}\n\n.app-content-list-item:hover {\n\tbackground: transparent;\n}\n\n.button {\n\tbackground-color: var(--color-main-background);\n\tmargin-bottom: 3px;\n\tright: 2px;\n\n\t&:hover,\n\t&:focus {\n\t\tbackground-color: var(--color-background-dark);\n\t}\n}\n\n#app-content-wrapper {\n\tdisplay: flex;\n}\n::v-deep .button-vue--vue-secondary {\n\tbox-shadow: none;\n}\n.envelope-list {\n\toverflow-y: auto;\n\tpadding: 0 4px;\n}\n.information-icon {\n\topacity: .7;\n}\n.header__button {\n\tdisplay: flex;\n\tflex: 1 0 0;\n\tflex-direction: column;\n\theight: calc(100vh - var(--header-height));\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MailboxThread.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MailboxThread.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MailboxThread.vue?vue&type=style&index=0&id=0376038e&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MailboxThread.vue?vue&type=style&index=0&id=0376038e&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./MailboxThread.vue?vue&type=template&id=0376038e&scoped=true&\"\nimport script from \"./MailboxThread.vue?vue&type=script&lang=js&\"\nexport * from \"./MailboxThread.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MailboxThread.vue?vue&type=style&index=0&id=0376038e&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0376038e\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('AppContent',{attrs:{\"pane-config-key\":\"mail\",\"show-details\":_vm.isThreadShown},on:{\"update:showDetails\":_vm.hideMessage}},[_c('div',{class:{ header__button: !_vm.showThread || !_vm.isMobile },attrs:{\"slot\":\"list\"},slot:\"list\"},[(!_vm.showThread || !_vm.isMobile)?_c('NewMessageButtonHeader'):_vm._e(),_vm._v(\" \"),_c('AppContentList',{directives:[{name:\"infinite-scroll\",rawName:\"v-infinite-scroll\",value:(_vm.onScroll),expression:\"onScroll\"},{name:\"shortkey\",rawName:\"v-shortkey.once\",value:(_vm.shortkeys),expression:\"shortkeys\",modifiers:{\"once\":true}}],staticClass:\"envelope-list\",attrs:{\"infinite-scroll-immediate-check\":\"false\",\"show-details\":_vm.showThread,\"infinite-scroll-disabled\":false,\"infinite-scroll-distance\":10,\"role\":\"heading\",\"aria-level\":2},nativeOn:{\"shortkey\":function($event){return _vm.onShortcut.apply(null, arguments)}}},[(!_vm.mailbox.isPriorityInbox)?_c('Mailbox',{attrs:{\"account\":_vm.account,\"mailbox\":_vm.mailbox,\"search-query\":_vm.query,\"bus\":_vm.bus,\"open-first\":_vm.mailbox.specialRole !== 'drafts'}}):[_c('div',{staticClass:\"app-content-list-item\"},[_c('SectionTitle',{staticClass:\"important\",attrs:{\"name\":_vm.t('mail', 'Important')}}),_vm._v(\" \"),_c('Popover',{attrs:{\"trigger\":\"hover focus\"}},[_c('ButtonVue',{staticClass:\"button\",attrs:{\"slot\":\"trigger\",\"type\":\"tertiary-no-background\",\"aria-label\":_vm.t('mail', 'Important info')},slot:\"trigger\",scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('IconInfo',{attrs:{\"size\":20}})]},proxy:true}])}),_vm._v(\" \"),_c('p',{staticClass:\"important-info\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.importantInfo)+\"\\n\\t\\t\\t\\t\\t\\t\")])],1)],1),_vm._v(\" \"),_c('Mailbox',{staticClass:\"nameimportant\",attrs:{\"account\":_vm.unifiedAccount,\"mailbox\":_vm.unifiedInbox,\"search-query\":_vm.appendToSearch(_vm.priorityImportantQuery),\"paginate\":'manual',\"is-priority-inbox\":true,\"initial-page-size\":8,\"collapsible\":true,\"bus\":_vm.bus}}),_vm._v(\" \"),_c('SectionTitle',{staticClass:\"app-content-list-item other\",attrs:{\"name\":_vm.t('mail', 'Other')}}),_vm._v(\" \"),_c('Mailbox',{staticClass:\"nameother\",attrs:{\"account\":_vm.unifiedAccount,\"mailbox\":_vm.unifiedInbox,\"open-first\":false,\"search-query\":_vm.appendToSearch(_vm.priorityOtherQuery),\"is-priority-inbox\":true,\"bus\":_vm.bus}})]],2)],1),_vm._v(\" \"),(_vm.showThread)?_c('Thread',{on:{\"delete\":_vm.deleteMessage}}):(_vm.hasEnvelopes && !_vm.isMobile)?_c('NoMessageSelected'):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*\n * @copyright 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @author 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { getClient } from '../dav/client'\n\nexport async function getFileSize(path) {\n\tconst response = await getClient('files').stat(path, {\n\t\tdata: `<?xml version=\"1.0\"?>\n\t\t\t<d:propfind  xmlns:d=\"DAV:\"\n\t\t\t\txmlns:oc=\"http://owncloud.org/ns\">\n\t\t\t\t<d:prop>\n\t\t\t\t\t<oc:size />\n\t\t\t\t</d:prop>\n\t\t\t</d:propfind>`,\n\t\tdetails: true,\n\t})\n\n\treturn response?.data?.props?.size\n}\n\nexport async function getFileData(path) {\n\tconst response = await getClient('files').stat(path, {\n\t\tdata: `<?xml version=\"1.0\"?>\n\t\t\t<d:propfind\n\t\t\txmlns:d=\"DAV:\"\n\t\t\txmlns:oc=\"http://owncloud.org/ns\"\n\t\t\txmlns:nc=\"http://nextcloud.org/ns\">\n\t\t\t\t<d:prop>\n\t\t\t\t\t<oc:size />\n\t\t\t\t\t<oc:fileid />\n\t\t\t\t\t<nc:has-preview />\n\t\t\t\t</d:prop>\n\t\t\t</d:propfind>`,\n\t\tdetails: true,\n\t})\n\n\treturn response?.data?.props\n}\n","/**\n * @copyright Copyright (c) 2019 Marco Ambrosini <marcoambrosini@pm.me>\n *\n * @copyright Copyright (c) 2020 Gary Kim <gary@garykim.dev>\n *\n * @author Marco Ambrosini <marcoambrosini@pm.me>\n *\n * @author Gary Kim <gary@garykim.dev>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\n// File originally from https://github.com/nextcloud/spreed/blob/bc22c21cf70a6243e7df7d838d49018c61468050/src/services/filesSharingServices.js\n// Slightly modified for use in Mail\n\nimport axios from '@nextcloud/axios'\nimport { generateOcsUrl } from '@nextcloud/router'\nimport { showError } from '@nextcloud/dialogs'\n\n/**\n * Makes a share link for a given file or directory.\n *\n * @param {string} path The file path from the user's root directory. e.g. `/myfile.txt`\n * @param {string} token The conversation's token\n * @return {string} url share link\n */\nconst shareFile = async function(path, token) {\n\ttry {\n\t\tconst res = await axios.post(generateOcsUrl('apps/files_sharing/api/v1/', 2) + 'shares', {\n\t\t\tshareType: 3, // OC.Share.SHARE_TYPE_LINK,\n\t\t\tpath,\n\t\t\tshareWith: token,\n\t\t})\n\t\treturn res.data.ocs.data.url\n\t} catch (error) {\n\t\tif (\n\t\t\terror.response\n\t\t\t&& error.response.data\n\t\t\t&& error.response.data.ocs\n\t\t\t&& error.response.data.ocs.meta\n\t\t\t&& error.response.data.ocs.meta.message\n\t\t) {\n\t\t\tconsole.error(`Error while sharing file: ${error.response.data.ocs.meta.message || 'Unknown error'}`)\n\t\t\tshowError(error.response.data.ocs.meta.message)\n\t\t\tthrow error\n\t\t} else {\n\t\t\tconsole.error('Error while sharing file: Unknown error')\n\t\t\tshowError(t('mail', 'Error while sharing file'))\n\t\t\tthrow error\n\t\t}\n\t}\n}\n\nexport { shareFile }\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ComposerAttachment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ComposerAttachment.vue?vue&type=script&lang=js&\"","<template>\n\t<li class=\"composer-attachment\" :class=\"{'composer-attachment--with-error' : attachment.error }\">\n\t\t<div class=\"attachment-preview\">\n\t\t\t<img v-if=\"attachment.imageBlobURL !== false\" :src=\"attachment.imageBlobURL\" class=\"attachment-preview-image\">\n\t\t\t<img v-else-if=\"attachment.hasPreview\" :src=\"previewURL\" class=\"attachment-preview-image\">\n\t\t\t<img v-else :src=\"getIcon\" class=\"attachment-preview-image\">\n\t\t\t<span v-if=\"attachment.type === 'cloud'\" class=\"cloud-attachment-icon\">\n\t\t\t\t<Cloud :size=\"16\" />\n\t\t\t</span>\n\t\t</div>\n\t\t<div class=\"attachment-inner\">\n\t\t\t<span class=\"new-message-attachment-name\">\n\t\t\t\t{{ attachment.displayName ? attachment.displayName : attachment.fileName }}\n\t\t\t</span>\n\t\t\t<span v-if=\"!attachment.finished\" class=\"attachments-upload-progress\">\n\t\t\t\t<span class=\"attachments-upload-progress--bar\" :style=\"&quot;width:&quot; + attachment.percent + &quot;%&quot;\" />\n\t\t\t</span>\n\t\t\t<span v-else class=\"new-message-attachment-size\">{{ attachment.sizeString }}</span>\n\t\t</div>\n\t\t<button @click=\"onDelete(attachment)\">\n\t\t\t<Close :size=\"24\" />\n\t\t</button>\n\t</li>\n</template>\n\n<script>\nimport { generateUrl } from '@nextcloud/router'\nimport Close from 'vue-material-design-icons/Close'\nimport Cloud from 'vue-material-design-icons/Cloud'\n\nexport default {\n\tname: 'ComposerAttachment',\n\tcomponents: {\n\t\tClose,\n\t\tCloud,\n\t},\n\tprops: {\n\t\tbus: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tattachment: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tuploading: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tprogress: 0,\n\t\t\tsizeString: '',\n\t\t\tfinished: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\tpreviewURL() {\n\t\t\tif (this.attachment.hasPreview && this.attachment.id > 0) {\n\t\t\t\treturn generateUrl(`/core/preview?fileId=${this.attachment.id}&x=100&y=100&a=0`)\n\t\t\t}\n\t\t\treturn ''\n\t\t},\n\t\tgetIcon() {\n\t\t\treturn OC.MimeType.getIconUrl(this.attachment.fileType)\n\t\t},\n\t\textension() {\n\t\t\treturn this.attachment.fileName.split('.').pop()\n\t\t},\n\t},\n\tmethods: {\n\t\tonDelete(attachment) {\n\t\t\tthis.$emit('on-delete-attachment', attachment)\n\t\t},\n\t},\n\n}\n</script>\n\n<style lang=\"scss\" scoped>\n\n.composer-attachment {\n\twidth: calc(50% - 20px);\n    box-sizing: border-box;\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-start;\n    margin: 10px;\n    flex-wrap: wrap;\n\n\t&--with-error {\n\t\tcolor:red;\n\t\topacity: 0.5;\n\t}\n\n\t.cloud-attachment-icon {\n\t\tposition:absolute;\n\t\tz-index: 2;\n\t\tright: 2px;\n\t\ttop: 2px;\n\t\tcolor: rgba(0, 0, 0, 1);\n\t}\n\n\t.attachment-preview {\n\t\tdisplay: inline-flex;\n\t\tflex-wrap: wrap;\n\t\twidth: 50px;\n\t\theight:50px;\n\t\toverflow: hidden;\n\t\tborder-radius: 3px;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tposition: relative;\n\n\t\timg {\n\t\t\tdisplay: block;\n\t\t\tmin-width: 50px;\n\t\t\tmin-height: 50px;\n\t\t\tmax-width: 72px;\n\t\t\tmax-height: 72px;\n\t\t\tposition: absolute;\n\t\t}\n\n\t\tspan {\n\t\t\tcolor: rgba(0,0,0,0.3);\n\t\t\tfont-size: 13px;\n\t\t\ttext-transform: uppercase;\n\t\t\tfont-weight: bold;\n\t\t}\n\n\t}\n\n\tbutton {\n\t\tpadding: 0;\n\t\tbackground: transparent;\n\t\tborder: none;\n\t\tmargin: 6px -2px 0 0;\n\t}\n}\n\n.attachments-upload-progress {\n\tdisplay: block;\n\theight: 5px;\n\twidth: 100%;\n\tposition: relative;\n\tborder-radius: 5px;\n\tbackground: var(--color-background-dark);\n\tmargin-top: 7px;\n\n\t.attachments-upload-progress--bar {\n\t\theight: 5px;\n\t\tbackground: var(--color-primary-element-light);\n\t\tposition: absolute;\n\t\tz-index: 1;\n\t\tleft: 0;\n\t\tborder-radius: 5px;\n\t}\n}\n\n.attachments-upload-progress > div {\n\tpadding-left: 3px;\n}\n\n.new-message-attachments-action {\n\tdisplay: inline-block;\n\tvertical-align: middle;\n\tpadding: 18px;\n\topacity: 0.5;\n}\n\n.attachment-inner {\n\tdisplay: flex;\n    flex-wrap: wrap;\n\twidth: calc(100% - 90px);\n\tposition: relative;\n\n}\n\n/* attachment filenames */\n.new-message-attachment-name {\n\ttext-overflow: ellipsis;\n\toverflow: hidden;\n\twhite-space:nowrap;\n\tmargin-bottom: 3px;\n}\n\n.new-message-attachment-size {\n\tcolor: #6a6a6a;\n\twidth: 100%;\n}\n\n/* Colour the filename with a different color during attachment upload */\n.new-message-attachment-name.upload-ongoing {\n\tcolor: #0082c9;\n}\n\n/* Colour the filename in red if the attachment upload failed */\n.new-message-attachment-name.upload-warning {\n\tcolor: #d2322d;\n}\n\n/* Red ProgressBar for failed attachment uploads */\n.new-message-attachment-name.upload-warning .ui-progressbar-value {\n\tborder: 1px solid #e9322d;\n\tbackground: #e9322d;\n}\n</style>\n","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ComposerAttachment.vue?vue&type=style&index=0&id=47464ade&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ComposerAttachment.vue?vue&type=style&index=0&id=47464ade&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./ComposerAttachment.vue?vue&type=template&id=47464ade&scoped=true&\"\nimport script from \"./ComposerAttachment.vue?vue&type=script&lang=js&\"\nexport * from \"./ComposerAttachment.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ComposerAttachment.vue?vue&type=style&index=0&id=47464ade&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"47464ade\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('li',{staticClass:\"composer-attachment\",class:{'composer-attachment--with-error' : _vm.attachment.error }},[_c('div',{staticClass:\"attachment-preview\"},[(_vm.attachment.imageBlobURL !== false)?_c('img',{staticClass:\"attachment-preview-image\",attrs:{\"src\":_vm.attachment.imageBlobURL}}):(_vm.attachment.hasPreview)?_c('img',{staticClass:\"attachment-preview-image\",attrs:{\"src\":_vm.previewURL}}):_c('img',{staticClass:\"attachment-preview-image\",attrs:{\"src\":_vm.getIcon}}),_vm._v(\" \"),(_vm.attachment.type === 'cloud')?_c('span',{staticClass:\"cloud-attachment-icon\"},[_c('Cloud',{attrs:{\"size\":16}})],1):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"attachment-inner\"},[_c('span',{staticClass:\"new-message-attachment-name\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.attachment.displayName ? _vm.attachment.displayName : _vm.attachment.fileName)+\"\\n\\t\\t\")]),_vm._v(\" \"),(!_vm.attachment.finished)?_c('span',{staticClass:\"attachments-upload-progress\"},[_c('span',{staticClass:\"attachments-upload-progress--bar\",style:(\"width:\" + _vm.attachment.percent + \"%\")})]):_c('span',{staticClass:\"new-message-attachment-size\"},[_vm._v(_vm._s(_vm.attachment.sizeString))])]),_vm._v(\" \"),_c('button',{on:{\"click\":function($event){return _vm.onDelete(_vm.attachment)}}},[_c('Close',{attrs:{\"size\":24}})],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n  - @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  - @copyright 2020 Gary Kim <gary@garykim.dev>\n  -\n  - @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license AGPL-3.0-or-later\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<div class=\"new-message-attachments\">\n\t\t<div v-if=\"hasNextLine\"\n\t\t\tclass=\"new-message-attachments--counter\"\n\t\t\t:class=\"{ 'new-message-attachments--counter--with-errors': hasAttachmentErrors }\"\n\t\t\t@click=\"isToggle = !isToggle\">\n\t\t\t<span>\n\t\t\t\t{{ n('mail', '{count} attachment', '{count} attachments', attachments.length, { count: attachments.length }) }} ({{ formatBytes(totalSizeOfUpload()) }})\n\t\t\t</span>\n\t\t\t<ChevronUp v-if=\"isToggle\" :size=\"24\" />\n\t\t\t<ChevronDown v-if=\"!isToggle\" :size=\"24\" />\n\t\t</div>\n\t\t<ul class=\"new-message-attachments--list\"\n\t\t\t:class=\"{\n\t\t\t\thide: isToggle,\n\t\t\t\tactive: !isToggle && hasNextLine,\n\t\t\t}\">\n\t\t\t<ComposerAttachment\n\t\t\t\tv-for=\"attachment in attachments\"\n\t\t\t\tref=\"attachments\"\n\t\t\t\t:key=\"attachment.id\"\n\t\t\t\t:bus=\"bus\"\n\t\t\t\t:attachment=\"attachment\"\n\t\t\t\t:uploading=\"uploading\"\n\t\t\t\t@on-delete-attachment=\"onDelete(attachment)\" />\n\t\t</ul>\n\n\t\t<input ref=\"localAttachments\"\n\t\t\ttype=\"file\"\n\t\t\tmultiple\n\t\t\tstyle=\"display: none;\"\n\t\t\t@change=\"onLocalAttachmentSelected\">\n\t</div>\n</template>\n\n<script>\nimport map from 'lodash/fp/map'\nimport trimStart from 'lodash/fp/trimCharsStart'\nimport { getRequestToken } from '@nextcloud/auth'\nimport { formatFileSize } from '@nextcloud/files'\nimport prop from 'lodash/fp/prop'\nimport { getFilePickerBuilder, showWarning } from '@nextcloud/dialogs'\nimport sumBy from 'lodash/fp/sumBy'\nimport { translate as t, translatePlural as n } from '@nextcloud/l10n'\n\nimport Vue from 'vue'\n\nimport logger from '../logger'\nimport { getFileData } from '../service/FileService'\nimport { shareFile } from '../service/FileSharingService'\nimport { uploadLocalAttachment } from '../service/AttachmentService'\n\nimport ComposerAttachment from './ComposerAttachment.vue'\n\nimport ChevronDown from 'vue-material-design-icons/ChevronDown'\nimport ChevronUp from 'vue-material-design-icons/ChevronUp'\n\nconst mimes = [\n\t'image/gif',\n\t'image/jpeg',\n\t'image/pjpeg',\n\t'image/png',\n\t'image/webp',\n]\n\nexport default {\n\tname: 'ComposerAttachments',\n\tcomponents: {\n\t\tComposerAttachment,\n\t\tChevronDown,\n\t\tChevronUp,\n\t},\n\tprops: {\n\t\tvalue: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tbus: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tuploadSizeLimit: {\n\t\t\ttype: Number,\n\t\t\tdefault: 0,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tuploading: false,\n\t\t\tuploads: {},\n\t\t\t// this need if we want to pass in value only corrected uploaded files\n\t\t\tattachments: [],\n\t\t\tisToggle: false,\n\t\t\thasNextLine: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\thasAttachmentErrors() {\n\t\t\treturn this.attachments.some(attachment => attachment.error)\n\t\t},\n\t\tuploadProgress() {\n\t\t\tlet uploaded = 0\n\t\t\tlet total = 0\n\t\t\tfor (const id in this.uploads) {\n\t\t\t\tuploaded += this.uploads[id].uploaded\n\t\t\t\ttotal += this.uploads[id].total\n\t\t\t}\n\t\t\treturn ((uploaded / total) * 100).toFixed(1)\n\t\t},\n\t\ttotal() {\n\t\t\tlet total = 0\n\t\t\tfor (const id in this.uploads) {\n\t\t\t\ttotal += this.uploads[id].total\n\t\t\t}\n\t\t\treturn total\n\t\t},\n\t},\n\twatch: {\n\t\tattachments() {\n\t\t\tthis.$nextTick(function() {\n\t\t\t\tlet prevTop = null\n\t\t\t\tthis.$refs.attachments.some((attachment, i) => {\n\t\t\t\t\tconst top = attachment.$el.getBoundingClientRect().top\n\t\t\t\t\tif (prevTop !== null && prevTop !== top) {\n\t\t\t\t\t\tif (!this.hasNextLine) {\n\t\t\t\t\t\t\tthis.isToggle = true\n\t\t\t\t\t\t\tthis.hasNextLine = true\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true\n\t\t\t\t\t} else {\n\t\t\t\t\t\tprevTop = top\n\t\t\t\t\t\tif (this.$refs.attachments.length === i + 1) {\n\t\t\t\t\t\t\tthis.hasNextLine = false\n\t\t\t\t\t\t\tthis.isToggle = false\n\t\t\t\t\t\t\treturn true\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false\n\t\t\t\t})\n\t\t\t})\n\t\t},\n\t},\n\tcreated() {\n\t\tthis.bus.$on('on-add-local-attachment', this.onAddLocalAttachment)\n\t\tthis.bus.$on('on-add-cloud-attachment', this.onAddCloudAttachment)\n\t\tthis.bus.$on('on-add-cloud-attachment-link', this.onAddCloudAttachmentLink)\n\t\tthis.value.map(attachment => {\n\t\t\tthis.attachments.push({\n\t\t\t\tid: attachment.id,\n\t\t\t\tfileName: attachment.fileName,\n\t\t\t\tdisplayName: trimStart('/', attachment.fileName),\n\t\t\t\ttotal: attachment.size,\n\t\t\t\tfinished: true,\n\t\t\t\tsizeString: this.formatBytes(attachment.size),\n\t\t\t\timageBlobURL: attachment.isImage ? attachment.downloadUrl : attachment.mimeUrl,\n\t\t\t})\n\t\t\treturn attachment\n\t\t})\n\t},\n\tmethods: {\n\t\tonAddLocalAttachment() {\n\t\t\tthis.$refs.localAttachments.click()\n\t\t},\n\t\temitNewAttachments(attachments) {\n\t\t\tthis.$emit('input', this.value.concat(attachments))\n\t\t},\n\t\ttotalSizeOfUpload() {\n\t\t\treturn Object.values(this.value).reduce((acc, upload) => {\n\t\t\t\tif (!upload.type === 'local') {\n\t\t\t\t\t// Ignore link shares\n\t\t\t\t\treturn acc\n\t\t\t\t}\n\n\t\t\t\treturn acc + upload.size\n\t\t\t}, 0)\n\t\t},\n\t\tonLocalAttachmentSelected(e) {\n\t\t\tthis.uploading = true\n\t\t\t// BUG - if choose again - progress lost/ move to complete()\n\t\t\tVue.set(this, 'uploads', {})\n\n\t\t\tconst toUpload = sumBy(prop('size'), Object.values(e.target.files))\n\t\t\tconst newTotal = toUpload + this.totalSizeOfUpload()\n\t\t\tlogger.debug('checking upload size limit', {\n\t\t\t\texistingUploads: this.totalSizeOfUpload(),\n\t\t\t\ttoUpload,\n\t\t\t\tlimit: this.uploadSizeLimit,\n\t\t\t\tnewTotal,\n\t\t\t})\n\t\t\tif (this.uploadSizeLimit && newTotal > this.uploadSizeLimit) {\n\t\t\t\tthis.showAttachmentFileSizeWarning(e.target.files.length)\n\t\t\t\tthis.uploading = false\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst progress = (id) => (prog, uploaded) => {\n\t\t\t\tthis.uploads[id].uploaded = uploaded\n\t\t\t\tthis.attachments.map((item, i) => {\n\t\t\t\t\tif (item.displayName === id) {\n\t\t\t\t\t\tthis.attachments[i].progress = uploaded\n\t\t\t\t\t\tthis.changeProgress(item, uploaded)\n\t\t\t\t\t}\n\t\t\t\t\treturn item\n\t\t\t\t})\n\n\t\t\t}\n\t\t\t// TODO bug: cancel axios on close or delete attachment\n\t\t\tconst promises = map((file) => {\n\t\t\t\tconst controller = new AbortController()\n\t\t\t\tthis.attachments.push({\n\t\t\t\t\tfileName: file.name,\n\t\t\t\t\tfileType: file.type,\n\t\t\t\t\timageBlobURL: this.generatePreview(file),\n\t\t\t\t\tdisplayName: trimStart('/', file.name),\n\t\t\t\t\tprogress: null,\n\t\t\t\t\tpercent: 0,\n\t\t\t\t\ttotal: file.size,\n\t\t\t\t\tfinished: false,\n\t\t\t\t\terror: false,\n\t\t\t\t\thasPreview: false,\n\t\t\t\t\tcontroller,\n\t\t\t\t})\n\n\t\t\t\tVue.set(this.uploads, file.name, {\n\t\t\t\t\ttotal: file.size,\n\t\t\t\t\tuploaded: 0,\n\t\t\t\t})\n\t\t\t\ttry {\n\t\t\t\t\treturn uploadLocalAttachment(file, progress(file.name), controller)\n\t\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\t\tthis.attachments.some(attachment => {\n\t\t\t\t\t\t\t\tif (attachment.displayName === file.name && !attachment.error) {\n\t\t\t\t\t\t\t\t\tthis.$set(attachment, 'error', true)\n\t\t\t\t\t\t\t\t\treturn true\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn false\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(({ file, id }) => {\n\t\t\t\t\t\t\tlogger.info('uploaded')\n\t\t\t\t\t\t\tthis.attachments.some((attachment, i) => {\n\t\t\t\t\t\t\t\tif (attachment.displayName === file.name) {\n\t\t\t\t\t\t\t\t\tthis.attachments[i].id = id\n\t\t\t\t\t\t\t\t\tthis.attachments[i].finished = true\n\t\t\t\t\t\t\t\t\treturn true\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn false\n\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\tthis.emitNewAttachments([{\n\t\t\t\t\t\t\t\tfileName: file.name,\n\t\t\t\t\t\t\t\tdisplayName: trimStart('/', file.name),\n\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\tsize: file.size,\n\t\t\t\t\t\t\t\ttype: 'local',\n\t\t\t\t\t\t\t}])\n\t\t\t\t\t\t})\n\t\t\t\t} catch (error) {\n\t\t\t\t\tlogger.error('Could not upload file', { file, error })\n\t\t\t\t}\n\t\t\t}, e.target.files)\n\n\t\t\tconst done = Promise.all(promises)\n\t\t\t\t.catch((error) => logger.error('could not upload all attachments', { error }))\n\t\t\t\t.then(() => (this.uploading = false))\n\n\t\t\tthis.$emit('upload', done)\n\n\t\t\treturn done\n\t\t},\n\t\tasync onAddCloudAttachment() {\n\t\t\tconst picker = getFilePickerBuilder(t('mail', 'Choose a file to add as attachment')).setMultiSelect(true).build()\n\n\t\t\ttry {\n\t\t\t\tconst paths = await picker.pick(t('mail', 'Choose a file to add as attachment'))\n\t\t\t\t// maybe fiiled front with placeholder loader...?\n\t\t\t\tconst filesFromCloud = await Promise.all(paths.map(getFileData))\n\n\t\t\t\tconst sum = filesFromCloud.reduce((sum, item) => {\n\t\t\t\t\treturn sum + item.size\n\t\t\t\t}, 0)\n\n\t\t\t\tconst newTotal = sum + this.totalSizeOfUpload()\n\n\t\t\t\tif (this.uploadSizeLimit && newTotal > this.uploadSizeLimit) {\n\t\t\t\t\tthis.showAttachmentFileSizeWarning(paths.length)\n\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tthis.emitNewAttachments(paths.map((name, i) => {\n\t\t\t\t\tconst _cloudFile = {\n\t\t\t\t\t\tfileName: name,\n\t\t\t\t\t\tdisplayName: trimStart('/', name),\n\t\t\t\t\t\ttype: 'cloud',\n\t\t\t\t\t\tsize: filesFromCloud[i].size,\n\n\t\t\t\t\t}\n\t\t\t\t\tconst _toAttachmentData = {\n\t\t\t\t\t\tfinished: true,\n\t\t\t\t\t\timageBlobURL: this.generatePreview(_cloudFile),\n\t\t\t\t\t\ttotal: filesFromCloud[i].size,\n\t\t\t\t\t\tsizeString: this.formatBytes(filesFromCloud[i].size),\n\t\t\t\t\t\thasPreview: filesFromCloud[i]['has-preview'],\n\t\t\t\t\t\t// dont know, may be it will be conflict if cloud & local has equal IDs?\n\t\t\t\t\t\tid: filesFromCloud[i].fileid,\n\t\t\t\t\t\tuploaded: 0,\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.attachments.push(Object.assign(_toAttachmentData, _cloudFile))\n\n\t\t\t\t\treturn _cloudFile\n\t\t\t\t}))\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error('could not choose a file as attachment', { error })\n\t\t\t}\n\t\t},\n\t\tasync onAddCloudAttachmentLink() {\n\t\t\tconst picker = getFilePickerBuilder(t('mail', 'Choose a file to share as a link')).build()\n\n\t\t\ttry {\n\t\t\t\tconst path = await picker.pick(t('mail', 'Choose a file to share as a link'))\n\t\t\t\tconst url = await shareFile(path, getRequestToken())\n\n\t\t\t\tthis.appendToBodyAtCursor(`<a href=\"${url}\">${url}</a>`)\n\t\t\t} catch (error) {\n\t\t\t\tlogger.error('could not choose a file as attachment link', { error })\n\t\t\t}\n\t\t},\n\t\tshowAttachmentFileSizeWarning(num) {\n\t\t\tshowWarning(n(\n\t\t\t\t'mail',\n\t\t\t\t'The attachment exceed the allowed attachments size of {size}. Please share the file via link instead.',\n\t\t\t\t'The attachments exceed the allowed attachments size of {size}. Please share the files via link instead.',\n\t\t\t\tnum,\n\t\t\t\t{\n\t\t\t\t\tsize: formatFileSize(this.uploadSizeLimit),\n\t\t\t\t}\n\t\t\t))\n\t\t},\n\t\tonDelete(attachment) {\n\t\t\tif (!attachment.finished) {\n\t\t\t\tattachment.controller.abort()\n\t\t\t}\n\t\t\tconst val = {\n\t\t\t\tfileName: attachment.fileName,\n\t\t\t\tdisplayName: attachment.displayName,\n\t\t\t\tid: attachment.id,\n\t\t\t\tsize: attachment.total,\n\t\t\t\ttype: attachment.type,\n\t\t\t}\n\t\t\tconst _att = this.attachments.filter((a) => {\n\t\t\t\treturn a !== attachment\n\t\t\t})\n\t\t\tthis.attachments = _att\n\n\t\t\tthis.$emit(\n\t\t\t\t'input',\n\t\t\t\tthis.value.filter((a) => {\n\t\t\t\t\tif (val.type === 'cloud') {\n\t\t\t\t\t\treturn a.fileName !== val.fileName\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn a.id !== val.id\n\t\t\t\t\t}\n\n\t\t\t\t})\n\t\t\t)\n\t\t},\n\t\tappendToBodyAtCursor(toAppend) {\n\t\t\tthis.bus.$emit('append-to-body-at-cursor', toAppend)\n\t\t},\n\t\tformatBytes(bytes, decimals = 2) {\n\t\t\tif (bytes === 0) return '0 B'\n\t\t\tconst k = 1024\n\t\t\tconst dm = decimals < 0 ? 0 : decimals\n\t\t\tconst sizes = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB']\n\t\t\tconst i = Math.floor(Math.log(bytes) / Math.log(k))\n\t\t\treturn parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i]\n\t\t},\n\t\tchangeProgress(item, progress) {\n\t\t\tthis.attachments.map((attachment, i) => {\n\t\t\t\tif (item.fileName === attachment.fileName) {\n\t\t\t\t\tif (!attachment.finished) {\n\t\t\t\t\t\tconst _progress = progress <= attachment.total ? progress : attachment.total\n\t\t\t\t\t\tthis.$set(attachment, 'progress', _progress)\n\t\t\t\t\t\tthis.$set(attachment, 'sizeString', this.formatBytes(_progress))\n\t\t\t\t\t\tthis.$set(attachment, 'percent', (_progress / attachment.total) * 100).toFixed(1)\n\t\t\t\t\t\tif (item.total <= _progress) {\n\t\t\t\t\t\t\tthis.$set(attachment, 'finished', true)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn attachment\n\t\t\t})\n\t\t},\n\t\tgeneratePreview(file) {\n\t\t\tif (this.isImage(file)) {\n\t\t\t\treturn URL.createObjectURL(file)\n\t\t\t} else {\n\t\t\t\treturn false\n\t\t\t}\n\t\t},\n\t\tisImage(file) {\n\t\t\treturn file.type && mimes.indexOf(file.type) !== -1\n\t\t},\n\t},\n}\n</script>\n\n<style scoped lang=\"scss\">\n\n.new-message-attachments {\n\t&--counter {\n\t\tcolor: var(--color-text-maxcontrast);\n\t\tpadding: 10px 20px;\n\t\tcursor:pointer;\n\t\tdisplay:flex;\n\t\talign-items: center;\n\n\t\t&--with-errors {\n\t\t\tcolor:red;\n\t\t}\n\t}\n\n\t&--list {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\t// 2 and a half attachment height\n\t\toverflow: auto;\n\t\ttransition: max-height 0.5s cubic-bezier(0, 1, 0, 1);\n\t\tpadding: 0 10px;\n\n\t\t&.hide {\n\t\t\toverflow: hidden;\n\t\t\tmax-height:0;\n\t\t\ttransition: max-height 0.5s cubic-bezier(0, 1, 0, 1);\n\t\t}\n\n\t\t&.active {\n\t\t\toverflow: auto;\n\t\t\tmax-height: 287px;\n\t\t}\n\t}\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ComposerAttachments.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ComposerAttachments.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ComposerAttachments.vue?vue&type=style&index=0&id=1a5f00a0&prod&scoped=true&lang=scss&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ComposerAttachments.vue?vue&type=style&index=0&id=1a5f00a0&prod&scoped=true&lang=scss&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./ComposerAttachments.vue?vue&type=template&id=1a5f00a0&scoped=true&\"\nimport script from \"./ComposerAttachments.vue?vue&type=script&lang=js&\"\nexport * from \"./ComposerAttachments.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ComposerAttachments.vue?vue&type=style&index=0&id=1a5f00a0&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1a5f00a0\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"new-message-attachments\"},[(_vm.hasNextLine)?_c('div',{staticClass:\"new-message-attachments--counter\",class:{ 'new-message-attachments--counter--with-errors': _vm.hasAttachmentErrors },on:{\"click\":function($event){_vm.isToggle = !_vm.isToggle}}},[_c('span',[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.n('mail', '{count} attachment', '{count} attachments', _vm.attachments.length, { count: _vm.attachments.length }))+\" (\"+_vm._s(_vm.formatBytes(_vm.totalSizeOfUpload()))+\")\\n\\t\\t\")]),_vm._v(\" \"),(_vm.isToggle)?_c('ChevronUp',{attrs:{\"size\":24}}):_vm._e(),_vm._v(\" \"),(!_vm.isToggle)?_c('ChevronDown',{attrs:{\"size\":24}}):_vm._e()],1):_vm._e(),_vm._v(\" \"),_c('ul',{staticClass:\"new-message-attachments--list\",class:{\n\t\t\thide: _vm.isToggle,\n\t\t\tactive: !_vm.isToggle && _vm.hasNextLine,\n\t\t}},_vm._l((_vm.attachments),function(attachment){return _c('ComposerAttachment',{key:attachment.id,ref:\"attachments\",refInFor:true,attrs:{\"bus\":_vm.bus,\"attachment\":attachment,\"uploading\":_vm.uploading},on:{\"on-delete-attachment\":function($event){return _vm.onDelete(attachment)}}})}),1),_vm._v(\" \"),_c('input',{ref:\"localAttachments\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"multiple\":\"\"},on:{\"change\":_vm.onLocalAttachmentSelected}})])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RecipientListItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RecipientListItem.vue?vue&type=script&lang=js&\"","<template>\n\t<div class=\"multiselect__tag multiselect__tag--recipient\">\n\t\t<ListItemIcon\n\t\t\t:no-margin=\"true\"\n\t\t\t:title=\"option.label\"\n\t\t\t:avatar-size=\"24\" />\n\t\t<Close\n\t\t\tclass=\"delete-recipient\"\n\t\t\t:size=\"20\"\n\t\t\t@click.prevent=\"removeRecipient(option)\" />\n\t</div>\n</template>\n\n<script>\nimport { NcListItemIcon as ListItemIcon } from '@nextcloud/vue'\nimport Close from 'vue-material-design-icons/Close'\nexport default {\n\tname: 'RecipientListItem',\n\tcomponents: {\n\t\tListItemIcon,\n\t\tClose,\n\t},\n\tprops: {\n\t\toption: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tmethods: {\n\t\tremoveRecipient(option, field) {\n\t\t\tthis.$emit('remove-recipient', option, field)\n\t\t},\n\t},\n}\n</script>\n\n<style scoped lang=\"scss\">\n.multiselect\n\t.multiselect__tags\n\t.multiselect__tags-wrap\n\t.multiselect__tag--recipient {\n\tpadding: 0;\n\tborder-radius: 25px;\n\tborder-color: transparent;\n\tbackground-color: var(--color-background-dark);\n\theight: 24px;\n\n\t& > span.option {\n\t\tmargin-left: 0\n\t}\n}\n.multiselect__tag--recipient .action-item--single {\n\twidth: auto;\n\tmin-width: 24px;\n\theight: 24px;\n\tposition: absolute;\n\tright: -7px;\n}\n.multiselect__tag--recipient .action-item--single .material-design-icon {\n\theight: 24px;\n\twidth: 24px;\n}\n.delete-recipient {\n\tdisplay: inline-flex;\n\talign-items: center;\n\tjustify-content: center;\n\tcursor: pointer;\n\theight: 24px;\n\twidth: 24px;\n\tmin-width: 24px;\n\tmargin-left: 6px;\n\tborder-radius: 50%;\n\n\t&:hover {\n\t\tbackground: var(--color-background-darker);\n\t}\n}\n::v-deep .option {\n\tmargin-left: 10px;\n}\n</style>\n","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RecipientListItem.vue?vue&type=style&index=0&id=62281f92&prod&scoped=true&lang=scss&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RecipientListItem.vue?vue&type=style&index=0&id=62281f92&prod&scoped=true&lang=scss&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./RecipientListItem.vue?vue&type=template&id=62281f92&scoped=true&\"\nimport script from \"./RecipientListItem.vue?vue&type=script&lang=js&\"\nexport * from \"./RecipientListItem.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RecipientListItem.vue?vue&type=style&index=0&id=62281f92&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"62281f92\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"multiselect__tag multiselect__tag--recipient\"},[_c('ListItemIcon',{attrs:{\"no-margin\":true,\"title\":_vm.option.label,\"avatar-size\":24}}),_vm._v(\" \"),_c('Close',{staticClass:\"delete-recipient\",attrs:{\"size\":20},on:{\"click\":function($event){$event.preventDefault();return _vm.removeRecipient(_vm.option)}}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n  - @copyright 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @author 2020 Christoph Wurst <christoph@winzerhof-wurst.at>\n  -\n  - @license AGPL-3.0-or-later\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\t<div id=\"mailvelope-composer\" />\n</template>\n\n<script>\nimport logger from '../logger'\nimport { isPgpgMessage } from '../crypto/pgp'\n\nexport default {\n\tname: 'MailvelopeEditor',\n\tprops: {\n\t\tvalue: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\trecipients: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tquotedText: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: () => undefined,\n\t\t},\n\t\tisReplyOrForward: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\teditor: undefined,\n\t\t}\n\t},\n\tasync mounted() {\n\t\tconst isEncrypted = this.quotedText ? isPgpgMessage(this.quotedText) : false\n\t\tconst quotedMail = this.isReplyOrForward ? this.quotedText?.value : undefined\n\n\t\tthis.editor = await window.mailvelope.createEditorContainer('#mailvelope-composer', undefined, {\n\t\t\tquotedMail: isEncrypted ? quotedMail : undefined,\n\t\t})\n\t},\n\tmethods: {\n\t\tasync pull() {\n\t\t\tconst recipients = this.recipients.map((r) => r.email)\n\t\t\tlogger.info('encrypting message', { recipients })\n\t\t\tconst armored = await this.editor.encrypt(recipients)\n\t\t\tlogger.info('message encryted', { armored })\n\n\t\t\tthis.$emit('input', armored)\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\n#mailvelope-composer {\n\twidth: 100%;\n\theight: 450px;\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MailvelopeEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MailvelopeEditor.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MailvelopeEditor.vue?vue&type=style&index=0&id=0be7aff6&prod&scoped=true&lang=css&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MailvelopeEditor.vue?vue&type=style&index=0&id=0be7aff6&prod&scoped=true&lang=css&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./MailvelopeEditor.vue?vue&type=template&id=0be7aff6&scoped=true&\"\nimport script from \"./MailvelopeEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./MailvelopeEditor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MailvelopeEditor.vue?vue&type=style&index=0&id=0be7aff6&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0be7aff6\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"mailvelope-composer\"}})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div v-if=\"state === STATES.EDITING\" class=\"message-composer\">\n\t\t<div class=\"composer-fields composer-fields__from mail-account\">\n\t\t\t<label class=\"from-label\" for=\"from\">\n\t\t\t\t{{ t('mail', 'From') }}\n\t\t\t</label>\n\t\t\t<div class=\"composer-fields--custom\">\n\t\t\t\t<Multiselect\n\t\t\t\t\tid=\"from\"\n\t\t\t\t\t:value=\"selectedAlias\"\n\t\t\t\t\t:options=\"aliases\"\n\t\t\t\t\tlabel=\"name\"\n\t\t\t\t\ttrack-by=\"selectId\"\n\t\t\t\t\t:searchable=\"false\"\n\t\t\t\t\t:custom-label=\"formatAliases\"\n\t\t\t\t\t:placeholder=\"t('mail', 'Select account')\"\n\t\t\t\t\t:clear-on-select=\"false\"\n\t\t\t\t\t@select=\"onAliasChange\" />\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"composer-fields\">\n\t\t\t<label class=\"to-label\" for=\"to\">\n\t\t\t\t{{ t('mail', 'To') }}\n\t\t\t</label>\n\t\t\t<div class=\"composer-fields--custom\">\n\t\t\t\t<Multiselect id=\"to\"\n\t\t\t\t\tref=\"toLabel\"\n\t\t\t\t\tv-model=\"selectTo\"\n\t\t\t\t\t:class=\"{'opened': !autoLimit}\"\n\t\t\t\t\t:options=\"selectableRecipients\"\n\t\t\t\t\t:taggable=\"true\"\n\t\t\t\t\tlabel=\"label\"\n\t\t\t\t\ttrack-by=\"email\"\n\t\t\t\t\t:multiple=\"true\"\n\t\t\t\t\t:placeholder=\"t('mail', 'Contact or email address …')\"\n\t\t\t\t\t:clear-on-select=\"true\"\n\t\t\t\t\t:close-on-select=\"false\"\n\t\t\t\t\t:show-no-options=\"false\"\n\t\t\t\t\t:preserve-search=\"true\"\n\t\t\t\t\t:hide-selected=\"true\"\n\t\t\t\t\t:loading=\"loadingIndicatorTo\"\n\t\t\t\t\t:auto-limit=\"autoLimit\"\n\t\t\t\t\t@input=\"callSaveDraft(true, getMessageData)\"\n\t\t\t\t\t@tag=\"onNewToAddr\"\n\t\t\t\t\t@search-change=\"onAutocomplete($event, 'to')\">\n\t\t\t\t\t<template #tag=\"{ option }\">\n\t\t\t\t\t\t<RecipientListItem\n\t\t\t\t\t\t\t:option=\"option\"\n\t\t\t\t\t\t\t@remove-recipient=\"onRemoveRecipient(option, 'to')\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t<template #option=\"{ option }\">\n\t\t\t\t\t\t<div class=\"multiselect__tag multiselect__tag-custom\">\n\t\t\t\t\t\t\t<ListItemIcon\n\t\t\t\t\t\t\t\t:no-margin=\"true\"\n\t\t\t\t\t\t\t\t:title=\"option.label\"\n\t\t\t\t\t\t\t\t:subtitle=\"option.email\"\n\t\t\t\t\t\t\t\t:avatar-size=\"24\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t</Multiselect>\n\t\t\t\t<button\n\t\t\t\t\t:title=\"t('mail','Toggle recipients list mode')\"\n\t\t\t\t\t:class=\"{'active':!autoLimit}\"\n\t\t\t\t\t@click.prevent=\"toggleViewMode\">\n\t\t\t\t\t<UnfoldMoreHorizontal v-if=\"autoLimit\" :size=\"24\" />\n\t\t\t\t\t<UnfoldLessHorizontal v-else :size=\"24\" />\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t\t<div v-if=\"showCC\" class=\"composer-fields\">\n\t\t\t<label for=\"cc\" class=\"cc-label\">\n\t\t\t\t{{ t('mail', 'Cc') }}\n\t\t\t</label>\n\t\t\t<div class=\"composer-fields--custom\">\n\t\t\t\t<Multiselect id=\"cc\"\n\t\t\t\t\tv-model=\"selectCc\"\n\t\t\t\t\t:class=\"{'opened': !autoLimit}\"\n\t\t\t\t\t:options=\"selectableRecipients\"\n\t\t\t\t\t:taggable=\"true\"\n\t\t\t\t\tlabel=\"label\"\n\t\t\t\t\ttrack-by=\"email\"\n\t\t\t\t\t:multiple=\"true\"\n\t\t\t\t\t:placeholder=\"t('mail', 'Contact or email address …')\"\n\t\t\t\t\t:clear-on-select=\"true\"\n\t\t\t\t\t:show-no-options=\"false\"\n\t\t\t\t\t:preserve-search=\"true\"\n\t\t\t\t\t:loading=\"loadingIndicatorCc\"\n\t\t\t\t\t:auto-limit=\"autoLimit\"\n\t\t\t\t\t:hide-selected=\"true\"\n\t\t\t\t\t@input=\"callSaveDraft(true, getMessageData)\"\n\t\t\t\t\t@tag=\"onNewCcAddr\"\n\t\t\t\t\t@search-change=\"onAutocomplete($event, 'cc')\">\n\t\t\t\t\t<template #tag=\"{ option }\">\n\t\t\t\t\t\t<RecipientListItem\n\t\t\t\t\t\t\t:option=\"option\"\n\t\t\t\t\t\t\t@remove-recipient=\"onRemoveRecipient(option, 'cc')\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t<template #option=\"{ option }\">\n\t\t\t\t\t\t<div class=\"multiselect__tag multiselect__tag-custom\">\n\t\t\t\t\t\t\t<ListItemIcon\n\t\t\t\t\t\t\t\t:no-margin=\"true\"\n\t\t\t\t\t\t\t\t:title=\"option.label\"\n\t\t\t\t\t\t\t\t:subtitle=\"option.email\"\n\t\t\t\t\t\t\t\t:avatar-size=\"24\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t\t<span slot=\"noOptions\">{{ t('mail', '') }}</span>\n\t\t\t\t</Multiselect>\n\t\t\t</div>\n\t\t</div>\n\t\t<div v-if=\"showBCC\" class=\"composer-fields\">\n\t\t\t<label for=\"bcc\" class=\"bcc-label\">\n\t\t\t\t{{ t('mail', 'Bcc') }}\n\t\t\t</label>\n\t\t\t<div class=\"composer-fields--custom\">\n\t\t\t\t<Multiselect id=\"bcc\"\n\t\t\t\t\tv-model=\"selectBcc\"\n\t\t\t\t\t:class=\"{'opened': !autoLimit}\"\n\t\t\t\t\t:options=\"selectableRecipients\"\n\t\t\t\t\t:taggable=\"true\"\n\t\t\t\t\tlabel=\"label\"\n\t\t\t\t\ttrack-by=\"email\"\n\t\t\t\t\t:multiple=\"true\"\n\t\t\t\t\t:placeholder=\"t('mail', 'Contact or email address …')\"\n\t\t\t\t\t:show-no-options=\"false\"\n\t\t\t\t\t:clear-on-select=\"true\"\n\t\t\t\t\t:preserve-search=\"true\"\n\t\t\t\t\t:loading=\"loadingIndicatorBcc\"\n\t\t\t\t\t:hide-selected=\"true\"\n\t\t\t\t\t@input=\"callSaveDraft(true, getMessageData)\"\n\t\t\t\t\t@tag=\"onNewBccAddr\"\n\t\t\t\t\t@search-change=\"onAutocomplete($event, 'bcc')\">\n\t\t\t\t\t<template #tag=\"{ option }\">\n\t\t\t\t\t\t<RecipientListItem\n\t\t\t\t\t\t\t:option=\"option\"\n\t\t\t\t\t\t\t@remove-recipient=\"onRemoveRecipient(option, 'bcc')\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t<template #option=\"{ option }\">\n\t\t\t\t\t\t<div class=\"multiselect__tag multiselect__tag-custom\">\n\t\t\t\t\t\t\t<ListItemIcon\n\t\t\t\t\t\t\t\t:no-margin=\"true\"\n\t\t\t\t\t\t\t\t:title=\"option.label\"\n\t\t\t\t\t\t\t\t:subtitle=\"option.email\"\n\t\t\t\t\t\t\t\t:avatar-size=\"24\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t\t<span slot=\"noOptions\">{{ t('mail', 'No contacts found.') }}</span>\n\t\t\t\t</Multiselect>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"composer-fields\">\n\t\t\t<label for=\"subject\" class=\"subject-label hidden-visually\">\n\t\t\t\t{{ t('mail', 'Subject') }}\n\t\t\t</label>\n\t\t\t<input\n\t\t\t\tid=\"subject\"\n\t\t\t\tv-model=\"subjectVal\"\n\t\t\t\ttype=\"text\"\n\t\t\t\tname=\"subject\"\n\t\t\t\tclass=\"subject\"\n\t\t\t\tautocomplete=\"off\"\n\t\t\t\t:placeholder=\"t('mail', 'Subject …')\"\n\t\t\t\t@input=\"callSaveDraft(true, getMessageData)\">\n\t\t</div>\n\t\t<div v-if=\"noReply\" class=\"warning noreply-warning\">\n\t\t\t{{ t('mail', 'This message came from a noreply address so your reply will probably not be read.') }}\n\t\t</div>\n\t\t<div v-if=\"mailvelope.keysMissing.length\" class=\"warning noreply-warning\">\n\t\t\t{{\n\t\t\t\tt('mail', 'The following recipients do not have a PGP key: {recipients}.', {\n\t\t\t\t\trecipients: mailvelope.keysMissing.join(', '),\n\t\t\t\t})\n\t\t\t}}\n\t\t</div>\n\t\t<div class=\"composer-fields message-editor\">\n\t\t\t<!--@keypress=\"onBodyKeyPress\"-->\n\t\t\t<TextEditor\n\t\t\t\tv-if=\"!encrypt\"\n\t\t\t\tref=\"editor\"\n\t\t\t\t:key=\"editorMode\"\n\t\t\t\t:value=\"bodyVal\"\n\t\t\t\t:html=\"!editorPlainText\"\n\t\t\t\tname=\"body\"\n\t\t\t\tclass=\"message-body\"\n\t\t\t\t:placeholder=\"t('mail', 'Write message …')\"\n\t\t\t\t:focus=\"isReply\"\n\t\t\t\t:bus=\"bus\"\n\t\t\t\t@input=\"onEditorInput\"\n\t\t\t\t@ready=\"onEditorReady\" />\n\t\t\t<MailvelopeEditor\n\t\t\t\tv-else\n\t\t\t\tref=\"mailvelopeEditor\"\n\t\t\t\t:value=\"bodyVal\"\n\t\t\t\t:recipients=\"allRecipients\"\n\t\t\t\t:quoted-text=\"body\"\n\t\t\t\t:is-reply-or-forward=\"isReply || isForward\"\n\t\t\t\t@input=\"onEditorInput\" />\n\t\t</div>\n\t\t<ComposerAttachments v-model=\"attachments\"\n\t\t\t:bus=\"bus\"\n\t\t\t:upload-size-limit=\"attachmentSizeLimit\"\n\t\t\t@upload=\"onAttachmentsUploading\" />\n\t\t<div class=\"composer-actions-right composer-actions\">\n\t\t\t<div class=\"composer-actions--primary-actions\">\n\t\t\t\t<p class=\"composer-actions-draft-status\">\n\t\t\t\t\t<span v-if=\"savingDraft === true\" class=\"draft-status\">{{ t('mail', 'Saving draft …') }}</span>\n\t\t\t\t\t<span v-else-if=\"!canSaveDraft\" class=\"draft-status\">{{ t('mail', 'Error saving draft') }}</span>\n\t\t\t\t\t<span v-else-if=\"savingDraft === false\" class=\"draft-status\">{{ t('mail', 'Draft saved') }}</span>\n\t\t\t\t</p>\n\t\t\t\t<ButtonVue v-if=\"!savingDraft && !canSaveDraft\"\n\t\t\t\t\tclass=\"button\"\n\t\t\t\t\ttype=\"tertiary\"\n\t\t\t\t\t@click=\"onSave\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<Download :size=\"20\" :title=\"t('mail', 'Save draft')\" />\n\t\t\t\t\t</template>\n\t\t\t\t</ButtonVue>\n\t\t\t\t<ButtonVue v-if=\"savingDraft === false\"\n\t\t\t\t\tclass=\"button\"\n\t\t\t\t\ttype=\"tertiary\"\n\t\t\t\t\t@click=\"discardDraft\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<Delete :size=\"20\" :title=\"t('mail', 'Discard & close draft')\" />\n\t\t\t\t\t</template>\n\t\t\t\t</ButtonVue>\n\t\t\t</div>\n\t\t\t<div class=\"composer-actions--secondary-actions\">\n\t\t\t\t<Actions @close=\"isMoreActionsOpen = false\">\n\t\t\t\t\t<template v-if=\"!isMoreActionsOpen\">\n\t\t\t\t\t\t<ActionButton @click=\"onAddLocalAttachment\">\n\t\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t\t<IconUpload :size=\"20\" />\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\tt('mail', 'Upload attachment')\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t</ActionButton>\n\t\t\t\t\t\t<ActionButton @click=\"onAddCloudAttachment\">\n\t\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t\t<IconFolder :sizse=\"20\" />\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\tt('mail', 'Add attachment from Files')\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t</ActionButton>\n\t\t\t\t\t\t<ActionButton :disabled=\"encrypt\" @click=\"onAddCloudAttachmentLink\">\n\t\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t\t<IconPublic :size=\"20\" />\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\taddShareLink\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t</ActionButton>\n\t\t\t\t\t\t<ActionButton\n\t\t\t\t\t\t\tv-if=\"!isScheduledSendingDisabled\"\n\t\t\t\t\t\t\t:close-after-click=\"false\"\n\t\t\t\t\t\t\t@click=\"isMoreActionsOpen=true\">\n\t\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t\t<SendClock :size=\"20\" :title=\"t('mail', 'Send later')\" />\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\tt('mail', 'Send later')\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t</ActionButton>\n\t\t\t\t\t\t<ActionButton\n\t\t\t\t\t\t\tv-if=\"!encrypt && editorPlainText\"\n\t\t\t\t\t\t\t@click=\"setEditorModeHtml()\">\n\t\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t\t<IconHtml :size=\"20\" />\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t{{ t('mail', 'Enable formatting') }}\n\t\t\t\t\t\t</ActionButton>\n\t\t\t\t\t\t<ActionButton\n\t\t\t\t\t\t\tv-if=\"!encrypt && !editorPlainText\"\n\t\t\t\t\t\t\t@click=\"setEditorModeText()\">\n\t\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t\t<IconClose :size=\"20\" />\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t{{ t('mail', 'Disable formatting') }}\n\t\t\t\t\t\t</ActionButton>\n\t\t\t\t\t\t<ActionCheckbox\n\t\t\t\t\t\t\t:checked=\"requestMdn\"\n\t\t\t\t\t\t\t@check=\"requestMdn = true\"\n\t\t\t\t\t\t\t@uncheck=\"requestMdn = false\">\n\t\t\t\t\t\t\t{{ t('mail', 'Request a read receipt') }}\n\t\t\t\t\t\t</ActionCheckbox>\n\t\t\t\t\t\t<ActionCheckbox\n\t\t\t\t\t\t\tv-if=\"mailvelope.available\"\n\t\t\t\t\t\t\t:checked=\"encrypt\"\n\t\t\t\t\t\t\t@check=\"encrypt = true\"\n\t\t\t\t\t\t\t@uncheck=\"encrypt = false\">\n\t\t\t\t\t\t\t{{ t('mail', 'Encrypt message with Mailvelope') }}\n\t\t\t\t\t\t</ActionCheckbox>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-if=\"isMoreActionsOpen\">\n\t\t\t\t\t\t<ActionButton :close-after-click=\"false\"\n\t\t\t\t\t\t\t@click=\"isMoreActionsOpen=false\">\n\t\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t\t<ChevronLeft\n\t\t\t\t\t\t\t\t\t:title=\"t('mail', 'Send later')\"\n\t\t\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t\t\t\t{{ t('mail', 'Send later') }}\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</ActionButton>\n\t\t\t\t\t\t<ActionRadio :value=\"undefined\"\n\t\t\t\t\t\t\tname=\"sendLater\"\n\t\t\t\t\t\t\t:checked=\"!sendAtVal\"\n\t\t\t\t\t\t\tclass=\"send-action-radio\"\n\t\t\t\t\t\t\t@change=\"onChangeSendLater(undefined)\">\n\t\t\t\t\t\t\t{{ t('mail', 'Send now') }}\n\t\t\t\t\t\t</ActionRadio>\n\t\t\t\t\t\t<ActionRadio :value=\"dateTomorrowMorning\"\n\t\t\t\t\t\t\tname=\"sendLater\"\n\t\t\t\t\t\t\t:checked=\"isSendAtTomorrowMorning\"\n\t\t\t\t\t\t\tclass=\"send-action-radio send-action-radio--multiline\"\n\t\t\t\t\t\t\t@change=\"onChangeSendLater(dateTomorrowMorning)\">\n\t\t\t\t\t\t\t{{ t('mail', 'Tomorrow morning') }} - {{ convertToLocalDate(dateTomorrowMorning) }}\n\t\t\t\t\t\t</ActionRadio>\n\t\t\t\t\t\t<ActionRadio :value=\"dateTomorrowAfternoon\"\n\t\t\t\t\t\t\tname=\"sendLater\"\n\t\t\t\t\t\t\t:checked=\"isSendAtTomorrowAfternoon\"\n\t\t\t\t\t\t\tclass=\"send-action-radio send-action-radio--multiline\"\n\t\t\t\t\t\t\t@change=\"onChangeSendLater(dateTomorrowAfternoon)\">\n\t\t\t\t\t\t\t{{ t('mail', 'Tomorrow afternoon') }} - {{ convertToLocalDate(dateTomorrowAfternoon) }}\n\t\t\t\t\t\t</ActionRadio>\n\t\t\t\t\t\t<ActionRadio :value=\"dateMondayMorning\"\n\t\t\t\t\t\t\tname=\"sendLater\"\n\t\t\t\t\t\t\t:checked=\"isSendAtMondayMorning\"\n\t\t\t\t\t\t\tclass=\"send-action-radio send-action-radio--multiline\"\n\t\t\t\t\t\t\t@change=\"onChangeSendLater(dateMondayMorning)\">\n\t\t\t\t\t\t\t{{ t('mail', 'Monday morning') }} - {{ convertToLocalDate(dateMondayMorning) }}\n\t\t\t\t\t\t</ActionRadio>\n\t\t\t\t\t\t<ActionRadio name=\"sendLater\"\n\t\t\t\t\t\t\tclass=\"send-action-radio\"\n\t\t\t\t\t\t\t:checked=\"isSendAtCustom\"\n\t\t\t\t\t\t\t:value=\"customSendTime\"\n\t\t\t\t\t\t\t@change=\"onChangeSendLater(customSendTime)\">\n\t\t\t\t\t\t\t{{ t('mail', 'Custom date and time') }}\n\t\t\t\t\t\t</ActionRadio>\n\t\t\t\t\t\t<ActionInput v-model=\"selectedDate\"\n\t\t\t\t\t\t\ttype=\"datetime-local\"\n\t\t\t\t\t\t\t:first-day-of-week=\"firstDayDatetimePicker\"\n\t\t\t\t\t\t\t:use12h=\"showAmPm\"\n\t\t\t\t\t\t\t:formatter=\"formatter\"\n\t\t\t\t\t\t\t:format=\"'YYYY-MM-DD HH:mm'\"\n\t\t\t\t\t\t\ticon=\"\"\n\t\t\t\t\t\t\t:minute-step=\"5\"\n\t\t\t\t\t\t\t:show-second=\"false\"\n\t\t\t\t\t\t\t:disabled-date=\"disabledDatetimepickerDate\"\n\t\t\t\t\t\t\t:disabled-time=\"disabledDatetimepickerTime\"\n\t\t\t\t\t\t\t@change=\"onChangeSendLater(customSendTime)\">\n\t\t\t\t\t\t\t{{ t('mail', 'Enter a date') }}\n\t\t\t\t\t\t</ActionInput>\n\t\t\t\t\t</template>\n\t\t\t\t</Actions>\n\n\t\t\t\t<ButtonVue :disabled=\"!canSend\"\n\t\t\t\t\tnative-type=\"submit\"\n\t\t\t\t\ttype=\"primary\"\n\t\t\t\t\t@click=\"onSend\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<Send\n\t\t\t\t\t\t\t:title=\"submitButtonTitle\"\n\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ submitButtonTitle }}\n\t\t\t\t</ButtonVue>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<Loading v-else-if=\"state === STATES.UPLOADING\" :hint=\"t('mail', 'Uploading attachments …')\" role=\"alert\" />\n\t<Loading v-else-if=\"state === STATES.SENDING\"\n\t\t:hint=\"t('mail', 'Sending …')\"\n\t\trole=\"alert\"\n\t\tclass=\"sending-hint\" />\n\t<EmptyContent v-else-if=\"state === STATES.ERROR\"\n\t\t:title=\"t('mail', 'Error sending your message')\"\n\t\tclass=\"centered-content\"\n\t\trole=\"alert\">\n\t\t<p v-if=\"errorText\">\n\t\t\t{{ errorText }}\n\t\t</p>\n\t\t<template #action>\n\t\t\t<ButtonVue type=\"tertiary\" @click=\"state = STATES.EDITING\">\n\t\t\t\t{{ t('mail', 'Go back') }}\n\t\t\t</ButtonVue>\n\t\t\t<ButtonVue type=\"tertiary\" @click=\"onSend\">\n\t\t\t\t{{ t('mail', 'Retry') }}\n\t\t\t</ButtonVue>\n\t\t</template>\n\t</EmptyContent>\n\t<div v-else-if=\"state === STATES.WARNING\" class=\"emptycontent\" role=\"alert\">\n\t\t<h2>{{ t('mail', 'Warning sending your message') }}</h2>\n\t\t<p v-if=\"errorText\">\n\t\t\t{{ errorText }}\n\t\t</p>\n\t\t<ButtonVue type=\"tertiary\" @click=\"state = STATES.EDITING\">\n\t\t\t{{ t('mail', 'Go back') }}\n\t\t</ButtonVue>\n\t\t<ButtonVue type=\"tertiary\" @click=\"onForceSend\">\n\t\t\t{{ t('mail', 'Send anyway') }}\n\t\t</ButtonVue>\n\t</div>\n\t<EmptyContent v-else :title=\"sendAtVal ? t('mail', 'Message will be sent at') + ' ' + convertToLocalDate(sendAtVal) : t('mail', 'Message sent!')\">\n\t\t<template #icon>\n\t\t\t<IconCheck :size=\"20\" />\n\t\t</template>\n\t</EmptyContent>\n</template>\n\n<script>\nimport debounce from 'lodash/fp/debounce'\nimport uniqBy from 'lodash/fp/uniqBy'\nimport isArray from 'lodash/fp/isArray'\nimport trimStart from 'lodash/fp/trimCharsStart'\nimport Autosize from 'vue-autosize'\nimport debouncePromise from 'debounce-promise'\n\nimport { NcActions as Actions, NcActionButton as ActionButton, NcActionCheckbox as ActionCheckbox, NcActionInput as ActionInput, NcActionRadio as ActionRadio, NcButton as ButtonVue, NcEmptyContent as EmptyContent, NcMultiselect as Multiselect, NcListItemIcon as ListItemIcon } from '@nextcloud/vue'\nimport ChevronLeft from 'vue-material-design-icons/ChevronLeft'\nimport Delete from 'vue-material-design-icons/Delete'\nimport ComposerAttachments from './ComposerAttachments'\nimport Download from 'vue-material-design-icons/Download'\nimport IconUpload from 'vue-material-design-icons/Upload'\nimport IconFolder from 'vue-material-design-icons/Folder'\nimport IconPublic from 'vue-material-design-icons/Link'\nimport IconCheck from 'vue-material-design-icons/Check'\nimport RecipientListItem from './RecipientListItem'\nimport UnfoldMoreHorizontal from 'vue-material-design-icons/UnfoldMoreHorizontal'\nimport UnfoldLessHorizontal from 'vue-material-design-icons/UnfoldLessHorizontal'\nimport IconHtml from 'vue-material-design-icons/ImageSizeSelectActual'\nimport IconClose from 'vue-material-design-icons/Close'\nimport { showError } from '@nextcloud/dialogs'\nimport { getCanonicalLocale, getFirstDay, getLocale, translate as t } from '@nextcloud/l10n'\nimport Vue from 'vue'\n\nimport { findRecipient } from '../service/AutocompleteService'\nimport { detect, html, plain, toHtml, toPlain } from '../util/text'\nimport Loading from './Loading'\nimport logger from '../logger'\nimport TextEditor from './TextEditor'\nimport { buildReplyBody } from '../ReplyBuilder'\nimport MailvelopeEditor from './MailvelopeEditor'\nimport { getMailvelope } from '../crypto/mailvelope'\nimport { isPgpgMessage } from '../crypto/pgp'\nimport { matchError } from '../errors/match'\nimport NoSentMailboxConfiguredError from '../errors/NoSentMailboxConfiguredError'\nimport NoDraftsMailboxConfiguredError from '../errors/NoDraftsMailboxConfiguredError'\nimport ManyRecipientsError from '../errors/ManyRecipientsError'\n\nimport Send from 'vue-material-design-icons/Send'\nimport SendClock from 'vue-material-design-icons/SendClock'\nimport moment from '@nextcloud/moment'\nimport { mapGetters } from 'vuex'\nimport { TRIGGER_CHANGE_ALIAS, TRIGGER_EDITOR_READY } from '../ckeditor/signature/InsertSignatureCommand'\nimport { EDITOR_MODE_HTML, EDITOR_MODE_TEXT } from '../store/constants'\n\nconst debouncedSearch = debouncePromise(findRecipient, 500)\n\nconst NO_ALIAS_SET = -1\n\nVue.use(Autosize)\n\nconst STATES = Object.seal({\n\tEDITING: 0,\n\tUPLOADING: 1,\n\tSENDING: 2,\n\tERROR: 3,\n\tWARNING: 4,\n\tFINISHED: 5,\n\tDISCARDING: 6,\n\tDISCARDED: 7,\n})\n\nexport default {\n\tname: 'Composer',\n\tcomponents: {\n\t\tMailvelopeEditor,\n\t\tActions,\n\t\tActionButton,\n\t\tActionCheckbox,\n\t\tActionInput,\n\t\tActionRadio,\n\t\tButtonVue,\n\t\tComposerAttachments,\n\t\tChevronLeft,\n\t\tDelete,\n\t\tDownload,\n\t\tIconUpload,\n\t\tIconFolder,\n\t\tIconPublic,\n\t\tIconCheck,\n\t\tLoading,\n\t\tMultiselect,\n\t\tTextEditor,\n\t\tEmptyContent,\n\t\tListItemIcon,\n\t\tRecipientListItem,\n\t\tSend,\n\t\tSendClock,\n\t\tUnfoldMoreHorizontal,\n\t\tUnfoldLessHorizontal,\n\t\tIconHtml,\n\t\tIconClose,\n\t},\n\tprops: {\n\t\tfromAccount: {\n\t\t\ttype: Number,\n\t\t\tdefault: () => undefined,\n\t\t},\n\t\tto: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t},\n\t\tcc: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t},\n\t\tbcc: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t},\n\t\tsubject: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tbody: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => html(''),\n\t\t},\n\t\teditorBody: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tdraftId: {\n\t\t\ttype: Number,\n\t\t\tdefault: undefined,\n\t\t},\n\t\tdraft: {\n\t\t\ttype: Function,\n\t\t\trequired: true,\n\t\t},\n\t\tsend: {\n\t\t\ttype: Function,\n\t\t\trequired: true,\n\t\t},\n\t\tinReplyToMessageId: {\n\t\t\ttype: String,\n\t\t\tdefault: undefined,\n\t\t},\n\t\treplyTo: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: () => undefined,\n\t\t},\n\t\tforwardFrom: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: () => undefined,\n\t\t},\n\t\tforwardedMessages: {\n\t\t\ttype: Array,\n\t\t\trequired: false,\n\t\t\tdefault: () => [],\n\t\t},\n\t\tsendAt: {\n\t\t\ttype: Number,\n\t\t\tdefault: undefined,\n\t\t},\n\t\tattachmentsData: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t},\n\t},\n\tdata() {\n\t\t// Set default custom date time picker value to now + 1 hour\n\t\tconst selectedDate = new Date()\n\t\tselectedDate.setHours(selectedDate.getHours() + 1)\n\n\t\treturn {\n\t\t\tshowCC: this.cc.length > 0,\n\t\t\tshowBCC: this.bcc.length > 0,\n\t\t\tselectedAlias: NO_ALIAS_SET, // Fixed in `beforeMount`\n\t\t\tautocompleteRecipients: this.to.concat(this.cc).concat(this.bcc),\n\t\t\tnewRecipients: [],\n\t\t\tsubjectVal: this.subject,\n\t\t\tbodyVal: this.editorBody,\n\t\t\tattachments: this.attachmentsData,\n\t\t\tnoReply: this.to.some((to) => to.email.startsWith('noreply@') || to.email.startsWith('no-reply@')),\n\t\t\tdraftsPromise: Promise.resolve(this.draftId),\n\t\t\tattachmentsPromise: Promise.resolve(),\n\t\t\tcanSaveDraft: true,\n\t\t\tsavingDraft: undefined,\n\t\t\tsaveDraftDebounced: debounce(10 * 1000, this.saveDraft),\n\t\t\tstate: STATES.EDITING,\n\t\t\terrorText: undefined,\n\t\t\tSTATES,\n\t\t\tselectTo: this.to,\n\t\t\tselectCc: this.cc,\n\t\t\tselectBcc: this.bcc,\n\t\t\tbus: new Vue(),\n\t\t\tencrypt: false,\n\t\t\tmailvelope: {\n\t\t\t\tavailable: false,\n\t\t\t\tkeyRing: undefined,\n\t\t\t\tkeysMissing: [],\n\t\t\t},\n\t\t\teditorMode: (this.body?.format !== 'html') ? EDITOR_MODE_TEXT : EDITOR_MODE_HTML,\n\t\t\taddShareLink: t('mail', 'Add share link from {productName} Files', { productName: OC?.theme?.name ?? 'Nextcloud' }),\n\t\t\trequestMdn: false,\n\t\t\tchangeSignature: false,\n\t\t\tloadingIndicatorTo: false,\n\t\t\tloadingIndicatorCc: false,\n\t\t\tloadingIndicatorBcc: false,\n\t\t\tisMoreActionsOpen: false,\n\t\t\tselectedDate,\n\t\t\tsendAtVal: this.sendAt,\n\t\t\tfirstDayDatetimePicker: getFirstDay() === 0 ? 7 : getFirstDay(),\n\t\t\tformatter: {\n\t\t\t\tstringify: (date) => {\n\t\t\t\t\treturn date ? moment(date).format('LLL') : ''\n\t\t\t\t},\n\t\t\t\tparse: (value) => {\n\t\t\t\t\treturn value ? moment(value, 'LLL').toDate() : null\n\t\t\t\t},\n\t\t\t},\n\t\t\tautoLimit: true,\n\t\t}\n\t},\n\tcomputed: {\n\t\t...mapGetters([\n\t\t\t'isScheduledSendingDisabled',\n\t\t]),\n\t\taliases() {\n\t\t\tlet cnt = 0\n\t\t\tconst accounts = this.$store.getters.accounts.filter((a) => !a.isUnified)\n\t\t\tconst aliases = accounts.flatMap((account) => [\n\t\t\t\t{\n\t\t\t\t\tid: account.id,\n\t\t\t\t\taliasId: null,\n\t\t\t\t\tselectId: cnt++,\n\t\t\t\t\teditorMode: account.editorMode,\n\t\t\t\t\tsignature: account.signature,\n\t\t\t\t\tname: account.name,\n\t\t\t\t\temailAddress: account.emailAddress,\n\t\t\t\t\tsignatureAboveQuote: account.signatureAboveQuote,\n\t\t\t\t},\n\t\t\t\taccount.aliases.map((alias) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: account.id,\n\t\t\t\t\t\taliasId: alias.id,\n\t\t\t\t\t\tselectId: cnt++,\n\t\t\t\t\t\teditorMode: account.editorMode,\n\t\t\t\t\t\tsignature: alias.signature,\n\t\t\t\t\t\tname: alias.name,\n\t\t\t\t\t\temailAddress: alias.alias,\n\t\t\t\t\t\tsignatureAboveQuote: account.signatureAboveQuote,\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t])\n\t\t\treturn aliases.flat()\n\t\t},\n\t\tallRecipients() {\n\t\t\treturn this.selectTo.concat(this.selectCc).concat(this.selectBcc)\n\t\t},\n\t\tattachmentSizeLimit() {\n\t\t\treturn this.$store.getters.getPreference('attachment-size-limit')\n\t\t},\n\t\tselectableRecipients() {\n\t\t\treturn this.newRecipients\n\t\t\t\t.concat(this.autocompleteRecipients)\n\t\t\t\t.map((recipient) => ({ ...recipient, label: recipient.label || recipient.email }))\n\t\t},\n\t\tisForward() {\n\t\t\treturn this.forwardFrom !== undefined\n\t\t},\n\t\tisReply() {\n\t\t\treturn this.replyTo !== undefined\n\t\t},\n\t\tcanSend() {\n\t\t\tif (this.encrypt && this.mailvelope.keysMissing.length) {\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\treturn this.selectTo.length > 0 || this.selectCc.length > 0 || this.selectBcc.length > 0\n\t\t},\n\t\teditorPlainText() {\n\t\t\treturn this.editorMode === EDITOR_MODE_TEXT\n\t\t},\n\t\tsubmitButtonTitle() {\n\t\t\tif (this.sendAtVal) {\n\t\t\t\treturn t('mail', 'Send later') + ` ${this.convertToLocalDate(this.sendAtVal)}`\n\t\t\t}\n\t\t\tif (!this.mailvelope.available) {\n\t\t\t\treturn t('mail', 'Send')\n\t\t\t}\n\n\t\t\treturn this.encrypt ? t('mail', 'Encrypt and send') : t('mail', 'Send unencrypted')\n\t\t},\n\t\tdateTomorrowMorning() {\n\t\t\tconst today = new Date()\n\t\t\ttoday.setTime(today.getTime() + 24 * 60 * 60 * 1000)\n\t\t\treturn today.setHours(9, 0, 0, 0)\n\n\t\t},\n\t\tdateTomorrowAfternoon() {\n\t\t\tconst today = new Date()\n\t\t\ttoday.setTime(today.getTime() + 24 * 60 * 60 * 1000)\n\t\t\treturn today.setHours(14, 0, 0, 0)\n\t\t},\n\t\tdateMondayMorning() {\n\t\t\tconst today = new Date()\n\t\t\ttoday.setHours(9, 0, 0, 0)\n\t\t\treturn today.setDate(today.getDate() + (7 - today.getDay()) % 7 + 1)\n\t\t},\n\t\tcustomSendTime() {\n\t\t\treturn new Date(this.selectedDate).getTime()\n\t\t},\n\t\tshowAmPm() {\n\t\t\tconst localeData = moment().locale(getLocale()).localeData()\n\t\t\tconst timeFormat = localeData.longDateFormat('LT').toLowerCase()\n\n\t\t\treturn timeFormat.indexOf('a') !== -1\n\t\t},\n\t\tisSendAtTomorrowMorning() {\n\t\t\tif (this.sendAtVal && Math.floor(this.dateTomorrowMorning / 1000) === Math.floor(this.sendAtVal / 1000)) {\n\t\t\t\treturn true\n\t\t\t} else {\n\t\t\t\treturn false\n\t\t\t}\n\t\t},\n\t\tisSendAtTomorrowAfternoon() {\n\t\t\tif (this.sendAtVal && Math.floor(this.dateTomorrowAfternoon / 1000) === Math.floor(this.sendAtVal / 1000)) {\n\t\t\t\treturn true\n\t\t\t} else {\n\t\t\t\treturn false\n\t\t\t}\n\t\t},\n\t\tisSendAtMondayMorning() {\n\t\t\tif (this.sendAtVal && Math.floor(this.dateMondayMorning / 1000) === Math.floor(this.sendAtVal / 1000)) {\n\t\t\t\treturn true\n\t\t\t} else {\n\t\t\t\treturn false\n\t\t\t}\n\t\t},\n\t\tisSendAtCustom() {\n\t\t\tif (this.sendAtVal && !this.isSendAtTomorrowMorning && !this.isSendAtTomorrowAfternoon && !this.isSendAtMondayMorning) {\n\t\t\t\treturn true\n\t\t\t} else {\n\t\t\t\treturn false\n\t\t\t}\n\t\t},\n\t},\n\twatch: {\n\t\t'$route.params.threadId'() {\n\t\t\tthis.reset()\n\t\t},\n\t\tallRecipients() {\n\t\t\tthis.checkRecipientsKeys()\n\t\t},\n\t\taliases(newAliases) {\n\t\t\tconsole.debug('aliases changed')\n\t\t\tif (this.selectedAlias === NO_ALIAS_SET) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst newAlias = newAliases.find(alias => alias.id === this.selectedAlias.id && alias.aliasId === this.selectedAlias.aliasId)\n\t\t\tif (newAlias === undefined) {\n\t\t\t\t// selected alias does not exist anymore.\n\t\t\t\tthis.onAliasChange(newAliases[0])\n\t\t\t} else {\n\t\t\t\t// update the selected alias\n\t\t\t\tthis.onAliasChange(newAlias)\n\t\t\t}\n\t\t},\n\t},\n\tasync beforeMount() {\n\t\tthis.setAlias()\n\t\tthis.initBody()\n\t\tawait this.onMailvelopeLoaded(await getMailvelope())\n\t},\n\tmounted() {\n\t\tif (!this.isReply) {\n\t\t\tthis.$nextTick(() => this.$refs.toLabel.$el.focus())\n\t\t}\n\n\t\t// Add attachments in case of forward\n\t\tif (this.forwardFrom?.attachments !== undefined) {\n\t\t\tthis.forwardFrom.attachments.forEach(att => {\n\t\t\t\tthis.attachments.push({\n\t\t\t\t\tfileName: att.fileName,\n\t\t\t\t\tdisplayName: trimStart('/', att.fileName),\n\t\t\t\t\tid: att.id,\n\t\t\t\t\tmessageId: this.forwardFrom.databaseId,\n\t\t\t\t\ttype: 'message-attachment',\n\t\t\t\t})\n\t\t\t})\n\t\t}\n\t\t// Add messages forwarded as attachments\n\t\tlet forwards = []\n\t\tif (this.forwardedMessages && !isArray(this.forwardedMessages)) {\n\t\t\tforwards = [this.forwardedMessages]\n\t\t} else if (this.forwardedMessages && isArray(this.forwardedMessages)) {\n\t\t\tforwards = this.forwardedMessages\n\t\t}\n\t\tforwards.forEach(id => {\n\t\t\tconst env = this.$store.getters.getEnvelope(id)\n\t\t\tif (!env) {\n\t\t\t\t// TODO: also happens when the composer page is reloaded\n\t\t\t\tshowError(t('mail', 'Message {id} could not be found', {\n\t\t\t\t\tid,\n\t\t\t\t}))\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthis.attachments.push({\n\t\t\t\tdisplayName: env.subject + '.eml',\n\t\t\t\tid,\n\t\t\t\ttype: 'message',\n\t\t\t})\n\t\t})\n\n\t\t// Set custom date and time picker value if initialized with custom send at value\n\t\tif (this.sendAt && this.isSendAtCustom) {\n\t\t\tthis.selectedDate = new Date(this.sendAt)\n\t\t}\n\t},\n\tbeforeDestroy() {\n\t\twindow.removeEventListener('mailvelope', this.onMailvelopeLoaded)\n\t},\n\tmethods: {\n\t\tsetAlias() {\n\t\t\tconst previous = this.selectedAlias\n\t\t\tif (this.fromAccount) {\n\t\t\t\tthis.selectedAlias = this.aliases.find((alias) => alias.id === this.fromAccount)\n\t\t\t} else {\n\t\t\t\tthis.selectedAlias = this.aliases[0]\n\t\t\t}\n\t\t\t// Only overwrite editormode if body is empty\n\t\t\tif (previous === NO_ALIAS_SET && (!this.body || this.body.value === '')) {\n\t\t\t\tthis.editorMode = this.selectedAlias.editorMode\n\t\t\t}\n\t\t},\n\t\tasync checkRecipientsKeys() {\n\t\t\tif (!this.encrypt || !this.mailvelope.available) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst recipients = this.allRecipients.map((r) => r.email)\n\t\t\tconst keysValid = await this.mailvelope.keyRing.validKeyForAddress(recipients)\n\t\t\tlogger.debug('recipients keys validated', { recipients, keysValid })\n\t\t\tthis.mailvelope.keysMissing = recipients.filter((r) => keysValid[r] === false)\n\t\t},\n\t\tinitBody() {\n\t\t\t/** @member {Text} body */\n\t\t\tlet body\n\t\t\tif (this.replyTo) {\n\t\t\t\tbody = buildReplyBody(\n\t\t\t\t\tthis.editorPlainText ? toPlain(this.body) : toHtml(this.body),\n\t\t\t\t\tthis.replyTo.from[0],\n\t\t\t\t\tthis.replyTo.dateInt,\n\t\t\t\t\tthis.$store.getters.getPreference('reply-mode', 'top') === 'top'\n\t\t\t\t).value\n\t\t\t} else if (this.forwardFrom) {\n\t\t\t\tbody = buildReplyBody(\n\t\t\t\t\tthis.editorPlainText ? toPlain(this.body) : toHtml(this.body),\n\t\t\t\t\tthis.forwardFrom.from[0],\n\t\t\t\t\tthis.forwardFrom.dateInt,\n\t\t\t\t\tthis.$store.getters.getPreference('reply-mode', 'top') === 'top'\n\t\t\t\t).value\n\t\t\t} else {\n\t\t\t\tbody = this.bodyVal\n\t\t\t}\n\t\t\tthis.bodyVal = html(body).value\n\t\t},\n\t\tgetMessageData(id) {\n\t\t\treturn {\n\t\t\t\t// TODO: Rename account to accountId\n\t\t\t\taccount: this.selectedAlias.id,\n\t\t\t\taccountId: this.selectedAlias.id,\n\t\t\t\taliasId: this.selectedAlias.aliasId,\n\t\t\t\tto: this.selectTo,\n\t\t\t\tcc: this.selectCc,\n\t\t\t\tbcc: this.selectBcc,\n\t\t\t\tdraftId: id,\n\t\t\t\tsubject: this.subjectVal,\n\t\t\t\tbody: this.encrypt ? plain(this.bodyVal) : html(this.bodyVal),\n\t\t\t\tattachments: this.attachments,\n\t\t\t\tinReplyToMessageId: this.inReplyToMessageId ?? (this.replyTo ? this.replyTo.messageId : undefined),\n\t\t\t\tisHtml: !this.editorPlainText,\n\t\t\t\trequestMdn: this.requestMdn,\n\t\t\t\tsendAt: this.sendAtVal ? Math.floor(this.sendAtVal / 1000) : undefined,\n\t\t\t}\n\t\t},\n\t\tsaveDraft(data) {\n\t\t\tthis.savingDraft = true\n\t\t\tthis.draftsPromise = this.draftsPromise\n\t\t\t\t.then((id) => {\n\t\t\t\t\tconst draftData = data(id)\n\t\t\t\t\tif (\n\t\t\t\t\t\t!id\n\t\t\t\t\t\t&& !draftData.subject\n\t\t\t\t\t\t&& !draftData.body\n\t\t\t\t\t\t&& !draftData.cc\n\t\t\t\t\t\t&& !draftData.bcc\n\t\t\t\t\t\t&& !draftData.to\n\t\t\t\t\t\t&& !draftData.sendAt\n\t\t\t\t\t) {\n\t\t\t\t\t\t// this might happen after a call to reset()\n\t\t\t\t\t\t// where the text input gets reset as well\n\t\t\t\t\t\t// and fires an input event\n\t\t\t\t\t\tlogger.debug('Nothing substantial to save, ignoring draft save')\n\t\t\t\t\t\tthis.savingDraft = false\n\t\t\t\t\t\treturn id\n\t\t\t\t\t}\n\t\t\t\t\treturn this.draft(draftData)\n\t\t\t\t})\n\t\t\t\t.then((uid) => {\n\t\t\t\t\t// It works (again)\n\t\t\t\t\tthis.canSaveDraft = true\n\n\t\t\t\t\treturn uid\n\t\t\t\t})\n\t\t\t\t.catch(async (error) => {\n\t\t\t\t\tawait matchError(error, {\n\t\t\t\t\t\t[NoDraftsMailboxConfiguredError.getName()]() {\n\t\t\t\t\t\t\treturn false\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdefault() {\n\t\t\t\t\t\t\treturn true\n\t\t\t\t\t\t},\n\t\t\t\t\t})\n\t\t\t\t\tthis.canSaveDraft = false\n\t\t\t\t})\n\t\t\t\t.then((uid) => {\n\t\t\t\t\tthis.savingDraft = false\n\t\t\t\t\treturn uid\n\t\t\t\t})\n\t\t\treturn this.draftsPromise\n\t\t},\n\t\tcallSaveDraft(withDebounce, ...args) {\n\t\t\tif (withDebounce) {\n\t\t\t\treturn this.saveDraftDebounced(...args)\n\t\t\t} else {\n\t\t\t\treturn this.saveDraft(...args)\n\t\t\t}\n\t\t},\n\t\tonSave() {\n\t\t\tthis.callSaveDraft(false, this.getMessageData)\n\t\t},\n\t\tinsertSignature() {\n\t\t\tlet trigger\n\n\t\t\tif (this.changeSignature) {\n\t\t\t\ttrigger = TRIGGER_CHANGE_ALIAS\n\t\t\t} else {\n\t\t\t\ttrigger = TRIGGER_EDITOR_READY\n\t\t\t}\n\n\t\t\tthis.$refs.editor.editorExecute('insertSignature',\n\t\t\t\ttrigger,\n\t\t\t\ttoHtml(detect(this.selectedAlias.signature)).value,\n\t\t\t\tthis.selectedAlias.signatureAboveQuote\n\t\t\t)\n\n\t\t\tthis.changeSignature = false\n\t\t},\n\t\tonEditorInput(text) {\n\t\t\tthis.bodyVal = text\n\t\t\tthis.callSaveDraft(true, this.getMessageData)\n\t\t},\n\t\tonEditorReady(editor) {\n\t\t\tthis.bodyVal = editor.getData()\n\t\t\tthis.insertSignature()\n\t\t},\n\t\tonChangeSendLater(value) {\n\t\t\tthis.sendAtVal = value ? Number.parseInt(value, 10) : undefined\n\t\t},\n\t\tconvertToLocalDate(timestamp) {\n\t\t\tconst options = {\n\t\t\t\tmonth: 'short',\n\t\t\t\tday: 'numeric',\n\t\t\t\thour: '2-digit',\n\t\t\t\tminute: '2-digit',\n\t\t\t}\n\t\t\treturn new Date(timestamp).toLocaleString(getCanonicalLocale(), options)\n\t\t},\n\t\tonAliasChange(alias) {\n\t\t\tlogger.debug('changed alias', { alias })\n\t\t\tthis.selectedAlias = alias\n\t\t\tthis.changeSignature = true\n\n\t\t\t/**\n\t\t\t * Alias change may change the editor mode as well.\n\t\t\t *\n\t\t\t * As editorMode is the key for the TextEditor component a change will destroy the current instance\n\t\t\t * and the signature for the alias is inserted via onEditorReady event.\n\t\t\t *\n\t\t\t * Otherwise (when editorMode is the same) call insertSignature directly.\n\t\t\t */\n\t\t\tif (this.editorMode === EDITOR_MODE_TEXT && alias.editorMode === EDITOR_MODE_HTML) {\n\t\t\t\tthis.editorMode = EDITOR_MODE_HTML\n\t\t\t} else {\n\t\t\t\tthis.insertSignature()\n\t\t\t}\n\t\t},\n\t\tonAddLocalAttachment() {\n\t\t\tthis.bus.$emit('on-add-local-attachment')\n\t\t\tthis.callSaveDraft(true, this.getMessageData)\n\t\t},\n\t\tonAddCloudAttachment() {\n\t\t\tthis.bus.$emit('on-add-cloud-attachment')\n\t\t\tthis.callSaveDraft(true, this.getMessageData)\n\t\t},\n\t\tonAddCloudAttachmentLink() {\n\t\t\tthis.bus.$emit('on-add-cloud-attachment-link')\n\t\t},\n\t\tonAutocomplete(term, loadingIndicator) {\n\t\t\tif (term === undefined || term === '') {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.loadingIndicatorTo = loadingIndicator === 'to'\n\t\t\tthis.loadingIndicatorCc = loadingIndicator === 'cc'\n\t\t\tthis.loadingIndicatorBcc = loadingIndicator === 'bcc'\n\t\t\tdebouncedSearch(term).then((results) => {\n\t\t\t\tif (loadingIndicator === 'to') {\n\t\t\t\t\tthis.loadingIndicatorTo = false\n\t\t\t\t} else if (loadingIndicator === 'cc') {\n\t\t\t\t\tthis.loadingIndicatorCc = false\n\t\t\t\t} else if (loadingIndicator === 'bcc') {\n\t\t\t\t\tthis.loadingIndicatorBcc = false\n\t\t\t\t}\n\t\t\t\tthis.autocompleteRecipients = uniqBy('email')(this.autocompleteRecipients.concat(results))\n\t\t\t})\n\t\t},\n\t\tonAttachmentsUploading(uploaded) {\n\t\t\tthis.attachmentsPromise = this.attachmentsPromise\n\t\t\t\t.then(() => uploaded)\n\t\t\t\t.then(() => this.callSaveDraft(true, this.getMessageData))\n\t\t\t\t.then(() => logger.debug('attachments uploaded'))\n\t\t\t\t.catch((error) => logger.error('could not upload attachments', { error }))\n\t\t},\n\t\tasync onMailvelopeLoaded(mailvelope) {\n\t\t\tthis.encrypt = isPgpgMessage(this.body)\n\t\t\tthis.mailvelope.available = true\n\t\t\tlogger.info('Mailvelope loaded', {\n\t\t\t\tencrypt: this.encrypt,\n\t\t\t\tisPgpgMessage: isPgpgMessage(this.body),\n\t\t\t\tkeyRing: this.mailvelope.keyRing,\n\t\t\t})\n\t\t\tthis.mailvelope.keyRing = await mailvelope.getKeyring()\n\t\t\tawait this.checkRecipientsKeys()\n\t\t},\n\t\tonNewToAddr(addr) {\n\t\t\tthis.onNewAddr(addr, this.selectTo)\n\t\t},\n\t\tonNewCcAddr(addr) {\n\t\t\tthis.onNewAddr(addr, this.selectCc)\n\t\t},\n\t\tonNewBccAddr(addr) {\n\t\t\tthis.onNewAddr(addr, this.selectBcc)\n\t\t},\n\t\tonNewAddr(addr, list) {\n\t\t\tconst res = {\n\t\t\t\tlabel: addr, // TODO: parse if possible\n\t\t\t\temail: addr, // TODO: parse if possible\n\t\t\t}\n\t\t\tthis.newRecipients.push(res)\n\t\t\tlist.push(res)\n\t\t\tthis.callSaveDraft(true, this.getMessageData)\n\t\t},\n\t\tasync onSend(_, force = false) {\n\t\t\tif (this.encrypt) {\n\t\t\t\tlogger.debug('get encrypted message from mailvelope')\n\t\t\t\tawait this.$refs.mailvelopeEditor.pull()\n\t\t\t}\n\n\t\t\tthis.state = STATES.UPLOADING\n\n\t\t\tawait this.attachmentsPromise\n\t\t\t\t.then(() => (this.state = STATES.SENDING))\n\t\t\t\t.then(() => this.draftsPromise)\n\t\t\t\t.then(this.getMessageData)\n\t\t\t\t.then((data) => this.send({ ...data, force }))\n\t\t\t\t.then(() => logger.info('message sent'))\n\t\t\t\t.then(() => (this.state = STATES.FINISHED))\n\t\t\t\t.catch(async (error) => {\n\t\t\t\t\tlogger.error('could not send message', { error });\n\t\t\t\t\t[this.errorText, this.state] = await matchError(error, {\n\t\t\t\t\t\t[NoSentMailboxConfiguredError.getName()]() {\n\t\t\t\t\t\t\treturn [t('mail', 'No sent mailbox configured. Please pick one in the account settings.'), STATES.ERROR]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t[ManyRecipientsError.getName()]() {\n\t\t\t\t\t\t\treturn [t('mail', 'You are trying to send to many recipients in To and/or Cc. Consider using Bcc to hide recipient addresses.'), STATES.WARNING]\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdefault(error) {\n\t\t\t\t\t\t\tif (error && error.toString) {\n\t\t\t\t\t\t\t\treturn [error.toString(), STATES.ERROR]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t})\n\t\t\t\t})\n\n\t\t\t// Sync sent mailbox when it's currently open\n\t\t\tconst account = this.$store.getters.getAccount(this.selectedAlias.id)\n\t\t\tif (parseInt(this.$route.params.mailboxId, 10) === account.sentMailboxId) {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.$store.dispatch('syncEnvelopes', {\n\t\t\t\t\t\tmailboxId: account.sentMailboxId,\n\t\t\t\t\t\tquery: '',\n\t\t\t\t\t\tinit: false,\n\t\t\t\t\t})\n\t\t\t\t}, 500)\n\t\t\t}\n\t\t},\n\t\tasync onForceSend() {\n\t\t\tawait this.onSend(null, true)\n\t\t},\n\t\treset() {\n\t\t\tthis.draftsPromise = Promise.resolve() // \"resets\" draft uid as well\n\t\t\tthis.selectTo = []\n\t\t\tthis.selectCc = []\n\t\t\tthis.selectBcc = []\n\t\t\tthis.subjectVal = ''\n\t\t\tthis.bodyVal = '<p></p><p></p>'\n\t\t\tthis.attachments = []\n\t\t\tthis.errorText = undefined\n\t\t\tthis.state = STATES.EDITING\n\t\t\tthis.autocompleteRecipients = []\n\t\t\tthis.newRecipients = []\n\t\t\tthis.requestMdn = false\n\t\t\tthis.changeSignature = false\n\t\t\tthis.savingDraft = undefined\n\t\t\tthis.sendAtVal = undefined\n\n\t\t\tthis.setAlias()\n\t\t\tthis.initBody()\n\t\t\tVue.nextTick(() => {\n\t\t\t\t// toLabel may not be on the DOM yet\n\t\t\t\t// (because \"Message sent\" is shown)\n\t\t\t\t// so we defer the focus call\n\t\t\t\tthis.$refs.toLabel.$el.focus()\n\t\t\t})\n\t\t},\n\t\t/**\n\t\t * Format aliases for the Multiselect\n\t\t *\n\t\t * @param {object} alias the alias to format\n\t\t * @return {string}\n\t\t */\n\t\tformatAliases(alias) {\n\t\t\tif (!alias.name) {\n\t\t\t\treturn alias.emailAddress\n\t\t\t}\n\n\t\t\treturn `${alias.name} <${alias.emailAddress}>`\n\t\t},\n\t\tasync discardDraft() {\n\t\t\tconst id = await this.draftsPromise\n\t\t\tthis.$emit('discard-draft', id)\n\t\t},\n\t\t/**\n\t\t * Whether the date is acceptable\n\t\t *\n\t\t * @param {Date} date The date to compare to\n\t\t * @return {boolean}\n\t\t */\n\t\tdisabledDatetimepickerDate(date) {\n\t\t\tconst minimumDate = new Date()\n\t\t\t// Make it one sec before midnight so it shows the next full day as available\n\t\t\tminimumDate.setHours(0, 0, 0)\n\t\t\tminimumDate.setSeconds(minimumDate.getSeconds() - 1)\n\n\t\t\treturn date.getTime() <= minimumDate\n\t\t},\n\n\t\t/**\n\t\t * Whether the time for date is acceptable\n\t\t *\n\t\t * @param {Date} date The date to compare to\n\t\t * @return {boolean}\n\t\t */\n\t\tdisabledDatetimepickerTime(date) {\n\t\t\tconst now = new Date()\n\t\t\tconst minimumDate = new Date(now.getTime())\n\t\t\treturn date.getTime() <= minimumDate\n\t\t},\n\t\t/**\n\t\t * Remove recipient from recipients array (To,Cc,Bcc)\n\t\t *\n\t\t * @param {Array} option Current option from Multiselect\n\t\t * @param {Array} field List of recipients (ex. this.selectTo)\n\t\t */\n\t\tonRemoveRecipient(option, field) {\n\t\t\tswitch (field) {\n\t\t\tcase 'to':\n\t\t\t\tthis.removeRecipientTo(option)\n\t\t\t\tbreak\n\t\t\tcase 'cc':\n\t\t\t\tthis.removeRecipientCc(option)\n\t\t\t\tbreak\n\t\t\tcase 'bcc':\n\t\t\t\tthis.removeRecipientBcc(option)\n\t\t\t\tbreak\n\t\t\t}\n\t\t},\n\t\tremoveRecipient(option, list) {\n\t\t\treturn list.filter((recipient) => recipient.email !== option.email)\n\t\t},\n\t\tremoveRecipientTo(option) {\n\t\t\tthis.selectTo = this.removeRecipient(option, this.selectTo)\n\t\t},\n\t\tremoveRecipientCc(option) {\n\t\t\tthis.selectCc = this.removeRecipient(option, this.selectCc)\n\t\t},\n\t\tremoveRecipientBcc(option) {\n\t\t\tthis.selectBcc = this.removeRecipient(option, this.selectBcc)\n\t\t},\n\t\ttoggleViewMode() {\n\t\t\tthis.autoLimit = !this.autoLimit\n\t\t\tthis.showCC = !(this.showCC && this.selectCc.length === 0 && this.autoLimit)\n\t\t\tthis.showBCC = !(this.showBCC && this.selectBcc.length === 0 && this.autoLimit)\n\t\t},\n\t\tsetEditorModeHtml() {\n\t\t\tthis.editorMode = EDITOR_MODE_HTML\n\t\t},\n\t\tsetEditorModeText() {\n\t\t\tOC.dialogs.confirmDestructive(\n\t\t\t\tt('mail', 'Any existing formatting (for example bold, italic, underline or inline images) will be removed.'),\n\t\t\t\tt('mail', 'Turn off formatting'),\n\t\t\t\t{\n\t\t\t\t\ttype: OC.dialogs.YES_NO_BUTTONS,\n\t\t\t\t\tconfirm: t('mail', 'Turn off and remove formatting'),\n\t\t\t\t\tconfirmClasses: 'error',\n\t\t\t\t\tcancel: t('mail', 'Keep formatting'),\n\t\t\t\t},\n\t\t\t\t(decision) => {\n\t\t\t\t\tif (decision) {\n\t\t\t\t\t\tthis.editorMode = EDITOR_MODE_TEXT\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t)\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.message-composer {\n\tmargin: 0;\n\tz-index: 100;\n\tdisplay: flex;\n\tflex-direction: column;\n\theight: 100%;\n\tmax-height: 100%;\n}\n\n.composer-actions {\n\tposition: sticky;\n\tbackground: linear-gradient(rgba(255, 255, 255, 0), var(--color-main-background-translucent) 50%);\n}\n\n.composer-fields {\n\tdisplay: flex;\n\tborder-top: 1px solid var(--color-border);\n\talign-items: flex-start;\n\n\tlabel {\n\t\tpadding: 11px 20px 11px 0;\n\t}\n\n\t::v-deep(.multiselect--multiple .multiselect__tags) {\n\t\tdisplay: grid;\n\t\tgrid-template-columns: calc(100% - 18px) 18px 100%;\n\n\t\t.multiselect__limit {\n\t\t\tmargin-right: 0;\n\t\t\tmargin-left: 8px\n\t\t}\n\t}\n\n\t::v-deep(.multiselect__content-wrapper) {\n\t\tborder-bottom: 1px solid var(--color-border);\n\t\tmargin-top: 0;\n\n\t\t& li > span::before {\n\t\t\tdisplay: none\n\t\t}\n\t}\n\n\t::v-deep(.multiselect__input) {\n\t\tposition: relative !important;\n\t\ttop: 0;\n\t\tgrid-column-start: 1;\n\t\tgrid-column-end: 3;\n\t}\n\n\t::v-deep(.multiselect--active input:focus-visible) {\n\t\tbox-shadow: none;\n\t}\n\n\t::v-deep(.multiselect__tags) {\n\t\tbox-sizing: border-box;\n\t\theight: auto;\n\t}\n\n\t&__from {\n\t\tmargin-right: 50px; /* for the modal close button */\n\t}\n\n\t.multiselect.multiselect--multiple::after {\n\t\tposition: absolute;\n\t\tright: 0;\n\t\ttop: auto;\n\t\tbottom: 8px\n\t}\n\n\t.multiselect__tag {\n\t\tposition: relative;\n\t}\n\n\t&.mail-account {\n\t\tborder-top: none;\n\t\tpadding-top: 10px;\n\n\t\t& > .multiselect {\n\t\t\tmax-width: none;\n\t\t\tmin-height: auto;\n\t\t}\n\t}\n\n\t.multiselect,\n\tinput,\n\tTextEditor {\n\t\tflex-grow: 1;\n\t\tmax-width: none;\n\t\tborder: none;\n\t\tborder-radius: 0;\n\t}\n\n\t.composer-fields--custom {\n\t\tdisplay: flex;\n\t\talign-items: flex-start;\n\t\tflex-wrap: wrap;\n\t\tpadding-top: 2px;\n\t\twidth: calc(100% - 120px);\n\n\t\tbutton {\n\t\t\tmargin-top: 0;\n\t\t\tmargin-bottom: 0;\n\t\t\tbackground-color: transparent;\n\t\t\tborder: none;\n\t\t\topacity: 0.5;\n\t\t\tpadding: 10px 16px;\n\t\t}\n\n\t\tbutton.active, button:active {\n\t\t\topacity: 1;\n\t\t}\n\n\t\t.multiselect {\n\t\t\twidth: calc(100% - 150px);\n\t\t}\n\t}\n\n\t.multiselect {\n\t\tmargin-right: 12px;\n\t}\n\n\t.subject {\n\t\tfont-size: 15px;\n\t\tfont-weight: bold;\n\t\tmargin: 3px 0 !important;\n\t\tpadding: 0 12px !important;\n\n\t\t&:focus-visible {\n\t\t\tbox-shadow: none !important;\n\t\t}\n\t}\n\n\t.message-body {\n\t\theight: 100%;\n\t\twidth: 100%;\n\t\tmargin: 0;\n\t\tborder: none !important;\n\t\toutline: none !important;\n\t\tbox-shadow: none !important;\n\t\tpadding: 12px;\n\n\t\t// Fix contenteditable not becoming focused upon clichint within it's\n\t\t// boundaries in safari\n\t\t-webkit-user-select: text;\n\t\tuser-select: text;\n\t}\n}\n\n.warning-box {\n\tpadding: 5px 12px;\n\tborder-radius: 0;\n}\n\n// Make composer editor expand\n.message-editor {\n\tflex: 1 1 100%;\n\tmin-height: 0;\n}\n\n.draft-status {\n\tpadding: 2px;\n\topacity: 0.5;\n\tfont-size: small;\n\tdisplay: block;\n\n}\n\n.from-label,\n.to-label,\n.copy-toggle,\n.cc-label,\n.bcc-label {\n\tpadding-top: 12px;\n\tpadding-bottom: 12px;\n\tpadding-right: 20px;\n\tcursor: text;\n\tcolor: var(--color-text-maxcontrast);\n\twidth: 100px;\n\ttext-align: right;\n\twhite-space: nowrap;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\tfont-weight: bold;\n}\n\n.bcc-label {\n\ttop: initial;\n\tbottom: 0;\n}\n\n.copy-toggle {\n\tcursor: pointer;\n\twidth: initial;\n\n\t&:hover,\n\t&:focus {\n\t\tcolor: var(--color-main-text);\n\t}\n}\n\n.reply {\n\tmin-height: 100px;\n}\n\n::v-deep .multiselect .multiselect__tags, .subject {\n\tborder: none !important;\n}\n::v-deep [data-select=\"create\"] .avatardiv--unknown {\n\tbackground: var(--color-text-maxcontrast) !important;\n}\n::v-deep .multiselect.opened .multiselect__tags .multiselect__tags-wrap {\n\tflex-wrap: wrap;\n}\n\n.submit-message.send.primary.icon-confirm-white {\n\tcolor: var(--color-main-background);\n}\n.sending-hint {\n\theight: 50px;\n\tmargin-top: 50px;\n}\n.button {\n\tbackground-color: transparent;\n\tborder: none;\n}\n.send-button {\n\tdisplay: flex;\n\talign-items: center;\n\tpadding: 10px 15px;\n\tmargin-left: 5px;\n}\n.send-button .send-icon {\n\tpadding-right: 5px;\n}\n.centered-content {\n\tmargin-top: 0 !important;\n}\n.composer-actions-right {\n\tdisplay: flex;\n\talign-items: center;\n\tflex-direction: row;\n\tjustify-content: space-between;\n\tbottom: 5px;\n}\n.composer-actions--primary-actions {\n\tdisplay: flex;\n\tflex-direction: row;\n\tpadding-left: 10px;\n\talign-items: center;\n}\n.composer-actions--secondary-actions {\n\tdisplay: flex;\n\tflex-direction: row;\n\tpadding: 12px;\n}\n.composer-actions--primary-actions .button {\n\tpadding: 2px;\n}\n.composer-actions--secondary-actions .button{\n\tflex-shrink: 0;\n}\n\n.composer-actions-draft-status {\n\tpadding-left: 10px;\n}\n\n@media only screen and (max-width: 580px) {\n\t.composer-actions-right {\n\t\talign-items: end;\n\t\tflex-direction: column-reverse;\n\t}\n\t.composer-actions-draft-status {\n\t\ttext-align: end;\n\t\tpadding-right: 15px;\n\t}\n\t.composer-actions--primary-actions {\n\t\tpadding-right: 5px;\n\t}\n}\n\n</style>\n","/*\n * @copyright 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @author 2018 Christoph Wurst <christoph@winzerhof-wurst.at>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport Axios from '@nextcloud/axios'\nimport { generateUrl } from '@nextcloud/router'\n\nexport const findRecipient = (term) => {\n\tconst url = generateUrl('/apps/mail/api/autoComplete?term={term}', {\n\t\tterm,\n\t})\n\n\treturn Axios.get(url).then((resp) => resp.data)\n}\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Composer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Composer.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Composer.vue?vue&type=style&index=0&id=5d3292fc&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Composer.vue?vue&type=style&index=0&id=5d3292fc&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./Composer.vue?vue&type=template&id=5d3292fc&scoped=true&\"\nimport script from \"./Composer.vue?vue&type=script&lang=js&\"\nexport * from \"./Composer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Composer.vue?vue&type=style&index=0&id=5d3292fc&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5d3292fc\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.state === _vm.STATES.EDITING)?_c('div',{staticClass:\"message-composer\"},[_c('div',{staticClass:\"composer-fields composer-fields__from mail-account\"},[_c('label',{staticClass:\"from-label\",attrs:{\"for\":\"from\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'From'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"composer-fields--custom\"},[_c('Multiselect',{attrs:{\"id\":\"from\",\"value\":_vm.selectedAlias,\"options\":_vm.aliases,\"label\":\"name\",\"track-by\":\"selectId\",\"searchable\":false,\"custom-label\":_vm.formatAliases,\"placeholder\":_vm.t('mail', 'Select account'),\"clear-on-select\":false},on:{\"select\":_vm.onAliasChange}})],1)]),_vm._v(\" \"),_c('div',{staticClass:\"composer-fields\"},[_c('label',{staticClass:\"to-label\",attrs:{\"for\":\"to\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'To'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"composer-fields--custom\"},[_c('Multiselect',{ref:\"toLabel\",class:{'opened': !_vm.autoLimit},attrs:{\"id\":\"to\",\"options\":_vm.selectableRecipients,\"taggable\":true,\"label\":\"label\",\"track-by\":\"email\",\"multiple\":true,\"placeholder\":_vm.t('mail', 'Contact or email address …'),\"clear-on-select\":true,\"close-on-select\":false,\"show-no-options\":false,\"preserve-search\":true,\"hide-selected\":true,\"loading\":_vm.loadingIndicatorTo,\"auto-limit\":_vm.autoLimit},on:{\"input\":function($event){return _vm.callSaveDraft(true, _vm.getMessageData)},\"tag\":_vm.onNewToAddr,\"search-change\":function($event){return _vm.onAutocomplete($event, 'to')}},scopedSlots:_vm._u([{key:\"tag\",fn:function({ option }){return [_c('RecipientListItem',{attrs:{\"option\":option},on:{\"remove-recipient\":function($event){return _vm.onRemoveRecipient(option, 'to')}}})]}},{key:\"option\",fn:function({ option }){return [_c('div',{staticClass:\"multiselect__tag multiselect__tag-custom\"},[_c('ListItemIcon',{attrs:{\"no-margin\":true,\"title\":option.label,\"subtitle\":option.email,\"avatar-size\":24}})],1)]}}],null,false,2096561271),model:{value:(_vm.selectTo),callback:function ($$v) {_vm.selectTo=$$v},expression:\"selectTo\"}}),_vm._v(\" \"),_c('button',{class:{'active':!_vm.autoLimit},attrs:{\"title\":_vm.t('mail','Toggle recipients list mode')},on:{\"click\":function($event){$event.preventDefault();return _vm.toggleViewMode.apply(null, arguments)}}},[(_vm.autoLimit)?_c('UnfoldMoreHorizontal',{attrs:{\"size\":24}}):_c('UnfoldLessHorizontal',{attrs:{\"size\":24}})],1)],1)]),_vm._v(\" \"),(_vm.showCC)?_c('div',{staticClass:\"composer-fields\"},[_c('label',{staticClass:\"cc-label\",attrs:{\"for\":\"cc\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Cc'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"composer-fields--custom\"},[_c('Multiselect',{class:{'opened': !_vm.autoLimit},attrs:{\"id\":\"cc\",\"options\":_vm.selectableRecipients,\"taggable\":true,\"label\":\"label\",\"track-by\":\"email\",\"multiple\":true,\"placeholder\":_vm.t('mail', 'Contact or email address …'),\"clear-on-select\":true,\"show-no-options\":false,\"preserve-search\":true,\"loading\":_vm.loadingIndicatorCc,\"auto-limit\":_vm.autoLimit,\"hide-selected\":true},on:{\"input\":function($event){return _vm.callSaveDraft(true, _vm.getMessageData)},\"tag\":_vm.onNewCcAddr,\"search-change\":function($event){return _vm.onAutocomplete($event, 'cc')}},scopedSlots:_vm._u([{key:\"tag\",fn:function({ option }){return [_c('RecipientListItem',{attrs:{\"option\":option},on:{\"remove-recipient\":function($event){return _vm.onRemoveRecipient(option, 'cc')}}})]}},{key:\"option\",fn:function({ option }){return [_c('div',{staticClass:\"multiselect__tag multiselect__tag-custom\"},[_c('ListItemIcon',{attrs:{\"no-margin\":true,\"title\":option.label,\"subtitle\":option.email,\"avatar-size\":24}})],1)]}}],null,false,4162477772),model:{value:(_vm.selectCc),callback:function ($$v) {_vm.selectCc=$$v},expression:\"selectCc\"}},[_vm._v(\" \"),_vm._v(\" \"),_c('span',{attrs:{\"slot\":\"noOptions\"},slot:\"noOptions\"},[_vm._v(_vm._s(_vm.t('mail', '')))])])],1)]):_vm._e(),_vm._v(\" \"),(_vm.showBCC)?_c('div',{staticClass:\"composer-fields\"},[_c('label',{staticClass:\"bcc-label\",attrs:{\"for\":\"bcc\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Bcc'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"composer-fields--custom\"},[_c('Multiselect',{class:{'opened': !_vm.autoLimit},attrs:{\"id\":\"bcc\",\"options\":_vm.selectableRecipients,\"taggable\":true,\"label\":\"label\",\"track-by\":\"email\",\"multiple\":true,\"placeholder\":_vm.t('mail', 'Contact or email address …'),\"show-no-options\":false,\"clear-on-select\":true,\"preserve-search\":true,\"loading\":_vm.loadingIndicatorBcc,\"hide-selected\":true},on:{\"input\":function($event){return _vm.callSaveDraft(true, _vm.getMessageData)},\"tag\":_vm.onNewBccAddr,\"search-change\":function($event){return _vm.onAutocomplete($event, 'bcc')}},scopedSlots:_vm._u([{key:\"tag\",fn:function({ option }){return [_c('RecipientListItem',{attrs:{\"option\":option},on:{\"remove-recipient\":function($event){return _vm.onRemoveRecipient(option, 'bcc')}}})]}},{key:\"option\",fn:function({ option }){return [_c('div',{staticClass:\"multiselect__tag multiselect__tag-custom\"},[_c('ListItemIcon',{attrs:{\"no-margin\":true,\"title\":option.label,\"subtitle\":option.email,\"avatar-size\":24}})],1)]}}],null,false,2659337166),model:{value:(_vm.selectBcc),callback:function ($$v) {_vm.selectBcc=$$v},expression:\"selectBcc\"}},[_vm._v(\" \"),_vm._v(\" \"),_c('span',{attrs:{\"slot\":\"noOptions\"},slot:\"noOptions\"},[_vm._v(_vm._s(_vm.t('mail', 'No contacts found.')))])])],1)]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"composer-fields\"},[_c('label',{staticClass:\"subject-label hidden-visually\",attrs:{\"for\":\"subject\"}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Subject'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.subjectVal),expression:\"subjectVal\"}],staticClass:\"subject\",attrs:{\"id\":\"subject\",\"type\":\"text\",\"name\":\"subject\",\"autocomplete\":\"off\",\"placeholder\":_vm.t('mail', 'Subject …')},domProps:{\"value\":(_vm.subjectVal)},on:{\"input\":[function($event){if($event.target.composing)return;_vm.subjectVal=$event.target.value},function($event){return _vm.callSaveDraft(true, _vm.getMessageData)}]}})]),_vm._v(\" \"),(_vm.noReply)?_c('div',{staticClass:\"warning noreply-warning\"},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'This message came from a noreply address so your reply will probably not be read.'))+\"\\n\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.mailvelope.keysMissing.length)?_c('div',{staticClass:\"warning noreply-warning\"},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'The following recipients do not have a PGP key: {recipients}.', {\n\t\t\t\trecipients: _vm.mailvelope.keysMissing.join(', '),\n\t\t\t}))+\"\\n\\t\")]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"composer-fields message-editor\"},[(!_vm.encrypt)?_c('TextEditor',{key:_vm.editorMode,ref:\"editor\",staticClass:\"message-body\",attrs:{\"value\":_vm.bodyVal,\"html\":!_vm.editorPlainText,\"name\":\"body\",\"placeholder\":_vm.t('mail', 'Write message …'),\"focus\":_vm.isReply,\"bus\":_vm.bus},on:{\"input\":_vm.onEditorInput,\"ready\":_vm.onEditorReady}}):_c('MailvelopeEditor',{ref:\"mailvelopeEditor\",attrs:{\"value\":_vm.bodyVal,\"recipients\":_vm.allRecipients,\"quoted-text\":_vm.body,\"is-reply-or-forward\":_vm.isReply || _vm.isForward},on:{\"input\":_vm.onEditorInput}})],1),_vm._v(\" \"),_c('ComposerAttachments',{attrs:{\"bus\":_vm.bus,\"upload-size-limit\":_vm.attachmentSizeLimit},on:{\"upload\":_vm.onAttachmentsUploading},model:{value:(_vm.attachments),callback:function ($$v) {_vm.attachments=$$v},expression:\"attachments\"}}),_vm._v(\" \"),_c('div',{staticClass:\"composer-actions-right composer-actions\"},[_c('div',{staticClass:\"composer-actions--primary-actions\"},[_c('p',{staticClass:\"composer-actions-draft-status\"},[(_vm.savingDraft === true)?_c('span',{staticClass:\"draft-status\"},[_vm._v(_vm._s(_vm.t('mail', 'Saving draft …')))]):(!_vm.canSaveDraft)?_c('span',{staticClass:\"draft-status\"},[_vm._v(_vm._s(_vm.t('mail', 'Error saving draft')))]):(_vm.savingDraft === false)?_c('span',{staticClass:\"draft-status\"},[_vm._v(_vm._s(_vm.t('mail', 'Draft saved')))]):_vm._e()]),_vm._v(\" \"),(!_vm.savingDraft && !_vm.canSaveDraft)?_c('ButtonVue',{staticClass:\"button\",attrs:{\"type\":\"tertiary\"},on:{\"click\":_vm.onSave},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('Download',{attrs:{\"size\":20,\"title\":_vm.t('mail', 'Save draft')}})]},proxy:true}],null,false,2227301918)}):_vm._e(),_vm._v(\" \"),(_vm.savingDraft === false)?_c('ButtonVue',{staticClass:\"button\",attrs:{\"type\":\"tertiary\"},on:{\"click\":_vm.discardDraft},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('Delete',{attrs:{\"size\":20,\"title\":_vm.t('mail', 'Discard & close draft')}})]},proxy:true}],null,false,3896853704)}):_vm._e()],1),_vm._v(\" \"),_c('div',{staticClass:\"composer-actions--secondary-actions\"},[_c('Actions',{on:{\"close\":function($event){_vm.isMoreActionsOpen = false}}},[(!_vm.isMoreActionsOpen)?[_c('ActionButton',{on:{\"click\":_vm.onAddLocalAttachment},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('IconUpload',{attrs:{\"size\":20}})]},proxy:true}],null,false,337456192)},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Upload attachment'))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{on:{\"click\":_vm.onAddCloudAttachment},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('IconFolder',{attrs:{\"sizse\":20}})]},proxy:true}],null,false,3154190694)},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Add attachment from Files'))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"disabled\":_vm.encrypt},on:{\"click\":_vm.onAddCloudAttachmentLink},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('IconPublic',{attrs:{\"size\":20}})]},proxy:true}],null,false,1361450402)},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.addShareLink)+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),(!_vm.isScheduledSendingDisabled)?_c('ActionButton',{attrs:{\"close-after-click\":false},on:{\"click\":function($event){_vm.isMoreActionsOpen=true}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('SendClock',{attrs:{\"size\":20,\"title\":_vm.t('mail', 'Send later')}})]},proxy:true}],null,false,1769650344)},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Send later'))+\"\\n\\t\\t\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),(!_vm.encrypt && _vm.editorPlainText)?_c('ActionButton',{on:{\"click\":function($event){return _vm.setEditorModeHtml()}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('IconHtml',{attrs:{\"size\":20}})]},proxy:true}],null,false,811545534)},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Enable formatting'))+\"\\n\\t\\t\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),(!_vm.encrypt && !_vm.editorPlainText)?_c('ActionButton',{on:{\"click\":function($event){return _vm.setEditorModeText()}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('IconClose',{attrs:{\"size\":20}})]},proxy:true}],null,false,2888946197)},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Disable formatting'))+\"\\n\\t\\t\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),_c('ActionCheckbox',{attrs:{\"checked\":_vm.requestMdn},on:{\"check\":function($event){_vm.requestMdn = true},\"uncheck\":function($event){_vm.requestMdn = false}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Request a read receipt'))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),(_vm.mailvelope.available)?_c('ActionCheckbox',{attrs:{\"checked\":_vm.encrypt},on:{\"check\":function($event){_vm.encrypt = true},\"uncheck\":function($event){_vm.encrypt = false}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Encrypt message with Mailvelope'))+\"\\n\\t\\t\\t\\t\\t\")]):_vm._e()]:_vm._e(),_vm._v(\" \"),(_vm.isMoreActionsOpen)?[_c('ActionButton',{attrs:{\"close-after-click\":false},on:{\"click\":function($event){_vm.isMoreActionsOpen=false}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('ChevronLeft',{attrs:{\"title\":_vm.t('mail', 'Send later'),\"size\":20}}),_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Send later'))+\"\\n\\t\\t\\t\\t\\t\\t\")]},proxy:true}],null,false,2922837455)}),_vm._v(\" \"),_c('ActionRadio',{staticClass:\"send-action-radio\",attrs:{\"value\":undefined,\"name\":\"sendLater\",\"checked\":!_vm.sendAtVal},on:{\"change\":function($event){return _vm.onChangeSendLater(undefined)}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Send now'))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionRadio',{staticClass:\"send-action-radio send-action-radio--multiline\",attrs:{\"value\":_vm.dateTomorrowMorning,\"name\":\"sendLater\",\"checked\":_vm.isSendAtTomorrowMorning},on:{\"change\":function($event){return _vm.onChangeSendLater(_vm.dateTomorrowMorning)}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Tomorrow morning'))+\" - \"+_vm._s(_vm.convertToLocalDate(_vm.dateTomorrowMorning))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionRadio',{staticClass:\"send-action-radio send-action-radio--multiline\",attrs:{\"value\":_vm.dateTomorrowAfternoon,\"name\":\"sendLater\",\"checked\":_vm.isSendAtTomorrowAfternoon},on:{\"change\":function($event){return _vm.onChangeSendLater(_vm.dateTomorrowAfternoon)}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Tomorrow afternoon'))+\" - \"+_vm._s(_vm.convertToLocalDate(_vm.dateTomorrowAfternoon))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionRadio',{staticClass:\"send-action-radio send-action-radio--multiline\",attrs:{\"value\":_vm.dateMondayMorning,\"name\":\"sendLater\",\"checked\":_vm.isSendAtMondayMorning},on:{\"change\":function($event){return _vm.onChangeSendLater(_vm.dateMondayMorning)}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Monday morning'))+\" - \"+_vm._s(_vm.convertToLocalDate(_vm.dateMondayMorning))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionRadio',{staticClass:\"send-action-radio\",attrs:{\"name\":\"sendLater\",\"checked\":_vm.isSendAtCustom,\"value\":_vm.customSendTime},on:{\"change\":function($event){return _vm.onChangeSendLater(_vm.customSendTime)}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Custom date and time'))+\"\\n\\t\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionInput',{attrs:{\"type\":\"datetime-local\",\"first-day-of-week\":_vm.firstDayDatetimePicker,\"use12h\":_vm.showAmPm,\"formatter\":_vm.formatter,\"format\":'YYYY-MM-DD HH:mm',\"icon\":\"\",\"minute-step\":5,\"show-second\":false,\"disabled-date\":_vm.disabledDatetimepickerDate,\"disabled-time\":_vm.disabledDatetimepickerTime},on:{\"change\":function($event){return _vm.onChangeSendLater(_vm.customSendTime)}},model:{value:(_vm.selectedDate),callback:function ($$v) {_vm.selectedDate=$$v},expression:\"selectedDate\"}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Enter a date'))+\"\\n\\t\\t\\t\\t\\t\")])]:_vm._e()],2),_vm._v(\" \"),_c('ButtonVue',{attrs:{\"disabled\":!_vm.canSend,\"native-type\":\"submit\",\"type\":\"primary\"},on:{\"click\":_vm.onSend},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('Send',{attrs:{\"title\":_vm.submitButtonTitle,\"size\":20}})]},proxy:true}],null,false,366794848)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.submitButtonTitle)+\"\\n\\t\\t\\t\")])],1)])],1):(_vm.state === _vm.STATES.UPLOADING)?_c('Loading',{attrs:{\"hint\":_vm.t('mail', 'Uploading attachments …'),\"role\":\"alert\"}}):(_vm.state === _vm.STATES.SENDING)?_c('Loading',{staticClass:\"sending-hint\",attrs:{\"hint\":_vm.t('mail', 'Sending …'),\"role\":\"alert\"}}):(_vm.state === _vm.STATES.ERROR)?_c('EmptyContent',{staticClass:\"centered-content\",attrs:{\"title\":_vm.t('mail', 'Error sending your message'),\"role\":\"alert\"},scopedSlots:_vm._u([{key:\"action\",fn:function(){return [_c('ButtonVue',{attrs:{\"type\":\"tertiary\"},on:{\"click\":function($event){_vm.state = _vm.STATES.EDITING}}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Go back'))+\"\\n\\t\\t\")]),_vm._v(\" \"),_c('ButtonVue',{attrs:{\"type\":\"tertiary\"},on:{\"click\":_vm.onSend}},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Retry'))+\"\\n\\t\\t\")])]},proxy:true}])},[(_vm.errorText)?_c('p',[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.errorText)+\"\\n\\t\")]):_vm._e()]):(_vm.state === _vm.STATES.WARNING)?_c('div',{staticClass:\"emptycontent\",attrs:{\"role\":\"alert\"}},[_c('h2',[_vm._v(_vm._s(_vm.t('mail', 'Warning sending your message')))]),_vm._v(\" \"),(_vm.errorText)?_c('p',[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.errorText)+\"\\n\\t\")]):_vm._e(),_vm._v(\" \"),_c('ButtonVue',{attrs:{\"type\":\"tertiary\"},on:{\"click\":function($event){_vm.state = _vm.STATES.EDITING}}},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'Go back'))+\"\\n\\t\")]),_vm._v(\" \"),_c('ButtonVue',{attrs:{\"type\":\"tertiary\"},on:{\"click\":_vm.onForceSend}},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('mail', 'Send anyway'))+\"\\n\\t\")])],1):_c('EmptyContent',{attrs:{\"title\":_vm.sendAtVal ? _vm.t('mail', 'Message will be sent at') + ' ' + _vm.convertToLocalDate(_vm.sendAtVal) : _vm.t('mail', 'Message sent!')},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('IconCheck',{attrs:{\"size\":20}})]},proxy:true}])})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<Modal\n\t\tsize=\"normal\"\n\t\t:title=\"modalTitle\"\n\t\t@close=\"$emit('close', { restoreOriginalSendAt: true })\">\n\t\t<Composer\n\t\t\t:from-account=\"composerData.accountId\"\n\t\t\t:to=\"composerData.to\"\n\t\t\t:cc=\"composerData.cc\"\n\t\t\t:bcc=\"composerData.bcc\"\n\t\t\t:subject=\"composerData.subject\"\n\t\t\t:attachments-data=\"composerData.attachments\"\n\t\t\t:body=\"composerData.body\"\n\t\t\t:editor-body=\"convertEditorBody(composerData)\"\n\t\t\t:in-reply-to-message-id=\"composerData.inReplyToMessageId\"\n\t\t\t:reply-to=\"composerData.replyTo\"\n\t\t\t:forward-from=\"composerData.forwardFrom\"\n\t\t\t:draft-id=\"composerData.draftId\"\n\t\t\t:send-at=\"composerData.sendAt * 1000\"\n\t\t\t:draft=\"saveDraft\"\n\t\t\t:send=\"sendMessage\"\n\t\t\t:forwarded-messages=\"forwardedMessages\"\n\t\t\t@discard-draft=\"discardDraft\" />\n\t</Modal>\n</template>\n<script>\nimport { NcModal as Modal } from '@nextcloud/vue'\nimport logger from '../logger'\nimport { toPlain, toHtml, plain } from '../util/text'\nimport { saveDraft } from '../service/MessageService'\nimport Composer from './Composer'\nimport { showError, showSuccess } from '@nextcloud/dialogs'\nimport { translate as t } from '@nextcloud/l10n'\nimport { UNDO_DELAY } from '../store/constants'\n\nexport default {\n\tname: 'NewMessageModal',\n\tcomponents: {\n\t\tModal,\n\t\tComposer,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\toriginal: undefined,\n\t\t}\n\t},\n\tcomputed: {\n\t\tmodalTitle() {\n\t\t\tif (this.composerMessage.type === 'outbox') {\n\t\t\t\treturn t('mail', 'Edit message')\n\t\t\t}\n\t\t\tif (this.composerData.draftId !== undefined) {\n\t\t\t\treturn t('mail', 'Draft')\n\t\t\t}\n\t\t\tif (this.composerData.replyTo) {\n\t\t\t\treturn t('mail', 'Reply')\n\t\t\t}\n\t\t\tif (this.composerData.forwardFrom) {\n\t\t\t\treturn t('mail', 'Forward')\n\t\t\t}\n\t\t\treturn t('mail', 'New message')\n\t\t},\n\t\tcomposerMessage() {\n\t\t\treturn this.$store.getters.composerMessage\n\t\t},\n\t\tcomposerData() {\n\t\t\treturn this.$store.getters.composerMessage?.data\n\t\t},\n\t\tforwardedMessages() {\n\t\t\treturn this.composerMessage?.options?.forwardedMessages ?? []\n\t\t},\n\t},\n\tmethods: {\n\t\ttoHtml,\n\t\tplain,\n\t\tasync saveDraft(data) {\n\t\t\tif (!this.composerMessage) {\n\t\t\t\tlogger.info('Ignoring draft because there is no message anymore', { data })\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tif (this.composerMessage.type === 'outbox') {\n\t\t\t\tconst dataForServer = this.getDataForServer(data)\n\t\t\t\tawait this.$store.dispatch('outbox/updateMessage', {\n\t\t\t\t\tmessage: dataForServer,\n\t\t\t\t\tid: this.composerData.id,\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tconst dataForServer = this.getDataForServer(data, true)\n\t\t\t\tconst { id } = await saveDraft(data.account, dataForServer)\n\n\t\t\t\t// Remove old draft envelope\n\t\t\t\tthis.$store.commit('removeEnvelope', { id: data.draftId })\n\t\t\t\tthis.$store.commit('removeMessage', { id: data.draftId })\n\n\t\t\t\t// Fetch new draft envelope\n\t\t\t\tawait this.$store.dispatch('fetchEnvelope', id)\n\n\t\t\t\treturn id\n\t\t\t}\n\t\t},\n\t\tgetDataForServer(data, serializeRecipients = false) {\n\t\t\treturn {\n\t\t\t\taccountId: data.account,\n\t\t\t\tsubject: data.subject,\n\t\t\t\tbody: data.isHtml ? data.body.value : toPlain(data.body).value,\n\t\t\t\teditorBody: data.body.value,\n\t\t\t\tisHtml: data.isHtml,\n\t\t\t\tto: serializeRecipients ? data.to.map(this.recipientToRfc822).join(', ') : data.to,\n\t\t\t\tcc: serializeRecipients ? data.cc.map(this.recipientToRfc822).join(', ') : data.cc,\n\t\t\t\tbcc: serializeRecipients ? data.bcc.map(this.recipientToRfc822).join(', ') : data.bcc,\n\t\t\t\tattachments: data.attachments,\n\t\t\t\taliasId: data.aliasId,\n\t\t\t\tinReplyToMessageId: data.inReplyToMessageId,\n\t\t\t\tsendAt: data.sendAt,\n\t\t\t}\n\t\t},\n\t\tasync sendMessage(data) {\n\t\t\tlogger.debug('sending message', { data })\n\t\t\tconst now = new Date().getTime()\n\t\t\tfor (const attachment of data.attachments) {\n\t\t\t\tif (!attachment.type) {\n\t\t\t\t\t// todo move to backend: https://github.com/nextcloud/mail/issues/6227\n\t\t\t\t\tattachment.type = 'local'\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst dataForServer = this.getDataForServer({\n\t\t\t\t...data,\n\t\t\t\tsendAt: data.sendAt ? data.sendAt : Math.floor((now + UNDO_DELAY) / 1000),\n\t\t\t})\n\t\t\tif (dataForServer.sendAt < Math.floor((now + UNDO_DELAY) / 1000)) {\n\t\t\t\tdataForServer.sendAt = Math.floor((now + UNDO_DELAY) / 1000)\n\t\t\t}\n\n\t\t\tif (!this.composerData.id) {\n\t\t\t\tawait this.$store.dispatch('outbox/enqueueMessage', {\n\t\t\t\t\tmessage: dataForServer,\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tawait this.$store.dispatch('outbox/updateMessage', {\n\t\t\t\t\tmessage: dataForServer,\n\t\t\t\t\tid: this.composerData.id,\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tif (!data.sendAt || data.sendAt < Math.floor((now + UNDO_DELAY) / 1000)) {\n\t\t\t\t// Awaiting here would keep the modal open for a long time and thus block the user\n\t\t\t\tthis.$store.dispatch('outbox/sendMessageWithUndo', { id: this.composerData.id })\n\t\t\t}\n\t\t\tif (data.draftId) {\n\t\t\t\t// Remove old draft envelope\n\t\t\t\tthis.$store.commit('removeEnvelope', { id: data.draftId })\n\t\t\t\tthis.$store.commit('removeMessage', { id: data.draftId })\n\t\t\t}\n\t\t\tthis.$emit('close')\n\t\t},\n\t\trecipientToRfc822(recipient) {\n\t\t\tif (recipient.email === recipient.label) {\n\t\t\t\t// From mailto or sender without proper label\n\t\t\t\treturn recipient.email\n\t\t\t} else if (recipient.label === '') {\n\t\t\t\t// Invalid label\n\t\t\t\treturn recipient.email\n\t\t\t} else if (recipient.email.search(/^[a-zA-Z]+:/) === 0) {\n\t\t\t\t// Group integration\n\t\t\t\treturn recipient.email\n\t\t\t} else {\n\t\t\t\t// Proper layout with label\n\t\t\t\treturn `\"${recipient.label}\" <${recipient.email}>`\n\t\t\t}\n\t\t},\n\t\tasync discardDraft(id) {\n\t\t\tconst isOutbox = this.composerMessage.type === 'outbox'\n\t\t\tif (isOutbox) {\n\t\t\t\tid = this.composerMessage.data.id\n\t\t\t}\n\t\t\tthis.$emit('close')\n\t\t\ttry {\n\t\t\t\tif (isOutbox) {\n\t\t\t\t\tawait this.$store.dispatch('outbox/deleteMessage', { id })\n\t\t\t\t} else {\n\t\t\t\t\tawait this.$store.dispatch('deleteMessage', { id })\n\t\t\t\t}\n\t\t\t\tshowSuccess(t('mail', 'Message discarded'))\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(error)\n\t\t\t\tshowError(t('mail', 'Could not discard message'))\n\t\t\t}\n\t\t},\n\t\tconvertEditorBody(composerData) {\n\t\t\tif (composerData.editorBody) {\n\t\t\t\treturn composerData.editorBody\n\t\t\t}\n\t\t\tif (!composerData.body) {\n\t\t\t\treturn ''\n\t\t\t}\n\t\t\treturn toHtml(composerData.body).value\n\t\t},\n\t},\n}\n\n</script>\n\n<style lang=\"scss\" scoped>\n@media only screen and (max-width: 600px) {\n\t::v-deep .modal-container {\n\t\tmax-width: 80%;\n\t}\n}\n::v-deep .modal-wrapper .modal-container {\n\toverflow-y: auto !important;\n\toverflow-x: auto !important;\n\t// from original Modal max-height\n\theight: 90%;\n\t// Max editor + modal height\n\tmax-height: 700px !important;\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewMessageModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewMessageModal.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewMessageModal.vue?vue&type=style&index=0&id=0ee88179&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewMessageModal.vue?vue&type=style&index=0&id=0ee88179&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./NewMessageModal.vue?vue&type=template&id=0ee88179&scoped=true&\"\nimport script from \"./NewMessageModal.vue?vue&type=script&lang=js&\"\nexport * from \"./NewMessageModal.vue?vue&type=script&lang=js&\"\nimport style0 from \"./NewMessageModal.vue?vue&type=style&index=0&id=0ee88179&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0ee88179\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('Modal',{attrs:{\"size\":\"normal\",\"title\":_vm.modalTitle},on:{\"close\":function($event){return _vm.$emit('close', { restoreOriginalSendAt: true })}}},[_c('Composer',{attrs:{\"from-account\":_vm.composerData.accountId,\"to\":_vm.composerData.to,\"cc\":_vm.composerData.cc,\"bcc\":_vm.composerData.bcc,\"subject\":_vm.composerData.subject,\"attachments-data\":_vm.composerData.attachments,\"body\":_vm.composerData.body,\"editor-body\":_vm.convertEditorBody(_vm.composerData),\"in-reply-to-message-id\":_vm.composerData.inReplyToMessageId,\"reply-to\":_vm.composerData.replyTo,\"forward-from\":_vm.composerData.forwardFrom,\"draft-id\":_vm.composerData.draftId,\"send-at\":_vm.composerData.sendAt * 1000,\"draft\":_vm.saveDraft,\"send\":_vm.sendMessage,\"forwarded-messages\":_vm.forwardedMessages},on:{\"discard-draft\":_vm.discardDraft}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OutboxMessageContent.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OutboxMessageContent.vue?vue&type=script&lang=js&\"","<template>\n\t<div id=\"emptycontent\">\n\t\t<IconMail :size=\"65\" />\n\t\t<h2>{{ t('mail', 'Pending or not sent messages will show up here') }}</h2>\n\t\t<div />\n\t</div>\n</template>\n\n<script>\nimport IconMail from 'vue-material-design-icons/Email'\n\nexport default {\n\tname: 'OutboxMessageContent',\n\tcomponents: {\n\t\tIconMail,\n\t},\n}\n</script>\n\n<style scoped>\n\n</style>\n","import { render, staticRenderFns } from \"./OutboxMessageContent.vue?vue&type=template&id=2feedee5&scoped=true&\"\nimport script from \"./OutboxMessageContent.vue?vue&type=script&lang=js&\"\nexport * from \"./OutboxMessageContent.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2feedee5\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"emptycontent\"}},[_c('IconMail',{attrs:{\"size\":65}}),_vm._v(\" \"),_c('h2',[_vm._v(_vm._s(_vm.t('mail', 'Pending or not sent messages will show up here')))]),_vm._v(\" \"),_c('div')],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * @copyright Copyright (c) 2022 Richard Steinmetz <richard@steinmetz.cloud>\n *\n * @author Richard Steinmetz <richard@steinmetz.cloud>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nexport default {\n\tcomputed: {\n\t\trecipients() {\n\t\t\tconst to = this.message.to ?? []\n\t\t\tconst cc = this.message.cc ?? []\n\t\t\treturn [...to, ...cc]\n\t\t},\n\t\tavatarDisplayName() {\n\t\t\treturn this.recipients[0]?.label ?? this.recipients[0]?.email ?? '?'\n\t\t},\n\t\tavatarEmail() {\n\t\t\treturn this.recipients[0]?.email ?? ''\n\t\t},\n\t},\n}\n","<!--\n  - @copyright Copyright (c) 2022 Richard Steinmetz <richard@steinmetz.cloud>\n  -\n  - @author Richard Steinmetz <richard@steinmetz.cloud>\n  -\n  - @license AGPL-3.0-or-later\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n  -->\n\n<template>\n\t<ListItem\n\t\tclass=\"outbox-message\"\n\t\t:class=\"{ selected }\"\n\t\t:title=\"title\"\n\t\t:details=\"details\"\n\t\t@click=\"openModal\">\n\t\t<template #icon>\n\t\t\t<Avatar :display-name=\"avatarDisplayName\" :email=\"avatarEmail\" />\n\t\t</template>\n\t\t<template #subtitle>\n\t\t\t{{ subjectForSubtitle }}\n\t\t</template>\n\t\t<template slot=\"actions\">\n\t\t\t<ActionButton\n\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t@click=\"sendMessageNow\">\n\t\t\t\t{{ t('mail', 'Send now') }}\n\t\t\t\t<template #icon>\n\t\t\t\t\t<Send\n\t\t\t\t\t\t:title=\"t('mail', 'Send now')\"\n\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t</template>\n\t\t\t</ActionButton>\n\t\t\t<ActionButton\n\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t@click=\"deleteMessage\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<IconDelete :size=\"20\" />\n\t\t\t\t</template>\n\t\t\t\t{{ t('mail', 'Delete') }}\n\t\t\t</ActionButton>\n\t\t</template>\n\t</ListItem>\n</template>\n\n<script>\nimport { NcListItem as ListItem, NcActionButton as ActionButton } from '@nextcloud/vue'\nimport Avatar from './Avatar'\nimport IconDelete from 'vue-material-design-icons/Delete'\nimport { getLanguage, translate as t } from '@nextcloud/l10n'\nimport OutboxAvatarMixin from '../mixins/OutboxAvatarMixin'\nimport moment from '@nextcloud/moment'\nimport logger from '../logger'\nimport { showError, showSuccess } from '@nextcloud/dialogs'\nimport { matchError } from '../errors/match'\nimport { html, plain } from '../util/text'\nimport Send from 'vue-material-design-icons/Send'\nimport { UNDO_DELAY } from '../store/constants'\n\nexport default {\n\tname: 'OutboxMessageListItem',\n\tcomponents: {\n\t\tListItem,\n\t\tAvatar,\n\t\tActionButton,\n\t\tIconDelete,\n\t\tSend,\n\t},\n\tmixins: [\n\t\tOutboxAvatarMixin,\n\t],\n\tprops: {\n\t\tmessage: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tselected() {\n\t\t\treturn this.$route.params.messageId === this.message.id\n\t\t},\n\t\ttitle() {\n\t\t\tconst recipientToString = recipient => recipient.label\n\t\t\tconst recipients = this.message.to.map(recipientToString)\n\t\t\t\t.concat(this.message.cc.map(recipientToString))\n\t\t\t\t.concat(this.message.bcc.map(recipientToString))\n\t\t\tconst formatter = new Intl.ListFormat(getLanguage(), { type: 'conjunction' })\n\t\t\treturn formatter.format(recipients)\n\t\t},\n\t\tdetails() {\n\t\t\tif (this.message.failed) {\n\t\t\t\treturn this.t('mail', 'Message could not be sent')\n\t\t\t}\n\t\t\tif (!this.message.sendAt) {\n\t\t\t\treturn ''\n\t\t\t}\n\t\t\treturn moment.unix(this.message.sendAt).fromNow()\n\t\t},\n\t\t/**\n\t\t * Subject of message or \"No Subject\".\n\t\t *\n\t\t * @return {string}\n\t\t */\n\t\tsubjectForSubtitle() {\n\t\t\t// We have to use || here (instead of ??) because the subject might be '', null\n\t\t\t// or undefined.\n\t\t\treturn this.message.subject || this.t('mail', 'No subject')\n\t\t},\n\t},\n\tmethods: {\n\t\tasync deleteMessage() {\n\t\t\ttry {\n\t\t\t\tawait this.$store.dispatch('outbox/deleteMessage', {\n\t\t\t\t\tid: this.message.id,\n\t\t\t\t})\n\t\t\t\tshowSuccess(t('mail', 'Message deleted'))\n\t\t\t} catch (error) {\n\t\t\t\tshowError(await matchError(error, {\n\t\t\t\t\tdefault(error) {\n\t\t\t\t\t\tlogger.error('could not delete message', error)\n\t\t\t\t\t\treturn t('mail', 'Could not delete message')\n\t\t\t\t\t},\n\t\t\t\t}))\n\t\t\t}\n\t\t},\n\t\tasync sendMessageNow() {\n\t\t\tconst message = {\n\t\t\t\t...this.message,\n\t\t\t\tfailed: false,\n\t\t\t\tsendAt: (new Date().getTime() + UNDO_DELAY) / 1000,\n\t\t\t}\n\t\t\tawait this.$store.dispatch('outbox/updateMessage', { message, id: message.id })\n\t\t\tawait this.$store.dispatch('outbox/sendMessageWithUndo', { id: message.id })\n\t\t},\n\t\tasync openModal() {\n\t\t\tawait this.$store.dispatch('showMessageComposer', {\n\t\t\t\ttype: 'outbox',\n\t\t\t\tdata: {\n\t\t\t\t\t...this.message,\n\t\t\t\t\tbody: this.message.isHtml ? html(this.message.body) : plain(this.message.body),\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.outbox-message {\n\tlist-style: none;\n\t&.active {\n\t\tbackground-color: var(--color-background-dark);\n\t\tborder-radius: 16px;\n\t}\n\n\t.account-color {\n\t\tposition: absolute;\n\t\tleft: 0;\n\t\twidth: 2px;\n\t\theight: 69px;\n\t\tz-index: 1;\n\t}\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OutboxMessageListItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OutboxMessageListItem.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OutboxMessageListItem.vue?vue&type=style&index=0&id=544e29da&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OutboxMessageListItem.vue?vue&type=style&index=0&id=544e29da&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./OutboxMessageListItem.vue?vue&type=template&id=544e29da&scoped=true&\"\nimport script from \"./OutboxMessageListItem.vue?vue&type=script&lang=js&\"\nexport * from \"./OutboxMessageListItem.vue?vue&type=script&lang=js&\"\nimport style0 from \"./OutboxMessageListItem.vue?vue&type=style&index=0&id=544e29da&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"544e29da\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('ListItem',{staticClass:\"outbox-message\",class:{ selected: _vm.selected },attrs:{\"title\":_vm.title,\"details\":_vm.details},on:{\"click\":_vm.openModal},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('Avatar',{attrs:{\"display-name\":_vm.avatarDisplayName,\"email\":_vm.avatarEmail}})]},proxy:true},{key:\"subtitle\",fn:function(){return [_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.subjectForSubtitle)+\"\\n\\t\")]},proxy:true}])},[_vm._v(\" \"),_vm._v(\" \"),_c('template',{slot:\"actions\"},[_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":_vm.sendMessageNow},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('Send',{attrs:{\"title\":_vm.t('mail', 'Send now'),\"size\":20}})]},proxy:true}])},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Send now'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('ActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":_vm.deleteMessage},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('IconDelete',{attrs:{\"size\":20}})]},proxy:true}])},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('mail', 'Delete'))+\"\\n\\t\\t\")])],1)],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n  - @copyright Copyright (c) 2022 Richard Steinmetz <richard@steinmetz.cloud>\n  -\n  - @author Richard Steinmetz <richard@steinmetz.cloud>\n  -\n  - @license AGPL-3.0-or-later\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n  -->\n\n<template>\n\t<AppContent\n\t\tpane-config-key=\"mail\"\n\t\t:show-details=\"isMessageShown\"\n\t\t@update:showDetails=\"hideMessage\">\n\t\t<OutboxMessageContent />\n\t\t<div slot=\"list\" class=\"header__button\">\n\t\t\t<NewMessageButtonHeader />\n\n\t\t\t<!-- List -->\n\t\t\t<AppContentList>\n\t\t\t\t<Error\n\t\t\t\t\tv-if=\"error\"\n\t\t\t\t\t:error=\"t('mail', 'Could not open outbox')\"\n\t\t\t\t\tmessage=\"\"\n\t\t\t\t\trole=\"alert\" />\n\t\t\t\t<Loading\n\t\t\t\t\tv-else-if=\"loading\"\n\t\t\t\t\t:hint=\"t('mail', 'Loading messages …')\" />\n\t\t\t\t<EmptyMailbox v-else-if=\"messages.length === 0\" />\n\t\t\t\t<OutboxMessageListItem\n\t\t\t\t\tv-for=\"message in messages\"\n\t\t\t\t\tv-else\n\t\t\t\t\t:key=\"message.id\"\n\t\t\t\t\t:message=\"message\" />\n\t\t\t</AppContentList>\n\t\t</div>\n\t</AppContent>\n</template>\n\n<script>\nimport { NcAppContent as AppContent, NcAppContentList as AppContentList } from '@nextcloud/vue'\nimport Loading from './Loading'\nimport Error from './Error'\nimport EmptyMailbox from './EmptyMailbox'\nimport OutboxMessageContent from './OutboxMessageContent'\nimport OutboxMessageListItem from './OutboxMessageListItem'\nimport NewMessageButtonHeader from './NewMessageButtonHeader'\nimport logger from '../logger'\n\nexport default {\n\tname: 'Outbox',\n\tcomponents: {\n\t\tAppContent,\n\t\tAppContentList,\n\t\tError,\n\t\tLoading,\n\t\tEmptyMailbox,\n\t\tOutboxMessageListItem,\n\t\tOutboxMessageContent,\n\t\tNewMessageButtonHeader,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\terror: false,\n\t\t\tloading: false,\n\t\t\trefreshInterval: undefined,\n\t\t}\n\t},\n\tcomputed: {\n\t\tisMessageShown() {\n\t\t\treturn !!this.$route.params.messageId\n\t\t},\n\t\tcurrentMessage() {\n\t\t\tif (!this.isMessageShown) {\n\t\t\t\treturn null\n\t\t\t}\n\n\t\t\treturn this.$store.getters['outbox/getMessage'](this.$route.params.messageId)\n\t\t},\n\t\tmessages() {\n\t\t\treturn this.$store.getters['outbox/getAllMessages']\n\t\t},\n\t},\n\tcreated() {\n\t\t// Reload outbox contents every 60 seconds\n\t\tthis.refreshInterval = setInterval(async () => {\n\t\t\tawait this.fetchMessages()\n\t\t}, 60000)\n\t},\n\tasync mounted() {\n\t\tawait this.fetchMessages()\n\t},\n\tdestroyed() {\n\t\tclearInterval(this.refreshInterval)\n\t},\n\tmethods: {\n\t\thideMessage() {\n\t\t\tthis.$router.push({\n\t\t\t\tname: 'outbox',\n\t\t\t})\n\t\t},\n\t\tasync fetchMessages() {\n\t\t\tthis.loading = true\n\t\t\tthis.error = false\n\n\t\t\ttry {\n\t\t\t\tawait this.$store.dispatch('outbox/fetchMessages')\n\t\t\t} catch (error) {\n\t\t\t\tthis.error = true\n\t\t\t\tlogger.error('Failed to fetch outbox messages', { error })\n\t\t\t}\n\n\t\t\tthis.loading = false\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.header__button {\n\tdisplay: flex;\n\tflex: 1px 0 0;\n\tflex-direction: column;\n\theight: calc(100vh - var(--header-height));\n\n}\n::v-deep .button-vue--vue-secondary {\n\tbox-shadow: none;\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Outbox.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Outbox.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Outbox.vue?vue&type=style&index=0&id=513c427a&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Outbox.vue?vue&type=style&index=0&id=513c427a&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./Outbox.vue?vue&type=template&id=513c427a&scoped=true&\"\nimport script from \"./Outbox.vue?vue&type=script&lang=js&\"\nexport * from \"./Outbox.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Outbox.vue?vue&type=style&index=0&id=513c427a&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"513c427a\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('AppContent',{attrs:{\"pane-config-key\":\"mail\",\"show-details\":_vm.isMessageShown},on:{\"update:showDetails\":_vm.hideMessage}},[_c('OutboxMessageContent'),_vm._v(\" \"),_c('div',{staticClass:\"header__button\",attrs:{\"slot\":\"list\"},slot:\"list\"},[_c('NewMessageButtonHeader'),_vm._v(\" \"),_c('AppContentList',[(_vm.error)?_c('Error',{attrs:{\"error\":_vm.t('mail', 'Could not open outbox'),\"message\":\"\",\"role\":\"alert\"}}):(_vm.loading)?_c('Loading',{attrs:{\"hint\":_vm.t('mail', 'Loading messages …')}}):(_vm.messages.length === 0)?_c('EmptyMailbox'):_vm._l((_vm.messages),function(message){return _c('OutboxMessageListItem',{key:message.id,attrs:{\"message\":message}})})],2)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<Content app-name=\"mail\">\n\t\t<Navigation />\n\t\t<Outbox v-if=\"$route.name === 'outbox'\" />\n\t\t<MailboxThread v-else-if=\"activeAccount\"\n\t\t\t:account=\"activeAccount\"\n\t\t\t:mailbox=\"activeMailbox\" />\n\t\t<NewMessageModal\n\t\t\tv-if=\"$store.getters.showMessageComposer\"\n\t\t\t@close=\"onCloseModal\" />\n\t</Content>\n</template>\n\n<script>\nimport { NcContent as Content } from '@nextcloud/vue'\nimport isMobile from '@nextcloud/vue/dist/Mixins/isMobile'\n\nimport '../../css/mail.scss'\nimport '../../css/mobile.scss'\n\nimport logger from '../logger'\nimport MailboxThread from '../components/MailboxThread'\nimport NewMessageModal from '../components/NewMessageModal'\nimport Navigation from '../components/Navigation'\nimport Outbox from '../components/Outbox'\n\nexport default {\n\tname: 'Home',\n\tcomponents: {\n\t\tContent,\n\t\tMailboxThread,\n\t\tNavigation,\n\t\tNewMessageModal,\n\t\tOutbox,\n\t},\n\tmixins: [isMobile],\n\tcomputed: {\n\t\tactiveAccount() {\n\t\t\treturn this.$store.getters.getAccount(this.activeMailbox?.accountId)\n\t\t},\n\t\tactiveMailbox() {\n\t\t\treturn this.$store.getters.getMailbox(this.$route.params.mailboxId)\n\t\t},\n\t\tmenu() {\n\t\t\treturn this.buildMenu()\n\t\t},\n\t},\n\tcreated() {\n\t\tconst accounts = this.$store.getters.accounts\n\t\tlet startMailboxId = this.$store.getters.getPreference('start-mailbox-id')\n\t\tif (startMailboxId && !this.$store.getters.getMailbox(startMailboxId)) {\n\t\t\t// The start ID is set but the mailbox doesn't exist anymore\n\t\t\tstartMailboxId = null\n\t\t}\n\n\t\tif (this.$route.name === 'home' && accounts.length > 1 && startMailboxId) {\n\t\t\tlogger.debug('Loading start mailbox', { id: startMailboxId })\n\t\t\tthis.$router.replace({\n\t\t\t\tname: 'mailbox',\n\t\t\t\tparams: {\n\t\t\t\t\tmailboxId: startMailboxId,\n\t\t\t\t},\n\t\t\t})\n\t\t} else if (this.$route.name === 'home' && accounts.length > 1) {\n\t\t\t// Show first account\n\t\t\tconst firstAccount = accounts[0]\n\t\t\t// FIXME: this assumes that there's at least one mailbox\n\t\t\tconst firstMailbox = this.$store.getters.getMailboxes(firstAccount.id)[0]\n\n\t\t\tconsole.debug('loading first mailbox of first account', firstAccount.id, firstMailbox.databaseId)\n\n\t\t\tthis.$router.replace({\n\t\t\t\tname: 'mailbox',\n\t\t\t\tparams: {\n\t\t\t\t\tmailboxId: firstMailbox.databaseId,\n\t\t\t\t},\n\t\t\t})\n\t\t} else if (this.$route.name === 'home' && accounts.length === 1) {\n\t\t\tlogger.debug('the only account we have is the unified one -> show the setup page')\n\t\t\tthis.$router.replace({\n\t\t\t\tname: 'setup',\n\t\t\t})\n\t\t} else if (this.$route.name === 'mailto') {\n\t\t\tif (accounts.length === 0) {\n\t\t\t\tconsole.error('cannot handle mailto:, no accounts configured')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t// Show first account\n\t\t\tconst firstAccount = accounts[0]\n\t\t\t// FIXME: this assumes that there's at least one mailbox\n\t\t\tconst firstMailbox = this.$store.getters.getMailboxes(firstAccount.id)[0]\n\n\t\t\tconsole.debug('loading composer with first account and mailbox', firstAccount.id, firstMailbox.id)\n\n\t\t\tthis.$router.replace({\n\t\t\t\tname: 'message',\n\t\t\t\tparams: {\n\t\t\t\t\tmailboxId: firstMailbox.databaseId,\n\t\t\t\t\tthreadId: 'mailto',\n\t\t\t\t},\n\t\t\t\tquery: {\n\t\t\t\t\tto: this.$route.query.to,\n\t\t\t\t\tcc: this.$route.query.cc,\n\t\t\t\t\tbcc: this.$route.query.bcc,\n\t\t\t\t\tsubject: this.$route.query.subject,\n\t\t\t\t\tbody: this.$route.query.body,\n\t\t\t\t},\n\t\t\t})\n\t\t}\n\t},\n\tmethods: {\n\t\thideMessage() {\n\t\t\tthis.$router.replace({\n\t\t\t\tname: 'mailbox',\n\t\t\t\tparams: {\n\t\t\t\t\tmailboxId: this.$route.params.mailboxId,\n\t\t\t\t\tfilter: this.$route.params?.filter,\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t\tasync onCloseModal(opts) {\n\t\t\tawait this.$store.dispatch('closeMessageComposer', opts ?? {})\n\t\t},\n\t},\n}\n\n</script>\n\n<style lang=\"scss\" scoped>\n::v-deep .app-content-details {\n\tmargin: 0 auto;\n\tmax-width: 900px;\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex: 1 1 100%;\n\tmin-width: 70%;\n}\n// Align the appNavigation toggle with the apps header toolbar\n::v-deep button.app-navigation-toggle {\n\ttop: 8px;\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&id=dd1c47e0&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&id=dd1c47e0&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=dd1c47e0&scoped=true&\"\nimport script from \"./Home.vue?vue&type=script&lang=js&\"\nexport * from \"./Home.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Home.vue?vue&type=style&index=0&id=dd1c47e0&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"dd1c47e0\",\n  null\n  \n)\n\nexport default component.exports"],"names":["___CSS_LOADER_EXPORT___","push","module","id","exports","options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","name","props","type","required","_vm","this","_c","_self","attrs","staticClass","_v","_s","i","components","Button","IconAdd","IconRefresh","data","refreshing","computed","currentMailbox","methods","refreshMailbox","logger","mailboxId","error","onNewMessage","$store","getters","showMessageComposer","on","scopedSlots","_u","key","fn","proxy","t","_e","ctx","getScrollTop","element","window","Math","max","pageYOffset","document","documentElement","scrollTop","getComputedStyle","defaultView","getElementTop","getBoundingClientRect","top","isAttached","currentNode","parentNode","tagName","nodeType","doBind","binded","delay","now","lastExec","timer","context","args","execute","directive","el","throttleDelayExpr","getAttribute","throttleDelay","Number","vm","isNaN","scrollEventTarget","overflowY","getScrollEventTarget","scrollListener","doCheck","bind","apply","arguments","Date","clearTimeout","diff","setTimeout","addEventListener","$on","removeEventListener","disabledExpr","disabled","$watch","value","immediateCheck","call","Boolean","distanceExpr","distance","immediateCheckExpr","eventName","force","viewportScrollTop","viewportBottom","clientHeight","getVisibleHeight","scrollHeight","offsetHeight","expression","binding","vnode","console","info","$nextTick","bindTryCount","tryBind","unbind","IconMail","fetchAvatarUrlMemoized","memoize","email","Promise","resolve","undefined","url","generateUrl","Axios","then","resp","avatar","isExternal","catch","err","response","status","reject","BaseAvatar","displayName","disableTooltip","default","size","loading","avatarUrl","hasAvatar","mounted","DraggableEnvelope","componentInstance","registerListeners","setInitialAttributes","setAttribute","classList","add","instance","onDragStart","onDragEnd","event","accountId","selectedEnvelopes","dataTransfer","clearData","effectAllowed","envelopes","length","forEach","envelope","index","envelopeId","databaseId","draggableLabel","subject","from","label","setData","JSON","stringify","attachGhost","dragEventBus","itemCount","baseClass","dragNode","createElement","counterNode","textCountNode","createTextNode","appendChild","labelWrapperNode","labelNode","textLabelNode","body","setDragImage","defer","removeChild","instances","DraggableEnvelopeDirective","componentUpdated","update","filter","shortRelativeDatetime","curry","ref","date","momentDate","moment","getFullYear","getMonth","getDate","format","getTime","shortDatetime","MailboxPicker","account","moveThread","moving","destMailboxId","onClose","onMove","$event","title","fillColor","_g","_b","class","listeners","hiddenTags","forwarded","hasattachment","has_cal","hasnoattachment","loadremoteimages","randomColor","randomHexColor","Modal","Actions","ActionText","ActionInput","ActionButton","IconRename","IconTag","IconLoading","isAdded","editing","tagLabel","tagInput","showSaving","renameTagLabel","renameTagInput","color","tags","isSet","imapLabel","addTag","removeTag","addTagInput","createTag","showError","convertHex","opacity","openEditTag","renameTag","tag","showInfo","_l","style","getClient","service","axios","webdav","patch","generateRemoteUrl","getCurrentUser","uid","uidToHexColor","uidToColor","convert","r","g","b","hash","toLowerCase","match","md5","replace","steps","red","Color","yellow","blue","palette1","mixPalette","palette2","palette3","concat","GenColors","maximum","finalInt","result","parseInt","charAt","j","hashToInt","color1","color2","palette","step","ends","Array","stepCalc","canWrite","properties","acls","acl","ace","isArray","grant","privilege","write","getCalendarData","calendar","displayname","order","vevent","writable","filename","getUserCalendars","getDirectoryContents","details","map","getRandomString","str","random","toString","substring","importCalendarEvent","Logger","promises","file","timezones","allObjects","jCal","ical","getAllSubcomponents","vtimezone","componentNames","componentName","vobjects","vobject","getFirstPropertyValue","split","objectsId","objects","component","root","updatePropertyWithValue","OC","theme","objectId","addSubcomponent","splitCalendar","componentId","headers","all","displayIcon","backgroundColor","CalendarPickerOption","DatetimePicker","Multiselect","calendars","eventTitle","startDate","endDate","isAllDay","startTimezoneId","endTimezoneId","saving","selectedCalendar","dateFormat","datePickerType","created","onSave","startTimezone","endTimezone","timezoneManager","getTimezoneManager","startDateTime","DateTimeValue","getInTimezone","endDateTime","createEvent","vObject","showSuccess","directives","rawName","domProps","target","composing","model","callback","$$v","_i","$$a","$$el","$$c","checked","$$i","slice","option","_t","AlertOctagonIcon","Avatar","IconCreateEvent","CheckIcon","ChevronLeft","DeleteIcon","DotsHorizontalIcon","EnvelopePrimaryActions","EventModal","ListItem","ImportantIcon","JunkIcon","MoveModal","OpenInNewIcon","PlusIcon","TagIcon","TagModal","Star","StarOutline","EmailRead","EmailUnread","IconAttachment","IconBullet","Reply","ActionLink","DownloadIcon","draggableEnvelope","withReply","mailbox","selectMode","selected","hasMultipleAccounts","importantSvg","showMoveModal","showEventModal","showTagModal","moreActionsOpen","hasMultipleRecipients","draft","link","params","threadId","exact","addresses","avatarEmail","showFavoriteIconVariant","showImportantIconVariant","isImportant","getEnvelopeTags","some","subjectForSubtitle","exportMessageLink","setSelected","formatted","unselect","toggleSelected","onClick","draftId","templateMessageId","onSelectMultiple","onToggleImportant","onToggleFlagged","onToggleSeen","onToggleJunk","onDelete","matchError","NoTrashMailboxConfiguredError","onOpenEditAsNew","onOpenMoveModal","onOpenEventModal","onCloseMoveModal","onOpenTagModal","onCloseTagModal","seen","flags","flagged","preventDefault","$junk","ctrlKey","shiftKey","altKey","metaKey","answered","hasAttachments","previewText","Envelope","IconDelete","IconFavorite","IconSelect","ShareIcon","searchQuery","loadingMore","loadMoreButton","selection","lastToggledIndex","areAllSelectedRead","isAtLeastOneSelectedImportant","env","isAtLeastOneSelectedUnimportant","areAllSelectedFavorite","watch","newVal","oldVal","differenceWith","beforeDestroy","isEnvelopeSelected","idx","markSelectedSeenOrUnseen","markSelectionImportant","markSelectionUnimportant","favoriteOrUnfavoriteAll","favFlag","deleteAllSelected","isAllSelected","selectedEnvelope","lastSelectedEnvelope","lastIndex","nextEnvelopeToNavigate","query","quantity","setEnvelopeSelected","onEnvelopeSelectToggle","onEnvelopeSelectMultiple","unselectAll","forwardSelectedAsAttachment","forwardedMessages","n","number","isUnified","includes","$emit","message","reportUrl","endsWith","template","IssueTemplateBuilder","addEmptyStepsToReproduce","addExpectedActualBehaviour","addLogs","text","trace","reduce","acc","entry","function","line","stack","flattenError","render","encodeURIComponent","debug","hint","slowHint","slow","slowTimer","EmptyMailboxSection","EmptyMailbox","EnvelopeList","Error","Loading","mixins","bus","paginate","initialPageSize","openFirst","isPriorityInbox","loadingEnvelopes","loadingCacheInitialization","loadMailboxInterval","expanded","endReached","envelopesToShow","hasMessages","showLoadMore","$route","to","destroyed","initializeCache","loadEnvelopes","limit","first","MailboxLockedError","wait","MailboxNotCachedError","loadMore","handleShortcut","e","currentId","srcKey","next","sync","init","onScroll","loadMailbox","stopInterval","clearInterval","AppContentDetails","smileys","term","new","existing","select","ButtonVue","UserBubble","Popover","IconReply","IconUser","IconClose","IconClipboard","IconDetails","IconCheck","loadingContacts","contactsWithEmail","autoCompleteContacts","selectedContact","newContactName","ContactSelectionStateEnum","isContactPopoverOpen","avatarUrlAbsolute","selectableContacts","contactsWithEmailComputed","additional","addButtonDisabled","onClickCopyToClipboard","onClickReply","onClickOpenContactDialog","mail","findMatches","onClickAddToContact","mailAddr","newContact","contactName","addToContact","onAutocomplete","debouncedSearch","slot","isPgpgMessage","startsWith","handler","cals","onImport","itineraryDateTime","dt","addIcalTimeProperty","icalEvent","itineraryDt","icalPropertyName","prop","CalendarImport","messageId","time","location","canImport","getEndDateTime","handleImport","cal","AirplaneIcon","ArrowIcon","departureTime","departureDate","arrivalTime","arrivalDate","flightNumber","reservation","flightNr","depAirport","arrAirport","reservationFor","departureAirport","iataCode","arrivalAirport","TrainIcon","trainNumber","trainNr","depStation","arrStation","departureStation","arrivalStation","EventReservation","FlightReservation","TrainReservation","entries","getUserCalendarsOnce","saveAttachmentToFiles","attachmentId","directory","targetPath","PopoverMenu","IconSave","IconDownload","fileName","mime","mimeUrl","isImage","isCalendarEvent","canPreview","savingToCloud","loadingCalendars","showCalendarPopover","calendarMenuEntries","action","boundariesElement","humanReadable","saveToCloud","setMultiSelect","addMimeTypeFilter","setModal","setType","allowDirectories","build","pick","saveAttachment","download","loadCalendars","closeCalendarPopover","importCalendar","res","downloadAttachment","stopPropagation","open","MessageAttachment","Download","CloudDownload","ChevronDown","ChevronUp","attachments","visible","showPreview","attachmentImageURL","hasNextLine","isToggled","fileInfos","source","basename","etag","hasPreview","fileid","previewableFileInfos","fileInfo","OCA","moreThanOne","zipUrl","prevTop","saveAll","saveAttachments","downloadZip","showViewer","list","mailvelope","attachment","refInFor","downloadUrl","count","getMailvelope","hasMdnRequest","mdnSent","sendMdn","flag","MdnRequest","senderAddress","IconImage","IconDomain","fullHeight","hasBlockedContent","isSenderTrusted","sender","domain","beforeMount","scout","iframeResizer","log","heightCalculationMethod","getIframeDoc","onMessageFrameLoad","iframeDoc","onBeforePrint","displayIframe","node","querySelectorAll","onShowBlockedContent","trustSender","onShowBlockedContentForDomain","staticStyle","hidden","scroll","signature","enhancedBody","signatureSummaryAndBody","summary","signatureSummary","nl2br","removeMailtoPrefix","uri","substr","isSameDay","a","getTimezoneFromDate","AccountMultipleIcon","CalendarIcon","MapMarkerIcon","end","attendees","isOrganizer","randomId","findAttendee","vEvent","f","EventData","CloseIcon","scheduling","NEEDS_ACTION","ACCEPTED","TENTATIVE","DECLINED","commentFieldId","targetCalendarPickerId","showMoreOptions","existingEvent","existingEventFetched","targetCalendar","comment","mapGetters","currentUserPrincipalEmail","clonedCalendars","method","isRequest","isReply","isCancel","isExistingEvent","wasProcessed","attachedVCalendar","parser","attachedVEvent","existingVCalendar","existingVEvent","eventIsInFuture","userIsAttendee","existingParticipationStatus","replyStatusMessage","attendeeName","calendarsForPicker","dav","immediate","accept","acceptTentatively","decline","saveEventWithParticipationStatus","vCalendar","attendee","fetchExistingEvent","pLimit","attributes","children","flatten","results","Itinerary","MessageAttachments","MessageEncryptedBody","MessageHTMLBody","MessagePlainTextBody","Imip","htmlUrl","isEncrypted","itineraries","hasHtmlBody","CalendarBlankIcon","InformationIcon","ReplyIcon","ReplyAllIcon","isSelected","withSelect","withShowSource","rawMessage","showSourceModal","forwardMessages","threadingFile","inReplyTo","references","threadRootId","threadingFileName","onForward","reply","mode","onShowSourceModal","onCloseSourceModal","onReply","nativeOn","timestamp","MenuEnvelope","Moment","Message","String","seenTimer","route","find","showSubline","junkFavoritePosition","junkFavoritePositionWithTagSubline","fetchMessage","fetchItineraries","scrollToCurrentEnvelope","dateInt","primary","errorMessage","RecipientBubble","ThreadEnvelope","expandedThreads","participantsToDisplay","resizeDebounced","moreParticipantsString","thread","threadParticipants","threadSubject","updateParticipantsToDisplay","childrenWidth","fits","toggleExpand","resetThread","fetchThread","oldId","newId","texts","floor","participant","infiniteScroll","AppContent","AppContentList","IconInfo","Mailbox","NoMessageSelected","NewMessageButtonHeader","SectionTitle","Thread","importantInfo","shortkeys","del","prev","refresh","unseen","priorityImportantQuery","priorityOtherQuery","startMailboxTimer","unifiedAccount","unifiedInbox","hasEnvelopes","showThread","isThreadShown","beforeUnmount","deleteMessage","onShortcut","appendToSearch","hideMessage","handleMailto","cc","saveStartMailbox","currentStartMailboxId","dispatch","stringToRecipients","header__button","isMobile","modifiers","specialRole","getFileData","path","stat","shareFile","token","generateOcsUrl","shareType","shareWith","ocs","meta","Close","Cloud","uploading","progress","sizeString","finished","previewURL","getIcon","extension","imageBlobURL","percent","ComposerAttachment","uploadSizeLimit","uploads","isToggle","hasAttachmentErrors","uploadProgress","uploaded","total","onAddLocalAttachment","emitNewAttachments","totalSizeOfUpload","onLocalAttachmentSelected","Vue","existingUploads","toUpload","newTotal","fileType","controller","FormData","opts","onUploadProgress","prog","loaded","signal","append","onAddCloudAttachment","picker","getFilePickerBuilder","paths","filesFromCloud","sum","onAddCloudAttachmentLink","showAttachmentFileSizeWarning","num","showWarning","appendToBodyAtCursor","toAppend","formatBytes","bytes","changeProgress","item","generatePreview","hide","active","ListItemIcon","removeRecipient","field","recipients","quotedText","isReplyOrForward","editor","quotedMail","pull","armored","EDITING","UPLOADING","SENDING","ERROR","WARNING","FINISHED","DISCARDING","DISCARDED","MailvelopeEditor","ActionCheckbox","ActionRadio","ComposerAttachments","Delete","IconUpload","IconFolder","IconPublic","TextEditor","EmptyContent","RecipientListItem","Send","SendClock","UnfoldMoreHorizontal","UnfoldLessHorizontal","IconHtml","fromAccount","bcc","editorBody","send","inReplyToMessageId","replyTo","forwardFrom","sendAt","attachmentsData","selectedDate","showCC","showBCC","selectedAlias","autocompleteRecipients","newRecipients","subjectVal","bodyVal","noReply","draftsPromise","attachmentsPromise","canSaveDraft","savingDraft","saveDraftDebounced","state","errorText","STATES","selectTo","selectCc","selectBcc","encrypt","available","keyRing","keysMissing","editorMode","addShareLink","productName","requestMdn","changeSignature","loadingIndicatorTo","loadingIndicatorCc","loadingIndicatorBcc","isMoreActionsOpen","sendAtVal","firstDayDatetimePicker","formatter","parse","autoLimit","aliases","aliasId","selectId","emailAddress","signatureAboveQuote","allRecipients","attachmentSizeLimit","selectableRecipients","isForward","canSend","editorPlainText","submitButtonTitle","dateTomorrowMorning","today","dateTomorrowAfternoon","dateMondayMorning","customSendTime","showAmPm","isSendAtTomorrowMorning","isSendAtTomorrowAfternoon","isSendAtMondayMorning","isSendAtCustom","newAliases","onMailvelopeLoaded","forwards","setAlias","checkRecipientsKeys","keysValid","initBody","getMessageData","isHtml","saveDraft","NoDraftsMailboxConfiguredError","callSaveDraft","withDebounce","insertSignature","trigger","toHtml","onEditorInput","onEditorReady","onChangeSendLater","convertToLocalDate","month","day","hour","minute","onAliasChange","alias","loadingIndicator","onAttachmentsUploading","onNewToAddr","addr","onNewCcAddr","onNewBccAddr","onNewAddr","onSend","_","NoSentMailboxConfiguredError","ManyRecipientsError","onForceSend","reset","formatAliases","discardDraft","disabledDatetimepickerDate","minimumDate","disabledDatetimepickerTime","onRemoveRecipient","removeRecipientTo","removeRecipientCc","removeRecipientBcc","toggleViewMode","setEditorModeHtml","setEditorModeText","confirm","confirmClasses","cancel","join","isScheduledSendingDisabled","Composer","original","modalTitle","composerMessage","composerData","plain","dataForServer","getDataForServer","sendMessage","recipientToRfc822","recipient","isOutbox","convertEditorBody","restoreOriginalSendAt","avatarDisplayName","OutboxAvatarMixin","sendMessageNow","failed","openModal","OutboxMessageListItem","OutboxMessageContent","refreshInterval","isMessageShown","currentMessage","messages","fetchMessages","Content","MailboxThread","Navigation","NewMessageModal","Outbox","activeAccount","activeMailbox","menu","startMailboxId","onCloseModal"],"sourceRoot":""}